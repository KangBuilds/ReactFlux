var ic=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);import{r as b,g as Zn,e as ee,c as le,d as _r,a as Qs,M as se,u as un,j as c,B as Ce,I as sc,S as Vn,T as Qr,b as Zs,f as oc,h as lc,i as cc,D as zi,k as $t,l as Js,m as uc,n as dc,A as eo,o as to,p as hc,q as fc,s as pc,t as z,v as ut,w as lr,x as $i,F as we,y as dt,z as ro,C as Jn,E as Ae,G as Zr,H as mc,J as no,P as ao,K as vc,L as gc,N as yr,O as yc,Q as bc,R as xc,U as wc,V as Sc,W as Ec,X as Cc,Y as io,Z as Un,_ as _c,$ as jc,a0 as ai,a1 as Tc,a2 as kc,a3 as Mc,a4 as Ic,a5 as so,a6 as Ac,a7 as oo,a8 as lo,a9 as ii,aa as Oc,ab as Pc,ac as Fc,ad as Rc,ae as Nc,af as Dc,ag as Jr,ah as Lc,ai as Vc,aj as Uc,ak as ba,al as Bi,am as zc,an as $c,ao as co,ap as Bc,aq as Hc,ar as Hi,as as qc,at as uo,au as Wc,av as Gc,aw as Xc,ax as Yc,ay as Kc}from"./vendor-DIZE0KUD.js";var Hm=ic((Gm,fn)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Qc={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const qi=e=>{let t;const r=new Set,n=(u,h)=>{const p=typeof u=="function"?u(t):u;if(!Object.is(p,t)){const x=t;t=h??(typeof p!="object"||p===null)?p:Object.assign({},t,p),r.forEach(v=>v(t,x))}},a=()=>t,o={setState:n,getState:a,getInitialState:()=>d,subscribe:u=>(r.add(u),()=>r.delete(u)),destroy:()=>{(Qc?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},d=t=e(n,a,o);return o},Zc=e=>e?qi(e):qi;var ho={exports:{}},fo={},po={exports:{}},mo={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jr=b;function Jc(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var eu=typeof Object.is=="function"?Object.is:Jc,tu=jr.useState,ru=jr.useEffect,nu=jr.useLayoutEffect,au=jr.useDebugValue;function iu(e,t){var r=t(),n=tu({inst:{value:r,getSnapshot:t}}),a=n[0].inst,i=n[1];return nu(function(){a.value=r,a.getSnapshot=t,xa(a)&&i({inst:a})},[e,r,t]),ru(function(){return xa(a)&&i({inst:a}),e(function(){xa(a)&&i({inst:a})})},[e]),au(r),r}function xa(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!eu(e,r)}catch{return!0}}function su(e,t){return t()}var ou=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?su:iu;mo.useSyncExternalStore=jr.useSyncExternalStore!==void 0?jr.useSyncExternalStore:ou;po.exports=mo;var lu=po.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ea=b,cu=lu;function uu(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var du=typeof Object.is=="function"?Object.is:uu,hu=cu.useSyncExternalStore,fu=ea.useRef,pu=ea.useEffect,mu=ea.useMemo,vu=ea.useDebugValue;fo.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=fu(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=mu(function(){function o(x){if(!d){if(d=!0,u=x,x=n(x),a!==void 0&&s.hasValue){var v=s.value;if(a(v,x))return h=v}return h=x}if(v=h,du(u,x))return v;var g=n(x);return a!==void 0&&a(v,g)?v:(u=x,h=g)}var d=!1,u,h,p=r===void 0?null:r;return[function(){return o(t())},p===null?void 0:function(){return o(p())}]},[t,r,n,a]);var l=hu(e,i[0],i[1]);return pu(function(){s.hasValue=!0,s.value=l},[l]),vu(l),l};ho.exports=fo;var gu=ho.exports;const yu=Zn(gu);var vo={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:bu}=ee,{useSyncExternalStoreWithSelector:xu}=yu;let Wi=!1;const wu=e=>e;function Su(e,t=wu,r){(vo?"production":void 0)!=="production"&&r&&!Wi&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Wi=!0);const n=xu(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return bu(n),n}const Gi=e=>{(vo?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?Zc(e):e,r=(n,a)=>Su(t,n,a);return Object.assign(r,t),r},Eu=e=>e?Gi(e):Gi,Xi={articleWidth:90,fontSize:1.05,homePage:"all",layout:"large",markReadOnScroll:!1,orderBy:"created_at",orderDirection:"desc",pageSize:100,showAllFeeds:!1,showFeedIcon:!0,showStatus:"all",theme:"light",themeColor:"Blue"},ue=e=>{const t=JSON.parse(localStorage.getItem("config"))||{};return Object.hasOwn(t,e)?t[e]:Object.hasOwn(Xi,e)?Xi[e]:null},Ue=(e,t)=>{const r=JSON.parse(localStorage.getItem("config"))||{};r[e]=t,localStorage.setItem("config",JSON.stringify(r))};var go={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(le,function(){return function(r,n,a){r=r||{};var i=n.prototype,s={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function l(d,u,h,p){return i.fromToBase(d,u,h,p)}a.en.relativeTime=s,i.fromToBase=function(d,u,h,p,x){for(var v,g,S,E=h.$locale().relativeTime||s,f=r.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],w=f.length,j=0;j<w;j+=1){var k=f[j];k.d&&(v=p?a(d).diff(h,k.d,!0):h.diff(d,k.d,!0));var T=(r.rounding||Math.round)(Math.abs(v));if(S=v>0,T<=k.r||!k.r){T<=1&&j>0&&(k=f[j-1]);var A=E[k.l];x&&(T=x(""+T)),g=typeof A=="string"?A.replace("%d",T):A(T,u,k.l,S);break}}if(u)return g;var M=S?E.future:E.past;return typeof M=="function"?M(g):M.replace("%s",g)},i.to=function(d,u){return l(d,u,this,!0)},i.from=function(d,u){return l(d,u,this)};var o=function(d){return d.$u?a.utc():a()};i.toNow=function(d){return this.to(o(this),d)},i.fromNow=function(d){return this.from(o(this),d)}}})})(go);var Cu=go.exports;const _u=Zn(Cu);_r.extend(_u);const ju=e=>{const t=_r(e),r=_r();return t.isAfter(r.subtract(24,"hour"))},Tu=()=>_r().subtract(24,"hour").unix(),yo=e=>_r(e).fromNow(),zn=()=>{const e=JSON.parse(localStorage.getItem("auth"));return e||(console.log("No auth info found in localStorage"),null)},ku=(e,t)=>{const r={method:e,secret:t};localStorage.setItem("auth",JSON.stringify(r))},de=Qs.create({timeout:3e3,retry:3,retryDelay:1e3});de.interceptors.request.use(e=>{const t=zn(),{server:r,token:n,username:a,password:i}=(t==null?void 0:t.secret)||{};return e.baseURL=r,n&&(e.headers["X-Auth-Token"]=n),a&&i&&(e.auth={username:a,password:i}),e},e=>Promise.reject(e));const Mu=async e=>{const{config:t}=e;return e.code!=="ECONNABORTED"||!(t!=null&&t.retry)||(t.__retryCount=t.__retryCount||0,t.__retryCount>=t.retry)?Promise.reject(e):(t.__retryCount+=1,await new Promise(n=>{setTimeout(()=>{n()},t.retryDelay||1e3)}),de(t))},Iu=e=>{var r,n,a;const t=((n=(r=e.response)==null?void 0:r.data)==null?void 0:n.error_message)||e.message;return se.error(t),((a=e.response)==null?void 0:a.status)===401&&(localStorage.removeItem("auth"),nc.navigate("/login")),Promise.reject(e)};de.interceptors.response.use(e=>e,async e=>{try{return await Mu(e)}catch(t){return Iu(t)}});const bo=async(e,t)=>de.put("/v1/entries",{entry_ids:e,status:t}),xo=async(e,t)=>bo([e],t),Au=async e=>de.put(`/v1/entries/${e}/bookmark`),Ou=async e=>de.get(`/v1/entries/${e}/fetch-content`),Pu=async()=>de.get("/v1/me"),Fu=async()=>de.get("/v1/feeds/counters"),Ru=async()=>de.get("/v1/feeds"),Nu=async()=>de.get("/v1/categories"),Du=async e=>de.delete(`/v1/categories/${e}`),Lu=async e=>de.post("/v1/categories",{title:e}),Vu=async(e,t,r=!1)=>{const n={title:t};return r&&(n.hide_globally="on"),de.put(`/v1/categories/${e}`,n)},Uu=async(e,t,r,n,a,i=!1)=>de.put(`/v1/feeds/${e}`,{feed_url:t,title:r,category_id:n,crawler:a,hide_globally:i}),zu=async e=>de.put(`/v1/feeds/${e}/refresh`),$u=async e=>de.delete(`/v1/feeds/${e}`),Bu=async(e,t,r)=>de.post("/v1/feeds",{feed_url:e,category_id:t,crawler:r}),Mr=(e,t={})=>{const{baseUrl:r,orderField:n,direction:a,offset:i,limit:s,status:l}=e,o=new URLSearchParams({...t,order:n,direction:a,offset:i,limit:s});return l&&o.append("status",l),`${r}?${o.toString()}`},Hu=async(e=0,t=null)=>{const r=ue("orderBy"),n=ue("orderDirection"),a=ue("pageSize"),s=Mr({baseUrl:"/v1/entries",orderField:r,direction:n,offset:e,limit:a,status:t});return de.get(s)},wo=async(e=0)=>{const t=ue("orderDirection"),r=ue("pageSize"),a=Mr({baseUrl:"/v1/entries",orderField:"changed_at",direction:t,offset:e,limit:r,status:"read"});return de.get(a)},So=async(e=0,t=null)=>{const r=ue("orderDirection"),n=ue("pageSize"),s=Mr({baseUrl:"/v1/entries",orderField:"changed_at",direction:r,offset:e,limit:n,status:t},{starred:"true"});return de.get(s)},Fn=async(e=0,t=null,r=null)=>{const n=ue("orderBy"),a=ue("orderDirection"),i=r||ue("pageSize"),s=Tu(),d=Mr({baseUrl:"/v1/entries",orderField:n,direction:a,offset:e,limit:i,status:t},{published_after:s});return de.get(d)},qu=(e,t)=>t==="read"?Math.max(0,e-1):e+1,Yi=(e,t,r)=>e.map(n=>n.id===t?{...n,hide_globally:r}:n),Ki=(e,t,r)=>r?[...e,t]:e.filter(n=>n!==t),Qi=(e,t,r)=>e.map(n=>{if(n.id===t){let a;return typeof r=="string"?a=qu(n.unreadCount,r):a=r,{...n,unreadCount:a}}return n}),C=Eu((e,t)=>({feeds:[],groups:[],unreadTotal:0,unreadToday:0,starredCount:0,readCount:0,hiddenFeedIds:[],hiddenGroupIds:[],articleWidth:ue("articleWidth"),showStatus:ue("showStatus"),homePage:ue("homePage"),orderBy:ue("orderBy"),orderDirection:ue("orderDirection"),pageSize:ue("pageSize"),showAllFeeds:ue("showAllFeeds"),loading:!0,visible:{settings:!1,addFeed:!1},theme:ue("theme"),layout:ue("layout"),fontSize:ue("fontSize"),showFeedIcon:ue("showFeedIcon"),collapsed:window.innerWidth<=992,activeContent:null,isSysDarkMode:window.matchMedia("(prefers-color-scheme: dark)").matches,themeColor:ue("themeColor"),markReadOnScroll:ue("markReadOnScroll"),isInitCompleted:!1,setFeeds:r=>e({feeds:r}),setGroups:r=>e({groups:r}),setUnreadTotal:r=>e(n=>({unreadTotal:r(n.unreadTotal)})),setUnreadToday:r=>e(n=>({unreadToday:r(n.unreadToday)})),setStarredCount:r=>e(n=>({starredCount:r(n.starredCount)})),setReadCount:r=>e(n=>({readCount:r(n.readCount)})),setArticleWidth:r=>e({articleWidth:r}),setShowStatus:r=>e({showStatus:r}),setHomePage:r=>e({homePage:r}),setOrderBy:r=>e({orderBy:r}),toggleOrderDirection:()=>e(r=>({orderDirection:r.orderDirection==="desc"?"asc":"desc"})),setPageSize:r=>e({pageSize:r}),toggleShowAllFeeds:()=>e(r=>({showAllFeeds:!r.showAllFeeds})),setActiveContent:r=>{e({activeContent:r})},setIsSysDarkMode:r=>e({isSysDarkMode:r}),setThemeColor:r=>{e({themeColor:r})},setTheme:r=>{e({theme:r})},toggleMarkReadOnScroll:()=>{e(r=>({markReadOnScroll:!r.markReadOnScroll}))},initData:async()=>{e({loading:!0});const[r,n,a,i,s,l]=await Promise.all([Ru(),Nu(),wo(),So(),Fn(0,"unread"),Fu()]);if(r&&n&&a&&i&&s&&l){const o=r.data.filter(v=>v.hide_globally||v.category.hide_globally).map(v=>v.id),d=n.data.filter(v=>v.hide_globally).map(v=>v.id);e({hiddenFeedIds:o}),e({hiddenGroupIds:d});const u=l.data.unreads,h=Object.keys(u).reduce((v,g)=>t().showAllFeeds||!o.includes(Number.parseInt(g))?v+u[g]:v,0);e({unreadTotal:h});const p=r.data.map(v=>({...v,unreadCount:u[v.id]||0}));e({feeds:p.sort((v,g)=>v.title.localeCompare(g.title,"en"))});const x=n.data.map(v=>{let g=0,S=0;for(const E of p)E.category.id===v.id&&(g+=E.unreadCount,S+=1);return{...v,unreadCount:g,feedCount:S}});e({groups:x.sort((v,g)=>v.title.localeCompare(g.title,"en"))}),e({readCount:a.data.total}),e({starredCount:i.data.total}),e({unreadToday:s.data.total}),e({isInitCompleted:!0}),e({loading:!1})}},updateFeedHidden:(r,n)=>{e(a=>{let{unreadTotal:i}=a;if(!t().showAllFeeds){const s=a.feeds.find(l=>l.id===r);s&&(i+=n?-s.unreadCount:s.unreadCount,i=Math.max(0,i))}return{feeds:Yi(a.feeds,r,n),hiddenFeedIds:Ki(a.hiddenFeedIds,r,n),unreadTotal:i}})},updateGroupHidden:(r,n)=>{e(a=>{let{unreadTotal:i}=a,s=[...a.hiddenFeedIds];if(!t().showAllFeeds){const o=a.groups.find(d=>d.id===r);o&&(i+=n?-o.unreadCount:o.unreadCount,i=Math.max(0,i))}const l=a.feeds.filter(o=>o.category.id===r).map(o=>o.id);return s=n?[...s,...l]:s.filter(o=>!l.includes(o)),{groups:Yi(a.groups,r,n),hiddenGroupIds:Ki(a.hiddenGroupIds,r,n),hiddenFeedIds:s,unreadTotal:i}})},updateFeedUnreadCount:(r,n)=>{e(a=>({feeds:Qi(a.feeds,r,n)}))},updateGroupUnreadCount:(r,n)=>{e(a=>({groups:Qi(a.groups,r,n)}))},toggleLayout:()=>{const r=t().layout==="large"?"small":"large";e({layout:r})},setFontSize:r=>e({fontSize:r}),toggleShowFeedIcon:()=>e(r=>({showFeedIcon:!r.showFeedIcon})),setVisible:(r,n)=>{e(a=>({visible:{...a.visible,[r]:n}}))},toggleCollapsed:()=>e(r=>({collapsed:!r.collapsed}))}));var Eo={exports:{}},Co={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},_o={exports:{}},Wu=function(t){return!t||typeof t=="string"?!1:t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&t.constructor.name!=="String")},Gu=Wu,Xu=Array.prototype.concat,Yu=Array.prototype.slice,Zi=_o.exports=function(t){for(var r=[],n=0,a=t.length;n<a;n++){var i=t[n];Gu(i)?r=Xu.call(r,Yu.call(i)):r.push(i)}return r};Zi.wrap=function(e){return function(){return e(Zi(arguments))}};var Ku=_o.exports,Br=Co,dn=Ku,jo=Object.hasOwnProperty,To=Object.create(null);for(var wa in Br)jo.call(Br,wa)&&(To[Br[wa]]=wa);var Ke=Eo.exports={to:{},get:{}};Ke.get=function(e){var t=e.substring(0,3).toLowerCase(),r,n;switch(t){case"hsl":r=Ke.get.hsl(e),n="hsl";break;case"hwb":r=Ke.get.hwb(e),n="hwb";break;default:r=Ke.get.rgb(e),n="rgb";break}return r?{model:n,value:r}:null};Ke.get.rgb=function(e){if(!e)return null;var t=/^#([a-f0-9]{3,4})$/i,r=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,n=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,a=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,i=/^(\w+)$/,s=[0,0,0,1],l,o,d;if(l=e.match(r)){for(d=l[2],l=l[1],o=0;o<3;o++){var u=o*2;s[o]=parseInt(l.slice(u,u+2),16)}d&&(s[3]=parseInt(d,16)/255)}else if(l=e.match(t)){for(l=l[1],d=l[3],o=0;o<3;o++)s[o]=parseInt(l[o]+l[o],16);d&&(s[3]=parseInt(d+d,16)/255)}else if(l=e.match(n)){for(o=0;o<3;o++)s[o]=parseInt(l[o+1],0);l[4]&&(l[5]?s[3]=parseFloat(l[4])*.01:s[3]=parseFloat(l[4]))}else if(l=e.match(a)){for(o=0;o<3;o++)s[o]=Math.round(parseFloat(l[o+1])*2.55);l[4]&&(l[5]?s[3]=parseFloat(l[4])*.01:s[3]=parseFloat(l[4]))}else return(l=e.match(i))?l[1]==="transparent"?[0,0,0,0]:jo.call(Br,l[1])?(s=Br[l[1]],s[3]=1,s):null:null;for(o=0;o<3;o++)s[o]=qt(s[o],0,255);return s[3]=qt(s[3],0,1),s};Ke.get.hsl=function(e){if(!e)return null;var t=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=e.match(t);if(r){var n=parseFloat(r[4]),a=(parseFloat(r[1])%360+360)%360,i=qt(parseFloat(r[2]),0,100),s=qt(parseFloat(r[3]),0,100),l=qt(isNaN(n)?1:n,0,1);return[a,i,s,l]}return null};Ke.get.hwb=function(e){if(!e)return null;var t=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=e.match(t);if(r){var n=parseFloat(r[4]),a=(parseFloat(r[1])%360+360)%360,i=qt(parseFloat(r[2]),0,100),s=qt(parseFloat(r[3]),0,100),l=qt(isNaN(n)?1:n,0,1);return[a,i,s,l]}return null};Ke.to.hex=function(){var e=dn(arguments);return"#"+wn(e[0])+wn(e[1])+wn(e[2])+(e[3]<1?wn(Math.round(e[3]*255)):"")};Ke.to.rgb=function(){var e=dn(arguments);return e.length<4||e[3]===1?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"};Ke.to.rgb.percent=function(){var e=dn(arguments),t=Math.round(e[0]/255*100),r=Math.round(e[1]/255*100),n=Math.round(e[2]/255*100);return e.length<4||e[3]===1?"rgb("+t+"%, "+r+"%, "+n+"%)":"rgba("+t+"%, "+r+"%, "+n+"%, "+e[3]+")"};Ke.to.hsl=function(){var e=dn(arguments);return e.length<4||e[3]===1?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"};Ke.to.hwb=function(){var e=dn(arguments),t="";return e.length>=4&&e[3]!==1&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"};Ke.to.keyword=function(e){return To[e.slice(0,3)]};function qt(e,t,r){return Math.min(Math.max(t,e),r)}function wn(e){var t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}var Qu=Eo.exports,ko={exports:{}},or=Co,Mo={};for(var Sa in or)or.hasOwnProperty(Sa)&&(Mo[or[Sa]]=Sa);var R=ko.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var Be in R)if(R.hasOwnProperty(Be)){if(!("channels"in R[Be]))throw new Error("missing channels property: "+Be);if(!("labels"in R[Be]))throw new Error("missing channel labels property: "+Be);if(R[Be].labels.length!==R[Be].channels)throw new Error("channel and label counts mismatch: "+Be);var Zu=R[Be].channels,Ju=R[Be].labels;delete R[Be].channels,delete R[Be].labels,Object.defineProperty(R[Be],"channels",{value:Zu}),Object.defineProperty(R[Be],"labels",{value:Ju})}R.rgb.hsl=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,a=Math.min(t,r,n),i=Math.max(t,r,n),s=i-a,l,o,d;return i===a?l=0:t===i?l=(r-n)/s:r===i?l=2+(n-t)/s:n===i&&(l=4+(t-r)/s),l=Math.min(l*60,360),l<0&&(l+=360),d=(a+i)/2,i===a?o=0:d<=.5?o=s/(i+a):o=s/(2-i-a),[l,o*100,d*100]};R.rgb.hsv=function(e){var t,r,n,a,i,s=e[0]/255,l=e[1]/255,o=e[2]/255,d=Math.max(s,l,o),u=d-Math.min(s,l,o),h=function(p){return(d-p)/6/u+1/2};return u===0?a=i=0:(i=u/d,t=h(s),r=h(l),n=h(o),s===d?a=n-r:l===d?a=1/3+t-n:o===d&&(a=2/3+r-t),a<0?a+=1:a>1&&(a-=1)),[a*360,i*100,d*100]};R.rgb.hwb=function(e){var t=e[0],r=e[1],n=e[2],a=R.rgb.hsl(e)[0],i=1/255*Math.min(t,Math.min(r,n));return n=1-1/255*Math.max(t,Math.max(r,n)),[a,i*100,n*100]};R.rgb.cmyk=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,a,i,s,l;return l=Math.min(1-t,1-r,1-n),a=(1-t-l)/(1-l)||0,i=(1-r-l)/(1-l)||0,s=(1-n-l)/(1-l)||0,[a*100,i*100,s*100,l*100]};function ed(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2)}R.rgb.keyword=function(e){var t=Mo[e];if(t)return t;var r=1/0,n;for(var a in or)if(or.hasOwnProperty(a)){var i=or[a],s=ed(e,i);s<r&&(r=s,n=a)}return n};R.keyword.rgb=function(e){return or[e]};R.rgb.xyz=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;var a=t*.4124+r*.3576+n*.1805,i=t*.2126+r*.7152+n*.0722,s=t*.0193+r*.1192+n*.9505;return[a*100,i*100,s*100]};R.rgb.lab=function(e){var t=R.rgb.xyz(e),r=t[0],n=t[1],a=t[2],i,s,l;return r/=95.047,n/=100,a/=108.883,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,i=116*n-16,s=500*(r-n),l=200*(n-a),[i,s,l]};R.hsl.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100,a,i,s,l,o;if(r===0)return o=n*255,[o,o,o];n<.5?i=n*(1+r):i=n+r-n*r,a=2*n-i,l=[0,0,0];for(var d=0;d<3;d++)s=t+1/3*-(d-1),s<0&&s++,s>1&&s--,6*s<1?o=a+(i-a)*6*s:2*s<1?o=i:3*s<2?o=a+(i-a)*(2/3-s)*6:o=a,l[d]=o*255;return l};R.hsl.hsv=function(e){var t=e[0],r=e[1]/100,n=e[2]/100,a=r,i=Math.max(n,.01),s,l;return n*=2,r*=n<=1?n:2-n,a*=i<=1?i:2-i,l=(n+r)/2,s=n===0?2*a/(i+a):2*r/(n+r),[t,s*100,l*100]};R.hsv.rgb=function(e){var t=e[0]/60,r=e[1]/100,n=e[2]/100,a=Math.floor(t)%6,i=t-Math.floor(t),s=255*n*(1-r),l=255*n*(1-r*i),o=255*n*(1-r*(1-i));switch(n*=255,a){case 0:return[n,o,s];case 1:return[l,n,s];case 2:return[s,n,o];case 3:return[s,l,n];case 4:return[o,s,n];case 5:return[n,s,l]}};R.hsv.hsl=function(e){var t=e[0],r=e[1]/100,n=e[2]/100,a=Math.max(n,.01),i,s,l;return l=(2-r)*n,i=(2-r)*a,s=r*a,s/=i<=1?i:2-i,s=s||0,l/=2,[t,s*100,l*100]};R.hwb.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100,a=r+n,i,s,l,o;a>1&&(r/=a,n/=a),i=Math.floor(6*t),s=1-n,l=6*t-i,i&1&&(l=1-l),o=r+l*(s-r);var d,u,h;switch(i){default:case 6:case 0:d=s,u=o,h=r;break;case 1:d=o,u=s,h=r;break;case 2:d=r,u=s,h=o;break;case 3:d=r,u=o,h=s;break;case 4:d=o,u=r,h=s;break;case 5:d=s,u=r,h=o;break}return[d*255,u*255,h*255]};R.cmyk.rgb=function(e){var t=e[0]/100,r=e[1]/100,n=e[2]/100,a=e[3]/100,i,s,l;return i=1-Math.min(1,t*(1-a)+a),s=1-Math.min(1,r*(1-a)+a),l=1-Math.min(1,n*(1-a)+a),[i*255,s*255,l*255]};R.xyz.rgb=function(e){var t=e[0]/100,r=e[1]/100,n=e[2]/100,a,i,s;return a=t*3.2406+r*-1.5372+n*-.4986,i=t*-.9689+r*1.8758+n*.0415,s=t*.0557+r*-.204+n*1.057,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a*12.92,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*12.92,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s*12.92,a=Math.min(Math.max(0,a),1),i=Math.min(Math.max(0,i),1),s=Math.min(Math.max(0,s),1),[a*255,i*255,s*255]};R.xyz.lab=function(e){var t=e[0],r=e[1],n=e[2],a,i,s;return t/=95.047,r/=100,n/=108.883,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,a=116*r-16,i=500*(t-r),s=200*(r-n),[a,i,s]};R.lab.xyz=function(e){var t=e[0],r=e[1],n=e[2],a,i,s;i=(t+16)/116,a=r/500+i,s=i-n/200;var l=Math.pow(i,3),o=Math.pow(a,3),d=Math.pow(s,3);return i=l>.008856?l:(i-16/116)/7.787,a=o>.008856?o:(a-16/116)/7.787,s=d>.008856?d:(s-16/116)/7.787,a*=95.047,i*=100,s*=108.883,[a,i,s]};R.lab.lch=function(e){var t=e[0],r=e[1],n=e[2],a,i,s;return a=Math.atan2(n,r),i=a*360/2/Math.PI,i<0&&(i+=360),s=Math.sqrt(r*r+n*n),[t,s,i]};R.lch.lab=function(e){var t=e[0],r=e[1],n=e[2],a,i,s;return s=n/360*2*Math.PI,a=r*Math.cos(s),i=r*Math.sin(s),[t,a,i]};R.rgb.ansi16=function(e){var t=e[0],r=e[1],n=e[2],a=1 in arguments?arguments[1]:R.rgb.hsv(e)[2];if(a=Math.round(a/50),a===0)return 30;var i=30+(Math.round(n/255)<<2|Math.round(r/255)<<1|Math.round(t/255));return a===2&&(i+=60),i};R.hsv.ansi16=function(e){return R.rgb.ansi16(R.hsv.rgb(e),e[2])};R.rgb.ansi256=function(e){var t=e[0],r=e[1],n=e[2];if(t===r&&r===n)return t<8?16:t>248?231:Math.round((t-8)/247*24)+232;var a=16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5);return a};R.ansi16.rgb=function(e){var t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];var r=(~~(e>50)+1)*.5,n=(t&1)*r*255,a=(t>>1&1)*r*255,i=(t>>2&1)*r*255;return[n,a,i]};R.ansi256.rgb=function(e){if(e>=232){var t=(e-232)*10+8;return[t,t,t]}e-=16;var r,n=Math.floor(e/36)/5*255,a=Math.floor((r=e%36)/6)/5*255,i=r%6/5*255;return[n,a,i]};R.rgb.hex=function(e){var t=((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255),r=t.toString(16).toUpperCase();return"000000".substring(r.length)+r};R.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var r=t[0];t[0].length===3&&(r=r.split("").map(function(l){return l+l}).join(""));var n=parseInt(r,16),a=n>>16&255,i=n>>8&255,s=n&255;return[a,i,s]};R.rgb.hcg=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,a=Math.max(Math.max(t,r),n),i=Math.min(Math.min(t,r),n),s=a-i,l,o;return s<1?l=i/(1-s):l=0,s<=0?o=0:a===t?o=(r-n)/s%6:a===r?o=2+(n-t)/s:o=4+(t-r)/s+4,o/=6,o%=1,[o*360,s*100,l*100]};R.hsl.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=1,a=0;return r<.5?n=2*t*r:n=2*t*(1-r),n<1&&(a=(r-.5*n)/(1-n)),[e[0],n*100,a*100]};R.hsv.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=t*r,a=0;return n<1&&(a=(r-n)/(1-n)),[e[0],n*100,a*100]};R.hcg.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100;if(r===0)return[n*255,n*255,n*255];var a=[0,0,0],i=t%1*6,s=i%1,l=1-s,o=0;switch(Math.floor(i)){case 0:a[0]=1,a[1]=s,a[2]=0;break;case 1:a[0]=l,a[1]=1,a[2]=0;break;case 2:a[0]=0,a[1]=1,a[2]=s;break;case 3:a[0]=0,a[1]=l,a[2]=1;break;case 4:a[0]=s,a[1]=0,a[2]=1;break;default:a[0]=1,a[1]=0,a[2]=l}return o=(1-r)*n,[(r*a[0]+o)*255,(r*a[1]+o)*255,(r*a[2]+o)*255]};R.hcg.hsv=function(e){var t=e[1]/100,r=e[2]/100,n=t+r*(1-t),a=0;return n>0&&(a=t/n),[e[0],a*100,n*100]};R.hcg.hsl=function(e){var t=e[1]/100,r=e[2]/100,n=r*(1-t)+.5*t,a=0;return n>0&&n<.5?a=t/(2*n):n>=.5&&n<1&&(a=t/(2*(1-n))),[e[0],a*100,n*100]};R.hcg.hwb=function(e){var t=e[1]/100,r=e[2]/100,n=t+r*(1-t);return[e[0],(n-t)*100,(1-n)*100]};R.hwb.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=1-r,a=n-t,i=0;return a<1&&(i=(n-a)/(1-a)),[e[0],a*100,i*100]};R.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};R.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};R.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};R.gray.hsl=R.gray.hsv=function(e){return[0,0,e[0]]};R.gray.hwb=function(e){return[0,100,e[0]]};R.gray.cmyk=function(e){return[0,0,0,e[0]]};R.gray.lab=function(e){return[e[0],0,0]};R.gray.hex=function(e){var t=Math.round(e[0]/100*255)&255,r=(t<<16)+(t<<8)+t,n=r.toString(16).toUpperCase();return"000000".substring(n.length)+n};R.rgb.gray=function(e){var t=(e[0]+e[1]+e[2])/3;return[t/255*100]};var Io=ko.exports,$n=Io;function td(){for(var e={},t=Object.keys($n),r=t.length,n=0;n<r;n++)e[t[n]]={distance:-1,parent:null};return e}function rd(e){var t=td(),r=[e];for(t[e].distance=0;r.length;)for(var n=r.pop(),a=Object.keys($n[n]),i=a.length,s=0;s<i;s++){var l=a[s],o=t[l];o.distance===-1&&(o.distance=t[n].distance+1,o.parent=n,r.unshift(l))}return t}function nd(e,t){return function(r){return t(e(r))}}function ad(e,t){for(var r=[t[e].parent,e],n=$n[t[e].parent][e],a=t[e].parent;t[a].parent;)r.unshift(t[a].parent),n=nd($n[t[a].parent][a],n),a=t[a].parent;return n.conversion=r,n}var sd=function(e){for(var t=rd(e),r={},n=Object.keys(t),a=n.length,i=0;i<a;i++){var s=n[i],l=t[s];l.parent!==null&&(r[s]=ad(s,t))}return r},Ra=Io,od=sd,xr={},ld=Object.keys(Ra);function cd(e){var t=function(r){return r==null?r:(arguments.length>1&&(r=Array.prototype.slice.call(arguments)),e(r))};return"conversion"in e&&(t.conversion=e.conversion),t}function ud(e){var t=function(r){if(r==null)return r;arguments.length>1&&(r=Array.prototype.slice.call(arguments));var n=e(r);if(typeof n=="object")for(var a=n.length,i=0;i<a;i++)n[i]=Math.round(n[i]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}ld.forEach(function(e){xr[e]={},Object.defineProperty(xr[e],"channels",{value:Ra[e].channels}),Object.defineProperty(xr[e],"labels",{value:Ra[e].labels});var t=od(e),r=Object.keys(t);r.forEach(function(n){var a=t[n];xr[e][n]=ud(a),xr[e][n].raw=cd(a)})});var dd=xr,Ur=Qu,Ye=dd,si=[].slice,Ao=["keyword","gray","hex"],Na={};Object.keys(Ye).forEach(function(e){Na[si.call(Ye[e].labels).sort().join("")]=e});var Bn={};function Pe(e,t){if(!(this instanceof Pe))return new Pe(e,t);if(t&&t in Ao&&(t=null),t&&!(t in Ye))throw new Error("Unknown model: "+t);var r,n;if(e==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof Pe)this.model=e.model,this.color=e.color.slice(),this.valpha=e.valpha;else if(typeof e=="string"){var a=Ur.get(e);if(a===null)throw new Error("Unable to parse color from string: "+e);this.model=a.model,n=Ye[this.model].channels,this.color=a.value.slice(0,n),this.valpha=typeof a.value[n]=="number"?a.value[n]:1}else if(e.length){this.model=t||"rgb",n=Ye[this.model].channels;var i=si.call(e,0,n);this.color=Da(i,n),this.valpha=typeof e[n]=="number"?e[n]:1}else if(typeof e=="number")e&=16777215,this.model="rgb",this.color=[e>>16&255,e>>8&255,e&255],this.valpha=1;else{this.valpha=1;var s=Object.keys(e);"alpha"in e&&(s.splice(s.indexOf("alpha"),1),this.valpha=typeof e.alpha=="number"?e.alpha:0);var l=s.sort().join("");if(!(l in Na))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=Na[l];var o=Ye[this.model].labels,d=[];for(r=0;r<o.length;r++)d.push(e[o[r]]);this.color=Da(d)}if(Bn[this.model])for(n=Ye[this.model].channels,r=0;r<n;r++){var u=Bn[this.model][r];u&&(this.color[r]=u(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Pe.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(e){var t=this.model in Ur.to?this:this.rgb();t=t.round(typeof e=="number"?e:1);var r=t.valpha===1?t.color:t.color.concat(this.valpha);return Ur.to[t.model](r)},percentString:function(e){var t=this.rgb().round(typeof e=="number"?e:1),r=t.valpha===1?t.color:t.color.concat(this.valpha);return Ur.to.rgb.percent(r)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var e={},t=Ye[this.model].channels,r=Ye[this.model].labels,n=0;n<t;n++)e[r[n]]=this.color[n];return this.valpha!==1&&(e.alpha=this.valpha),e},unitArray:function(){var e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,this.valpha!==1&&e.push(this.valpha),e},unitObject:function(){var e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,this.valpha!==1&&(e.alpha=this.valpha),e},round:function(e){return e=Math.max(e||0,0),new Pe(this.color.map(fd(e)).concat(this.valpha),this.model)},alpha:function(e){return arguments.length?new Pe(this.color.concat(Math.max(0,Math.min(1,e))),this.model):this.valpha},red:be("rgb",0,ke(255)),green:be("rgb",1,ke(255)),blue:be("rgb",2,ke(255)),hue:be(["hsl","hsv","hsl","hwb","hcg"],0,function(e){return(e%360+360)%360}),saturationl:be("hsl",1,ke(100)),lightness:be("hsl",2,ke(100)),saturationv:be("hsv",1,ke(100)),value:be("hsv",2,ke(100)),chroma:be("hcg",1,ke(100)),gray:be("hcg",2,ke(100)),white:be("hwb",1,ke(100)),wblack:be("hwb",2,ke(100)),cyan:be("cmyk",0,ke(100)),magenta:be("cmyk",1,ke(100)),yellow:be("cmyk",2,ke(100)),black:be("cmyk",3,ke(100)),x:be("xyz",0,ke(100)),y:be("xyz",1,ke(100)),z:be("xyz",2,ke(100)),l:be("lab",0,ke(100)),a:be("lab",1),b:be("lab",2),keyword:function(e){return arguments.length?new Pe(e):Ye[this.model].keyword(this.color)},hex:function(e){return arguments.length?new Pe(e):Ur.to.hex(this.rgb().round().color)},rgbNumber:function(){var e=this.rgb().color;return(e[0]&255)<<16|(e[1]&255)<<8|e[2]&255},luminosity:function(){for(var e=this.rgb().color,t=[],r=0;r<e.length;r++){var n=e[r]/255;t[r]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return .2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),r=e.luminosity();return t>r?(t+.05)/(r+.05):(r+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},isDark:function(){var e=this.rgb().color,t=(e[0]*299+e[1]*587+e[2]*114)/1e3;return t<128},isLight:function(){return!this.isDark()},negate:function(){for(var e=this.rgb(),t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten:function(e){var t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken:function(e){var t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate:function(e){var t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate:function(e){var t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten:function(e){var t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken:function(e){var t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale:function(){var e=this.rgb().color,t=e[0]*.3+e[1]*.59+e[2]*.11;return Pe.rgb(t,t,t)},fade:function(e){return this.alpha(this.valpha-this.valpha*e)},opaquer:function(e){return this.alpha(this.valpha+this.valpha*e)},rotate:function(e){var t=this.hsl(),r=t.color[0];return r=(r+e)%360,r=r<0?360+r:r,t.color[0]=r,t},mix:function(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);var r=e.rgb(),n=this.rgb(),a=t===void 0?.5:t,i=2*a-1,s=r.alpha()-n.alpha(),l=((i*s===-1?i:(i+s)/(1+i*s))+1)/2,o=1-l;return Pe.rgb(l*r.red()+o*n.red(),l*r.green()+o*n.green(),l*r.blue()+o*n.blue(),r.alpha()*a+n.alpha()*(1-a))}};Object.keys(Ye).forEach(function(e){if(Ao.indexOf(e)===-1){var t=Ye[e].channels;Pe.prototype[e]=function(){if(this.model===e)return new Pe(this);if(arguments.length)return new Pe(arguments,e);var r=typeof arguments[t]=="number"?t:this.valpha;return new Pe(pd(Ye[this.model][e].raw(this.color)).concat(r),e)},Pe[e]=function(r){return typeof r=="number"&&(r=Da(si.call(arguments),t)),new Pe(r,e)}}});function hd(e,t){return Number(e.toFixed(t))}function fd(e){return function(t){return hd(t,e)}}function be(e,t,r){return e=Array.isArray(e)?e:[e],e.forEach(function(n){(Bn[n]||(Bn[n]=[]))[t]=r}),e=e[0],function(n){var a;return arguments.length?(r&&(n=r(n)),a=this[e](),a.color[t]=n,a):(a=this[e]().color[t],r&&(a=r(a)),a)}}function ke(e){return function(t){return Math.max(0,Math.min(e,t))}}function pd(e){return Array.isArray(e)?e:[e]}function Da(e,t){for(var r=0;r<t;r++)typeof e[r]!="number"&&(e[r]=0);return e}var oi=Pe,hn={};const md=oi;hn.getRgbStr=function(e){return md(e).rgb().round().color.join(",")};const vd=["hex","rgb","hsl"];function gd(e){return!e||vd.indexOf(e)<0?"hex":e}hn.getColorString=function(e,t){const r=gd(t);return r==="hex"?e[r]():e[r]().round().string()};const Ji=oi,{getColorString:yd}=hn;function bd(e,t,r){const n=Ji(e),a=n.hue(),i=n.saturationv(),s=n.value(),l=2,o=100,d=9,u=100,h=30;function p(f,w){let j;return a>=60&&a<=240?j=f?a-l*w:a+l*w:j=f?a+l*w:a-l*w,j<0?j+=360:j>=360&&(j-=360),Math.round(j)}function x(f,w){let j;return f?j=i<=d?i:i-(i-d)/5*w:j=i+(o-i)/4*w,j}function v(f,w){return f?s+(u-s)/5*w:s<=h?s:s-(s-h)/4*w}const g=t<6,S=g?6-t:t-6,E=t===6?n:Ji({h:p(g,S),s:x(g,S),v:v(g,S)});return yd(E,r)}var Oo=bd;const Sn=oi,xd=Oo,{getColorString:wd}=hn;function Sd(e,t,r){const n=Sn(xd(e,10-t+1)),a=Sn(e),i=a.hue(),s=a.saturationv(),o=Sn({h:a.hue(),s:h(6),v:a.value()}).saturationv(),d=Math.ceil((o-9)/4),u=Math.ceil((100-o)/5);function h(x){if(x<6)return o+(6-x)*u;if(x===6){if(i>=0&&i<50)return s-15;if(i>=50&&i<191)return s-20;if(i>=191&&i<=360)return s-15}return o-d*(x-6)}const p=Sn({h:n.hue(),s:h(t),v:n.value()});return wd(p,r)}var Ed=Sd;const es=Oo,ts=Ed;function Cd(e,t={}){const{dark:r,list:n,index:a=6,format:i="hex"}=t;if(n){const s=[],l=r?ts:es;for(let o=1;o<=10;o++)s.push(l(e,o,i));return s}return r?ts(e,a,i):es(e,a,i)}var _d=Cd;const jd=_d,{getRgbStr:Td}=hn;var kd=jd,Md=Td;const Po=[{name:"Red",valueLight:"#F53F3F",valueDark:"#F76965"},{name:"Orange",valueLight:"#F77234",valueDark:"#F9925A"},{name:"Green",valueLight:"#00B42A",valueDark:"#27C346"},{name:"Blue",valueLight:"#165DFF",valueDark:"#3C7EFF"},{name:"Purple",valueLight:"#722ED1",valueDark:"#8E51DA"}],La=e=>{const t=Po.find(i=>i.name===e),r=window.matchMedia("(prefers-color-scheme: dark)").matches,n=ue("theme"),a=n==="system"?r:n==="dark";return t?a?t.valueDark:t.valueLight:"#165DFF"},Fo=e=>{kd(La(e),{list:!0}).map(r=>Md(r)).forEach((r,n)=>{document.body.style.setProperty(`--primary-${n+1}`,r)})},Id=()=>{const e=un(),t=C(p=>p.setVisible),r=C(p=>p.theme),n=C(p=>p.setTheme),a=C(p=>p.toggleCollapsed),i=C(p=>p.showAllFeeds),s=C(p=>p.toggleShowAllFeeds),l=C(p=>p.feeds),o=C(p=>p.hiddenFeedIds),d=C(p=>p.setUnreadTotal),u=()=>{localStorage.clear(),document.body.removeAttribute("arco-theme"),Fo("Blue"),e("/login"),se.success("logout")};let h;switch(r){case"dark":h=c.jsx(pc,{});break;case"system":h=c.jsx(fc,{});break;default:h=c.jsx(hc,{})}return c.jsxs("div",{className:"header",children:[c.jsx("div",{className:"brand",children:c.jsx(Ce,{className:"trigger",onClick:a,shape:"circle",size:"small",children:c.jsx(sc,{})})}),c.jsx("div",{className:"button-group",children:c.jsxs(Vn,{size:16,children:[c.jsx(Qr,{content:"Add a feed",mini:!0,children:c.jsx(Ce,{shape:"circle",size:"small",type:"primary",icon:c.jsx(Zs,{}),onClick:()=>t("addFeed",!0)})}),c.jsx(Qr,{content:i?"Hide some feeds":"Show all feeds",mini:!0,children:c.jsx(Ce,{shape:"circle",size:"small",icon:i?c.jsx(oc,{}):c.jsx(lc,{}),onClick:()=>{if(s(),Ue("showAllFeeds",i),!i&&o){const p=l.filter(x=>!o.includes(x.id)).reduce((x,v)=>x+v.unreadCount,0);d(()=>p)}else d(()=>l.reduce((p,x)=>p+x.unreadCount,0))}})}),c.jsx(Ce,{shape:"circle",size:"small",icon:c.jsx(cc,{}),onClick:()=>window.open("https://github.com/electh/ReactFlux","_blank")}),c.jsx(zi,{droplist:c.jsx($t,{defaultSelectedKeys:[r],className:"theme-menu",children:["light","dark","system"].map(p=>c.jsxs($t.Item,{className:"theme-menu-item",onClick:()=>{n(p),Ue("theme",p)},children:[p.charAt(0).toUpperCase()+p.slice(1),r===p&&c.jsx(Js,{style:{marginLeft:8}})]},p))}),trigger:"hover",position:"bottom",children:c.jsx(Ce,{icon:h,shape:"circle",size:"small",onClick:()=>{switch(r){case"light":n("dark"),Ue("theme","dark");break;case"dark":n("light"),Ue("theme","light");break}}})}),c.jsx(zi,{droplist:c.jsxs($t,{children:[c.jsxs($t.Item,{onClick:()=>t("settings",!0),children:[c.jsx(uc,{className:"icon-right"}),"Settings"]},"0"),c.jsxs($t.Item,{onClick:u,children:[c.jsx(dc,{className:"icon-right"}),"Logout"]},"1")]}),trigger:"click",position:"br",children:c.jsx(eo,{size:28,style:{cursor:"pointer"},children:c.jsx(to,{})})})]})})]})},sr=(e,t)=>e.toLowerCase().includes(t.toLowerCase()),Ro=(e,t,r,n)=>n?t==="0"?r==="all"?e.filter(a=>sr(a.title,n)):e.filter(a=>sr(a.title,n)&&a.status===r):r==="all"?e.filter(a=>sr(a.content,n)):e.filter(a=>sr(a.content,n)&&a.status===r):e,Hn=(e,t,r,n)=>{const a=i=>r||!n.includes(i.feed.id);return["all","today","group"].includes(t.from)?e.filter(a):e},Ad=()=>{const e=C(u=>u.toggleLayout),t=C(u=>u.layout),r=C(u=>u.fontSize),n=C(u=>u.setFontSize),a=C(u=>u.showFeedIcon),i=C(u=>u.toggleShowFeedIcon),s=C(u=>u.themeColor),l=C(u=>u.setThemeColor),o=C(u=>u.articleWidth),d=C(u=>u.setArticleWidth);return c.jsxs(c.Fragment,{children:[c.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Theme"}),c.jsx(z.Text,{type:"secondary",children:"Customize your UI theme"}),c.jsxs("div",{className:"setting-row",children:[c.jsxs("div",{children:[c.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Accent color"}),c.jsx(z.Text,{type:"secondary",children:"Choose your accent color"})]}),c.jsx("div",{style:{display:"flex"},children:Po.map(u=>c.jsx(Qr,{content:u.name,children:c.jsx("button",{type:"button",className:"accent-color-button",style:{backgroundColor:La(u.name),outline:u.name===s?`1px solid ${La(u.name)}`:"none"},onClick:()=>{l(u.name),Ue("themeColor",u.name),Fo(u.name)},onKeyDown:h=>{(h.key==="Enter"||h.key===" ")&&l(u.name)}})},u.name))})]}),c.jsx(ut,{}),c.jsxs("div",{className:"setting-row",children:[c.jsxs("div",{children:[c.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Compact article list"}),c.jsx(z.Text,{type:"secondary",children:"Use small thumbnail in article list"})]}),c.jsx("div",{children:c.jsx(lr,{checked:t==="small",onChange:u=>{e(),Ue("layout",u?"small":"large")}})})]}),c.jsx(ut,{}),c.jsxs("div",{className:"setting-row",children:[c.jsxs("div",{children:[c.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Show feed icon"}),c.jsx(z.Text,{type:"secondary",children:"Show feed icon in feed list and article list"})]}),c.jsx("div",{children:c.jsx(lr,{checked:a,onChange:u=>{i(),Ue("showFeedIcon",u)}})})]}),c.jsx(ut,{}),c.jsxs("div",{className:"setting-row",children:[c.jsxs("div",{children:[c.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Font size"}),c.jsx(z.Text,{type:"secondary",children:"Adjust article text size"})]}),c.jsx("div",{children:c.jsxs(Vn,{children:[c.jsx(z.Text,{style:{fontSize:"0.75rem"},children:"A"}),c.jsx($i,{formatTooltip:u=>`${u}rem`,max:1.25,min:.75,showTicks:!0,step:.05,style:{width:200},value:r,onChange:u=>{n(u),Ue("fontSize",u)}}),c.jsx(z.Text,{style:{fontSize:"1.25rem"},children:"A"})]})})]}),c.jsx(ut,{}),c.jsxs("div",{className:"setting-row",children:[c.jsxs("div",{children:[c.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Article width"}),c.jsx(z.Text,{type:"secondary",children:"Adjust article width"})]}),c.jsx("div",{children:c.jsxs(Vn,{children:[c.jsx(z.Text,{children:"60%"}),c.jsx($i,{formatTooltip:u=>`${u}%`,max:90,min:60,showTicks:!0,step:10,style:{width:200},value:o,onChange:u=>{d(u),Ue("bodyWidth",u)}}),c.jsx(z.Text,{children:"90%"})]})})]})]})},ta=()=>{const[e,t]=b.useState(window.innerWidth),r=e<=768;return b.useEffect(()=>{const n=()=>t(window.innerWidth);return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),{screenWidth:e,isMobileView:r}},Ea=e=>e.slice().sort((t,r)=>t.parsing_error_count>0&&r.parsing_error_count===0?-1:t.parsing_error_count===0&&r.parsing_error_count>0?1:0),Od=()=>{const[e,t]=b.useState(!1),[r]=we.useForm(),[n,a]=b.useState({}),i=C(f=>f.feeds),s=C(f=>f.setFeeds),[l,o]=b.useState(Ea(i)),d=C(f=>f.groups),u=C(f=>f.updateFeedHidden),{isMobileView:h}=ta(),p=l.map(f=>({category:f.category,checked_at:f.checked_at,crawler:f.crawler,feed_url:f.feed_url,key:f.id,parsing_error_count:f.parsing_error_count,title:f.title,hidden:f.hide_globally}));b.useEffect(()=>{o(Ea(i))},[i]);const x=f=>{a(f),t(!0),r.setFieldsValue({crawler:f.crawler,group:f.category.id,title:f.title,url:f.feed_url,hidden:f.hidden})},v=async f=>{zu(f.key).then(()=>{se.success("Refreshed"),f.parsing_error_count=0}).catch(()=>{se.error("Failed to refresh"),f.parsing_error_count++}).finally(()=>{s(i.map(w=>w.id===f.key?{...w,parsing_error_count:f.parsing_error_count}:w))})},g=async f=>{$u(f.key).then(()=>{se.success("Unfollowed"),s(i.filter(w=>w.id!==f.key))}).catch(()=>{se.error("Failed to unfollow")})},S=[{title:"Title",dataIndex:"title",sorter:(f,w)=>f.title.localeCompare(w.title,"en"),render:(f,w)=>{const j=w.parsing_error_count,k=j?`⚠️ ${f}`:f,T=c.jsxs("div",{children:[f,j>0&&c.jsxs(c.Fragment,{children:[c.jsx("br",{}),"⚠️ Parsing error count: ",j]})]});return c.jsx(z.Ellipsis,{expandable:!1,children:c.jsx(Qr,{mini:!0,content:T,children:k})})}},!h&&{title:"Url",dataIndex:"feed_url",sorter:(f,w)=>f.feed_url.localeCompare(w.feed_url,"en"),render:f=>c.jsx(z.Ellipsis,{expandable:!1,showTooltip:!0,children:f})},{title:"Group",dataIndex:"category.title",sorter:(f,w)=>f.category.title.localeCompare(w.category.title,"en"),render:f=>c.jsx(z.Ellipsis,{expandable:!1,showTooltip:!0,children:c.jsx(Zr,{children:f})})},!h&&{title:"Checked at",dataIndex:"checked_at",sorter:(f,w)=>f.checked_at.localeCompare(w.checked_at,"en"),render:f=>c.jsx(z.Ellipsis,{expandable:!1,children:yo(f)})},{title:"Actions",dataIndex:"op",fixed:"right",width:100,render:(f,w)=>c.jsxs(Vn,{children:[c.jsx("button",{"aria-label":"Edit this feed",className:"list-item-action",onClick:()=>x(w),type:"button",children:c.jsx(mc,{})}),c.jsx("button",{"aria-label":"Refresh this feed",className:"list-item-action",onClick:()=>v(w),type:"button",children:c.jsx(no,{})}),c.jsx(ao,{position:"left",focusLock:!0,title:"Unfollow？",onOk:async()=>{await g(w)},children:c.jsx("span",{className:"list-item-action",children:c.jsx(vc,{})})})]})}].filter(Boolean),E=async(f,w,j,k,T,A)=>{Uu(f,w,j,k,T,A).then(M=>{s(i.map(F=>F.id===f?{...F,...M.data}:F)),se.success("Feed updated successfully"),t(!1),r.resetFields()}).catch(()=>{se.error("Failed to update feed")})};return c.jsxs(c.Fragment,{children:[c.jsx("div",{style:{display:"flex",justifyContent:"center"},children:c.jsx(dt.Search,{className:"search-input",placeholder:"Search feed title or url",searchButton:!0,onChange:f=>o(Ea(i).filter(w=>sr(w.title,f)||sr(w.feed_url,f)))})}),c.jsx(ro,{borderCell:!0,className:"feed-table",columns:S,data:p,pagePosition:"bottomCenter",scroll:{x:!0},size:"small"}),n&&c.jsx(Jn,{className:"edit-modal",onOk:r.submit,title:"Edit Feed",unmountOnExit:!0,visible:e,onCancel:()=>{t(!1),r.resetFields()},children:c.jsxs(we,{form:r,labelCol:{span:7},layout:"vertical",wrapperCol:{span:17},onSubmit:f=>{f.url.trim()?E(n.key,f.url,f.title,f.group,f.crawler,f.hidden).then(()=>{n.hidden!==f.hidden&&u(n.key,f.hidden)}):se.error("Feed URL cannot be empty")},children:[c.jsx(we.Item,{label:"Feed URL",field:"url",rules:[{required:!0}],children:c.jsx(dt,{placeholder:"Please input feed URL"})}),c.jsx(we.Item,{label:"Title",field:"title",rules:[{required:!0}],children:c.jsx(dt,{placeholder:"Please input feed title"})}),c.jsx(we.Item,{label:"Group",required:!0,field:"group",rules:[{required:!0}],children:c.jsx(Ae,{placeholder:"Please select",children:d.map(f=>c.jsx(Ae.Option,{value:f.id,children:f.title},f.id))})}),c.jsx(we.Item,{label:"Hidden",field:"hidden",initialValue:n.hide_globally,triggerPropName:"checked",rules:[{type:"boolean"}],children:c.jsx(lr,{})}),c.jsx(we.Item,{label:"Fetch original content",field:"crawler",tooltip:c.jsx("div",{children:"Only affects newly retrieved articles"}),style:{marginBottom:0},triggerPropName:"checked",rules:[{type:"boolean"}],children:c.jsx(lr,{})})]})})]})},Pd=()=>{const e=C(u=>u.showStatus),t=C(u=>u.setShowStatus),r=C(u=>u.homePage),n=C(u=>u.setHomePage),a=C(u=>u.orderBy),i=C(u=>u.pageSize),s=C(u=>u.setOrderBy),l=C(u=>u.setPageSize),o=C(u=>u.markReadOnScroll),d=C(u=>u.toggleMarkReadOnScroll);return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"setting-row",children:[c.jsxs("div",{children:[c.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Default show status"}),c.jsx(z.Text,{type:"secondary",children:"Which status to show by default:"})]}),c.jsx("div",{children:c.jsxs(Ae,{className:"select-style",placeholder:"Select status",value:e,onChange:u=>{t(u),Ue("showStatus",u)},children:[c.jsx(Ae.Option,{value:"all",children:"All"}),c.jsx(Ae.Option,{value:"unread",children:"Unread"})]})})]}),c.jsx(ut,{}),c.jsxs("div",{className:"setting-row",children:[c.jsxs("div",{children:[c.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Default home page"}),c.jsx(z.Text,{type:"secondary",children:"Which page to show by default:"})]}),c.jsx("div",{children:c.jsxs(Ae,{onChange:u=>{n(u),Ue("homePage",u)},placeholder:"Select page",style:{width:128,marginLeft:16},value:r,children:[c.jsx(Ae.Option,{value:"all",children:"All"}),c.jsx(Ae.Option,{value:"today",children:"Today"}),c.jsx(Ae.Option,{value:"starred",children:"Starred"}),c.jsx(Ae.Option,{value:"history",children:"History"})]})})]}),c.jsx(ut,{}),c.jsxs("div",{className:"setting-row",children:[c.jsxs("div",{children:[c.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Entries order"}),c.jsx(z.Text,{type:"secondary",children:"What order to show entries:"})]}),c.jsx("div",{children:c.jsxs(Ae,{onChange:u=>{s(u),Ue("orderBy",u)},placeholder:"Select order",style:{width:128,marginLeft:16},value:a,children:[c.jsx(Ae.Option,{value:"published_at",children:"Published at"}),c.jsx(Ae.Option,{value:"created_at",children:"Created at"})]})})]}),c.jsx(ut,{}),c.jsxs("div",{className:"setting-row",children:[c.jsxs("div",{children:[c.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Entries per page"}),c.jsx(z.Text,{type:"secondary",children:"Show how many entries per page:"})]}),c.jsx("div",{children:c.jsx(gc,{defaultValue:i,min:1,mode:"button",onChange:u=>{l(u),Ue("pageSize",u)},size:"small",style:{width:128,marginLeft:16}})})]}),c.jsx(ut,{}),c.jsxs("div",{className:"setting-row",children:[c.jsxs("div",{children:[c.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Mark articles as read when scrolled off screen"}),c.jsx(z.Text,{type:"secondary",children:"Automatically mark articles as read when they are scrolled out of the visible screen area"})]}),c.jsx("div",{children:c.jsx(lr,{checked:o,onChange:u=>{d(),Ue("markReadOnScroll",u)}})})]})]})},Fd=()=>{const e=C(E=>E.feeds),t=C(E=>E.setFeeds),r=C(E=>E.groups),n=C(E=>E.setGroups),a=C(E=>E.updateGroupHidden),[i,s]=b.useState(!1),[l,o]=b.useState(""),[d,u]=b.useState(!1),[h]=we.useForm(),[p,x]=b.useState({}),v=async()=>{l&&Lu(l).then(E=>{n(f=>[...f,{...E.data,feedCount:0}]),o(""),se.success("Group added successfully")}).catch(()=>{se.error("Failed to add group")}),o(""),s(!1)},g=async(E,f,w)=>{Vu(E,f,w).then(j=>{t(e.map(k=>k.category.id===E?{...k,category:{...k.category,title:f}}:k)),n(r.map(k=>k.id===E?{...k,...j.data}:k)),se.success("Group updated successfully"),u(!1),h.resetFields()}).catch(()=>{se.error("Failed to update group")})},S=async E=>{Du(E).then(f=>{f.status===204?(n(r.filter(w=>w.id!==E)),se.success("Group deleted successfully")):se.error("Failed to delete group")}).catch(()=>{se.error("Failed to delete group")})};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[r.map(E=>c.jsx(Zr,{className:"tag-style",closable:E.feedCount===0,size:"medium",onClick:()=>{x(E),u(!0),h.setFieldsValue({title:E.title})},onClose:async f=>{f.stopPropagation(),await S(E.id)},children:E.title},E.id)),i?c.jsx(dt,{autoFocus:!0,className:"input-style",onBlur:v,onChange:o,onPressEnter:v,size:"small",value:l}):c.jsx(Zr,{className:"add-group-tag",icon:c.jsx(Zs,{}),onClick:()=>s(!0),size:"medium",tabIndex:0,children:"Add"})]}),p&&c.jsx(Jn,{className:"modal-style",onOk:h.submit,title:"Edit Group",unmountOnExit:!0,visible:d,onCancel:()=>{u(!1),h.resetFields()},children:c.jsxs(we,{form:h,layout:"vertical",onSubmit:E=>{g(p.id,E.title,E.hidden).then(()=>{p.hide_globally!==E.hidden&&a(p.id,E.hidden)})},labelCol:{style:{flexBasis:90}},wrapperCol:{style:{flexBasis:"calc(100% - 90px)"}},children:[c.jsx(we.Item,{label:"Title",field:"title",rules:[{required:!0}],children:c.jsx(dt,{placeholder:"Please input group title"})}),c.jsx(we.Item,{label:"Hidden",field:"hidden",initialValue:p.hide_globally,triggerPropName:"checked",rules:[{type:"boolean"}],children:c.jsx(lr,{})})]})})]})},Rd=[{title:"Key",dataIndex:"keyName",render:e=>c.jsx(Zr,{children:e})},{title:"Function",dataIndex:"description"}],Nd=[{key:"1",keyName:"Esc",description:"Dismiss article"},{key:"2",keyName:"←",description:"Previous article"},{key:"3",keyName:"→",description:"Next article"},{key:"4",keyName:"B",description:"Open link externally"},{key:"5",keyName:"D",description:"Fetch original article"},{key:"6",keyName:"M",description:"Mark as read / unread"},{key:"7",keyName:"S",description:"Star / Unstar"}],Dd=()=>c.jsx(ro,{borderCell:!0,columns:Rd,data:Nd,pagination:!1,size:"small",style:{margin:"0 auto",width:"80%"}}),Ld=()=>c.jsxs(yr,{className:"custom-tabs",defaultActiveTab:"1",tabPosition:"top",children:[c.jsx(yr.TabPane,{title:c.jsxs("span",{children:[c.jsx(yc,{style:{marginRight:6}}),"Feeds"]}),children:c.jsx(Od,{})},"1"),c.jsx(yr.TabPane,{title:c.jsxs("span",{children:[c.jsx(bc,{style:{marginRight:6}}),"Groups"]}),children:c.jsx(Fd,{})},"2"),c.jsx(yr.TabPane,{title:c.jsxs("span",{children:[c.jsx(xc,{style:{marginRight:6}}),"General"]}),children:c.jsx(Pd,{})},"3"),c.jsx(yr.TabPane,{title:c.jsxs("span",{children:[c.jsx(wc,{style:{marginRight:6}}),"Appearance"]}),children:c.jsx(Ad,{})},"4"),c.jsx(yr.TabPane,{title:c.jsxs("span",{children:[c.jsx(Sc,{style:{marginRight:6}}),"Hotkeys"]}),children:c.jsx(Dd,{})},"5")]}),Vd=[{required:!0}],Ud=[{required:!0}],zd=[{type:"boolean"}],$d=()=>{const e=C(r=>r.setVisible),t=C(r=>r.visible);return c.jsx(Jn,{className:"settings-modal",visible:t.settings,alignCenter:!1,title:"Settings",footer:null,unmountOnExit:!0,onCancel:()=>e("settings",!1),autoFocus:!1,focusLock:!0,children:c.jsx(Ld,{})})},Bd=()=>{const e=C(o=>o.groups),t=C(o=>o.initData),r=C(o=>o.setVisible),n=C(o=>o.visible),[a,i]=b.useState(!1),[s]=we.useForm(),l=async(o,d,u)=>{i(!0),Bu(o,d,u).then(()=>{t(),se.success("Added a feed successfully"),r("addFeed",!1),s.resetFields()}).catch(()=>{se.error("Failed to add a feed")}),i(!1)};return c.jsx(Jn,{title:"Add Feed",visible:n.addFeed,unmountOnExit:!0,style:{width:"400px"},onOk:s.submit,confirmLoading:a,onCancel:()=>{r("addFeed",!1),s.resetFields()},children:c.jsxs(we,{form:s,labelCol:{span:7},layout:"vertical",wrapperCol:{span:17},onSubmit:o=>{o.url.trim()?l(o.url.trim(),o.group,o.crawler):se.error("Feed URL cannot be empty")},children:[c.jsx(we.Item,{label:"Feed URL",field:"url",rules:Vd,children:c.jsx(dt,{placeholder:"Please input a feed URL"})}),c.jsx(we.Item,{label:"Group",required:!0,field:"group",rules:Ud,children:c.jsx(Ae,{placeholder:"Please select a category",showSearch:!0,filterOption:(o,d)=>sr(d.props.children,o),children:e.map(o=>c.jsx(Ae.Option,{value:o.id,children:o.title},o.id))})}),c.jsx(we.Item,{label:"Fetch original content",initialValue:!1,field:"crawler",style:{marginBottom:0},triggerPropName:"checked",rules:zd,children:c.jsx(lr,{})})]})})},Hd=()=>c.jsxs("div",{className:"main",children:[c.jsx(Ec,{}),c.jsx($d,{}),c.jsx(Bd,{})]});function Rn(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Rn=function(r){return typeof r}:Rn=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Rn(e)}function li(e){var t=typeof e=="string"||e instanceof String;if(!t){var r=Rn(e);throw e===null?r="null":r==="object"&&(r=e.constructor.name),new TypeError("Expected a string but received a ".concat(r))}}function No(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var r in t)typeof e[r]>"u"&&(e[r]=t[r]);return e}var qd={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function Wd(e,t){li(e),t=No(t,qd),t.allow_trailing_dot&&e[e.length-1]==="."&&(e=e.substring(0,e.length-1)),t.allow_wildcard===!0&&e.indexOf("*.")===0&&(e=e.substring(2));var r=e.split("."),n=r[r.length-1];return t.require_tld&&(r.length<2||!t.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(n)||/\s/.test(n))||!t.allow_numeric_tld&&/^\d+$/.test(n)?!1:r.every(function(a){return!(a.length>63&&!t.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(a)||/[\uff01-\uff5e]/.test(a)||/^-|-$/.test(a)||!t.allow_underscores&&/_/.test(a))})}var rs="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",Ut="(".concat(rs,"[.]){3}").concat(rs),Gd=new RegExp("^".concat(Ut,"$")),Ee="(?:[0-9a-fA-F]{1,4})",Xd=new RegExp("^("+"(?:".concat(Ee,":){7}(?:").concat(Ee,"|:)|")+"(?:".concat(Ee,":){6}(?:").concat(Ut,"|:").concat(Ee,"|:)|")+"(?:".concat(Ee,":){5}(?::").concat(Ut,"|(:").concat(Ee,"){1,2}|:)|")+"(?:".concat(Ee,":){4}(?:(:").concat(Ee,"){0,1}:").concat(Ut,"|(:").concat(Ee,"){1,3}|:)|")+"(?:".concat(Ee,":){3}(?:(:").concat(Ee,"){0,2}:").concat(Ut,"|(:").concat(Ee,"){1,4}|:)|")+"(?:".concat(Ee,":){2}(?:(:").concat(Ee,"){0,3}:").concat(Ut,"|(:").concat(Ee,"){1,5}|:)|")+"(?:".concat(Ee,":){1}(?:(:").concat(Ee,"){0,4}:").concat(Ut,"|(:").concat(Ee,"){1,6}|:)|")+"(?::((?::".concat(Ee,"){0,5}:").concat(Ut,"|(?::").concat(Ee,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");function qn(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return li(e),t=String(t),t?t==="4"?Gd.test(e):t==="6"?Xd.test(e):!1:qn(e,4)||qn(e,6)}function Yd(e,t){return Jd(e)||Zd(e,t)||Qd(e,t)||Kd()}function Kd(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qd(e,t){if(e){if(typeof e=="string")return ns(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ns(e,t)}}function ns(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Zd(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,a=!1,i=void 0;try{for(var s=e[Symbol.iterator](),l;!(n=(l=s.next()).done)&&(r.push(l.value),!(t&&r.length===t));n=!0);}catch(o){a=!0,i=o}finally{try{!n&&s.return!=null&&s.return()}finally{if(a)throw i}}return r}}function Jd(e){if(Array.isArray(e))return e}var eh={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0},th=/^\[([^\]]+)\](?::([0-9]+))?$/;function rh(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function as(e,t){for(var r=0;r<t.length;r++){var n=t[r];if(e===n||rh(n)&&n.test(e))return!0}return!1}function Do(e,t){if(li(e),!e||/[\s<>]/.test(e)||e.indexOf("mailto:")===0||(t=No(t,eh),t.validate_length&&e.length>=2083)||!t.allow_fragments&&e.includes("#")||!t.allow_query_components&&(e.includes("?")||e.includes("&")))return!1;var r,n,a,i,s,l,o,d;if(o=e.split("#"),e=o.shift(),o=e.split("?"),e=o.shift(),o=e.split("://"),o.length>1){if(r=o.shift().toLowerCase(),t.require_valid_protocol&&t.protocols.indexOf(r)===-1)return!1}else{if(t.require_protocol)return!1;if(e.slice(0,2)==="//"){if(!t.allow_protocol_relative_urls)return!1;o[0]=e.slice(2)}}if(e=o.join("://"),e==="")return!1;if(o=e.split("/"),e=o.shift(),e===""&&!t.require_host)return!0;if(o=e.split("@"),o.length>1){if(t.disallow_auth||o[0]===""||(n=o.shift(),n.indexOf(":")>=0&&n.split(":").length>2))return!1;var u=n.split(":"),h=Yd(u,2),p=h[0],x=h[1];if(p===""&&x==="")return!1}i=o.join("@"),l=null,d=null;var v=i.match(th);if(v?(a="",d=v[1],l=v[2]||null):(o=i.split(":"),a=o.shift(),o.length&&(l=o.join(":"))),l!==null&&l.length>0){if(s=parseInt(l,10),!/^[0-9]+$/.test(l)||s<=0||s>65535)return!1}else if(t.require_port)return!1;return t.host_whitelist?as(a,t.host_whitelist):a===""&&!t.require_host?!0:!(!qn(a)&&!Wd(a,t)&&(!d||!qn(d,6))||(a=a||d,t.host_blacklist&&as(a,t.host_blacklist)))}const Lo=e=>{const t=new URL(e);return`${t.protocol}//${t.hostname}`},Nr=$t.Item,{Sider:nh}=kc,ah=({group:e,isOpen:t,feedsGroupedById:r})=>{const n=C(s=>s.showAllFeeds),a=C(s=>s.hiddenFeedIds);let{unreadCount:i}=e;return!n&&a&&(i=r[e.id].filter(s=>!a.includes(s.id)).reduce((s,l)=>s+l.unreadCount,0)),c.jsxs("div",{className:"group-title",children:[c.jsxs(z.Ellipsis,{expandable:!1,showTooltip:!0,style:{width:i?"80%":"100%"},children:[t?c.jsx(Mc,{}):c.jsx(Ic,{}),e.title]}),i>0&&c.jsx(z.Ellipsis,{className:"unread-count",expandable:!1,children:i})]})},ih=()=>{const e=Cc(),t=un(),r=C(T=>T.collapsed),n=C(T=>T.feeds),a=C(T=>T.groups),i=C(T=>T.loading),s=C(T=>T.unreadTotal),l=C(T=>T.unreadToday),o=C(T=>T.starredCount),d=C(T=>T.readCount),u=C(T=>T.showFeedIcon),h=C(T=>T.toggleCollapsed),p=C(T=>T.hiddenFeedIds),x=C(T=>T.hiddenGroupIds),v=C(T=>T.showAllFeeds),[g,S]=b.useState([]),[E,f]=b.useState([]),w=e.pathname,j=(T,A)=>{f(A)},k=n.reduce((T,A)=>{if(!v&&p.includes(A.id))return T;Do(A.site_url)||(A.site_url=Lo(A.feed_url));const{id:M}=A.category;return T[M]=T[M]||[],T[M].push(A),T},{});return b.useEffect(()=>{S([w]),r||window.innerWidth<=992&&h(!0)},[w]),b.useEffect(()=>{i||f([])},[i]),c.jsx(nh,{breakpoint:"lg",className:"sidebar",collapsed:r,collapsedWidth:0,collapsible:!0,onCollapse:h,trigger:null,width:240,style:{borderRight:r?"none":"1px solid var(--color-border-2)",display:r?"none":"block"},children:c.jsxs($t,{autoScrollIntoView:!0,collapse:r,defaultSelectedKeys:[w],hasCollapseButton:!0,onClickSubMenu:j,onCollapseChange:h,selectedKeys:g,style:{width:"240px",height:"100%"},children:[c.jsxs("div",{className:"menu-header",style:{visibility:r?"hidden":"visible"},children:[c.jsx(eo,{className:"avatar",size:32,children:c.jsx(io,{style:{color:"var(--color-bg-1)"}})}),c.jsx(z.Title,{heading:6,style:{margin:"0"},children:"ReactFlux"})]}),c.jsx(ut,{className:"divider"}),c.jsx(z.Title,{className:"section-title",heading:6,children:"Articles"}),c.jsx(Un,{loading:i,animation:!0,text:{rows:3}}),i?null:c.jsxs("div",{children:[c.jsx(Nr,{onClick:()=>t("/all"),children:c.jsxs("div",{className:"custom-menu-item",children:[c.jsxs("span",{children:[c.jsx(_c,{}),"All"]}),c.jsx(z.Ellipsis,{className:"item-count",expandable:!1,children:s||""})]})},"/all"),c.jsx(Nr,{onClick:()=>t("/today"),children:c.jsxs("div",{className:"custom-menu-item",children:[c.jsxs("span",{children:[c.jsx(jc,{}),"Today"]}),c.jsx(z.Ellipsis,{className:"item-count",expandable:!1,children:l||""})]})},"/today"),c.jsx(Nr,{onClick:()=>t("/starred"),children:c.jsxs("div",{className:"custom-menu-item",children:[c.jsxs("span",{children:[c.jsx(ai,{}),"Starred"]}),c.jsx(z.Ellipsis,{className:"item-count",expandable:!1,children:o||""})]})},"/starred"),c.jsx(Nr,{onClick:()=>t("/history"),children:c.jsxs("div",{className:"custom-menu-item",children:[c.jsxs("span",{children:[c.jsx(Tc,{}),"History"]}),c.jsx(z.Ellipsis,{className:"item-count",expandable:!1,children:d||""})]})},"/history")]}),c.jsx(z.Title,{className:"section-title",heading:6,children:"Feeds"}),c.jsx(Un,{loading:i,animation:!0,text:{rows:6}}),i?null:a.filter(T=>v||!x.includes(T.id)).map(T=>{var A;return c.jsx($t.SubMenu,{selectable:!0,title:c.jsx(ah,{group:T,isOpen:E.includes(`/group/${T.id}`),feedsGroupedById:k}),onClick:M=>{S([`/group/${T.id}`]),!(M.target.tagName==="svg"||M.target.tagName==="path")&&w!==`/group/${T.id}`&&t(`/group/${T.id}`)},children:(A=k[T.id])==null?void 0:A.map(M=>c.jsx(Nr,{onClick:F=>{F.stopPropagation(),S([`/group/${T.id}`]),t(`/feed/${M.id}`)},children:c.jsxs("div",{className:"custom-menu-item",children:[c.jsxs(z.Ellipsis,{expandable:!1,showTooltip:!0,style:{width:M.unreadCount!==0?"80%":"100%"},children:[u&&c.jsx("img",{src:`https://icons.duckduckgo.com/ip3/${new URL(M.site_url).hostname}.ico`,alt:"Icon",style:{marginRight:"8px",width:"16px",height:"16px",verticalAlign:"-2px"}}),M.title]}),M.unreadCount!==0&&c.jsx(z.Ellipsis,{className:"item-count",expandable:!1,children:M.unreadCount})]})},`/feed/${M.id}`))},`/group/${T.id}`)})]})})},sh=()=>{const e=C(a=>a.initData),t=C(a=>a.theme),r=C(a=>a.isSysDarkMode),n=C(a=>a.setIsSysDarkMode);return b.useEffect(()=>{e();const a=s=>{n(s.matches)},i=window.matchMedia("(prefers-color-scheme: dark)");return i.addEventListener("change",a),()=>{i.removeEventListener("change",a)}},[]),b.useEffect(()=>{(i=>{document.body.setAttribute("arco-theme",i?"dark":"light"),document.body.style.colorScheme=i?"dark":"light"})(t==="system"?r:t==="dark")},[r,t]),c.jsxs("div",{className:"app",children:[c.jsx(ih,{}),c.jsx(Id,{}),c.jsx(Hd,{})]})};var fn={};(function e(t,r,n,a){var i=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),s=typeof Path2D=="function"&&typeof DOMMatrix=="function",l=function(){if(!t.OffscreenCanvas)return!1;var y=new OffscreenCanvas(1,1),m=y.getContext("2d");m.fillRect(0,0,1,1);var N=y.transferToImageBitmap();try{m.createPattern(N,"no-repeat")}catch{return!1}return!0}();function o(){}function d(y){var m=r.exports.Promise,N=m!==void 0?m:t.Promise;return typeof N=="function"?new N(y):(y(o,o),null)}var u=function(y,m){return{transform:function(N){if(y)return N;if(m.has(N))return m.get(N);var D=new OffscreenCanvas(N.width,N.height),L=D.getContext("2d");return L.drawImage(N,0,0),m.set(N,D),D},clear:function(){m.clear()}}}(l,new Map),h=function(){var y=Math.floor(16.666666666666668),m,N,D={},L=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(m=function(U){var $=Math.random();return D[$]=requestAnimationFrame(function V(H){L===H||L+y-1<H?(L=H,delete D[$],U()):D[$]=requestAnimationFrame(V)}),$},N=function(U){D[U]&&cancelAnimationFrame(D[U])}):(m=function(U){return setTimeout(U,y)},N=function(U){return clearTimeout(U)}),{frame:m,cancel:N}}(),p=function(){var y,m,N={};function D(L){function U($,V){L.postMessage({options:$||{},callback:V})}L.init=function(V){var H=V.transferControlToOffscreen();L.postMessage({canvas:H},[H])},L.fire=function(V,H,Y){if(m)return U(V,null),m;var q=Math.random().toString(36).slice(2);return m=d(function(ae){function ie(ce){ce.data.callback===q&&(delete N[q],L.removeEventListener("message",ie),m=null,u.clear(),Y(),ae())}L.addEventListener("message",ie),U(V,q),N[q]=ie.bind(null,{data:{callback:q}})}),m},L.reset=function(){L.postMessage({reset:!0});for(var V in N)N[V](),delete N[V]}}return function(){if(y)return y;if(!n&&i){var L=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{y=new Worker(URL.createObjectURL(new Blob([L])))}catch(U){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",U),null}D(y)}return y}}(),x={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function v(y,m){return m?m(y):y}function g(y){return y!=null}function S(y,m,N){return v(y&&g(y[m])?y[m]:x[m],N)}function E(y){return y<0?0:Math.floor(y)}function f(y,m){return Math.floor(Math.random()*(m-y))+y}function w(y){return parseInt(y,16)}function j(y){return y.map(k)}function k(y){var m=String(y).replace(/[^0-9a-f]/gi,"");return m.length<6&&(m=m[0]+m[0]+m[1]+m[1]+m[2]+m[2]),{r:w(m.substring(0,2)),g:w(m.substring(2,4)),b:w(m.substring(4,6))}}function T(y){var m=S(y,"origin",Object);return m.x=S(m,"x",Number),m.y=S(m,"y",Number),m}function A(y){y.width=document.documentElement.clientWidth,y.height=document.documentElement.clientHeight}function M(y){var m=y.getBoundingClientRect();y.width=m.width,y.height=m.height}function F(y){var m=document.createElement("canvas");return m.style.position="fixed",m.style.top="0px",m.style.left="0px",m.style.pointerEvents="none",m.style.zIndex=y,m}function O(y,m,N,D,L,U,$,V,H){y.save(),y.translate(m,N),y.rotate(U),y.scale(D,L),y.arc(0,0,1,$,V,H),y.restore()}function Q(y){var m=y.angle*(Math.PI/180),N=y.spread*(Math.PI/180);return{x:y.x,y:y.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:y.startVelocity*.5+Math.random()*y.startVelocity,angle2D:-m+(.5*N-Math.random()*N),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:y.color,shape:y.shape,tick:0,totalTicks:y.ticks,decay:y.decay,drift:y.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:y.gravity*3,ovalScalar:.6,scalar:y.scalar,flat:y.flat}}function re(y,m){m.x+=Math.cos(m.angle2D)*m.velocity+m.drift,m.y+=Math.sin(m.angle2D)*m.velocity+m.gravity,m.velocity*=m.decay,m.flat?(m.wobble=0,m.wobbleX=m.x+10*m.scalar,m.wobbleY=m.y+10*m.scalar,m.tiltSin=0,m.tiltCos=0,m.random=1):(m.wobble+=m.wobbleSpeed,m.wobbleX=m.x+10*m.scalar*Math.cos(m.wobble),m.wobbleY=m.y+10*m.scalar*Math.sin(m.wobble),m.tiltAngle+=.1,m.tiltSin=Math.sin(m.tiltAngle),m.tiltCos=Math.cos(m.tiltAngle),m.random=Math.random()+2);var N=m.tick++/m.totalTicks,D=m.x+m.random*m.tiltCos,L=m.y+m.random*m.tiltSin,U=m.wobbleX+m.random*m.tiltCos,$=m.wobbleY+m.random*m.tiltSin;if(y.fillStyle="rgba("+m.color.r+", "+m.color.g+", "+m.color.b+", "+(1-N)+")",y.beginPath(),s&&m.shape.type==="path"&&typeof m.shape.path=="string"&&Array.isArray(m.shape.matrix))y.fill(Et(m.shape.path,m.shape.matrix,m.x,m.y,Math.abs(U-D)*.1,Math.abs($-L)*.1,Math.PI/10*m.wobble));else if(m.shape.type==="bitmap"){var V=Math.PI/10*m.wobble,H=Math.abs(U-D)*.1,Y=Math.abs($-L)*.1,q=m.shape.bitmap.width*m.scalar,ae=m.shape.bitmap.height*m.scalar,ie=new DOMMatrix([Math.cos(V)*H,Math.sin(V)*H,-Math.sin(V)*Y,Math.cos(V)*Y,m.x,m.y]);ie.multiplySelf(new DOMMatrix(m.shape.matrix));var ce=y.createPattern(u.transform(m.shape.bitmap),"no-repeat");ce.setTransform(ie),y.globalAlpha=1-N,y.fillStyle=ce,y.fillRect(m.x-q/2,m.y-ae/2,q,ae),y.globalAlpha=1}else if(m.shape==="circle")y.ellipse?y.ellipse(m.x,m.y,Math.abs(U-D)*m.ovalScalar,Math.abs($-L)*m.ovalScalar,Math.PI/10*m.wobble,0,2*Math.PI):O(y,m.x,m.y,Math.abs(U-D)*m.ovalScalar,Math.abs($-L)*m.ovalScalar,Math.PI/10*m.wobble,0,2*Math.PI);else if(m.shape==="star")for(var G=Math.PI/2*3,X=4*m.scalar,Ie=8*m.scalar,me=m.x,_e=m.y,$e=5,ve=Math.PI/$e;$e--;)me=m.x+Math.cos(G)*Ie,_e=m.y+Math.sin(G)*Ie,y.lineTo(me,_e),G+=ve,me=m.x+Math.cos(G)*X,_e=m.y+Math.sin(G)*X,y.lineTo(me,_e),G+=ve;else y.moveTo(Math.floor(m.x),Math.floor(m.y)),y.lineTo(Math.floor(m.wobbleX),Math.floor(L)),y.lineTo(Math.floor(U),Math.floor($)),y.lineTo(Math.floor(D),Math.floor(m.wobbleY));return y.closePath(),y.fill(),m.tick<m.totalTicks}function ne(y,m,N,D,L){var U=m.slice(),$=y.getContext("2d"),V,H,Y=d(function(q){function ae(){V=H=null,$.clearRect(0,0,D.width,D.height),u.clear(),L(),q()}function ie(){n&&!(D.width===a.width&&D.height===a.height)&&(D.width=y.width=a.width,D.height=y.height=a.height),!D.width&&!D.height&&(N(y),D.width=y.width,D.height=y.height),$.clearRect(0,0,D.width,D.height),U=U.filter(function(ce){return re($,ce)}),U.length?V=h.frame(ie):ae()}V=h.frame(ie),H=ae});return{addFettis:function(q){return U=U.concat(q),Y},canvas:y,promise:Y,reset:function(){V&&h.cancel(V),H&&H()}}}function ge(y,m){var N=!y,D=!!S(m||{},"resize"),L=!1,U=S(m,"disableForReducedMotion",Boolean),$=i&&!!S(m||{},"useWorker"),V=$?p():null,H=N?A:M,Y=y&&V?!!y.__confetti_initialized:!1,q=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,ae;function ie(G,X,Ie){for(var me=S(G,"particleCount",E),_e=S(G,"angle",Number),$e=S(G,"spread",Number),ve=S(G,"startVelocity",Number),Ze=S(G,"decay",Number),mt=S(G,"gravity",Number),Ne=S(G,"drift",Number),P=S(G,"colors",j),he=S(G,"ticks",Number),je=S(G,"shapes"),xe=S(G,"scalar"),Je=!!S(G,"flat"),vt=T(G),Kt=me,Ft=[],ur=y.width*vt.x,De=y.height*vt.y;Kt--;)Ft.push(Q({x:ur,y:De,angle:_e,spread:$e,startVelocity:ve,color:P[Kt%P.length],shape:je[f(0,je.length)],ticks:he,decay:Ze,gravity:mt,drift:Ne,scalar:xe,flat:Je}));return ae?ae.addFettis(Ft):(ae=ne(y,Ft,H,X,Ie),ae.promise)}function ce(G){var X=U||S(G,"disableForReducedMotion",Boolean),Ie=S(G,"zIndex",Number);if(X&&q)return d(function(ve){ve()});N&&ae?y=ae.canvas:N&&!y&&(y=F(Ie),document.body.appendChild(y)),D&&!Y&&H(y);var me={width:y.width,height:y.height};V&&!Y&&V.init(y),Y=!0,V&&(y.__confetti_initialized=!0);function _e(){if(V){var ve={getBoundingClientRect:function(){if(!N)return y.getBoundingClientRect()}};H(ve),V.postMessage({resize:{width:ve.width,height:ve.height}});return}me.width=me.height=null}function $e(){ae=null,D&&(L=!1,t.removeEventListener("resize",_e)),N&&y&&(document.body.removeChild(y),y=null,Y=!1)}return D&&!L&&(L=!0,t.addEventListener("resize",_e,!1)),V?V.fire(G,me,$e):ie(G,me,$e)}return ce.reset=function(){V&&V.reset(),ae&&ae.reset()},ce}var pe;function ye(){return pe||(pe=ge(null,{useWorker:!0,resize:!0})),pe}function Et(y,m,N,D,L,U,$){var V=new Path2D(y),H=new Path2D;H.addPath(V,new DOMMatrix(m));var Y=new Path2D;return Y.addPath(H,new DOMMatrix([Math.cos($)*L,Math.sin($)*L,-Math.sin($)*U,Math.cos($)*U,N,D])),Y}function Me(y){if(!s)throw new Error("path confetti are not supported in this browser");var m,N;typeof y=="string"?m=y:(m=y.path,N=y.matrix);var D=new Path2D(m),L=document.createElement("canvas"),U=L.getContext("2d");if(!N){for(var $=1e3,V=$,H=$,Y=0,q=0,ae,ie,ce=0;ce<$;ce+=2)for(var G=0;G<$;G+=2)U.isPointInPath(D,ce,G,"nonzero")&&(V=Math.min(V,ce),H=Math.min(H,G),Y=Math.max(Y,ce),q=Math.max(q,G));ae=Y-V,ie=q-H;var X=10,Ie=Math.min(X/ae,X/ie);N=[Ie,0,0,Ie,-Math.round(ae/2+V)*Ie,-Math.round(ie/2+H)*Ie]}return{type:"path",path:m,matrix:N}}function Ge(y){var m,N=1,D="#000000",L='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof y=="string"?m=y:(m=y.text,N="scalar"in y?y.scalar:N,L="fontFamily"in y?y.fontFamily:L,D="color"in y?y.color:D);var U=10*N,$=""+U+"px "+L,V=new OffscreenCanvas(U,U),H=V.getContext("2d");H.font=$;var Y=H.measureText(m),q=Math.ceil(Y.actualBoundingBoxRight+Y.actualBoundingBoxLeft),ae=Math.ceil(Y.actualBoundingBoxAscent+Y.actualBoundingBoxDescent),ie=2,ce=Y.actualBoundingBoxLeft+ie,G=Y.actualBoundingBoxAscent+ie;q+=ie+ie,ae+=ie+ie,V=new OffscreenCanvas(q,ae),H=V.getContext("2d"),H.font=$,H.fillStyle=D,H.fillText(m,ce,G);var X=1/N;return{type:"bitmap",bitmap:V.transferToImageBitmap(),matrix:[X,0,0,X,-q*X/2,-ae*X/2]}}r.exports=function(){return ye().apply(this,arguments)},r.exports.reset=function(){ye().reset()},r.exports.create=ge,r.exports.shapeFromPath=Me,r.exports.shapeFromText=Ge})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),fn,!1);const oh=fn.exports;fn.exports.create;const St=b.createContext(null),Ir=({children:e})=>{const[t,r]=b.useState(0),[n,a]=b.useState(0),[i,s]=b.useState(0),[l,o]=b.useState(0),[d,u]=b.useState(!1),[h,p]=b.useState(!1),[x,v]=b.useState([]),[g,S]=b.useState([]),[E,f]=b.useState([]),[w,j]=b.useState(ue("showStatus")),[k,T]=b.useState("0"),[A,M]=b.useState(""),[F,O]=b.useState(!0),[Q,re]=b.useState(!1),ne=b.useRef(null),ge=b.useMemo(()=>({entries:x,entryDetailRef:ne,filteredEntries:E,filterStatus:w,filterString:A,filterType:k,isArticleFocused:Q,loading:F,loadMoreUnreadVisible:h,loadMoreVisible:d,offset:i,setEntries:v,setFilteredEntries:f,setFilterStatus:j,setFilterString:M,setFilterType:T,setIsArticleFocused:re,setLoading:O,setLoadMoreUnreadVisible:p,setLoadMoreVisible:u,setOffset:s,setTotal:r,setUnreadCount:a,setUnreadEntries:S,setUnreadOffset:o,total:t,unreadCount:n,unreadEntries:g,unreadOffset:l}),[x,E,w,A,k,Q,F,h,d,i,t,n,g,l]);return c.jsx(St.Provider,{value:ge,children:e})},ci=()=>{const e=C(f=>f.setUnreadTotal),t=C(f=>f.setUnreadToday),r=C(f=>f.setReadCount),n=C(f=>f.setStarredCount),a=C(f=>f.activeContent),i=C(f=>f.setActiveContent),s=C(f=>f.updateFeedUnreadCount),l=C(f=>f.updateGroupUnreadCount),{setEntries:o,setFilteredEntries:d,setUnreadCount:u,setUnreadEntries:h}=b.useContext(St),p=(f,w)=>f.map(j=>j.id===w.id?w:j),x=(f,w)=>{const{id:j,category:{id:k}}=f.feed,T=ju(f.published_at);s(j,w),l(k,w),w==="read"?(e(M=>Math.max(0,M-1)),u(M=>Math.max(0,M-1)),r(M=>M+1),T&&t(M=>Math.max(0,M-1))):(e(M=>M+1),u(M=>M+1),r(M=>Math.max(0,M-1)),T&&t(M=>M+1));const A={...f,status:w};a&&i(A),o(M=>p(M,A)),h(M=>p(M,A)),d(M=>p(M,A))},v=(f,w)=>{w?(n(k=>k+1),oh({particleCount:100,angle:120,spread:70,origin:{x:1,y:1}})):n(k=>Math.max(0,k-1));const j={...f,starred:w};a&&i(j),o(k=>p(k,j)),h(k=>p(k,j)),d(k=>p(k,j))};return{handleEntryStatusUpdate:x,handleFetchContent:async()=>{Ou(a.id).then(f=>{se.success("Fetched content successfully"),i({...a,content:f.data.content})}).catch(()=>{se.error("Failed to fetch content, please try again later")})},handleToggleStarred:async f=>{const w=!f.starred;v(f,w),Au(f.id).catch(()=>{se.error(`Failed to ${w?"star":"unstar"} entry, please try again later`),v(f,!w)})},handleToggleStatus:async f=>{const w=f.status,j=w==="read"?"unread":"read";x(f,j),xo(f.id,j).catch(()=>{se.error(`Failed to mark entry as ${j}, please try again later`),x(f,w)})}}},is=(e,t="start")=>{const r=document.querySelector(e);r&&r.scrollIntoView({behavior:"smooth",block:t})},ui=()=>{const e=C(O=>O.pageSize),t=C(O=>O.showAllFeeds),r=C(O=>O.hiddenFeedIds),{entries:n,filterStatus:a,filterString:i,filterType:s,offset:l,setEntries:o,setFilteredEntries:d,setLoadMoreUnreadVisible:u,setLoadMoreVisible:h,setOffset:p,setUnreadEntries:x,setUnreadOffset:v,total:g,unreadCount:S,unreadEntries:E,unreadOffset:f}=b.useContext(St),[w,j]=b.useState(!1),k=O=>{var ge;const ne=(ge=new DOMParser().parseFromString(O.content,"text/html").querySelector("img"))==null?void 0:ge.getAttribute("src");return{...O,imgSrc:ne}},T=()=>{a==="all"?p(O=>O+e):v(O=>O+e)},A=O=>{const Q=new Map([...(a==="all"?n:E).map(ne=>[ne.id,ne]),...O.map(ne=>[ne.id,ne])]),re=Array.from(Q.values());return a==="all"?(o(re),h(re.length<g)):(x(re),u(re.length<S)),re},M=(O,Q)=>{const re=i?Ro(O,s,a,i):O;return Hn(re,Q,t,r)};return{parseFirstImage:k,handleLoadMore:async(O,Q)=>{var re;j(!0);try{let ne;if(a==="all"?ne=await Q(l+e):ne=await Q(f+e,a),(re=ne==null?void 0:ne.data)!=null&&re.entries){T();const ge=ne.data.entries.map(k),pe=A(ge),ye=M(pe,O);d(ye)}}catch(ne){console.error("Error fetching more articles:",ne)}j(!1)},loadingMore:w}},Vo=(e,t,r)=>{const{entryDetailRef:n,filteredEntries:a,filterStatus:i,loadMoreUnreadVisible:s,loadMoreVisible:l}=b.useContext(St),o=C(A=>A.activeContent),d=C(A=>A.setActiveContent),{handleLoadMore:u}=ui(),[h,p]=b.useState(!1),[x,v]=b.useState(!1),{isMobileView:g}=ta();b.useEffect(()=>{const A=document.querySelector(".entry-list");!A||!g||(o?A.style.visibility="hidden":A.style.visibility="visible")},[o,g]),b.useEffect(()=>{x&&!h&&(f(e),v(!1))},[h,x]);const S=A=>{o&&(d(null),A.current&&(A.current.setAttribute("tabIndex","-1"),A.current.focus()),n.current&&n.current.scrollTo(0,0))},E=()=>{const A=a.findIndex(M=>M.id===(o==null?void 0:o.id));if(A>0){const M=a[A-1];t(M),is(".card-custom-selected-style","end")}},f=A=>{if(h)return;const M=a.findIndex(O=>O.id===(o==null?void 0:o.id));if(M===a.length-1&&(i==="all"&&l||s)){p(!0),u(A,r).then(()=>v(!0)).finally(()=>p(!1));return}if(M===-1){const O=document.querySelector(".entry-list");O&&O.scrollTo(0,0)}if(M<a.length-1){const O=a[M+1];t(O),v(!1),is(".card-custom-selected-style")}};return{handleEscapeKey:S,handleLeftKey:E,handleRightKey:f,handleBKey:()=>{o&&window.open(o.url,"_blank")},handleDKey:A=>{o&&A()},handleMKey:A=>{o&&A()},handleSKey:A=>{o&&A()}}};var Uo={},di={},hi={};Object.defineProperty(hi,"__esModule",{value:!0});var ss="html",os="head",En="body",lh=/<([a-zA-Z]+[0-9]?)/,ls=/<head[^]*>/i,cs=/<body[^]*>/i,Wn=function(e,t){throw new Error("This browser does not support `document.implementation.createHTMLDocument`")},Va=function(e,t){throw new Error("This browser does not support `DOMParser.prototype.parseFromString`")},us=typeof window=="object"&&window.DOMParser;if(typeof us=="function"){var ch=new us,uh="text/html";Va=function(e,t){return t&&(e="<".concat(t,">").concat(e,"</").concat(t,">")),ch.parseFromString(e,uh)},Wn=Va}if(typeof document=="object"&&document.implementation){var Cn=document.implementation.createHTMLDocument();Wn=function(e,t){if(t){var r=Cn.documentElement.querySelector(t);return r&&(r.innerHTML=e),Cn}return Cn.documentElement.innerHTML=e,Cn}}var _n=typeof document=="object"&&document.createElement("template"),Ua;_n&&_n.content&&(Ua=function(e){return _n.innerHTML=e,_n.content.childNodes});function dh(e){var t,r,n=e.match(lh),a=n&&n[1]?n[1].toLowerCase():"";switch(a){case ss:{var i=Va(e);if(!ls.test(e)){var s=i.querySelector(os);(t=s==null?void 0:s.parentNode)===null||t===void 0||t.removeChild(s)}if(!cs.test(e)){var s=i.querySelector(En);(r=s==null?void 0:s.parentNode)===null||r===void 0||r.removeChild(s)}return i.querySelectorAll(ss)}case os:case En:{var l=Wn(e).querySelectorAll(a);return cs.test(e)&&ls.test(e)?l[0].parentNode.childNodes:l}default:{if(Ua)return Ua(e);var s=Wn(e,En).querySelector(En);return s.childNodes}}}hi.default=dh;var Tr={},zo={},pn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Doctype=e.CDATA=e.Tag=e.Style=e.Script=e.Comment=e.Directive=e.Text=e.Root=e.isTag=e.ElementType=void 0;var t;(function(n){n.Root="root",n.Text="text",n.Directive="directive",n.Comment="comment",n.Script="script",n.Style="style",n.Tag="tag",n.CDATA="cdata",n.Doctype="doctype"})(t=e.ElementType||(e.ElementType={}));function r(n){return n.type===t.Tag||n.type===t.Script||n.type===t.Style}e.isTag=r,e.Root=t.Root,e.Text=t.Text,e.Directive=t.Directive,e.Comment=t.Comment,e.Script=t.Script,e.Style=t.Style,e.Tag=t.Tag,e.CDATA=t.CDATA,e.Doctype=t.Doctype})(pn);var Z={},Gt=le&&le.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hr=le&&le.__assign||function(){return Hr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Hr.apply(this,arguments)};Object.defineProperty(Z,"__esModule",{value:!0});Z.cloneNode=Z.hasChildren=Z.isDocument=Z.isDirective=Z.isComment=Z.isText=Z.isCDATA=Z.isTag=Z.Element=Z.Document=Z.CDATA=Z.NodeWithChildren=Z.ProcessingInstruction=Z.Comment=Z.Text=Z.DataNode=Z.Node=void 0;var qe=pn,fi=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(t){this.prev=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(t){this.next=t},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(t){return t===void 0&&(t=!1),pi(this,t)},e}();Z.Node=fi;var ra=function(e){Gt(t,e);function t(r){var n=e.call(this)||this;return n.data=r,n}return Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(r){this.data=r},enumerable:!1,configurable:!0}),t}(fi);Z.DataNode=ra;var $o=function(e){Gt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=qe.ElementType.Text,r}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(ra);Z.Text=$o;var Bo=function(e){Gt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=qe.ElementType.Comment,r}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(ra);Z.Comment=Bo;var Ho=function(e){Gt(t,e);function t(r,n){var a=e.call(this,n)||this;return a.name=r,a.type=qe.ElementType.Directive,a}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(ra);Z.ProcessingInstruction=Ho;var na=function(e){Gt(t,e);function t(r){var n=e.call(this)||this;return n.children=r,n}return Object.defineProperty(t.prototype,"firstChild",{get:function(){var r;return(r=this.children[0])!==null&&r!==void 0?r:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(r){this.children=r},enumerable:!1,configurable:!0}),t}(fi);Z.NodeWithChildren=na;var qo=function(e){Gt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=qe.ElementType.CDATA,r}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(na);Z.CDATA=qo;var Wo=function(e){Gt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=qe.ElementType.Root,r}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(na);Z.Document=Wo;var Go=function(e){Gt(t,e);function t(r,n,a,i){a===void 0&&(a=[]),i===void 0&&(i=r==="script"?qe.ElementType.Script:r==="style"?qe.ElementType.Style:qe.ElementType.Tag);var s=e.call(this,a)||this;return s.name=r,s.attribs=n,s.type=i,s}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(r){this.name=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var r=this;return Object.keys(this.attribs).map(function(n){var a,i;return{name:n,value:r.attribs[n],namespace:(a=r["x-attribsNamespace"])===null||a===void 0?void 0:a[n],prefix:(i=r["x-attribsPrefix"])===null||i===void 0?void 0:i[n]}})},enumerable:!1,configurable:!0}),t}(na);Z.Element=Go;function Xo(e){return(0,qe.isTag)(e)}Z.isTag=Xo;function Yo(e){return e.type===qe.ElementType.CDATA}Z.isCDATA=Yo;function Ko(e){return e.type===qe.ElementType.Text}Z.isText=Ko;function Qo(e){return e.type===qe.ElementType.Comment}Z.isComment=Qo;function Zo(e){return e.type===qe.ElementType.Directive}Z.isDirective=Zo;function Jo(e){return e.type===qe.ElementType.Root}Z.isDocument=Jo;function hh(e){return Object.prototype.hasOwnProperty.call(e,"children")}Z.hasChildren=hh;function pi(e,t){t===void 0&&(t=!1);var r;if(Ko(e))r=new $o(e.data);else if(Qo(e))r=new Bo(e.data);else if(Xo(e)){var n=t?Ca(e.children):[],a=new Go(e.name,Hr({},e.attribs),n);n.forEach(function(o){return o.parent=a}),e.namespace!=null&&(a.namespace=e.namespace),e["x-attribsNamespace"]&&(a["x-attribsNamespace"]=Hr({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(a["x-attribsPrefix"]=Hr({},e["x-attribsPrefix"])),r=a}else if(Yo(e)){var n=t?Ca(e.children):[],i=new qo(n);n.forEach(function(d){return d.parent=i}),r=i}else if(Jo(e)){var n=t?Ca(e.children):[],s=new Wo(n);n.forEach(function(d){return d.parent=s}),e["x-mode"]&&(s["x-mode"]=e["x-mode"]),r=s}else if(Zo(e)){var l=new Ho(e.name,e.data);e["x-name"]!=null&&(l["x-name"]=e["x-name"],l["x-publicId"]=e["x-publicId"],l["x-systemId"]=e["x-systemId"]),r=l}else throw new Error("Not implemented yet: ".concat(e.type));return r.startIndex=e.startIndex,r.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(r.sourceCodeLocation=e.sourceCodeLocation),r}Z.cloneNode=pi;function Ca(e){for(var t=e.map(function(n){return pi(n,!0)}),r=1;r<t.length;r++)t[r].prev=t[r-1],t[r-1].next=t[r];return t}(function(e){var t=le&&le.__createBinding||(Object.create?function(l,o,d,u){u===void 0&&(u=d);var h=Object.getOwnPropertyDescriptor(o,d);(!h||("get"in h?!o.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return o[d]}}),Object.defineProperty(l,u,h)}:function(l,o,d,u){u===void 0&&(u=d),l[u]=o[d]}),r=le&&le.__exportStar||function(l,o){for(var d in l)d!=="default"&&!Object.prototype.hasOwnProperty.call(o,d)&&t(o,l,d)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var n=pn,a=Z;r(Z,e);var i={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},s=function(){function l(o,d,u){this.dom=[],this.root=new a.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof d=="function"&&(u=d,d=i),typeof o=="object"&&(d=o,o=void 0),this.callback=o??null,this.options=d??i,this.elementCB=u??null}return l.prototype.onparserinit=function(o){this.parser=o},l.prototype.onreset=function(){this.dom=[],this.root=new a.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},l.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},l.prototype.onerror=function(o){this.handleCallback(o)},l.prototype.onclosetag=function(){this.lastNode=null;var o=this.tagStack.pop();this.options.withEndIndices&&(o.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(o)},l.prototype.onopentag=function(o,d){var u=this.options.xmlMode?n.ElementType.Tag:void 0,h=new a.Element(o,d,void 0,u);this.addNode(h),this.tagStack.push(h)},l.prototype.ontext=function(o){var d=this.lastNode;if(d&&d.type===n.ElementType.Text)d.data+=o,this.options.withEndIndices&&(d.endIndex=this.parser.endIndex);else{var u=new a.Text(o);this.addNode(u),this.lastNode=u}},l.prototype.oncomment=function(o){if(this.lastNode&&this.lastNode.type===n.ElementType.Comment){this.lastNode.data+=o;return}var d=new a.Comment(o);this.addNode(d),this.lastNode=d},l.prototype.oncommentend=function(){this.lastNode=null},l.prototype.oncdatastart=function(){var o=new a.Text(""),d=new a.CDATA([o]);this.addNode(d),o.parent=d,this.lastNode=o},l.prototype.oncdataend=function(){this.lastNode=null},l.prototype.onprocessinginstruction=function(o,d){var u=new a.ProcessingInstruction(o,d);this.addNode(u)},l.prototype.handleCallback=function(o){if(typeof this.callback=="function")this.callback(o,this.dom);else if(o)throw o},l.prototype.addNode=function(o){var d=this.tagStack[this.tagStack.length-1],u=d.children[d.children.length-1];this.options.withStartIndices&&(o.startIndex=this.parser.startIndex),this.options.withEndIndices&&(o.endIndex=this.parser.endIndex),d.children.push(o),u&&(o.prev=u,u.next=o),o.parent=d,this.lastNode=null},l}();e.DomHandler=s,e.default=s})(zo);var el={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CASE_SENSITIVE_TAG_NAMES_MAP=e.CASE_SENSITIVE_TAG_NAMES=void 0,e.CASE_SENSITIVE_TAG_NAMES=["animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","linearGradient","radialGradient","textPath"],e.CASE_SENSITIVE_TAG_NAMES_MAP=e.CASE_SENSITIVE_TAG_NAMES.reduce(function(t,r){return t[r.toLowerCase()]=r,t},{})})(el);Object.defineProperty(Tr,"__esModule",{value:!0});Tr.formatDOM=Tr.formatAttributes=void 0;var jn=zo,fh=el;function ph(e){return fh.CASE_SENSITIVE_TAG_NAMES_MAP[e]}function tl(e){for(var t={},r=0,n=e.length;r<n;r++){var a=e[r];t[a.name]=a.value}return t}Tr.formatAttributes=tl;function mh(e){e=e.toLowerCase();var t=ph(e);return t||e}function rl(e,t,r){t===void 0&&(t=null);for(var n=[],a,i=0,s=e.length;i<s;i++){var l=e[i];switch(l.nodeType){case 1:{var o=mh(l.nodeName);a=new jn.Element(o,tl(l.attributes)),a.children=rl(o==="template"?l.content.childNodes:l.childNodes,a);break}case 3:a=new jn.Text(l.nodeValue);break;case 8:a=new jn.Comment(l.nodeValue);break;default:continue}var d=n[i-1]||null;d&&(d.next=a),a.parent=t,a.prev=d,a.next=null,n.push(a)}return r&&(a=new jn.ProcessingInstruction(r.substring(0,r.indexOf(" ")).toLowerCase(),r),a.next=n[0]||null,a.parent=t,n.unshift(a),n[1]&&(n[1].prev=n[0])),n}Tr.formatDOM=rl;var vh=le&&le.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(di,"__esModule",{value:!0});var gh=vh(hi),yh=Tr,bh=/<(![a-zA-Z\s]+)>/;function xh(e){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];var t=e.match(bh),r=t?t[1]:void 0;return(0,yh.formatDOM)((0,gh.default)(e),null,r)}di.default=xh;var aa={},pt={},ia={},wh=0;ia.SAME=wh;var Sh=1;ia.CAMELCASE=Sh;ia.possibleStandardNames={accept:0,acceptCharset:1,"accept-charset":"acceptCharset",accessKey:1,action:0,allowFullScreen:1,alt:0,as:0,async:0,autoCapitalize:1,autoComplete:1,autoCorrect:1,autoFocus:1,autoPlay:1,autoSave:1,capture:0,cellPadding:1,cellSpacing:1,challenge:0,charSet:1,checked:0,children:0,cite:0,class:"className",classID:1,className:1,cols:0,colSpan:1,content:0,contentEditable:1,contextMenu:1,controls:0,controlsList:1,coords:0,crossOrigin:1,dangerouslySetInnerHTML:1,data:0,dateTime:1,default:0,defaultChecked:1,defaultValue:1,defer:0,dir:0,disabled:0,disablePictureInPicture:1,disableRemotePlayback:1,download:0,draggable:0,encType:1,enterKeyHint:1,for:"htmlFor",form:0,formMethod:1,formAction:1,formEncType:1,formNoValidate:1,formTarget:1,frameBorder:1,headers:0,height:0,hidden:0,high:0,href:0,hrefLang:1,htmlFor:1,httpEquiv:1,"http-equiv":"httpEquiv",icon:0,id:0,innerHTML:1,inputMode:1,integrity:0,is:0,itemID:1,itemProp:1,itemRef:1,itemScope:1,itemType:1,keyParams:1,keyType:1,kind:0,label:0,lang:0,list:0,loop:0,low:0,manifest:0,marginWidth:1,marginHeight:1,max:0,maxLength:1,media:0,mediaGroup:1,method:0,min:0,minLength:1,multiple:0,muted:0,name:0,noModule:1,nonce:0,noValidate:1,open:0,optimum:0,pattern:0,placeholder:0,playsInline:1,poster:0,preload:0,profile:0,radioGroup:1,readOnly:1,referrerPolicy:1,rel:0,required:0,reversed:0,role:0,rows:0,rowSpan:1,sandbox:0,scope:0,scoped:0,scrolling:0,seamless:0,selected:0,shape:0,size:0,sizes:0,span:0,spellCheck:1,src:0,srcDoc:1,srcLang:1,srcSet:1,start:0,step:0,style:0,summary:0,tabIndex:1,target:0,title:0,type:0,useMap:1,value:0,width:0,wmode:0,wrap:0,about:0,accentHeight:1,"accent-height":"accentHeight",accumulate:0,additive:0,alignmentBaseline:1,"alignment-baseline":"alignmentBaseline",allowReorder:1,alphabetic:0,amplitude:0,arabicForm:1,"arabic-form":"arabicForm",ascent:0,attributeName:1,attributeType:1,autoReverse:1,azimuth:0,baseFrequency:1,baselineShift:1,"baseline-shift":"baselineShift",baseProfile:1,bbox:0,begin:0,bias:0,by:0,calcMode:1,capHeight:1,"cap-height":"capHeight",clip:0,clipPath:1,"clip-path":"clipPath",clipPathUnits:1,clipRule:1,"clip-rule":"clipRule",color:0,colorInterpolation:1,"color-interpolation":"colorInterpolation",colorInterpolationFilters:1,"color-interpolation-filters":"colorInterpolationFilters",colorProfile:1,"color-profile":"colorProfile",colorRendering:1,"color-rendering":"colorRendering",contentScriptType:1,contentStyleType:1,cursor:0,cx:0,cy:0,d:0,datatype:0,decelerate:0,descent:0,diffuseConstant:1,direction:0,display:0,divisor:0,dominantBaseline:1,"dominant-baseline":"dominantBaseline",dur:0,dx:0,dy:0,edgeMode:1,elevation:0,enableBackground:1,"enable-background":"enableBackground",end:0,exponent:0,externalResourcesRequired:1,fill:0,fillOpacity:1,"fill-opacity":"fillOpacity",fillRule:1,"fill-rule":"fillRule",filter:0,filterRes:1,filterUnits:1,floodOpacity:1,"flood-opacity":"floodOpacity",floodColor:1,"flood-color":"floodColor",focusable:0,fontFamily:1,"font-family":"fontFamily",fontSize:1,"font-size":"fontSize",fontSizeAdjust:1,"font-size-adjust":"fontSizeAdjust",fontStretch:1,"font-stretch":"fontStretch",fontStyle:1,"font-style":"fontStyle",fontVariant:1,"font-variant":"fontVariant",fontWeight:1,"font-weight":"fontWeight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:1,"glyph-name":"glyphName",glyphOrientationHorizontal:1,"glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphOrientationVertical:1,"glyph-orientation-vertical":"glyphOrientationVertical",glyphRef:1,gradientTransform:1,gradientUnits:1,hanging:0,horizAdvX:1,"horiz-adv-x":"horizAdvX",horizOriginX:1,"horiz-origin-x":"horizOriginX",ideographic:0,imageRendering:1,"image-rendering":"imageRendering",in2:0,in:0,inlist:0,intercept:0,k1:0,k2:0,k3:0,k4:0,k:0,kernelMatrix:1,kernelUnitLength:1,kerning:0,keyPoints:1,keySplines:1,keyTimes:1,lengthAdjust:1,letterSpacing:1,"letter-spacing":"letterSpacing",lightingColor:1,"lighting-color":"lightingColor",limitingConeAngle:1,local:0,markerEnd:1,"marker-end":"markerEnd",markerHeight:1,markerMid:1,"marker-mid":"markerMid",markerStart:1,"marker-start":"markerStart",markerUnits:1,markerWidth:1,mask:0,maskContentUnits:1,maskUnits:1,mathematical:0,mode:0,numOctaves:1,offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:1,"overline-position":"overlinePosition",overlineThickness:1,"overline-thickness":"overlineThickness",paintOrder:1,"paint-order":"paintOrder",panose1:0,"panose-1":"panose1",pathLength:1,patternContentUnits:1,patternTransform:1,patternUnits:1,pointerEvents:1,"pointer-events":"pointerEvents",points:0,pointsAtX:1,pointsAtY:1,pointsAtZ:1,prefix:0,preserveAlpha:1,preserveAspectRatio:1,primitiveUnits:1,property:0,r:0,radius:0,refX:1,refY:1,renderingIntent:1,"rendering-intent":"renderingIntent",repeatCount:1,repeatDur:1,requiredExtensions:1,requiredFeatures:1,resource:0,restart:0,result:0,results:0,rotate:0,rx:0,ry:0,scale:0,security:0,seed:0,shapeRendering:1,"shape-rendering":"shapeRendering",slope:0,spacing:0,specularConstant:1,specularExponent:1,speed:0,spreadMethod:1,startOffset:1,stdDeviation:1,stemh:0,stemv:0,stitchTiles:1,stopColor:1,"stop-color":"stopColor",stopOpacity:1,"stop-opacity":"stopOpacity",strikethroughPosition:1,"strikethrough-position":"strikethroughPosition",strikethroughThickness:1,"strikethrough-thickness":"strikethroughThickness",string:0,stroke:0,strokeDasharray:1,"stroke-dasharray":"strokeDasharray",strokeDashoffset:1,"stroke-dashoffset":"strokeDashoffset",strokeLinecap:1,"stroke-linecap":"strokeLinecap",strokeLinejoin:1,"stroke-linejoin":"strokeLinejoin",strokeMiterlimit:1,"stroke-miterlimit":"strokeMiterlimit",strokeWidth:1,"stroke-width":"strokeWidth",strokeOpacity:1,"stroke-opacity":"strokeOpacity",suppressContentEditableWarning:1,suppressHydrationWarning:1,surfaceScale:1,systemLanguage:1,tableValues:1,targetX:1,targetY:1,textAnchor:1,"text-anchor":"textAnchor",textDecoration:1,"text-decoration":"textDecoration",textLength:1,textRendering:1,"text-rendering":"textRendering",to:0,transform:0,typeof:0,u1:0,u2:0,underlinePosition:1,"underline-position":"underlinePosition",underlineThickness:1,"underline-thickness":"underlineThickness",unicode:0,unicodeBidi:1,"unicode-bidi":"unicodeBidi",unicodeRange:1,"unicode-range":"unicodeRange",unitsPerEm:1,"units-per-em":"unitsPerEm",unselectable:0,vAlphabetic:1,"v-alphabetic":"vAlphabetic",values:0,vectorEffect:1,"vector-effect":"vectorEffect",version:0,vertAdvY:1,"vert-adv-y":"vertAdvY",vertOriginX:1,"vert-origin-x":"vertOriginX",vertOriginY:1,"vert-origin-y":"vertOriginY",vHanging:1,"v-hanging":"vHanging",vIdeographic:1,"v-ideographic":"vIdeographic",viewBox:1,viewTarget:1,visibility:0,vMathematical:1,"v-mathematical":"vMathematical",vocab:0,widths:0,wordSpacing:1,"word-spacing":"wordSpacing",writingMode:1,"writing-mode":"writingMode",x1:0,x2:0,x:0,xChannelSelector:1,xHeight:1,"x-height":"xHeight",xlinkActuate:1,"xlink:actuate":"xlinkActuate",xlinkArcrole:1,"xlink:arcrole":"xlinkArcrole",xlinkHref:1,"xlink:href":"xlinkHref",xlinkRole:1,"xlink:role":"xlinkRole",xlinkShow:1,"xlink:show":"xlinkShow",xlinkTitle:1,"xlink:title":"xlinkTitle",xlinkType:1,"xlink:type":"xlinkType",xmlBase:1,"xml:base":"xmlBase",xmlLang:1,"xml:lang":"xmlLang",xmlns:0,"xml:space":"xmlSpace",xmlnsXlink:1,"xmlns:xlink":"xmlnsXlink",xmlSpace:1,y1:0,y2:0,y:0,yChannelSelector:1,z:0,zoomAndPan:1};const nl=0,Xt=1,sa=2,oa=3,mi=4,al=5,il=6;function Eh(e){return Fe.hasOwnProperty(e)?Fe[e]:null}function ze(e,t,r,n,a,i,s){this.acceptsBooleans=t===sa||t===oa||t===mi,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}const Fe={},Ch=["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"];Ch.forEach(e=>{Fe[e]=new ze(e,nl,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(([e,t])=>{Fe[e]=new ze(e,Xt,!1,t,null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(e=>{Fe[e]=new ze(e,sa,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(e=>{Fe[e]=new ze(e,sa,!1,e,null,!1,!1)});["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(e=>{Fe[e]=new ze(e,oa,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(e=>{Fe[e]=new ze(e,oa,!0,e,null,!1,!1)});["capture","download"].forEach(e=>{Fe[e]=new ze(e,mi,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(e=>{Fe[e]=new ze(e,il,!1,e,null,!1,!1)});["rowSpan","start"].forEach(e=>{Fe[e]=new ze(e,al,!1,e.toLowerCase(),null,!1,!1)});const vi=/[\-\:]([a-z])/g,gi=e=>e[1].toUpperCase();["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(e=>{const t=e.replace(vi,gi);Fe[t]=new ze(t,Xt,!1,e,null,!1,!1)});["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(e=>{const t=e.replace(vi,gi);Fe[t]=new ze(t,Xt,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(e=>{const t=e.replace(vi,gi);Fe[t]=new ze(t,Xt,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(e=>{Fe[e]=new ze(e,Xt,!1,e.toLowerCase(),null,!1,!1)});const _h="xlinkHref";Fe[_h]=new ze("xlinkHref",Xt,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(e=>{Fe[e]=new ze(e,Xt,!1,e.toLowerCase(),null,!0,!0)});const{CAMELCASE:jh,SAME:Th,possibleStandardNames:ds}=ia,kh=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",Mh=kh+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",Ih=RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+Mh+"]*$")),Ah=Object.keys(ds).reduce((e,t)=>{const r=ds[t];return r===Th?e[t]=t:r===jh?e[t.toLowerCase()]=t:e[t]=r,e},{});pt.BOOLEAN=oa;pt.BOOLEANISH_STRING=sa;pt.NUMERIC=al;pt.OVERLOADED_BOOLEAN=mi;pt.POSITIVE_NUMERIC=il;pt.RESERVED=nl;pt.STRING=Xt;pt.getPropertyInfo=Eh;pt.isCustomAttribute=Ih;pt.possibleStandardNames=Ah;var yi={},bi={},hs=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,Oh=/\n/g,Ph=/^\s*/,Fh=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Rh=/^:\s*/,Nh=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Dh=/^[;\s]*/,Lh=/^\s+|\s+$/g,Vh=`
`,fs="/",ps="*",nr="",Uh="comment",zh="declaration",$h=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var r=1,n=1;function a(v){var g=v.match(Oh);g&&(r+=g.length);var S=v.lastIndexOf(Vh);n=~S?v.length-S:n+v.length}function i(){var v={line:r,column:n};return function(g){return g.position=new s(v),d(),g}}function s(v){this.start=v,this.end={line:r,column:n},this.source=t.source}s.prototype.content=e;function l(v){var g=new Error(t.source+":"+r+":"+n+": "+v);if(g.reason=v,g.filename=t.source,g.line=r,g.column=n,g.source=e,!t.silent)throw g}function o(v){var g=v.exec(e);if(g){var S=g[0];return a(S),e=e.slice(S.length),g}}function d(){o(Ph)}function u(v){var g;for(v=v||[];g=h();)g!==!1&&v.push(g);return v}function h(){var v=i();if(!(fs!=e.charAt(0)||ps!=e.charAt(1))){for(var g=2;nr!=e.charAt(g)&&(ps!=e.charAt(g)||fs!=e.charAt(g+1));)++g;if(g+=2,nr===e.charAt(g-1))return l("End of comment missing");var S=e.slice(2,g-2);return n+=2,a(S),e=e.slice(g),n+=2,v({type:Uh,comment:S})}}function p(){var v=i(),g=o(Fh);if(g){if(h(),!o(Rh))return l("property missing ':'");var S=o(Nh),E=v({type:zh,property:ms(g[0].replace(hs,nr)),value:S?ms(S[0].replace(hs,nr)):nr});return o(Dh),E}}function x(){var v=[];u(v);for(var g;g=p();)g!==!1&&(v.push(g),u(v));return v}return d(),x()};function ms(e){return e?e.replace(Lh,nr):nr}var Bh=le&&le.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bi,"__esModule",{value:!0});var Hh=Bh($h);function qh(e,t){var r=null;if(!e||typeof e!="string")return r;var n=(0,Hh.default)(e),a=typeof t=="function";return n.forEach(function(i){if(i.type==="declaration"){var s=i.property,l=i.value;a?t(s,l,i):l&&(r=r||{},r[s]=l)}}),r}bi.default=qh;var la={};Object.defineProperty(la,"__esModule",{value:!0});la.camelCase=void 0;var Wh=/^--[a-zA-Z0-9-]+$/,Gh=/-([a-z])/g,Xh=/^[^-]+$/,Yh=/^-(webkit|moz|ms|o|khtml)-/,Kh=/^-(ms)-/,Qh=function(e){return!e||Xh.test(e)||Wh.test(e)},Zh=function(e,t){return t.toUpperCase()},vs=function(e,t){return"".concat(t,"-")},Jh=function(e,t){return t===void 0&&(t={}),Qh(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(Kh,vs):e=e.replace(Yh,vs),e.replace(Gh,Zh))};la.camelCase=Jh;var ef=le&&le.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},tf=ef(bi),rf=la;function za(e,t){var r={};return!e||typeof e!="string"||(0,tf.default)(e,function(n,a){n&&a&&(r[(0,rf.camelCase)(n,t)]=a)}),r}za.default=za;var nf=za;(function(e){var t=le&&le.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.returnFirstArg=e.canTextBeChildOfNode=e.ELEMENTS_WITH_NO_TEXT_CHILDREN=e.PRESERVE_CUSTOM_ATTRIBUTES=e.setStyleProp=e.isCustomComponent=void 0;var r=b,n=t(nf),a=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);function i(u,h){return u.includes("-")?!a.has(u):!!(h&&typeof h.is=="string")}e.isCustomComponent=i;var s={reactCompat:!0};function l(u,h){if(typeof u=="string"){if(!u.trim()){h.style={};return}try{h.style=(0,n.default)(u,s)}catch{h.style={}}}}e.setStyleProp=l,e.PRESERVE_CUSTOM_ATTRIBUTES=Number(r.version.split(".")[0])>=16,e.ELEMENTS_WITH_NO_TEXT_CHILDREN=new Set(["tr","tbody","thead","tfoot","colgroup","table","head","html","frameset"]);var o=function(u){return!e.ELEMENTS_WITH_NO_TEXT_CHILDREN.has(u.name)};e.canTextBeChildOfNode=o;var d=function(u){return u};e.returnFirstArg=d})(yi);Object.defineProperty(aa,"__esModule",{value:!0});var zr=pt,gs=yi,af=["checked","value"],sf=["input","select","textarea"],of={reset:!0,submit:!0};function lf(e,t){e===void 0&&(e={});var r={},n=!!(e.type&&of[e.type]);for(var a in e){var i=e[a];if((0,zr.isCustomAttribute)(a)){r[a]=i;continue}var s=a.toLowerCase(),l=ys(s);if(l){var o=(0,zr.getPropertyInfo)(l);switch(af.includes(l)&&sf.includes(t)&&!n&&(l=ys("default"+s)),r[l]=i,o&&o.type){case zr.BOOLEAN:r[l]=!0;break;case zr.OVERLOADED_BOOLEAN:i===""&&(r[l]=!0);break}continue}gs.PRESERVE_CUSTOM_ATTRIBUTES&&(r[a]=i)}return(0,gs.setStyleProp)(e.style,r),r}aa.default=lf;function ys(e){return zr.possibleStandardNames[e]}var xi={},cf=le&&le.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xi,"__esModule",{value:!0});var _a=b,uf=cf(aa),qr=yi,df={cloneElement:_a.cloneElement,createElement:_a.createElement,isValidElement:_a.isValidElement};function sl(e,t){t===void 0&&(t={});for(var r=[],n=typeof t.replace=="function",a=t.transform||qr.returnFirstArg,i=t.library||df,s=i.cloneElement,l=i.createElement,o=i.isValidElement,d=e.length,u=0;u<d;u++){var h=e[u];if(n){var p=t.replace(h,u);if(o(p)){d>1&&(p=s(p,{key:p.key||u})),r.push(a(p,h,u));continue}}if(h.type==="text"){var x=!h.data.trim().length;if(x&&h.parent&&!(0,qr.canTextBeChildOfNode)(h.parent)||t.trim&&x)continue;r.push(a(h.data,h,u));continue}var v=h,g={};hf(v)?((0,qr.setStyleProp)(v.attribs.style,v.attribs),g=v.attribs):v.attribs&&(g=(0,uf.default)(v.attribs,v.name));var S=void 0;switch(h.type){case"script":case"style":h.children[0]&&(g.dangerouslySetInnerHTML={__html:h.children[0].data});break;case"tag":h.name==="textarea"&&h.children[0]?g.defaultValue=h.children[0].data:h.children&&h.children.length&&(S=sl(h.children,t));break;default:continue}d>1&&(g.key=u),r.push(a(l(h.name,g,S),h,u))}return r.length===1?r[0]:r}xi.default=sl;function hf(e){return qr.PRESERVE_CUSTOM_ATTRIBUTES&&e.type==="tag"&&(0,qr.isCustomComponent)(e.name,e.attribs)}var ol={},J={},Yt=le&&le.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wr=le&&le.__assign||function(){return Wr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Wr.apply(this,arguments)};Object.defineProperty(J,"__esModule",{value:!0});J.cloneNode=J.hasChildren=J.isDocument=J.isDirective=J.isComment=J.isText=J.isCDATA=J.isTag=J.Element=J.Document=J.CDATA=J.NodeWithChildren=J.ProcessingInstruction=J.Comment=J.Text=J.DataNode=J.Node=void 0;var We=pn,wi=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(t){this.prev=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(t){this.next=t},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(t){return t===void 0&&(t=!1),Si(this,t)},e}();J.Node=wi;var ca=function(e){Yt(t,e);function t(r){var n=e.call(this)||this;return n.data=r,n}return Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(r){this.data=r},enumerable:!1,configurable:!0}),t}(wi);J.DataNode=ca;var ll=function(e){Yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=We.ElementType.Text,r}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(ca);J.Text=ll;var cl=function(e){Yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=We.ElementType.Comment,r}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(ca);J.Comment=cl;var ul=function(e){Yt(t,e);function t(r,n){var a=e.call(this,n)||this;return a.name=r,a.type=We.ElementType.Directive,a}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(ca);J.ProcessingInstruction=ul;var ua=function(e){Yt(t,e);function t(r){var n=e.call(this)||this;return n.children=r,n}return Object.defineProperty(t.prototype,"firstChild",{get:function(){var r;return(r=this.children[0])!==null&&r!==void 0?r:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(r){this.children=r},enumerable:!1,configurable:!0}),t}(wi);J.NodeWithChildren=ua;var dl=function(e){Yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=We.ElementType.CDATA,r}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(ua);J.CDATA=dl;var hl=function(e){Yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=We.ElementType.Root,r}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(ua);J.Document=hl;var fl=function(e){Yt(t,e);function t(r,n,a,i){a===void 0&&(a=[]),i===void 0&&(i=r==="script"?We.ElementType.Script:r==="style"?We.ElementType.Style:We.ElementType.Tag);var s=e.call(this,a)||this;return s.name=r,s.attribs=n,s.type=i,s}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(r){this.name=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var r=this;return Object.keys(this.attribs).map(function(n){var a,i;return{name:n,value:r.attribs[n],namespace:(a=r["x-attribsNamespace"])===null||a===void 0?void 0:a[n],prefix:(i=r["x-attribsPrefix"])===null||i===void 0?void 0:i[n]}})},enumerable:!1,configurable:!0}),t}(ua);J.Element=fl;function pl(e){return(0,We.isTag)(e)}J.isTag=pl;function ml(e){return e.type===We.ElementType.CDATA}J.isCDATA=ml;function vl(e){return e.type===We.ElementType.Text}J.isText=vl;function gl(e){return e.type===We.ElementType.Comment}J.isComment=gl;function yl(e){return e.type===We.ElementType.Directive}J.isDirective=yl;function bl(e){return e.type===We.ElementType.Root}J.isDocument=bl;function ff(e){return Object.prototype.hasOwnProperty.call(e,"children")}J.hasChildren=ff;function Si(e,t){t===void 0&&(t=!1);var r;if(vl(e))r=new ll(e.data);else if(gl(e))r=new cl(e.data);else if(pl(e)){var n=t?ja(e.children):[],a=new fl(e.name,Wr({},e.attribs),n);n.forEach(function(o){return o.parent=a}),e.namespace!=null&&(a.namespace=e.namespace),e["x-attribsNamespace"]&&(a["x-attribsNamespace"]=Wr({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(a["x-attribsPrefix"]=Wr({},e["x-attribsPrefix"])),r=a}else if(ml(e)){var n=t?ja(e.children):[],i=new dl(n);n.forEach(function(d){return d.parent=i}),r=i}else if(bl(e)){var n=t?ja(e.children):[],s=new hl(n);n.forEach(function(d){return d.parent=s}),e["x-mode"]&&(s["x-mode"]=e["x-mode"]),r=s}else if(yl(e)){var l=new ul(e.name,e.data);e["x-name"]!=null&&(l["x-name"]=e["x-name"],l["x-publicId"]=e["x-publicId"],l["x-systemId"]=e["x-systemId"]),r=l}else throw new Error("Not implemented yet: ".concat(e.type));return r.startIndex=e.startIndex,r.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(r.sourceCodeLocation=e.sourceCodeLocation),r}J.cloneNode=Si;function ja(e){for(var t=e.map(function(n){return Si(n,!0)}),r=1;r<t.length;r++)t[r].prev=t[r-1],t[r-1].next=t[r];return t}(function(e){var t=le&&le.__createBinding||(Object.create?function(l,o,d,u){u===void 0&&(u=d);var h=Object.getOwnPropertyDescriptor(o,d);(!h||("get"in h?!o.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return o[d]}}),Object.defineProperty(l,u,h)}:function(l,o,d,u){u===void 0&&(u=d),l[u]=o[d]}),r=le&&le.__exportStar||function(l,o){for(var d in l)d!=="default"&&!Object.prototype.hasOwnProperty.call(o,d)&&t(o,l,d)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var n=pn,a=J;r(J,e);var i={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},s=function(){function l(o,d,u){this.dom=[],this.root=new a.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof d=="function"&&(u=d,d=i),typeof o=="object"&&(d=o,o=void 0),this.callback=o??null,this.options=d??i,this.elementCB=u??null}return l.prototype.onparserinit=function(o){this.parser=o},l.prototype.onreset=function(){this.dom=[],this.root=new a.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},l.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},l.prototype.onerror=function(o){this.handleCallback(o)},l.prototype.onclosetag=function(){this.lastNode=null;var o=this.tagStack.pop();this.options.withEndIndices&&(o.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(o)},l.prototype.onopentag=function(o,d){var u=this.options.xmlMode?n.ElementType.Tag:void 0,h=new a.Element(o,d,void 0,u);this.addNode(h),this.tagStack.push(h)},l.prototype.ontext=function(o){var d=this.lastNode;if(d&&d.type===n.ElementType.Text)d.data+=o,this.options.withEndIndices&&(d.endIndex=this.parser.endIndex);else{var u=new a.Text(o);this.addNode(u),this.lastNode=u}},l.prototype.oncomment=function(o){if(this.lastNode&&this.lastNode.type===n.ElementType.Comment){this.lastNode.data+=o;return}var d=new a.Comment(o);this.addNode(d),this.lastNode=d},l.prototype.oncommentend=function(){this.lastNode=null},l.prototype.oncdatastart=function(){var o=new a.Text(""),d=new a.CDATA([o]);this.addNode(d),o.parent=d,this.lastNode=o},l.prototype.oncdataend=function(){this.lastNode=null},l.prototype.onprocessinginstruction=function(o,d){var u=new a.ProcessingInstruction(o,d);this.addNode(u)},l.prototype.handleCallback=function(o){if(typeof this.callback=="function")this.callback(o,this.dom);else if(o)throw o},l.prototype.addNode=function(o){var d=this.tagStack[this.tagStack.length-1],u=d.children[d.children.length-1];this.options.withStartIndices&&(o.startIndex=this.parser.startIndex),this.options.withEndIndices&&(o.endIndex=this.parser.endIndex),d.children.push(o),u&&(o.prev=u,u.next=o),o.parent=d,this.lastNode=null},l}();e.DomHandler=s,e.default=s})(ol);(function(e){var t=le&&le.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0}),e.htmlToDOM=e.domToReact=e.attributesToProps=e.Text=e.ProcessingInstruction=e.Element=e.Comment=void 0;var r=t(di);e.htmlToDOM=r.default;var n=t(aa);e.attributesToProps=n.default;var a=t(xi);e.domToReact=a.default;var i=ol;Object.defineProperty(e,"Comment",{enumerable:!0,get:function(){return i.Comment}}),Object.defineProperty(e,"Element",{enumerable:!0,get:function(){return i.Element}}),Object.defineProperty(e,"ProcessingInstruction",{enumerable:!0,get:function(){return i.ProcessingInstruction}}),Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return i.Text}});var s={lowerCaseAttributeNames:!1};function l(o,d){if(typeof o!="string")throw new TypeError("First argument must be a string");return o?(0,a.default)((0,r.default)(o,(d==null?void 0:d.htmlparser2)||s),d):[]}e.default=l})(Uo);const bs=Zn(Uo),pf=bs.default||bs;function Re(){return Re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Re.apply(this,arguments)}function Ei(e,t){if(e==null)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)t.indexOf(r=i[n])>=0||(a[r]=e[r]);return a}function Nn(e){var t=b.useRef({fn:e,curr:void 0}).current;if(t.fn=e,!t.curr){var r=Object.create(null);Object.keys(e).forEach(function(n){r[n]=function(){var a;return(a=t.fn[n]).call.apply(a,[t.fn].concat([].slice.call(arguments)))}}),t.curr=r}return t.curr}function $a(e){return b.useReducer(function(t,r){return Re({},t,typeof r=="function"?r(t):r)},e)}b.createContext(void 0);var Ot=typeof window<"u"&&"ontouchstart"in window,Ba=function(e,t,r){return Math.max(Math.min(e,r),t)},Tn=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=0),Ba(e,1*(1-r),Math.max(6,t)*(1+r))},Ha=typeof window>"u"||/ServerSideRendering/.test(navigator&&navigator.userAgent)?b.useEffect:b.useLayoutEffect;function wr(e,t,r){var n=b.useRef(t);n.current=t,b.useEffect(function(){function a(i){n.current(i)}return e&&window.addEventListener(e,a,r),function(){e&&window.removeEventListener(e,a)}},[e])}var mf=["container"];function vf(e){var t=e.container,r=t===void 0?document.body:t,n=Ei(e,mf);return so.createPortal(ee.createElement("div",Re({},n)),r)}function gf(e){return ee.createElement("svg",Re({width:"44",height:"44",viewBox:"0 0 768 768"},e),ee.createElement("path",{d:"M607.5 205.5l-178.5 178.5 178.5 178.5-45 45-178.5-178.5-178.5 178.5-45-45 178.5-178.5-178.5-178.5 45-45 178.5 178.5 178.5-178.5z"}))}function yf(e){return ee.createElement("svg",Re({width:"44",height:"44",viewBox:"0 0 768 768"},e),ee.createElement("path",{d:"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z"}))}function bf(e){return ee.createElement("svg",Re({width:"44",height:"44",viewBox:"0 0 768 768"},e),ee.createElement("path",{d:"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z"}))}function xf(){return b.useEffect(function(){var e=document.body.style,t=e.overflow;return e.overflow="hidden",function(){e.overflow=t}},[]),null}function xs(e){var t=e.touches[0],r=t.clientX,n=t.clientY;if(e.touches.length>=2){var a=e.touches[1],i=a.clientX,s=a.clientY;return[(r+i)/2,(n+s)/2,Math.sqrt(Math.pow(i-r,2)+Math.pow(s-n,2))]}return[r,n,0]}var zt=function(e,t,r,n){var a=r*t,i=(a-n)/2,s=void 0,l=e;return a<=n?(s=1,l=0):e>0&&i-e<=0?(s=2,l=i):e<0&&i+e<=0&&(s=3,l=-i),[s,l]};function Ta(e,t,r,n,a,i,s,l,o,d){s===void 0&&(s=innerWidth/2),l===void 0&&(l=innerHeight/2),o===void 0&&(o=0),d===void 0&&(d=0);var u=zt(e,i,r,innerWidth)[0],h=zt(t,i,n,innerHeight),p=innerWidth/2,x=innerHeight/2;return{x:s-i/a*(s-(p+e))-p+(n/r>=3&&r*i===innerWidth?0:u?o/2:o),y:l-i/a*(l-(x+t))-x+(h[0]?d/2:d),lastCX:s,lastCY:l}}function qa(e,t,r){var n=e%180!=0;return n?[r,t,n]:[t,r,n]}function ka(e,t,r){var n=qa(r,innerWidth,innerHeight),a=n[0],i=n[1],s=0,l=a,o=i,d=e/t*i,u=t/e*a;return e<a&&t<i?(l=e,o=t):e<a&&t>=i?l=d:e>=a&&t<i||e/t>a/i?o=u:t/e>=3&&!n[2]?s=((o=u)-i)/2:l=d,{width:l,height:o,x:0,y:s,pause:!0}}function kn(e,t){var r=t.leading,n=r!==void 0&&r,a=t.maxWait,i=t.wait,s=i===void 0?a||0:i,l=b.useRef(e);l.current=e;var o=b.useRef(0),d=b.useRef(),u=function(){return d.current&&clearTimeout(d.current)},h=b.useCallback(function(){var p=[].slice.call(arguments),x=Date.now();function v(){o.current=x,u(),l.current.apply(null,p)}var g=o.current,S=x-g;if(g===0&&(n&&v(),o.current=x),a!==void 0){if(S>a)return void v()}else S<s&&(o.current=x);u(),d.current=setTimeout(function(){v(),o.current=0},s)},[s,a,n]);return h.cancel=u,h}var ws=function(e,t,r){return ar(e,t,r,100,function(n){return n},function(){return ar(t,e,r)})},wf=function(e){return 1-Math.pow(1-e,4)};function ar(e,t,r,n,a,i){n===void 0&&(n=400),a===void 0&&(a=wf);var s=t-e;if(s!==0){var l=Date.now(),o=0,d=function(){var h=Math.min(1,(Date.now()-l)/n);r(e+a(h)*s)&&h<1?u():(cancelAnimationFrame(o),h>=1&&i&&i())};u()}function u(){o=requestAnimationFrame(d)}}var Sf={T:0,L:0,W:0,H:0,FIT:void 0},xl=function(){var e=b.useRef(!1);return b.useEffect(function(){return e.current=!0,function(){e.current=!1}},[]),e},Ef=["className"];function Cf(e){var t=e.className,r=Ei(e,Ef);return ee.createElement("div",Re({className:"PhotoView__Spinner "+t},r),ee.createElement("svg",{viewBox:"0 0 32 32",width:"36",height:"36",fill:"white"},ee.createElement("path",{opacity:".25",d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"}),ee.createElement("path",{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z"})))}var _f=["src","loaded","broken","className","onPhotoLoad","loadingElement","brokenElement"];function jf(e){var t=e.src,r=e.loaded,n=e.broken,a=e.className,i=e.onPhotoLoad,s=e.loadingElement,l=e.brokenElement,o=Ei(e,_f),d=xl();return t&&!n?ee.createElement(ee.Fragment,null,ee.createElement("img",Re({className:"PhotoView__Photo"+(a?" "+a:""),src:t,onLoad:function(u){var h=u.target;d.current&&i({loaded:!0,naturalWidth:h.naturalWidth,naturalHeight:h.naturalHeight})},onError:function(){d.current&&i({broken:!0})},alt:""},o)),!r&&(ee.createElement("span",{className:"PhotoView__icon"},s)||ee.createElement(Cf,{className:"PhotoView__icon"}))):l?ee.createElement("span",{className:"PhotoView__icon"},typeof l=="function"?l({src:t}):l):null}var Tf={naturalWidth:void 0,naturalHeight:void 0,width:void 0,height:void 0,loaded:void 0,broken:!1,x:0,y:0,touched:!1,maskTouched:!1,rotate:0,scale:1,CX:0,CY:0,lastX:0,lastY:0,lastCX:0,lastCY:0,lastScale:1,touchTime:0,touchLength:0,pause:!0,stopRaf:!0,reach:void 0};function kf(e){var t=e.item,r=t.src,n=t.render,a=t.width,i=a===void 0?0:a,s=t.height,l=s===void 0?0:s,o=t.originRef,d=e.visible,u=e.speed,h=e.easing,p=e.wrapClassName,x=e.className,v=e.style,g=e.loadingElement,S=e.brokenElement,E=e.onPhotoTap,f=e.onMaskTap,w=e.onReachMove,j=e.onReachUp,k=e.onPhotoResize,T=e.isActive,A=e.expose,M=$a(Tf),F=M[0],O=M[1],Q=b.useRef(0),re=xl(),ne=F.naturalWidth,ge=ne===void 0?i:ne,pe=F.naturalHeight,ye=pe===void 0?l:pe,Et=F.width,Me=Et===void 0?i:Et,Ge=F.height,y=Ge===void 0?l:Ge,m=F.loaded,N=m===void 0?!r:m,D=F.broken,L=F.x,U=F.y,$=F.touched,V=F.stopRaf,H=F.maskTouched,Y=F.rotate,q=F.scale,ae=F.CX,ie=F.CY,ce=F.lastX,G=F.lastY,X=F.lastCX,Ie=F.lastCY,me=F.lastScale,_e=F.touchTime,$e=F.touchLength,ve=F.pause,Ze=F.reach,mt=Nn({onScale:function(_){return Ne(Tn(_))},onRotate:function(_){Y!==_&&(A({rotate:_}),O(Re({rotate:_},ka(ge,ye,_))))}});function Ne(_,B,oe){q!==_&&(A({scale:_}),O(Re({scale:_},Ta(L,U,Me,y,q,_,B,oe),_<=1&&{x:0,y:0})))}var P=kn(function(_,B,oe){if(oe===void 0&&(oe=0),($||H)&&T){var Qt=qa(Y,Me,y),Ct=Qt[0],it=Qt[1];if(oe===0&&Q.current===0){var Oe=Math.abs(_-ae)<=20,Xe=Math.abs(B-ie)<=20;if(Oe&&Xe)return void O({lastCX:_,lastCY:B});Q.current=Oe?B>ie?3:2:1}var Zt=_-X,Jt=B-Ie,st=void 0;if(oe===0){var er=zt(Zt+ce,q,Ct,innerWidth)[0],fr=zt(Jt+G,q,it,innerHeight);st=function(Rt,jt,Tt,yt){return jt&&Rt===1||yt==="x"?"x":Tt&&Rt>1||yt==="y"?"y":void 0}(Q.current,er,fr[0],Ze),st!==void 0&&w(st,_,B,q)}if(st==="x"||H)return void O({reach:"x"});var _t=Tn(q+(oe-$e)/100/2*q,ge/Me,.2);A({scale:_t}),O(Re({touchLength:oe,reach:st,scale:_t},Ta(L,U,Me,y,q,_t,_,B,Zt,Jt)))}},{maxWait:8});function he(_){return!V&&!$&&(re.current&&O(Re({},_,{pause:d})),re.current)}var je,xe,Je,vt,Kt,Ft,ur,De,yn=(Kt=function(_){return he({x:_})},Ft=function(_){return he({y:_})},ur=function(_){return re.current&&(A({scale:_}),O({scale:_})),!$&&re.current},De=Nn({X:function(_){return Kt(_)},Y:function(_){return Ft(_)},S:function(_){return ur(_)}}),function(_,B,oe,Qt,Ct,it,Oe,Xe,Zt,Jt,st){var er=qa(Jt,Ct,it),fr=er[0],_t=er[1],Rt=zt(_,Xe,fr,innerWidth),jt=Rt[0],Tt=Rt[1],yt=zt(B,Xe,_t,innerHeight),pr=yt[0],xn=yt[1],mr=Date.now()-st;if(mr>=200||Xe!=Oe||Math.abs(Zt-Oe)>1){var Nt=Ta(_,B,Ct,it,Oe,Xe),kt=Nt.x,tr=Nt.y,et=jt?Tt:kt!==_?kt:null,vr=pr?xn:tr!==B?tr:null;return et!==null&&ar(_,et,De.X),vr!==null&&ar(B,vr,De.Y),void(Xe!=Oe&&ar(Oe,Xe,De.S))}var rr=(_-oe)/mr,Dt=(B-Qt)/mr,Lt=Math.sqrt(Math.pow(rr,2)+Math.pow(Dt,2)),Mt=!1,It=!1;(function(ot,Le){var Ve=ot,At=0,lt=void 0,tt=0,gr=function(Fr){lt||(lt=Fr);var Rr=Fr-lt,Li=Math.sign(ot),Vi=-.001*Li,Ui=Math.sign(-Ve)*Math.pow(Ve,2)*2e-4,ac=Ve*Rr+(Vi+Ui)*Math.pow(Rr,2)/2;At+=ac,lt=Fr,Li*(Ve+=(Vi+Ui)*Rr)<=0?rt():Le(At)?bt():rt()};function bt(){tt=requestAnimationFrame(gr)}function rt(){cancelAnimationFrame(tt)}bt()})(Lt,function(ot){var Le=_+ot*(rr/Lt),Ve=B+ot*(Dt/Lt),At=zt(Le,Oe,fr,innerWidth),lt=At[0],tt=At[1],gr=zt(Ve,Oe,_t,innerHeight),bt=gr[0],rt=gr[1];if(lt&&!Mt&&(Mt=!0,jt?ar(Le,tt,De.X):ws(tt,Le+(Le-tt),De.X)),bt&&!It&&(It=!0,pr?ar(Ve,rt,De.Y):ws(rt,Ve+(Ve-rt),De.Y)),Mt&&It)return!1;var Fr=Mt||De.X(tt),Rr=It||De.Y(rt);return Fr&&Rr})}),dr=(je=E,xe=function(_,B){Ze||Ne(q!==1?1:Math.max(2,ge/Me),_,B)},Je=b.useRef(0),vt=kn(function(){Je.current=0,je.apply(void 0,[].slice.call(arguments))},{wait:300}),function(){var _=[].slice.call(arguments);Je.current+=1,vt.apply(void 0,_),Je.current>=2&&(vt.cancel(),Je.current=0,xe.apply(void 0,_))});function hr(_,B){if(Q.current=0,($||H)&&T){O({touched:!1,maskTouched:!1,pause:!1,stopRaf:!1,reach:void 0});var oe=Tn(q,ge/Me);if(yn(L,U,ce,G,Me,y,q,oe,me,Y,_e),j(_,B),ae===_&&ie===B){if($)return void dr(_,B);H&&f(_,B)}}}function Pr(_,B,oe){oe===void 0&&(oe=0),O({touched:!0,CX:_,CY:B,lastCX:_,lastCY:B,lastX:L,lastY:U,lastScale:q,touchLength:oe,touchTime:Date.now()})}function bn(_){O({maskTouched:!0,CX:_.clientX,CY:_.clientY,lastX:L,lastY:U})}wr(Ot?void 0:"mousemove",function(_){_.preventDefault(),P(_.clientX,_.clientY)}),wr(Ot?void 0:"mouseup",function(_){hr(_.clientX,_.clientY)}),wr(Ot?"touchmove":void 0,function(_){_.preventDefault();var B=xs(_);P.apply(void 0,B)},{passive:!1}),wr(Ot?"touchend":void 0,function(_){var B=_.changedTouches[0];hr(B.clientX,B.clientY)},{passive:!1}),wr("resize",kn(function(){N&&!$&&(O(ka(ge,ye,Y)),k())},{maxWait:8})),Ha(function(){T&&A(Re({scale:q,rotate:Y},mt))},[T]);var gt=function(_,B,oe,Qt,Ct,it,Oe,Xe,Zt,Jt){var st=function(kt,tr,et,vr,rr){var Dt=b.useRef(!1),Lt=$a({lead:!0,scale:et}),Mt=Lt[0],It=Mt.lead,ot=Mt.scale,Le=Lt[1],Ve=kn(function(At){try{return rr(!0),Le({lead:!1,scale:At}),Promise.resolve()}catch(lt){return Promise.reject(lt)}},{wait:vr});return Ha(function(){Dt.current?(rr(!1),Le({lead:!0}),Ve(et)):Dt.current=!0},[et]),It?[kt*ot,tr*ot,et/ot]:[kt*et,tr*et,1]}(it,Oe,Xe,Zt,Jt),er=st[0],fr=st[1],_t=st[2],Rt=function(kt,tr,et,vr,rr){var Dt=b.useState(Sf),Lt=Dt[0],Mt=Dt[1],It=b.useState(0),ot=It[0],Le=It[1],Ve=b.useRef(),At=Nn({OK:function(){return kt&&Le(4)}});function lt(tt){rr(!1),Le(tt)}return b.useEffect(function(){if(Ve.current||(Ve.current=Date.now()),et){if(function(tt,gr){var bt=tt&&tt.current;if(bt&&bt.nodeType===1){var rt=bt.getBoundingClientRect();gr({T:rt.top,L:rt.left,W:rt.width,H:rt.height,FIT:bt.tagName==="IMG"?getComputedStyle(bt).objectFit:void 0})}}(tr,Mt),kt)return Date.now()-Ve.current<250?(Le(1),requestAnimationFrame(function(){Le(2),requestAnimationFrame(function(){return lt(3)})}),void setTimeout(At.OK,vr)):void Le(4);lt(5)}},[kt,et]),[ot,Lt]}(_,B,oe,Zt,Jt),jt=Rt[0],Tt=Rt[1],yt=Tt.W,pr=Tt.FIT,xn=innerWidth/2,mr=innerHeight/2,Nt=jt<3||jt>4;return[Nt?yt?Tt.L:xn:Qt+(xn-it*Xe/2),Nt?yt?Tt.T:mr:Ct+(mr-Oe*Xe/2),er,Nt&&pr?er*(Tt.H/yt):fr,jt===0?_t:Nt?yt/(it*Xe)||.01:_t,Nt?pr?1:0:1,jt,pr]}(d,o,N,L,U,Me,y,q,u,function(_){return O({pause:_})}),K=gt[4],fe=gt[6],Te="transform "+u+"ms "+h,Se={className:x,onMouseDown:Ot?void 0:function(_){_.stopPropagation(),_.button===0&&Pr(_.clientX,_.clientY,0)},onTouchStart:Ot?function(_){_.stopPropagation(),Pr.apply(void 0,xs(_))}:void 0,onWheel:function(_){if(!Ze){var B=Tn(q-_.deltaY/100/2,ge/Me);O({stopRaf:!0}),Ne(B,_.clientX,_.clientY)}},style:{width:gt[2],height:gt[3],opacity:gt[5],objectFit:fe===4?void 0:gt[7],transform:Y?"rotate("+Y+"deg)":void 0,transition:fe>2?Te+", opacity "+u+"ms ease, height "+(fe<4?u/2:fe>4?u:0)+"ms "+h:void 0}};return ee.createElement("div",{className:"PhotoView__PhotoWrap"+(p?" "+p:""),style:v,onMouseDown:!Ot&&T?bn:void 0,onTouchStart:Ot&&T?function(_){return bn(_.touches[0])}:void 0},ee.createElement("div",{className:"PhotoView__PhotoBox",style:{transform:"matrix("+K+", 0, 0, "+K+", "+gt[0]+", "+gt[1]+")",transition:$||ve?void 0:Te,willChange:T?"transform":void 0}},r?ee.createElement(jf,Re({src:r,loaded:N,broken:D},Se,{onPhotoLoad:function(_){O(Re({},_,_.loaded&&ka(_.naturalWidth||0,_.naturalHeight||0,Y)))},loadingElement:g,brokenElement:S})):n&&n({attrs:Se,scale:K,rotate:Y})))}var Ss={x:0,touched:!1,pause:!1,lastCX:void 0,lastCY:void 0,bg:void 0,lastBg:void 0,overlay:!0,minimal:!0,scale:1,rotate:0};function Mf(e){var t=e.loop,r=t===void 0?3:t,n=e.speed,a=e.easing,i=e.photoClosable,s=e.maskClosable,l=s===void 0||s,o=e.maskOpacity,d=o===void 0?1:o,u=e.pullClosable,h=u===void 0||u,p=e.bannerVisible,x=p===void 0||p,v=e.overlayRender,g=e.toolbarRender,S=e.className,E=e.maskClassName,f=e.photoClassName,w=e.photoWrapClassName,j=e.loadingElement,k=e.brokenElement,T=e.images,A=e.index,M=A===void 0?0:A,F=e.onIndexChange,O=e.visible,Q=e.onClose,re=e.afterClose,ne=e.portalContainer,ge=$a(Ss),pe=ge[0],ye=ge[1],Et=b.useState(0),Me=Et[0],Ge=Et[1],y=pe.x,m=pe.touched,N=pe.pause,D=pe.lastCX,L=pe.lastCY,U=pe.bg,$=U===void 0?d:U,V=pe.lastBg,H=pe.overlay,Y=pe.minimal,q=pe.scale,ae=pe.rotate,ie=pe.onScale,ce=pe.onRotate,G=e.hasOwnProperty("index"),X=G?M:Me,Ie=G?F:Ge,me=b.useRef(X),_e=T.length,$e=T[X],ve=typeof r=="boolean"?r:_e>r,Ze=function(K,fe){var Te=b.useReducer(function(oe){return!oe},!1)[1],Se=b.useRef(0),_=function(oe,Qt){var Ct=b.useRef(oe);function it(Oe){Ct.current=Oe}return b.useMemo(function(){(function(Oe){K?(Oe(K),Se.current=1):Se.current=2})(it)},[oe]),[Ct.current,it]}(K),B=_[1];return[_[0],Se.current,function(){Te(),Se.current===2&&(B(!1),fe&&fe()),Se.current=0}]}(O,re),mt=Ze[0],Ne=Ze[1],P=Ze[2];Ha(function(){if(mt)return ye({pause:!0,x:X*-(innerWidth+20)}),void(me.current=X);ye(Ss)},[mt]);var he=Nn({close:function(K){ce&&ce(0),ye({overlay:!0,lastBg:$}),Q(K)},changeIndex:function(K,fe){fe===void 0&&(fe=!1);var Te=ve?me.current+(K-X):K,Se=_e-1,_=Ba(Te,0,Se),B=ve?Te:_,oe=innerWidth+20;ye({touched:!1,lastCX:void 0,lastCY:void 0,x:-oe*B,pause:fe}),me.current=B,Ie&&Ie(ve?K<0?Se:K>Se?0:K:_)}}),je=he.close,xe=he.changeIndex;function Je(K){return K?je():ye({overlay:!H})}function vt(){ye({x:-(innerWidth+20)*X,lastCX:void 0,lastCY:void 0,pause:!0}),me.current=X}function Kt(K,fe,Te,Se){K==="x"?function(_){if(D!==void 0){var B=_-D,oe=B;!ve&&(X===0&&B>0||X===_e-1&&B<0)&&(oe=B/2),ye({touched:!0,lastCX:D,x:-(innerWidth+20)*me.current+oe,pause:!1})}else ye({touched:!0,lastCX:_,x:y,pause:!1})}(fe):K==="y"&&function(_,B){if(L!==void 0){var oe=d===null?null:Ba(d,.01,d-Math.abs(_-L)/100/4);ye({touched:!0,lastCY:L,bg:B===1?oe:d,minimal:B===1})}else ye({touched:!0,lastCY:_,bg:$,minimal:!0})}(Te,Se)}function Ft(K,fe){var Te=K-(D??K),Se=fe-(L??fe),_=!1;if(Te<-40)xe(X+1);else if(Te>40)xe(X-1);else{var B=-(innerWidth+20)*me.current;Math.abs(Se)>100&&Y&&h&&(_=!0,je()),ye({touched:!1,x:B,lastCX:void 0,lastCY:void 0,bg:d,overlay:!!_||H})}}wr("keydown",function(K){if(O)switch(K.key){case"ArrowLeft":xe(X-1,!0);break;case"ArrowRight":xe(X+1,!0);break;case"Escape":je()}});var ur=function(K,fe,Te){return b.useMemo(function(){var Se=K.length;return Te?K.concat(K).concat(K).slice(Se+fe-1,Se+fe+2):K.slice(Math.max(fe-1,0),Math.min(fe+2,Se+1))},[K,fe,Te])}(T,X,ve);if(!mt)return null;var De=H&&!Ne,yn=O?$:V,dr=ie&&ce&&{images:T,index:X,visible:O,onClose:je,onIndexChange:xe,overlayVisible:De,overlay:$e&&$e.overlay,scale:q,rotate:ae,onScale:ie,onRotate:ce},hr=n?n(Ne):400,Pr=a?a(Ne):"cubic-bezier(0.25, 0.8, 0.25, 1)",bn=n?n(3):600,gt=a?a(3):"cubic-bezier(0.25, 0.8, 0.25, 1)";return ee.createElement(vf,{className:"PhotoView-Portal"+(De?"":" PhotoView-Slider__clean")+(O?"":" PhotoView-Slider__willClose")+(S?" "+S:""),role:"dialog",onClick:function(K){return K.stopPropagation()},container:ne},O&&ee.createElement(xf,null),ee.createElement("div",{className:"PhotoView-Slider__Backdrop"+(E?" "+E:"")+(Ne===1?" PhotoView-Slider__fadeIn":Ne===2?" PhotoView-Slider__fadeOut":""),style:{background:yn?"rgba(0, 0, 0, "+yn+")":void 0,transitionTimingFunction:Pr,transitionDuration:(m?0:hr)+"ms",animationDuration:hr+"ms"},onAnimationEnd:P}),x&&ee.createElement("div",{className:"PhotoView-Slider__BannerWrap"},ee.createElement("div",{className:"PhotoView-Slider__Counter"},X+1," / ",_e),ee.createElement("div",{className:"PhotoView-Slider__BannerRight"},g&&dr&&g(dr),ee.createElement(gf,{className:"PhotoView-Slider__toolbarIcon",onClick:je}))),ur.map(function(K,fe){var Te=ve||X!==0?me.current-1+fe:X+fe;return ee.createElement(kf,{key:ve?K.key+"/"+K.src+"/"+Te:K.key,item:K,speed:hr,easing:Pr,visible:O,onReachMove:Kt,onReachUp:Ft,onPhotoTap:function(){return Je(i)},onMaskTap:function(){return Je(l)},wrapClassName:w,className:f,style:{left:(innerWidth+20)*Te+"px",transform:"translate3d("+y+"px, 0px, 0)",transition:m||N?void 0:"transform "+bn+"ms "+gt},loadingElement:j,brokenElement:k,onPhotoResize:vt,isActive:me.current===Te,expose:ye})}),!Ot&&x&&ee.createElement(ee.Fragment,null,(ve||X!==0)&&ee.createElement("div",{className:"PhotoView-Slider__ArrowLeft",onClick:function(){return xe(X-1,!0)}},ee.createElement(yf,null)),(ve||X+1<_e)&&ee.createElement("div",{className:"PhotoView-Slider__ArrowRight",onClick:function(){return xe(X+1,!0)}},ee.createElement(bf,null))),v&&dr&&ee.createElement("div",{className:"PhotoView-Slider__Overlay"},v(dr)))}const If=e=>{const r=new DOMParser().parseFromString(e,"text/html").querySelectorAll("img");return Array.from(r).map(n=>n.getAttribute("src"))},Af=({info:e,handleEntryClick:t,getEntries:r})=>{const n=C(p=>p.activeContent),{handleFetchContent:a,handleToggleStarred:i,handleToggleStatus:s}=ci(),{handleLeftKey:l,handleRightKey:o,handleEscapeKey:d}=Vo(e,t,r);if(!n)return null;const u=n.status==="unread",h=n.starred;return c.jsxs(Ce.Group,{className:"action-buttons",children:[c.jsx(Ce,{icon:c.jsx(Ac,{}),onClick:d,shape:"round",type:"primary"}),c.jsx(Ce,{icon:u?c.jsx(oo,{}):c.jsx(lo,{}),onClick:()=>s(n),type:"primary"}),c.jsx(Ce,{onClick:()=>i(n),type:"primary",icon:h?c.jsx(ii,{style:{color:"#ffcd00"}}):c.jsx(ai,{})}),c.jsx(Ce,{icon:c.jsx(Oc,{}),onClick:l,type:"primary"}),c.jsx(Ce,{icon:c.jsx(Pc,{}),onClick:o,type:"primary"}),c.jsx(Ce,{icon:c.jsx(Fc,{}),onClick:a,shape:"round",type:"primary"})]})},Of=({url:e,text:t})=>{const[r,n]=b.useState(!1),a=()=>n(!0),i=()=>n(!1);return c.jsx(Nc,{to:e,style:{color:"inherit",textDecoration:r?"underline":"none"},onMouseEnter:a,onMouseLeave:i,children:t})},Pf=({node:e,index:t,togglePhotoSlider:r})=>{const[n,a]=b.useState(!1),{isMobileView:i}=ta();return c.jsx("div",{style:{textAlign:"center",position:"relative"},children:c.jsxs("div",{style:{display:"inline-block",position:"relative"},onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:[c.jsx("img",{...e.attribs,alt:e.attribs.alt}),c.jsx(Ce,{icon:c.jsx(Dc,{}),style:{position:"absolute",top:30,right:10,backgroundColor:"rgba(0, 0, 0, 0.5)",opacity:i||n?1:0,transition:"opacity 0.3s"},onClick:s=>{s.preventDefault(),r(t)}})]})})},Ff=(e,t)=>({replace:r=>{if(r.type==="tag"&&r.name==="img"){const n=e.findIndex(a=>a===r.attribs.src);return c.jsx(Pf,{node:r,index:n,togglePhotoSlider:t})}return r}}),Rf=b.forwardRef(({info:e,handleEntryClick:t,getEntries:r,isFilteredEntriesUpdated:n,setIsFilteredEntriesUpdated:a},i)=>{const s=un(),l=C(k=>k.activeContent),o=C(k=>k.fontSize),d=C(k=>k.articleWidth),{setIsArticleFocused:u}=b.useContext(St),[h,p]=b.useState(!1),[x,v]=b.useState(0),g=k=>{v(k),p(T=>!T)};if(!l)return c.jsxs("div",{ref:i,className:"content-empty",children:[c.jsx(Rc,{style:{fontSize:"64px"}}),c.jsx(z.Title,{heading:6,style:{color:"var(--color-text-3)",marginTop:"10px"},children:"ReactFlux"})]});const S=If(l.content),E=Ff(S,g),f=pf(l.content,E),w=l.feed.category.id,j=l.feed.category.title;return c.jsxs("div",{className:"article-content",onBlur:()=>u(!1),onFocus:()=>u(!0),ref:i,children:[c.jsxs("div",{className:"scroll-container",children:[c.jsxs("div",{className:"article-header",style:{width:`${d}%`},children:[c.jsx(z.Title,{className:"article-title",heading:5,children:c.jsx("a",{href:l.url,target:"_blank",rel:"noopener noreferrer",children:l.title})}),c.jsxs("div",{className:"article-meta",children:[c.jsx(z.Text,{children:c.jsx(Of,{url:`/feed/${l.feed.id}`,text:l.feed.title})}),c.jsx(z.Text,{children:` - ${l.author}`}),c.jsx(z.Text,{children:c.jsx(Zr,{size:"small",onClick:()=>{s(`/group/${w}`)},style:{marginLeft:"10px",cursor:"pointer"},children:j})})]}),c.jsx(z.Text,{className:"article-date",children:_r(l.published_at).format("dddd, MMMM D, YYYY [at] h:mm A")}),c.jsx(ut,{})]}),c.jsxs("div",{className:"article-body",style:{fontSize:`${o}rem`,width:`${d}%`},children:[f,c.jsx(Mf,{images:S.map(k=>({src:k,key:k})),visible:h,onClose:()=>{p(!1),u(!0)},index:x,onIndexChange:v})]},l.id)]}),c.jsx(Af,{info:e,handleEntryClick:t,getEntries:r,isFilteredEntriesUpdated:n,setIsFilteredEntriesUpdated:a})]})});var Nf=Object.defineProperty,Df=(e,t)=>{for(var r in t)Nf(e,r,{get:t[r],enumerable:!0})},ft={};Df(ft,{assign:()=>Uf,colors:()=>Wt,createStringInterpolator:()=>Ii,skipAnimation:()=>Tl,to:()=>jl,willAdvance:()=>Ai});var Ci=vn(),W=e=>mn(e,Ci),_i=vn();W.write=e=>mn(e,_i);var da=vn();W.onStart=e=>mn(e,da);var ji=vn();W.onFrame=e=>mn(e,ji);var Ti=vn();W.onFinish=e=>mn(e,Ti);var Er=[];W.setTimeout=(e,t)=>{const r=W.now()+t,n=()=>{const i=Er.findIndex(s=>s.cancel==n);~i&&Er.splice(i,1),Ht-=~i?1:0},a={time:r,handler:e,cancel:n};return Er.splice(wl(r),0,a),Ht+=1,Sl(),a};var wl=e=>~(~Er.findIndex(t=>t.time>e)||~Er.length);W.cancel=e=>{da.delete(e),ji.delete(e),Ti.delete(e),Ci.delete(e),_i.delete(e)};W.sync=e=>{Wa=!0,W.batchedUpdates(e),Wa=!1};W.throttle=e=>{let t;function r(){try{e(...t)}finally{t=null}}function n(...a){t=a,W.onStart(r)}return n.handler=e,n.cancel=()=>{da.delete(r),t=null},n};var ki=typeof window<"u"?window.requestAnimationFrame:()=>{};W.use=e=>ki=e;W.now=typeof performance<"u"?()=>performance.now():Date.now;W.batchedUpdates=e=>e();W.catch=console.error;W.frameLoop="always";W.advance=()=>{W.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):Cl()};var Bt=-1,Ht=0,Wa=!1;function mn(e,t){Wa?(t.delete(e),e(0)):(t.add(e),Sl())}function Sl(){Bt<0&&(Bt=0,W.frameLoop!=="demand"&&ki(El))}function Lf(){Bt=-1}function El(){~Bt&&(ki(El),W.batchedUpdates(Cl))}function Cl(){const e=Bt;Bt=W.now();const t=wl(Bt);if(t&&(_l(Er.splice(0,t),r=>r.handler()),Ht-=t),!Ht){Lf();return}da.flush(),Ci.flush(e?Math.min(64,Bt-e):16.667),ji.flush(),_i.flush(),Ti.flush()}function vn(){let e=new Set,t=e;return{add(r){Ht+=t==e&&!e.has(r)?1:0,e.add(r)},delete(r){return Ht-=t==e&&e.has(r)?1:0,e.delete(r)},flush(r){t.size&&(e=new Set,Ht-=t.size,_l(t,n=>n(r)&&e.add(n)),Ht+=e.size,t=e)}}}function _l(e,t){e.forEach(r=>{try{t(r)}catch(n){W.catch(n)}})}function Ga(){}var Vf=(e,t,r)=>Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0}),I={arr:Array.isArray,obj:e=>!!e&&e.constructor.name==="Object",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",und:e=>e===void 0};function Pt(e,t){if(I.arr(e)){if(!I.arr(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return e===t}var te=(e,t)=>e.forEach(t);function wt(e,t,r){if(I.arr(e)){for(let n=0;n<e.length;n++)t.call(r,e[n],`${n}`);return}for(const n in e)e.hasOwnProperty(n)&&t.call(r,e[n],n)}var Qe=e=>I.und(e)?[]:I.arr(e)?e:[e];function Gr(e,t){if(e.size){const r=Array.from(e);e.clear(),te(r,t)}}var $r=(e,...t)=>Gr(e,r=>r(...t)),Mi=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Ii,jl,Wt=null,Tl=!1,Ai=Ga,Uf=e=>{e.to&&(jl=e.to),e.now&&(W.now=e.now),e.colors!==void 0&&(Wt=e.colors),e.skipAnimation!=null&&(Tl=e.skipAnimation),e.createStringInterpolator&&(Ii=e.createStringInterpolator),e.requestAnimationFrame&&W.use(e.requestAnimationFrame),e.batchedUpdates&&(W.batchedUpdates=e.batchedUpdates),e.willAdvance&&(Ai=e.willAdvance),e.frameLoop&&(W.frameLoop=e.frameLoop)},Xr=new Set,at=[],Ma=[],Gn=0,ha={get idle(){return!Xr.size&&!at.length},start(e){Gn>e.priority?(Xr.add(e),W.onStart(zf)):(kl(e),W(Xa))},advance:Xa,sort(e){if(Gn)W.onFrame(()=>ha.sort(e));else{const t=at.indexOf(e);~t&&(at.splice(t,1),Ml(e))}},clear(){at=[],Xr.clear()}};function zf(){Xr.forEach(kl),Xr.clear(),W(Xa)}function kl(e){at.includes(e)||Ml(e)}function Ml(e){at.splice($f(at,t=>t.priority>e.priority),0,e)}function Xa(e){const t=Ma;for(let r=0;r<at.length;r++){const n=at[r];Gn=n.priority,n.idle||(Ai(n),n.advance(e),n.idle||t.push(n))}return Gn=0,Ma=at,Ma.length=0,at=t,at.length>0}function $f(e,t){const r=e.findIndex(t);return r<0?e.length:r}var Bf=(e,t,r)=>Math.min(Math.max(r,e),t),Hf={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},ht="[-+]?\\d*\\.?\\d+",Xn=ht+"%";function fa(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var qf=new RegExp("rgb"+fa(ht,ht,ht)),Wf=new RegExp("rgba"+fa(ht,ht,ht,ht)),Gf=new RegExp("hsl"+fa(ht,Xn,Xn)),Xf=new RegExp("hsla"+fa(ht,Xn,Xn,ht)),Yf=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Kf=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Qf=/^#([0-9a-fA-F]{6})$/,Zf=/^#([0-9a-fA-F]{8})$/;function Jf(e){let t;return typeof e=="number"?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=Qf.exec(e))?parseInt(t[1]+"ff",16)>>>0:Wt&&Wt[e]!==void 0?Wt[e]:(t=qf.exec(e))?(br(t[1])<<24|br(t[2])<<16|br(t[3])<<8|255)>>>0:(t=Wf.exec(e))?(br(t[1])<<24|br(t[2])<<16|br(t[3])<<8|_s(t[4]))>>>0:(t=Yf.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=Zf.exec(e))?parseInt(t[1],16)>>>0:(t=Kf.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=Gf.exec(e))?(Es(Cs(t[1]),Mn(t[2]),Mn(t[3]))|255)>>>0:(t=Xf.exec(e))?(Es(Cs(t[1]),Mn(t[2]),Mn(t[3]))|_s(t[4]))>>>0:null}function Ia(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function Es(e,t,r){const n=r<.5?r*(1+t):r+t-r*t,a=2*r-n,i=Ia(a,n,e+1/3),s=Ia(a,n,e),l=Ia(a,n,e-1/3);return Math.round(i*255)<<24|Math.round(s*255)<<16|Math.round(l*255)<<8}function br(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function Cs(e){return(parseFloat(e)%360+360)%360/360}function _s(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(t*255)}function Mn(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function js(e){let t=Jf(e);if(t===null)return e;t=t||0;const r=(t&4278190080)>>>24,n=(t&16711680)>>>16,a=(t&65280)>>>8,i=(t&255)/255;return`rgba(${r}, ${n}, ${a}, ${i})`}var en=(e,t,r)=>{if(I.fun(e))return e;if(I.arr(e))return en({range:e,output:t,extrapolate:r});if(I.str(e.output[0]))return Ii(e);const n=e,a=n.output,i=n.range||[0,1],s=n.extrapolateLeft||n.extrapolate||"extend",l=n.extrapolateRight||n.extrapolate||"extend",o=n.easing||(d=>d);return d=>{const u=tp(d,i);return ep(d,i[u],i[u+1],a[u],a[u+1],o,s,l,n.map)}};function ep(e,t,r,n,a,i,s,l,o){let d=o?o(e):e;if(d<t){if(s==="identity")return d;s==="clamp"&&(d=t)}if(d>r){if(l==="identity")return d;l==="clamp"&&(d=r)}return n===a?n:t===r?e<=t?n:a:(t===-1/0?d=-d:r===1/0?d=d-t:d=(d-t)/(r-t),d=i(d),n===-1/0?d=-d:a===1/0?d=d+n:d=d*(a-n)+n,d)}function tp(e,t){for(var r=1;r<t.length-1&&!(t[r]>=e);++r);return r-1}var rp=(e,t="end")=>r=>{r=t==="end"?Math.min(r,.999):Math.max(r,.001);const n=r*e,a=t==="end"?Math.floor(n):Math.ceil(n);return Bf(0,1,a/e)},Yn=1.70158,In=Yn*1.525,Ts=Yn+1,ks=2*Math.PI/3,Ms=2*Math.PI/4.5,An=e=>e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,np={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>1-(1-e)*(1-e),easeInOutQuad:e=>e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2,easeInCubic:e=>e*e*e,easeOutCubic:e=>1-Math.pow(1-e,3),easeInOutCubic:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1-Math.pow(1-e,4),easeInOutQuart:e=>e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1-Math.pow(1-e,5),easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInExpo:e=>e===0?0:Math.pow(2,10*e-10),easeOutExpo:e=>e===1?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2,easeInCirc:e=>1-Math.sqrt(1-Math.pow(e,2)),easeOutCirc:e=>Math.sqrt(1-Math.pow(e-1,2)),easeInOutCirc:e=>e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2,easeInBack:e=>Ts*e*e*e-Yn*e*e,easeOutBack:e=>1+Ts*Math.pow(e-1,3)+Yn*Math.pow(e-1,2),easeInOutBack:e=>e<.5?Math.pow(2*e,2)*((In+1)*2*e-In)/2:(Math.pow(2*e-2,2)*((In+1)*(e*2-2)+In)+2)/2,easeInElastic:e=>e===0?0:e===1?1:-Math.pow(2,10*e-10)*Math.sin((e*10-10.75)*ks),easeOutElastic:e=>e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e*10-.75)*ks)+1,easeInOutElastic:e=>e===0?0:e===1?1:e<.5?-(Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*Ms))/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*Ms)/2+1,easeInBounce:e=>1-An(1-e),easeOutBounce:An,easeInOutBounce:e=>e<.5?(1-An(1-2*e))/2:(1+An(2*e-1))/2,steps:rp},tn=Symbol.for("FluidValue.get"),kr=Symbol.for("FluidValue.observers"),nt=e=>!!(e&&e[tn]),He=e=>e&&e[tn]?e[tn]():e,Is=e=>e[kr]||null;function ap(e,t){e.eventObserved?e.eventObserved(t):e(t)}function rn(e,t){const r=e[kr];r&&r.forEach(n=>{ap(n,t)})}var Il=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");ip(this,e)}},ip=(e,t)=>Al(e,tn,t);function Ar(e,t){if(e[tn]){let r=e[kr];r||Al(e,kr,r=new Set),r.has(t)||(r.add(t),e.observerAdded&&e.observerAdded(r.size,t))}return t}function nn(e,t){const r=e[kr];if(r&&r.has(t)){const n=r.size-1;n?r.delete(t):e[kr]=null,e.observerRemoved&&e.observerRemoved(n,t)}}var Al=(e,t,r)=>Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0}),Dn=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,sp=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,As=new RegExp(`(${Dn.source})(%|[a-z]+)`,"i"),op=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,pa=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,Ol=e=>{const[t,r]=lp(e);if(!t||Mi())return e;const n=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(n)return n.trim();if(r&&r.startsWith("--")){const a=window.getComputedStyle(document.documentElement).getPropertyValue(r);return a||e}else{if(r&&pa.test(r))return Ol(r);if(r)return r}return e},lp=e=>{const t=pa.exec(e);if(!t)return[,];const[,r,n]=t;return[r,n]},Aa,cp=(e,t,r,n,a)=>`rgba(${Math.round(t)}, ${Math.round(r)}, ${Math.round(n)}, ${a})`,Pl=e=>{Aa||(Aa=Wt?new RegExp(`(${Object.keys(Wt).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map(i=>He(i).replace(pa,Ol).replace(sp,js).replace(Aa,js)),r=t.map(i=>i.match(Dn).map(Number)),a=r[0].map((i,s)=>r.map(l=>{if(!(s in l))throw Error('The arity of each "output" value must be equal');return l[s]})).map(i=>en({...e,output:i}));return i=>{var o;const s=!As.test(t[0])&&((o=t.find(d=>As.test(d)))==null?void 0:o.replace(Dn,""));let l=0;return t[0].replace(Dn,()=>`${a[l++](i)}${s||""}`).replace(op,cp)}},Oi="react-spring: ",Fl=e=>{const t=e;let r=!1;if(typeof t!="function")throw new TypeError(`${Oi}once requires a function parameter`);return(...n)=>{r||(t(...n),r=!0)}},up=Fl(console.warn);function dp(){up(`${Oi}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var hp=Fl(console.warn);function fp(){hp(`${Oi}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function ma(e){return I.str(e)&&(e[0]=="#"||/\d/.test(e)||!Mi()&&pa.test(e)||e in(Wt||{}))}var Pi=Mi()?b.useEffect:b.useLayoutEffect,pp=()=>{const e=b.useRef(!1);return Pi(()=>(e.current=!0,()=>{e.current=!1}),[]),e};function Rl(){const e=b.useState()[1],t=pp();return()=>{t.current&&e(Math.random())}}function mp(e,t){const[r]=b.useState(()=>({inputs:t,result:e()})),n=b.useRef(),a=n.current;let i=a;return i?t&&i.inputs&&vp(t,i.inputs)||(i={inputs:t,result:e()}):i=r,b.useEffect(()=>{n.current=i,a==r&&(r.inputs=r.result=void 0)},[i]),i.result}function vp(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}var Nl=e=>b.useEffect(e,gp),gp=[];function Os(e){const t=b.useRef();return b.useEffect(()=>{t.current=e}),t.current}var an=Symbol.for("Animated:node"),yp=e=>!!e&&e[an]===e,xt=e=>e&&e[an],Fi=(e,t)=>Vf(e,an,t),va=e=>e&&e[an]&&e[an].getPayload(),Dl=class{constructor(){Fi(this,this)}getPayload(){return this.payload||[]}},gn=class extends Dl{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,I.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new gn(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return I.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,I.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},sn=class extends gn{constructor(e){super(0),this._string=null,this._toString=en({output:[e,e]})}static create(e){return new sn(e)}getValue(){const e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(I.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=en({output:[this.getValue(),e]})),this._value=0,super.reset()}},Kn={dependencies:null},ga=class extends Dl{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return wt(this.source,(r,n)=>{yp(r)?t[n]=r.getValue(e):nt(r)?t[n]=He(r):e||(t[n]=r)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&te(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return wt(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){Kn.dependencies&&nt(e)&&Kn.dependencies.add(e);const t=va(e);t&&te(t,r=>this.add(r))}},Ll=class extends ga{constructor(e){super(e)}static create(e){return new Ll(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((r,n)=>r.setValue(e[n])).some(Boolean):(super.setValue(e.map(bp)),!0)}};function bp(e){return(ma(e)?sn:gn).create(e)}function Ya(e){const t=xt(e);return t?t.constructor:I.arr(e)?Ll:ma(e)?sn:gn}var Ps=(e,t)=>{const r=!I.fun(e)||e.prototype&&e.prototype.isReactComponent;return b.forwardRef((n,a)=>{const i=b.useRef(null),s=r&&b.useCallback(v=>{i.current=Sp(a,v)},[a]),[l,o]=wp(n,t),d=Rl(),u=()=>{const v=i.current;if(r&&!v)return;(v?t.applyAnimatedValues(v,l.getValue(!0)):!1)===!1&&d()},h=new xp(u,o),p=b.useRef();Pi(()=>(p.current=h,te(o,v=>Ar(v,h)),()=>{p.current&&(te(p.current.deps,v=>nn(v,p.current)),W.cancel(p.current.update))})),b.useEffect(u,[]),Nl(()=>()=>{const v=p.current;te(v.deps,g=>nn(g,v))});const x=t.getComponentProps(l.getValue());return b.createElement(e,{...x,ref:s})})},xp=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&W.write(this.update)}};function wp(e,t){const r=new Set;return Kn.dependencies=r,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)}),e=new ga(e),Kn.dependencies=null,[e,r]}function Sp(e,t){return e&&(I.fun(e)?e(t):e.current=t),t}var Fs=Symbol.for("AnimatedComponent"),Ep=(e,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:r=a=>new ga(a),getComponentProps:n=a=>a}={})=>{const a={applyAnimatedValues:t,createAnimatedStyle:r,getComponentProps:n},i=s=>{const l=Rs(s)||"Anonymous";return I.str(s)?s=i[s]||(i[s]=Ps(s,a)):s=s[Fs]||(s[Fs]=Ps(s,a)),s.displayName=`Animated(${l})`,s};return wt(e,(s,l)=>{I.arr(e)&&(l=Rs(s)),i[l]=i(s)}),{animated:i}},Rs=e=>I.str(e)?e:e&&I.str(e.displayName)?e.displayName:I.fun(e)&&e.name||null;function ir(e,...t){return I.fun(e)?e(...t):e}var Yr=(e,t)=>e===!0||!!(t&&e&&(I.fun(e)?e(t):Qe(e).includes(t))),Vl=(e,t)=>I.obj(e)?t&&e[t]:e,Ul=(e,t)=>e.default===!0?e[t]:e.default?e.default[t]:void 0,Cp=e=>e,Ri=(e,t=Cp)=>{let r=_p;e.default&&e.default!==!0&&(e=e.default,r=Object.keys(e));const n={};for(const a of r){const i=t(e[a],a);I.und(i)||(n[a]=i)}return n},_p=["config","onProps","onStart","onChange","onPause","onResume","onRest"],jp={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Tp(e){const t={};let r=0;if(wt(e,(n,a)=>{jp[a]||(t[a]=n,r++)}),r)return t}function zl(e){const t=Tp(e);if(t){const r={to:t};return wt(e,(n,a)=>a in t||(r[a]=n)),r}return{...e}}function on(e){return e=He(e),I.arr(e)?e.map(on):ma(e)?ft.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function kp(e){for(const t in e)return!0;return!1}function Ka(e){return I.fun(e)||I.arr(e)&&I.obj(e[0])}function Mp(e,t){var r;(r=e.ref)==null||r.delete(e),t==null||t.delete(e)}function Ip(e,t){var r;t&&e.ref!==t&&((r=e.ref)==null||r.delete(e),t.add(e),e.ref=t)}var Ap={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},Qa={...Ap.default,mass:1,damping:1,easing:np.linear,clamp:!1},Op=class{constructor(){this.velocity=0,Object.assign(this,Qa)}};function Pp(e,t,r){r&&(r={...r},Ns(r,t),t={...r,...t}),Ns(e,t),Object.assign(e,t);for(const s in Qa)e[s]==null&&(e[s]=Qa[s]);let{frequency:n,damping:a}=e;const{mass:i}=e;return I.und(n)||(n<.01&&(n=.01),a<0&&(a=0),e.tension=Math.pow(2*Math.PI/n,2)*i,e.friction=4*Math.PI*a*i/n),e}function Ns(e,t){if(!I.und(t.decay))e.duration=void 0;else{const r=!I.und(t.tension)||!I.und(t.friction);(r||!I.und(t.frequency)||!I.und(t.damping)||!I.und(t.mass))&&(e.duration=void 0,e.decay=void 0),r&&(e.frequency=void 0)}}var Ds=[],Fp=class{constructor(){this.changed=!1,this.values=Ds,this.toValues=null,this.fromValues=Ds,this.config=new Op,this.immediate=!1}};function $l(e,{key:t,props:r,defaultProps:n,state:a,actions:i}){return new Promise((s,l)=>{let o,d,u=Yr(r.cancel??(n==null?void 0:n.cancel),t);if(u)x();else{I.und(r.pause)||(a.paused=Yr(r.pause,t));let v=n==null?void 0:n.pause;v!==!0&&(v=a.paused||Yr(v,t)),o=ir(r.delay||0,t),v?(a.resumeQueue.add(p),i.pause()):(i.resume(),p())}function h(){a.resumeQueue.add(p),a.timeouts.delete(d),d.cancel(),o=d.time-W.now()}function p(){o>0&&!ft.skipAnimation?(a.delayed=!0,d=W.setTimeout(x,o),a.pauseQueue.add(h),a.timeouts.add(d)):x()}function x(){a.delayed&&(a.delayed=!1),a.pauseQueue.delete(h),a.timeouts.delete(d),e<=(a.cancelId||0)&&(u=!0);try{i.start({...r,callId:e,cancel:u},s)}catch(v){l(v)}}})}var Ni=(e,t)=>t.length==1?t[0]:t.some(r=>r.cancelled)?Cr(e.get()):t.every(r=>r.noop)?Bl(e.get()):ct(e.get(),t.every(r=>r.finished)),Bl=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),ct=(e,t,r=!1)=>({value:e,finished:t,cancelled:r}),Cr=e=>({value:e,cancelled:!0,finished:!1});function Hl(e,t,r,n){const{callId:a,parentId:i,onRest:s}=t,{asyncTo:l,promise:o}=r;return!i&&e===l&&!t.reset?o:r.promise=(async()=>{r.asyncId=a,r.asyncTo=e;const d=Ri(t,(S,E)=>E==="onRest"?void 0:S);let u,h;const p=new Promise((S,E)=>(u=S,h=E)),x=S=>{const E=a<=(r.cancelId||0)&&Cr(n)||a!==r.asyncId&&ct(n,!1);if(E)throw S.result=E,h(S),S},v=(S,E)=>{const f=new Ls,w=new Vs;return(async()=>{if(ft.skipAnimation)throw ln(r),w.result=ct(n,!1),h(w),w;x(f);const j=I.obj(S)?{...S}:{...E,to:S};j.parentId=a,wt(d,(T,A)=>{I.und(j[A])&&(j[A]=T)});const k=await n.start(j);return x(f),r.paused&&await new Promise(T=>{r.resumeQueue.add(T)}),k})()};let g;if(ft.skipAnimation)return ln(r),ct(n,!1);try{let S;I.arr(e)?S=(async E=>{for(const f of E)await v(f)})(e):S=Promise.resolve(e(v,n.stop.bind(n))),await Promise.all([S.then(u),p]),g=ct(n.get(),!0,!1)}catch(S){if(S instanceof Ls)g=S.result;else if(S instanceof Vs)g=S.result;else throw S}finally{a==r.asyncId&&(r.asyncId=i,r.asyncTo=i?l:void 0,r.promise=i?o:void 0)}return I.fun(s)&&W.batchedUpdates(()=>{s(g,n,n.item)}),g})()}function ln(e,t){Gr(e.timeouts,r=>r.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var Ls=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},Vs=class extends Error{constructor(){super("SkipAnimationSignal")}},Za=e=>e instanceof Di,Rp=1,Di=class extends Il{constructor(){super(...arguments),this.id=Rp++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=xt(this);return e&&e.getValue()}to(...e){return ft.to(this,e)}interpolate(...e){return dp(),ft.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){rn(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||ha.sort(this),rn(this,{type:"priority",parent:this,priority:e})}},cr=Symbol.for("SpringPhase"),ql=1,Ja=2,ei=4,Oa=e=>(e[cr]&ql)>0,Vt=e=>(e[cr]&Ja)>0,Dr=e=>(e[cr]&ei)>0,Us=(e,t)=>t?e[cr]|=Ja|ql:e[cr]&=~Ja,zs=(e,t)=>t?e[cr]|=ei:e[cr]&=~ei,Np=class extends Di{constructor(e,t){if(super(),this.animation=new Fp,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!I.und(e)||!I.und(t)){const r=I.obj(e)?{...e}:{...t,from:e};I.und(r.default)&&(r.default=!0),this.start(r)}}get idle(){return!(Vt(this)||this._state.asyncTo)||Dr(this)}get goal(){return He(this.animation.to)}get velocity(){const e=xt(this);return e instanceof gn?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return Oa(this)}get isAnimating(){return Vt(this)}get isPaused(){return Dr(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,r=!1;const n=this.animation;let{toValues:a}=n;const{config:i}=n,s=va(n.to);!s&&nt(n.to)&&(a=Qe(He(n.to))),n.values.forEach((d,u)=>{if(d.done)return;const h=d.constructor==sn?1:s?s[u].lastPosition:a[u];let p=n.immediate,x=h;if(!p){if(x=d.lastPosition,i.tension<=0){d.done=!0;return}let v=d.elapsedTime+=e;const g=n.fromValues[u],S=d.v0!=null?d.v0:d.v0=I.arr(i.velocity)?i.velocity[u]:i.velocity;let E;const f=i.precision||(g==h?.005:Math.min(1,Math.abs(h-g)*.001));if(I.und(i.duration))if(i.decay){const w=i.decay===!0?.998:i.decay,j=Math.exp(-(1-w)*v);x=g+S/(1-w)*(1-j),p=Math.abs(d.lastPosition-x)<=f,E=S*j}else{E=d.lastVelocity==null?S:d.lastVelocity;const w=i.restVelocity||f/10,j=i.clamp?0:i.bounce,k=!I.und(j),T=g==h?d.v0>0:g<h;let A,M=!1;const F=1,O=Math.ceil(e/F);for(let Q=0;Q<O&&(A=Math.abs(E)>w,!(!A&&(p=Math.abs(h-x)<=f,p)));++Q){k&&(M=x==h||x>h==T,M&&(E=-E*j,x=h));const re=-i.tension*1e-6*(x-h),ne=-i.friction*.001*E,ge=(re+ne)/i.mass;E=E+ge*F,x=x+E*F}}else{let w=1;i.duration>0&&(this._memoizedDuration!==i.duration&&(this._memoizedDuration=i.duration,d.durationProgress>0&&(d.elapsedTime=i.duration*d.durationProgress,v=d.elapsedTime+=e)),w=(i.progress||0)+v/this._memoizedDuration,w=w>1?1:w<0?0:w,d.durationProgress=w),x=g+i.easing(w)*(h-g),E=(x-d.lastPosition)/e,p=w==1}d.lastVelocity=E,Number.isNaN(x)&&(console.warn("Got NaN while animating:",this),p=!0)}s&&!s[u].done&&(p=!1),p?d.done=!0:t=!1,d.setValue(x,i.round)&&(r=!0)});const l=xt(this),o=l.getValue();if(t){const d=He(n.to);(o!==d||r)&&!i.decay?(l.setValue(d),this._onChange(d)):r&&i.decay&&this._onChange(o),this._stop()}else r&&this._onChange(o)}set(e){return W.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Vt(this)){const{to:e,config:t}=this.animation;W.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let r;return I.und(e)?(r=this.queue||[],this.queue=[]):r=[I.obj(e)?e:{...t,to:e}],Promise.all(r.map(n=>this._update(n))).then(n=>Ni(this,n))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),ln(this._state,e&&this._lastCallId),W.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:r,from:n}=e;r=I.obj(r)?r[t]:r,(r==null||Ka(r))&&(r=void 0),n=I.obj(n)?n[t]:n,n==null&&(n=void 0);const a={to:r,from:n};return Oa(this)||(e.reverse&&([r,n]=[n,r]),n=He(n),I.und(n)?xt(this)||this._set(r):this._set(n)),a}_update({...e},t){const{key:r,defaultProps:n}=this;e.default&&Object.assign(n,Ri(e,(s,l)=>/^on/.test(l)?Vl(s,r):s)),Bs(this,e,"onProps"),Vr(this,"onProps",e,this);const a=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const i=this._state;return $l(++this._lastCallId,{key:r,props:e,defaultProps:n,state:i,actions:{pause:()=>{Dr(this)||(zs(this,!0),$r(i.pauseQueue),Vr(this,"onPause",ct(this,Lr(this,this.animation.to)),this))},resume:()=>{Dr(this)&&(zs(this,!1),Vt(this)&&this._resume(),$r(i.resumeQueue),Vr(this,"onResume",ct(this,Lr(this,this.animation.to)),this))},start:this._merge.bind(this,a)}}).then(s=>{if(e.loop&&s.finished&&!(t&&s.noop)){const l=Wl(e);if(l)return this._update(l,!0)}return s})}_merge(e,t,r){if(t.cancel)return this.stop(!0),r(Cr(this));const n=!I.und(e.to),a=!I.und(e.from);if(n||a)if(t.callId>this._lastToId)this._lastToId=t.callId;else return r(Cr(this));const{key:i,defaultProps:s,animation:l}=this,{to:o,from:d}=l;let{to:u=o,from:h=d}=e;a&&!n&&(!t.default||I.und(u))&&(u=h),t.reverse&&([u,h]=[h,u]);const p=!Pt(h,d);p&&(l.from=h),h=He(h);const x=!Pt(u,o);x&&this._focus(u);const v=Ka(t.to),{config:g}=l,{decay:S,velocity:E}=g;(n||a)&&(g.velocity=0),t.config&&!v&&Pp(g,ir(t.config,i),t.config!==s.config?ir(s.config,i):void 0);let f=xt(this);if(!f||I.und(u))return r(ct(this,!0));const w=I.und(t.reset)?a&&!t.default:!I.und(h)&&Yr(t.reset,i),j=w?h:this.get(),k=on(u),T=I.num(k)||I.arr(k)||ma(k),A=!v&&(!T||Yr(s.immediate||t.immediate,i));if(x){const Q=Ya(u);if(Q!==f.constructor)if(A)f=this._set(k);else throw Error(`Cannot animate between ${f.constructor.name} and ${Q.name}, as the "to" prop suggests`)}const M=f.constructor;let F=nt(u),O=!1;if(!F){const Q=w||!Oa(this)&&p;(x||Q)&&(O=Pt(on(j),k),F=!O),(!Pt(l.immediate,A)&&!A||!Pt(g.decay,S)||!Pt(g.velocity,E))&&(F=!0)}if(O&&Vt(this)&&(l.changed&&!w?F=!0:F||this._stop(o)),!v&&((F||nt(o))&&(l.values=f.getPayload(),l.toValues=nt(u)?null:M==sn?[1]:Qe(k)),l.immediate!=A&&(l.immediate=A,!A&&!w&&this._set(o)),F)){const{onRest:Q}=l;te(Lp,ne=>Bs(this,t,ne));const re=ct(this,Lr(this,o));$r(this._pendingCalls,re),this._pendingCalls.add(r),l.changed&&W.batchedUpdates(()=>{var ne;l.changed=!w,Q==null||Q(re,this),w?ir(s.onRest,re):(ne=l.onStart)==null||ne.call(l,re,this)})}w&&this._set(j),v?r(Hl(t.to,t,this._state,this)):F?this._start():Vt(this)&&!x?this._pendingCalls.add(r):r(Bl(j))}_focus(e){const t=this.animation;e!==t.to&&(Is(this)&&this._detach(),t.to=e,Is(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;nt(t)&&(Ar(t,this),Za(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;nt(e)&&nn(e,this)}_set(e,t=!0){const r=He(e);if(!I.und(r)){const n=xt(this);if(!n||!Pt(r,n.getValue())){const a=Ya(r);!n||n.constructor!=a?Fi(this,a.create(r)):n.setValue(r),n&&W.batchedUpdates(()=>{this._onChange(r,t)})}}return xt(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,Vr(this,"onStart",ct(this,Lr(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),ir(this.animation.onChange,e,this)),ir(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;xt(this).reset(He(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),Vt(this)||(Us(this,!0),Dr(this)||this._resume())}_resume(){ft.skipAnimation?this.finish():ha.start(this)}_stop(e,t){if(Vt(this)){Us(this,!1);const r=this.animation;te(r.values,a=>{a.done=!0}),r.toValues&&(r.onChange=r.onPause=r.onResume=void 0),rn(this,{type:"idle",parent:this});const n=t?Cr(this.get()):ct(this.get(),Lr(this,e??r.to));$r(this._pendingCalls,n),r.changed&&(r.changed=!1,Vr(this,"onRest",n,this))}}};function Lr(e,t){const r=on(t),n=on(e.get());return Pt(n,r)}function Wl(e,t=e.loop,r=e.to){const n=ir(t);if(n){const a=n!==!0&&zl(n),i=(a||e).reverse,s=!a||a.reset;return cn({...e,loop:t,default:!1,pause:void 0,to:!i||Ka(r)?r:void 0,from:s?e.from:void 0,reset:s,...a})}}function cn(e){const{to:t,from:r}=e=zl(e),n=new Set;return I.obj(t)&&$s(t,n),I.obj(r)&&$s(r,n),e.keys=n.size?Array.from(n):null,e}function Dp(e){const t=cn(e);return I.und(t.default)&&(t.default=Ri(t)),t}function $s(e,t){wt(e,(r,n)=>r!=null&&t.add(n))}var Lp=["onStart","onRest","onChange","onPause","onResume"];function Bs(e,t,r){e.animation[r]=t[r]!==Ul(t,r)?Vl(t[r],e.key):void 0}function Vr(e,t,...r){var n,a,i,s;(a=(n=e.animation)[t])==null||a.call(n,...r),(s=(i=e.defaultProps)[t])==null||s.call(i,...r)}var Vp=["onStart","onChange","onRest"],Up=1,zp=class{constructor(e,t){this.id=Up++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,r)=>e[r]=t.get()),e}set(e){for(const t in e){const r=e[t];I.und(r)||this.springs[t].set(r)}}update(e){return e&&this.queue.push(cn(e)),this}start(e){let{queue:t}=this;return e?t=Qe(e).map(cn):this.queue=[],this._flush?this._flush(this,t):(Ql(this,t),ti(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const r=this.springs;te(Qe(t),n=>r[n].stop(!!e))}else ln(this._state,this._lastAsyncId),this.each(r=>r.stop(!!e));return this}pause(e){if(I.und(e))this.start({pause:!0});else{const t=this.springs;te(Qe(e),r=>t[r].pause())}return this}resume(e){if(I.und(e))this.start({pause:!1});else{const t=this.springs;te(Qe(e),r=>t[r].resume())}return this}each(e){wt(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:r}=this._events,n=this._active.size>0,a=this._changed.size>0;(n&&!this._started||a&&!this._started)&&(this._started=!0,Gr(e,([l,o])=>{o.value=this.get(),l(o,this,this._item)}));const i=!n&&this._started,s=a||i&&r.size?this.get():null;a&&t.size&&Gr(t,([l,o])=>{o.value=s,l(o,this,this._item)}),i&&(this._started=!1,Gr(r,([l,o])=>{o.value=s,l(o,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;W.onFrame(this._onFrame)}};function ti(e,t){return Promise.all(t.map(r=>Gl(e,r))).then(r=>Ni(e,r))}async function Gl(e,t,r){const{keys:n,to:a,from:i,loop:s,onRest:l,onResolve:o}=t,d=I.obj(t.default)&&t.default;s&&(t.loop=!1),a===!1&&(t.to=null),i===!1&&(t.from=null);const u=I.arr(a)||I.fun(a)?a:void 0;u?(t.to=void 0,t.onRest=void 0,d&&(d.onRest=void 0)):te(Vp,g=>{const S=t[g];if(I.fun(S)){const E=e._events[g];t[g]=({finished:f,cancelled:w})=>{const j=E.get(S);j?(f||(j.finished=!1),w&&(j.cancelled=!0)):E.set(S,{value:null,finished:f||!1,cancelled:w||!1})},d&&(d[g]=t[g])}});const h=e._state;t.pause===!h.paused?(h.paused=t.pause,$r(t.pause?h.pauseQueue:h.resumeQueue)):h.paused&&(t.pause=!0);const p=(n||Object.keys(e.springs)).map(g=>e.springs[g].start(t)),x=t.cancel===!0||Ul(t,"cancel")===!0;(u||x&&h.asyncId)&&p.push($l(++e._lastAsyncId,{props:t,state:h,actions:{pause:Ga,resume:Ga,start(g,S){x?(ln(h,e._lastAsyncId),S(Cr(e))):(g.onRest=l,S(Hl(u,g,h,e)))}}})),h.paused&&await new Promise(g=>{h.resumeQueue.add(g)});const v=Ni(e,await Promise.all(p));if(s&&v.finished&&!(r&&v.noop)){const g=Wl(t,s,a);if(g)return Ql(e,[g]),Gl(e,g,!0)}return o&&W.batchedUpdates(()=>o(v,e,e.item)),v}function Hs(e,t){const r={...e.springs};return t&&te(Qe(t),n=>{I.und(n.keys)&&(n=cn(n)),I.obj(n.to)||(n={...n,to:void 0}),Kl(r,n,a=>Yl(a))}),Xl(e,r),r}function Xl(e,t){wt(t,(r,n)=>{e.springs[n]||(e.springs[n]=r,Ar(r,e))})}function Yl(e,t){const r=new Np;return r.key=e,t&&Ar(r,t),r}function Kl(e,t,r){t.keys&&te(t.keys,n=>{(e[n]||(e[n]=r(n)))._prepareNode(t)})}function Ql(e,t){te(t,r=>{Kl(e.springs,r,n=>Yl(n,e))})}var ya=({children:e,...t})=>{const r=b.useContext(Qn),n=t.pause||!!r.pause,a=t.immediate||!!r.immediate;t=mp(()=>({pause:n,immediate:a}),[n,a]);const{Provider:i}=Qn;return b.createElement(i,{value:t},e)},Qn=$p(ya,{});ya.Provider=Qn.Provider;ya.Consumer=Qn.Consumer;function $p(e,t){return Object.assign(e,b.createContext(t)),e.Provider._context=e,e.Consumer._context=e,e}var Bp=()=>{const e=[],t=function(n){fp();const a=[];return te(e,(i,s)=>{if(I.und(n))a.push(i.start());else{const l=r(n,i,s);l&&a.push(i.start(l))}}),a};t.current=e,t.add=function(n){e.includes(n)||e.push(n)},t.delete=function(n){const a=e.indexOf(n);~a&&e.splice(a,1)},t.pause=function(){return te(e,n=>n.pause(...arguments)),this},t.resume=function(){return te(e,n=>n.resume(...arguments)),this},t.set=function(n){te(e,(a,i)=>{const s=I.fun(n)?n(i,a):n;s&&a.set(s)})},t.start=function(n){const a=[];return te(e,(i,s)=>{if(I.und(n))a.push(i.start());else{const l=this._getProps(n,i,s);l&&a.push(i.start(l))}}),a},t.stop=function(){return te(e,n=>n.stop(...arguments)),this},t.update=function(n){return te(e,(a,i)=>a.update(this._getProps(n,a,i))),this};const r=function(n,a,i){return I.fun(n)?n(i,a):n};return t._getProps=r,t};function Hp(e,t,r){const n=I.fun(t)&&t;n&&!r&&(r=[]);const a=b.useMemo(()=>n||arguments.length==3?Bp():void 0,[]),i=b.useRef(0),s=Rl(),l=b.useMemo(()=>({ctrls:[],queue:[],flush(E,f){const w=Hs(E,f);return i.current>0&&!l.queue.length&&!Object.keys(w).some(k=>!E.springs[k])?ti(E,f):new Promise(k=>{Xl(E,w),l.queue.push(()=>{k(ti(E,f))}),s()})}}),[]),o=b.useRef([...l.ctrls]),d=[],u=Os(e)||0;b.useMemo(()=>{te(o.current.slice(e,u),E=>{Mp(E,a),E.stop(!0)}),o.current.length=e,h(u,e)},[e]),b.useMemo(()=>{h(0,Math.min(u,e))},r);function h(E,f){for(let w=E;w<f;w++){const j=o.current[w]||(o.current[w]=new zp(null,l.flush)),k=n?n(w,j):t[w];k&&(d[w]=Dp(k))}}const p=o.current.map((E,f)=>Hs(E,d[f])),x=b.useContext(ya),v=Os(x),g=x!==v&&kp(x);Pi(()=>{i.current++,l.ctrls=o.current;const{queue:E}=l;E.length&&(l.queue=[],te(E,f=>f())),te(o.current,(f,w)=>{a==null||a.add(f),g&&f.start({default:x});const j=d[w];j&&(Ip(f,j.ref),f.ref?f.queue.push(j):f.start(j))})}),Nl(()=>()=>{te(l.ctrls,E=>E.stop(!0))});const S=p.map(E=>({...E}));return a?[S,a]:S}function qp(e,t){const r=I.fun(e),[[n],a]=Hp(1,r?e:[e],r?t||[]:t);return r||arguments.length==2?[n,a]:n}var Wp=class extends Di{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=en(...t);const r=this._get(),n=Ya(r);Fi(this,n.create(r))}advance(e){const t=this._get(),r=this.get();Pt(t,r)||(xt(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&qs(this._active)&&Pa(this)}_get(){const e=I.arr(this.source)?this.source.map(He):Qe(He(this.source));return this.calc(...e)}_start(){this.idle&&!qs(this._active)&&(this.idle=!1,te(va(this),e=>{e.done=!1}),ft.skipAnimation?(W.batchedUpdates(()=>this.advance()),Pa(this)):ha.start(this))}_attach(){let e=1;te(Qe(this.source),t=>{nt(t)&&Ar(t,this),Za(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){te(Qe(this.source),e=>{nt(e)&&nn(e,this)}),this._active.clear(),Pa(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=Qe(this.source).reduce((t,r)=>Math.max(t,(Za(r)?r.priority:0)+1),0))}};function Gp(e){return e.idle!==!1}function qs(e){return!e.size||Array.from(e).every(Gp)}function Pa(e){e.idle||(e.idle=!0,te(va(e),t=>{t.done=!0}),rn(e,{type:"idle",parent:e}))}ft.assign({createStringInterpolator:Pl,to:(e,t)=>new Wp(e,t)});var Zl=/^--/;function Xp(e,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!Zl.test(e)&&!(Kr.hasOwnProperty(e)&&Kr[e])?t+"px":(""+t).trim()}var Ws={};function Yp(e,t){if(!e.nodeType||!e.setAttribute)return!1;const r=e.nodeName==="filter"||e.parentNode&&e.parentNode.nodeName==="filter",{style:n,children:a,scrollTop:i,scrollLeft:s,viewBox:l,...o}=t,d=Object.values(o),u=Object.keys(o).map(h=>r||e.hasAttribute(h)?h:Ws[h]||(Ws[h]=h.replace(/([A-Z])/g,p=>"-"+p.toLowerCase())));a!==void 0&&(e.textContent=a);for(const h in n)if(n.hasOwnProperty(h)){const p=Xp(h,n[h]);Zl.test(h)?e.style.setProperty(h,p):e.style[h]=p}u.forEach((h,p)=>{e.setAttribute(h,d[p])}),i!==void 0&&(e.scrollTop=i),s!==void 0&&(e.scrollLeft=s),l!==void 0&&e.setAttribute("viewBox",l)}var Kr={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Kp=(e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1),Qp=["Webkit","Ms","Moz","O"];Kr=Object.keys(Kr).reduce((e,t)=>(Qp.forEach(r=>e[Kp(r,t)]=e[t]),e),Kr);var Zp=/^(matrix|translate|scale|rotate|skew)/,Jp=/^(translate)/,em=/^(rotate|skew)/,Fa=(e,t)=>I.num(e)&&e!==0?e+t:e,Ln=(e,t)=>I.arr(e)?e.every(r=>Ln(r,t)):I.num(e)?e===t:parseFloat(e)===t,tm=class extends ga{constructor({x:e,y:t,z:r,...n}){const a=[],i=[];(e||t||r)&&(a.push([e||0,t||0,r||0]),i.push(s=>[`translate3d(${s.map(l=>Fa(l,"px")).join(",")})`,Ln(s,0)])),wt(n,(s,l)=>{if(l==="transform")a.push([s||""]),i.push(o=>[o,o===""]);else if(Zp.test(l)){if(delete n[l],I.und(s))return;const o=Jp.test(l)?"px":em.test(l)?"deg":"";a.push(Qe(s)),i.push(l==="rotate3d"?([d,u,h,p])=>[`rotate3d(${d},${u},${h},${Fa(p,o)})`,Ln(p,0)]:d=>[`${l}(${d.map(u=>Fa(u,o)).join(",")})`,Ln(d,l.startsWith("scale")?1:0)])}}),a.length&&(n.transform=new rm(a,i)),super(n)}},rm=class extends Il{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return te(this.inputs,(r,n)=>{const a=He(r[0]),[i,s]=this.transforms[n](I.arr(a)?a:r.map(He));e+=" "+i,t=t&&s}),t?"none":e}observerAdded(e){e==1&&te(this.inputs,t=>te(t,r=>nt(r)&&Ar(r,this)))}observerRemoved(e){e==0&&te(this.inputs,t=>te(t,r=>nt(r)&&nn(r,this)))}eventObserved(e){e.type=="change"&&(this._value=null),rn(this,e)}},nm=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];ft.assign({batchedUpdates:so.unstable_batchedUpdates,createStringInterpolator:Pl,colors:Hf});var am=Ep(nm,{applyAnimatedValues:Yp,createAnimatedStyle:e=>new tm(e),getComponentProps:({scrollTop:e,scrollLeft:t,...r})=>r}),im=am.animated,Jl={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function r(){for(var i="",s=0;s<arguments.length;s++){var l=arguments[s];l&&(i=a(i,n(l)))}return i}function n(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return r.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var s="";for(var l in i)t.call(i,l)&&i[l]&&(s=a(s,l));return s}function a(i,s){return s?i?i+" "+s:i+s:i}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})(Jl);var sm=Jl.exports;const ec=Zn(sm);var ri=new Map,On=new WeakMap,Gs=0,om=void 0;function lm(e){return e?(On.has(e)||(Gs+=1,On.set(e,Gs.toString())),On.get(e)):"0"}function cm(e){return Object.keys(e).sort().filter(t=>e[t]!==void 0).map(t=>`${t}_${t==="root"?lm(e.root):e[t]}`).toString()}function um(e){const t=cm(e);let r=ri.get(t);if(!r){const n=new Map;let a;const i=new IntersectionObserver(s=>{s.forEach(l=>{var o;const d=l.isIntersecting&&a.some(u=>l.intersectionRatio>=u);e.trackVisibility&&typeof l.isVisible>"u"&&(l.isVisible=d),(o=n.get(l.target))==null||o.forEach(u=>{u(d,l)})})},e);a=i.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:t,observer:i,elements:n},ri.set(t,r)}return r}function dm(e,t,r={},n=om){if(typeof window.IntersectionObserver>"u"&&n!==void 0){const o=e.getBoundingClientRect();return t(n,{isIntersecting:n,target:e,intersectionRatio:typeof r.threshold=="number"?r.threshold:0,time:0,boundingClientRect:o,intersectionRect:o,rootBounds:o}),()=>{}}const{id:a,observer:i,elements:s}=um(r),l=s.get(e)||[];return s.has(e)||s.set(e,l),l.push(t),i.observe(e),function(){l.splice(l.indexOf(t),1),l.length===0&&(s.delete(e),i.unobserve(e)),s.size===0&&(i.disconnect(),ri.delete(a))}}function tc({threshold:e,delay:t,trackVisibility:r,rootMargin:n,root:a,triggerOnce:i,skip:s,initialInView:l,fallbackInView:o,onChange:d}={}){var u;const[h,p]=b.useState(null),x=b.useRef(),[v,g]=b.useState({inView:!!l,entry:void 0});x.current=d,b.useEffect(()=>{if(s||!h)return;let w;return w=dm(h,(j,k)=>{g({inView:j,entry:k}),x.current&&x.current(j,k),k.isIntersecting&&i&&w&&(w(),w=void 0)},{root:a,rootMargin:n,threshold:e,trackVisibility:r,delay:t},o),()=>{w&&w()}},[Array.isArray(e)?e.toString():e,h,a,n,i,s,r,o,t]);const S=(u=v.entry)==null?void 0:u.target,E=b.useRef();!h&&S&&!i&&!s&&E.current!==S&&(E.current=S,g({inView:!!l,entry:void 0}));const f=[p,v.inView,v.entry];return f.ref=f[0],f.inView=f[1],f.entry=f[2],f}const hm="Left",fm="Right",pm="Up",mm="Down",Sr={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},ni={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},Xs="mousemove",Ys="mouseup",vm="touchend",gm="touchmove",ym="touchstart";function bm(e,t,r,n){return e>t?r>0?fm:hm:n>0?mm:pm}function Ks(e,t){if(t===0)return e;const r=Math.PI/180*t,n=e[0]*Math.cos(r)+e[1]*Math.sin(r),a=e[1]*Math.cos(r)-e[0]*Math.sin(r);return[n,a]}function xm(e,t){const r=u=>{const h="touches"in u;h&&u.touches.length>1||e((p,x)=>{x.trackMouse&&!h&&(document.addEventListener(Xs,n),document.addEventListener(Ys,s));const{clientX:v,clientY:g}=h?u.touches[0]:u,S=Ks([v,g],x.rotationAngle);return x.onTouchStartOrOnMouseDown&&x.onTouchStartOrOnMouseDown({event:u}),Object.assign(Object.assign(Object.assign({},p),ni),{initial:S.slice(),xy:S,start:u.timeStamp||0})})},n=u=>{e((h,p)=>{const x="touches"in u;if(x&&u.touches.length>1)return h;if(u.timeStamp-h.start>p.swipeDuration)return h.swiping?Object.assign(Object.assign({},h),{swiping:!1}):h;const{clientX:v,clientY:g}=x?u.touches[0]:u,[S,E]=Ks([v,g],p.rotationAngle),f=S-h.xy[0],w=E-h.xy[1],j=Math.abs(f),k=Math.abs(w),T=(u.timeStamp||0)-h.start,A=Math.sqrt(j*j+k*k)/(T||1),M=[f/(T||1),w/(T||1)],F=bm(j,k,f,w),O=typeof p.delta=="number"?p.delta:p.delta[F.toLowerCase()]||Sr.delta;if(j<O&&k<O&&!h.swiping)return h;const Q={absX:j,absY:k,deltaX:f,deltaY:w,dir:F,event:u,first:h.first,initial:h.initial,velocity:A,vxvy:M};Q.first&&p.onSwipeStart&&p.onSwipeStart(Q),p.onSwiping&&p.onSwiping(Q);let re=!1;return(p.onSwiping||p.onSwiped||p[`onSwiped${F}`])&&(re=!0),re&&p.preventScrollOnSwipe&&p.trackTouch&&u.cancelable&&u.preventDefault(),Object.assign(Object.assign({},h),{first:!1,eventData:Q,swiping:!0})})},a=u=>{e((h,p)=>{let x;if(h.swiping&&h.eventData){if(u.timeStamp-h.start<p.swipeDuration){x=Object.assign(Object.assign({},h.eventData),{event:u}),p.onSwiped&&p.onSwiped(x);const v=p[`onSwiped${x.dir}`];v&&v(x)}}else p.onTap&&p.onTap({event:u});return p.onTouchEndOrOnMouseUp&&p.onTouchEndOrOnMouseUp({event:u}),Object.assign(Object.assign(Object.assign({},h),ni),{eventData:x})})},i=()=>{document.removeEventListener(Xs,n),document.removeEventListener(Ys,s)},s=u=>{i(),a(u)},l=(u,h)=>{let p=()=>{};if(u&&u.addEventListener){const x=Object.assign(Object.assign({},Sr.touchEventOptions),h.touchEventOptions),v=[[ym,r,x],[gm,n,Object.assign(Object.assign({},x),h.preventScrollOnSwipe?{passive:!1}:{})],[vm,a,x]];v.forEach(([g,S,E])=>u.addEventListener(g,S,E)),p=()=>v.forEach(([g,S])=>u.removeEventListener(g,S))}return p},d={ref:u=>{u!==null&&e((h,p)=>{if(h.el===u)return h;const x={};return h.el&&h.el!==u&&h.cleanUpTouch&&(h.cleanUpTouch(),x.cleanUpTouch=void 0),p.trackTouch&&u&&(x.cleanUpTouch=l(u,p)),Object.assign(Object.assign(Object.assign({},h),{el:u}),x)})}};return t.trackMouse&&(d.onMouseDown=r),[d,l]}function wm(e,t,r,n){return!t.trackTouch||!e.el?(e.cleanUpTouch&&e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:void 0})):e.cleanUpTouch?t.preventScrollOnSwipe!==r.preventScrollOnSwipe||t.touchEventOptions.passive!==r.touchEventOptions.passive?(e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:n(e.el,t)})):e:Object.assign(Object.assign({},e),{cleanUpTouch:n(e.el,t)})}function Sm(e){const{trackMouse:t}=e,r=b.useRef(Object.assign({},ni)),n=b.useRef(Object.assign({},Sr)),a=b.useRef(Object.assign({},n.current));a.current=Object.assign({},n.current),n.current=Object.assign(Object.assign({},Sr),e);let i;for(i in Sr)n.current[i]===void 0&&(n.current[i]=Sr[i]);const[s,l]=b.useMemo(()=>xm(o=>r.current=o(r.current,n.current),{trackMouse:t}),[t]);return r.current=wm(r.current,n.current,a.current,l),s}const Em=({alt:e,borderRadius:t,height:r,src:n,status:a,width:i})=>{const[s,l]=b.useState(!1),{ref:o,inView:d}=tc();return b.useEffect(()=>{if(d&&!s){const u=new Image;u.onload=()=>l(!0),u.onerror=()=>{var p;const h=(p=o.current)==null?void 0:p.parentElement;h&&(h.style.display="none")},u.src=n}},[d,s,n]),c.jsx("div",{className:"image-container",ref:o,children:s?c.jsx("img",{className:a==="unread"?"":"read",src:n,alt:e,style:{width:i,height:r,objectFit:"cover",borderRadius:t}}):c.jsx("div",{className:"skeleton-container",children:c.jsx(Un,{text:{rows:0},image:{style:{width:i,height:r,margin:"0",borderRadius:t}},animation:!0})})})},Cm=({url:e,mini:t})=>c.jsx("img",{className:t?"feed-icon-mini":"feed-icon",src:`https://icons.duckduckgo.com/ip3/${new URL(e).hostname}.ico`,alt:"Feed icon"}),_m=({entry:e,isThumbnail:t})=>{const r=t?{width:"100px",height:"100px"}:{width:"100%",height:"160px"};return e.imgSrc?c.jsx("div",{className:t?"thumbnail":"cover-image",children:c.jsx(Em,{alt:e.id,borderRadius:t?"4px":void 0,src:e.imgSrc,status:e.status,width:r.width,height:r.height})}):null},jm=({entry:e,showFeedIcon:t,mini:r})=>{const n=ec({"article-card-mini-content":r,"article-card-mini-content-padding":r&&t});return c.jsxs("div",{className:n,style:{width:"calc(100% - 32px)"},children:[c.jsx("div",{style:{padding:r?"0 8px 0 0":"0 0 8px 0"},children:c.jsx(_m,{entry:e,isThumbnail:r})}),c.jsxs("div",{className:r?"article-card-mini-content-text":"",children:[c.jsx(z.Text,{className:e.status==="unread"?"title-unread":"title-read",children:e.title}),c.jsxs(z.Text,{className:"article-info",children:[c.jsx("br",{}),t&&c.jsx(Cm,{url:e.feed.site_url,mini:r}),e.feed.title,c.jsx("br",{}),yo(e.published_at)]}),e.starred&&c.jsx(ii,{className:"icon-starred"})]})]})},Tm=({entry:e,handleEntryClick:t,mini:r})=>{const n=C(M=>M.activeContent),a=C(M=>M.showFeedIcon),i=C(M=>M.markReadOnScroll),s=n&&e.id===n.id,{handleToggleStarred:l,handleToggleStatus:o}=ci(),[d,u]=b.useState(0),h=100,p=.5,x=e.starred,v=e.status==="unread",g=Sm({preventScrollOnSwipe:!0,delta:h/2,onSwiping:M=>{const F=Math.min(Math.abs(M.deltaX*p),h)*Math.sign(M.deltaX);u(F)},onSwiped:M=>{M.deltaX>h?l(e).then(()=>se.success(x?"Unmarked as starred":"Marked as starred")):M.deltaX<-h&&o(e).then(()=>se.success(v?"Marked as read":"Marked as unread")),u(0)}}),[S,E]=b.useState(!1),[f,w]=b.useState(!1),j=()=>o(e),k=20,{ref:T}=tc({skip:f,onChange:(M,F)=>{if(!(!i||!v)){if(M)E(!0);else if(S){const{top:O}=F.boundingClientRect;O<k&&(j(),w(!0))}}}}),A=qp({x:d});return b.createElement("div",{...g,className:"article-card",key:e.id},c.jsxs("div",{ref:T,children:[c.jsx(im.div,{className:"swipe-card",style:A,children:c.jsx(Jr,{className:ec("swipe-content","card-custom-style","card-custom-hover-style",{"card-custom-selected-style":s}),"data-entry-id":e.id,hoverable:!0,onClick:()=>t(e),bordered:!1,children:c.jsx(Jr.Meta,{description:c.jsx(jm,{entry:e,showFeedIcon:a,mini:r})})})}),c.jsxs("div",{className:"swipe-actions",children:[c.jsx("div",{className:"swipe-action left",children:x?c.jsx(ii,{style:{color:"#ffcd00"}}):c.jsx(ai,{})}),c.jsx("div",{className:"swipe-action right",children:v?c.jsx(oo,{}):c.jsx(lo,{})})]})]}))},km=({loading:e})=>{const t=C(a=>a.layout),r=t==="large"?2:4,n=a=>c.jsx(Jr,{className:"card-style",cover:t==="large"&&c.jsx("div",{className:"card-cover-style"}),children:c.jsx(Jr.Meta,{description:c.jsx(Un,{loading:e,animation:!0,text:{rows:3,width:150}})})},a);return e?Array.from({length:r},(a,i)=>n(i)):null},rc=e=>{const t=C(h=>h.showAllFeeds),r=C(h=>h.hiddenFeedIds),{entries:n,filterStatus:a,filterString:i,filterType:s,setFilteredEntries:l,setFilterStatus:o,setFilterString:d,setFilterType:u}=b.useContext(St);return b.useEffect(()=>{l([]);const h=Ro(n,s,a,i);l(Hn(h,e,t,r))},[a,i,s]),{setFilterStatus:o,setFilterString:d,setFilterType:u}},Mm=e=>{const{filterString:t,filterType:r}=b.useContext(St),n=C(o=>o.orderDirection),a=C(o=>o.toggleOrderDirection),{isMobileView:i}=ta(),{setFilterString:s,setFilterType:l}=rc(e);return c.jsxs("div",{className:"search-and-sort-bar",children:[c.jsx(dt.Search,{allowClear:!0,placeholder:"Search...",value:t,addBefore:c.jsxs(Ae,{placeholder:"Select type",onChange:l,style:{width:100},value:r,children:[c.jsx(Ae.Option,{value:"0",children:"Title"}),c.jsx(Ae.Option,{value:"1",children:"Content"})]}),onChange:s,style:{width:i?"100%":278,marginLeft:8}}),c.jsx(Qr,{mini:!0,position:"left",content:n==="desc"?"Newest first":"Oldest first",children:c.jsx(Ce,{shape:"circle",size:"small",style:{margin:"0 8px",flexShrink:0},icon:n==="desc"?c.jsx(Lc,{}):c.jsx(Vc,{}),onClick:()=>{const o=n==="desc"?"asc":"desc";a(),Ue("orderDirection",o)}})})]})},Im=b.forwardRef(({info:e,loading:t,getEntries:r,handleEntryClick:n,cardsRef:a},i)=>{const{filteredEntries:s,filterStatus:l,loadMoreUnreadVisible:o,loadMoreVisible:d}=b.useContext(St),{loadingMore:u,handleLoadMore:h}=ui(),x=C(v=>v.layout)==="small";return c.jsxs(c.Fragment,{children:[c.jsx(Mm,{info:e}),c.jsxs("div",{className:"entry-list",ref:i,children:[c.jsx(km,{loading:t}),t?null:c.jsx("div",{ref:a,children:s.map(v=>(Do(v.feed.site_url)||(v.feed.site_url=Lo(v.feed.feed_url)),c.jsx(Tm,{entry:v,handleEntryClick:n,mini:x},v.id)))}),!t&&(l==="all"?d:o)&&c.jsxs(Ce,{className:"load-more-button",loading:u,long:!0,onClick:()=>h(e,r),children:[!u&&c.jsx(Uc,{}),"Load more"]})]})]})}),Am=b.forwardRef(({info:e,refreshArticleList:t,markAllAsRead:r},n)=>{const{entries:a,filteredEntries:i,filterStatus:s,loading:l,setEntries:o,setFilteredEntries:d,setUnreadCount:u,setUnreadEntries:h,unreadEntries:p}=b.useContext(St),{setFilterStatus:x}=rc(e),v=C(f=>f.initData),g=C(f=>f.showStatus),S=async()=>{r().then(()=>{se.success("Marked all as read successfully"),v(),o(a.map(f=>({...f,status:"read"}))),h([]),d(s==="all"?i.map(f=>({...f,status:"read"})):[]),u(0)}).catch(()=>{se.error("Failed to mark all as read")})};b.useEffect(()=>{e.from!=="history"&&x(g)},[g]);const E=f=>{n.current&&n.current.scrollTo(0,0),x(f),d(f==="all"?a:p)};return c.jsxs("div",{className:"entry-panel",children:[!["starred","history"].includes(e.from)&&c.jsx(ao,{focusLock:!0,title:"Mark All As Read?",onOk:S,children:c.jsx(Ce,{icon:c.jsx(Js,{}),shape:"circle"})}),c.jsxs(ba.Group,{disabled:e.from==="history",name:"lang",onChange:f=>E(f),type:"button",value:e.from==="history"?"all":s,children:[c.jsx(ba,{value:"all",children:"ALL"}),c.jsx(ba,{value:"unread",children:"UNREAD"})]}),c.jsx(Ce,{icon:c.jsx(no,{}),loading:l,shape:"circle",onClick:t})]})}),Or=({info:e,getEntries:t,markAllAsRead:r})=>{const n=C(P=>P.activeContent),a=C(P=>P.setActiveContent),i=C(P=>P.setReadCount),s=C(P=>P.setStarredCount),l=C(P=>P.setUnreadToday),o=C(P=>P.setUnreadTotal),d=C(P=>P.updateFeedUnreadCount),u=C(P=>P.updateGroupUnreadCount),h=C(P=>P.showAllFeeds),p=C(P=>P.hiddenFeedIds),x=C(P=>P.orderBy),v=C(P=>P.orderDirection),g=C(P=>P.initData),S=C(P=>P.isInitCompleted),{entries:E,entryDetailRef:f,filteredEntries:w,filterStatus:j,isArticleFocused:k,loading:T,setEntries:A,setFilteredEntries:M,setIsArticleFocused:F,setLoading:O,setLoadMoreUnreadVisible:Q,setLoadMoreVisible:re,setOffset:ne,setTotal:ge,setUnreadCount:pe,setUnreadEntries:ye,setUnreadOffset:Et,total:Me,unreadCount:Ge,unreadEntries:y}=b.useContext(St),{handleFetchContent:m,handleToggleStarred:N,handleToggleStatus:D,handleEntryStatusUpdate:L}=ci(),{parseFirstImage:U}=ui(),[$,V]=b.useState(!1),[H,Y]=b.useState(!1),q=b.useRef(null),ae=b.useRef(null);b.useEffect(()=>{!H||e.from==="history"||setTimeout(()=>{Ne()},200)},[x]),b.useEffect(()=>{H&&setTimeout(()=>{Ne()},200)},[v]),b.useEffect(()=>{M(()=>["all","today","group"].includes(e.from)&&!h?(j==="all"?E:y).filter(he=>!p.includes(he.feed.id)):j==="all"?E:y),V(!0)},[j,p,h]),b.useEffect(()=>{if(!(Ge===0||Me===0))switch(e.from){case"all":h&&o(()=>Ge);break;case"today":l(()=>Ge);break;case"starred":s(()=>Me);break;case"history":i(()=>Me);break;case"feed":{const P=Number.parseInt(e.id);d(P,Ge);break}case"group":{const P=Number.parseInt(e.id);u(P,Ge);break}}},[Me,Ge]);const ie=async P=>{a(null),setTimeout(()=>{a({...P,status:"read"})},200),P.status==="unread"&&(setTimeout(()=>{L(P,"read")},200),xo(P.id,"read").catch(()=>{se.error("Failed to mark entry as read, please try again later"),L(P,"unread")})),f.current&&(f.current.setAttribute("tabIndex","-1"),f.current.focus(),f.current.scrollTo(0,0))},{handleBKey:ce,handleDKey:G,handleEscapeKey:X,handleLeftKey:Ie,handleMKey:me,handleRightKey:_e,handleSKey:$e}=Vo(e,ie,t);b.useEffect(()=>{const P={27:()=>X(q),37:()=>Ie(),39:()=>_e(e),66:()=>ce(),68:()=>G(m),77:()=>me(()=>D(n)),83:()=>$e(()=>N(n))},he=je=>{const xe=P[je.keyCode];xe&&xe()};return k?document.addEventListener("keydown",he):document.removeEventListener("keydown",he),()=>{document.removeEventListener("keydown",he)}},[n,w,k]);const ve=(P,he,je,xe)=>{A(P),ye(he),M(Hn(j==="all"?P:he,e,h,p)),ge(je.data.total),re(P.length<je.data.total),pe(xe.data.total),Q(he.length<xe.data.total)},Ze=(P,he)=>{var je,xe;if((je=P==null?void 0:P.data)!=null&&je.entries&&((xe=he==null?void 0:he.data)==null?void 0:xe.total)>=0){const Je=P.data.entries.map(U),vt=he.data.entries.map(U);ve(Je,vt,P,he)}},mt=async()=>{O(!0);try{const P=await t();if(e.from==="history")Ze(P,P);else{const he=await t(0,"unread");Ze(P,he)}}catch(P){console.error("Error fetching articles:",P)}finally{O(!1)}},Ne=async()=>{if(q.current&&q.current.scrollTo(0,0),ne(0),Et(0),!S){g();return}await mt()};return b.useEffect(()=>{n&&a(null)},[]),b.useEffect(()=>{S&&(mt().then(()=>Y(!0)),F(!0))},[S]),c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"entry-col",children:[c.jsx(Bi,{in:!T,timeout:200,nodeRef:ae,classNames:"fade",children:c.jsx(Im,{info:e,cardsRef:ae,loading:T,getEntries:t,handleEntryClick:ie,ref:q})}),c.jsx(Am,{info:e,refreshArticleList:Ne,markAllAsRead:r,ref:q})]}),c.jsx(Bi,{in:n!=null,timeout:200,nodeRef:f,classNames:"fade",unmountOnExit:!0,children:c.jsx(Rf,{info:e,handleEntryClick:ie,getEntries:t,isFilteredEntriesUpdated:$,setIsFilteredEntriesUpdated:V,ref:f})})]})},Om=()=>{const e=async()=>{const t=await Pu();return de.put(`/v1/users/${t.data.id}/mark-all-as-read`)};return c.jsx(Ir,{children:c.jsx(Or,{info:{from:"all",id:""},getEntries:Hu,markAllAsRead:e})})},Pm=()=>{const e=un(),t=zc();return console.error(t),c.jsx("div",{id:"error-page",style:{top:"30%",position:"relative"},children:c.jsx("div",{children:c.jsx($c,{status:"404",subTitle:"Whoops, that page is gone. ",extra:[c.jsx(Ce,{type:"primary",onClick:()=>e("/"),children:"Back to Home"},"back")]})})})},Fm=()=>{const{id:e}=co(),t=C(s=>s.orderBy),r=C(s=>s.orderDirection),n=C(s=>s.pageSize),a=async(s=0,l=null)=>{const o={baseUrl:`/v1/feeds/${e}/entries`,orderField:t,direction:r,offset:s,limit:n,status:l},d=Mr(o);return de.get(d)},i=async()=>de.put(`/v1/feeds/${id}/mark-all-as-read`);return c.jsx(Ir,{children:c.jsx(Or,{info:{from:"feed",id:e},getEntries:a,markAllAsRead:i})})},Rm=()=>{const{id:e}=co(),t=C(s=>s.orderBy),r=C(s=>s.orderDirection),n=C(s=>s.pageSize),a=async(s=0,l=null)=>{const o={baseUrl:`/v1/categories/${e}/entries`,orderField:t,direction:r,offset:s,limit:n,status:l},d=Mr(o);return de.get(d)},i=async()=>de.put(`/v1/categories/${e}/mark-all-as-read`);return c.jsx(Ir,{children:c.jsx(Or,{info:{from:"group",id:e},getEntries:a,markAllAsRead:i})})},Nm=()=>c.jsx(Ir,{children:c.jsx(Or,{info:{from:"history",id:""},getEntries:wo})}),Dm=e=>{var n;const t=e.getFieldsValue();let r=!0;for(const a of Object.keys(t))if(a!=="password"){const i=(n=t[a])==null?void 0:n.trim();e.setFieldValue(a,i),i||(r=!1)}else t[a]||(r=!1);return r},Pn=(e,t)=>{e.key==="Enter"&&t.submit()},Lm=()=>{const[e]=Bc(),[t,r]=b.useState(!1),[n,a]=b.useState(zn()||"token"),i=un();b.useEffect(()=>{zn()&&i("/")},[i]);const s=async()=>{r(!0);try{(await Qs({url:"/v1/me",method:"get",baseURL:e.getFieldsValue().server,headers:{"X-Auth-Token":e.getFieldsValue().token},auth:{username:e.getFieldsValue().username,password:e.getFieldsValue().password},timeout:5e3})).status===200&&(se.success("Success"),ku(n,e.getFieldsValue()),i("/"))}catch(o){console.error(o),se.error(o.message)}r(!1)},l=()=>{s()};return c.jsx("div",{style:{backgroundColor:"var(--color-bg-1)",height:"100%"},children:c.jsx("div",{style:{backgroundColor:"var(--color-fill-1)",height:"100%"},children:c.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",overflowY:"auto"},children:[c.jsx(io,{style:{fontSize:48,color:"rgb(var(--primary-6))",marginTop:"20px"}}),c.jsx(z.Title,{heading:3,children:"Connect to your server"}),c.jsxs(Jr,{style:{boxShadow:"0 4px 10px rgb(var(--color-bg-3))",padding:"20px",width:"380px",marginTop:"20px"},children:[c.jsxs(we,{autoComplete:"off",form:e,layout:"vertical",onSubmit:()=>{Dm(e)?l():se.error("Please fill in all required fields")},children:[c.jsx(we.Item,{field:"server",label:"Server address",rules:[{required:!0}],onKeyDown:o=>{Pn(o,e)},children:c.jsx(dt,{disabled:t,placeholder:"Please input server address",prefix:c.jsx(Hc,{})})}),n==="token"&&c.jsx(we.Item,{field:"token",label:"API Token",rules:[{required:!0}],onKeyDown:o=>{Pn(o,e)},children:c.jsx(dt,{disabled:t,placeholder:"Please input api token",prefix:c.jsx(Hi,{})})}),n==="user"&&c.jsxs(c.Fragment,{children:[c.jsx(we.Item,{field:"username",label:"Username",rules:[{required:!0}],onKeyDown:o=>{Pn(o,e)},children:c.jsx(dt,{disabled:t,prefix:c.jsx(to,{}),placeholder:"Please input username"})}),c.jsx(we.Item,{field:"password",label:"Password",rules:[{required:!0}],onKeyDown:o=>{Pn(o,e)},children:c.jsx(dt.Password,{disabled:t,prefix:c.jsx(Hi,{}),placeholder:"Please input password"})})]})]}),c.jsx(Ce,{loading:t,type:"primary",long:!0,onClick:l,style:{marginTop:"20px"},children:"Connect"}),c.jsx(ut,{orientation:"center",children:"Or connect with"}),c.jsx(Ce,{type:"secondary",long:!0,onClick:()=>a(n==="token"?"user":"token"),style:{marginTop:"20px"},children:n==="token"?"Username and password":"API Token"})]}),c.jsxs("div",{style:{display:"flex",marginTop:"40px"},children:[c.jsx(z.Text,{disabled:!0,children:"Need more information?"}),c.jsx(qc,{href:"https://miniflux.app/docs/api.html#authentication",style:{fontWeight:"500"},children:"Go to Miniflux official website"})]})]})})})},Vm=({children:e})=>zn()?c.jsx(c.Fragment,{children:e}):c.jsx(uo,{to:"/login"}),Um=()=>c.jsx(Ir,{children:c.jsx(Or,{info:{from:"starred",id:""},getEntries:So})}),zm=()=>{const e=async()=>{const t=await Fn(0,"unread"),r=t.data.entries.map(n=>n.id);if(t.data.total>r.length){const n=t.data.total-r.length,a=Math.ceil(n/100)*100,i=await Fn(r.length,"unread",a);r.push(...i.data.entries.map(s=>s.id))}return bo(r,"read")};return c.jsx(Ir,{children:c.jsx(Or,{info:{from:"today",id:""},getEntries:Fn,markAllAsRead:e})})},$m=ue("homePage"),Bm=[{path:"/all",element:c.jsx(Om,{})},{path:"/today",element:c.jsx(zm,{})},{path:"/starred",element:c.jsx(Um,{})},{path:"/history",element:c.jsx(Nm,{})},{path:"/group/:id",element:c.jsx(Rm,{})},{path:"/feed/:id",element:c.jsx(Fm,{})}],nc=Wc([{path:"/",element:c.jsx(Vm,{children:c.jsx(sh,{})}),errorElement:c.jsx(Pm,{}),children:[...Bm,{index:!0,element:c.jsx(uo,{to:`/${$m}`,replace:!0})}]},{path:"/login",element:c.jsx(Lm,{})}]);Gc.createRoot(document.getElementById("root")).render(c.jsx(Xc,{locale:Yc,children:c.jsx(Kc,{router:nc})}))});export default Hm();
