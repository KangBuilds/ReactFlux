var Ci=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);import{r as m,g as Pn,e as G,c as te,d as Ot,a as ea,M as ne,b as ji,f as Si,u as dn,j as a,B as le,I as Ti,S as Rn,T as at,h as ta,i as _i,D as Tr,k as mt,l as na,m as ki,n as Mi,A as ra,o as aa,p as Ii,q as Ai,s as Pi,t as Y,R as on,v as At,w as Tn,x as Ri,F as me,y as Ue,z as ia,C as Nn,E as Rt,G as un,H as Ni,J as Oi,P as oa,K as Fi,L as Xt,N as nn,O as Di,Q as Li,U as Bi,V as zi,W as Ui,X as Hi,Y as sa,Z as Vi,_ as Wi,$ as or,a0 as $i,a1 as Yi,a2 as Gi,a3 as Xi,a4 as la,a5 as ca,a6 as On,a7 as ua,a8 as da,a9 as fa,aa as qi,ab as Ki,ac as Qi,ad as Zi,ae as Ft,af as Ji,ag as _r,ah as eo,ai as to,aj as ha,ak as no,al as ro,am as kr,an as ao,ao as io,ap as oo,aq as so,ar as lo,as as co,at as uo}from"./vendor-ChOgHq6D.js";var Mc=Ci((Pc,fn)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var fo={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Mr=e=>{let t;const n=new Set,r=(l,h)=>{const x=typeof l=="function"?l(t):l;if(!Object.is(x,t)){const w=t;t=h??(typeof x!="object"||x===null)?x:Object.assign({},t,x),n.forEach(g=>g(t,w))}},i=()=>t,s={setState:r,getState:i,getInitialState:()=>d,subscribe:l=>(n.add(l),()=>n.delete(l)),destroy:()=>{(fo?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=t=e(r,i,s);return s},ho=e=>e?Mr(e):Mr;var pa={exports:{}},ma={},ga={exports:{}},va={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qt=m;function po(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var mo=typeof Object.is=="function"?Object.is:po,go=qt.useState,vo=qt.useEffect,yo=qt.useLayoutEffect,xo=qt.useDebugValue;function bo(e,t){var n=t(),r=go({inst:{value:n,getSnapshot:t}}),i=r[0].inst,o=r[1];return yo(function(){i.value=n,i.getSnapshot=t,Gn(i)&&o({inst:i})},[e,n,t]),vo(function(){return Gn(i)&&o({inst:i}),e(function(){Gn(i)&&o({inst:i})})},[e]),xo(n),n}function Gn(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!mo(e,n)}catch{return!0}}function Eo(e,t){return t()}var wo=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Eo:bo;va.useSyncExternalStore=qt.useSyncExternalStore!==void 0?qt.useSyncExternalStore:wo;ga.exports=va;var Co=ga.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fn=m,jo=Co;function So(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var To=typeof Object.is=="function"?Object.is:So,_o=jo.useSyncExternalStore,ko=Fn.useRef,Mo=Fn.useEffect,Io=Fn.useMemo,Ao=Fn.useDebugValue;ma.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var o=ko(null);if(o.current===null){var c={hasValue:!1,value:null};o.current=c}else c=o.current;o=Io(function(){function s(w){if(!d){if(d=!0,l=w,w=r(w),i!==void 0&&c.hasValue){var g=c.value;if(i(g,w))return h=g}return h=w}if(g=h,To(l,w))return g;var v=r(w);return i!==void 0&&i(g,v)?g:(l=w,h=v)}var d=!1,l,h,x=n===void 0?null:n;return[function(){return s(t())},x===null?void 0:function(){return s(x())}]},[t,n,r,i]);var u=_o(e,o[0],o[1]);return Mo(function(){c.hasValue=!0,c.value=u},[u]),Ao(u),u};pa.exports=ma;var Po=pa.exports;const Ro=Pn(Po);var ya={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:No}=G,{useSyncExternalStoreWithSelector:Oo}=Ro;let Ir=!1;const Fo=e=>e;function Do(e,t=Fo,n){(ya?"production":void 0)!=="production"&&n&&!Ir&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Ir=!0);const r=Oo(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return No(r),r}const Ar=e=>{(ya?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?ho(e):e,n=(r,i)=>Do(t,r,i);return Object.assign(n,t),n},Lo=e=>e?Ar(e):Ar;var xa={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(te,function(){return function(n,r,i){n=n||{};var o=r.prototype,c={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function u(d,l,h,x){return o.fromToBase(d,l,h,x)}i.en.relativeTime=c,o.fromToBase=function(d,l,h,x,w){for(var g,v,b,H=h.$locale().relativeTime||c,X=n.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],T=X.length,P=0;P<T;P+=1){var O=X[P];O.d&&(g=x?i(d).diff(h,O.d,!0):h.diff(d,O.d,!0));var j=(n.rounding||Math.round)(Math.abs(g));if(b=g>0,j<=O.r||!O.r){j<=1&&P>0&&(O=X[P-1]);var I=H[O.l];w&&(j=w(""+j)),v=typeof I=="string"?I.replace("%d",j):I(j,l,O.l,b);break}}if(l)return v;var E=b?H.future:H.past;return typeof E=="function"?E(v):E.replace("%s",v)},o.to=function(d,l){return u(d,l,this,!0)},o.from=function(d,l){return u(d,l,this)};var s=function(d){return d.$u?i.utc():i()};o.toNow=function(d){return this.to(s(this),d)},o.fromNow=function(d){return this.from(s(this),d)}}})})(xa);var Bo=xa.exports;const zo=Pn(Bo);Ot.extend(zo);const Uo=e=>{const t=Ot(e),n=Ot();return t.isAfter(n.subtract(24,"hour"))},Ho=()=>Ot().subtract(24,"hour").unix(),sr=e=>Ot(e).fromNow(),_n=()=>{const e=JSON.parse(localStorage.getItem("auth"));return e||(console.log("No auth info found in localStorage"),null)},Vo=(e,t)=>{const n={method:e,secret:t};localStorage.setItem("auth",JSON.stringify(n))},ae=ea.create({timeout:5e3});ae.interceptors.request.use(e=>{const t=_n(),{server:n,token:r,username:i,password:o}=(t==null?void 0:t.secret)||{};return e.baseURL=n,r&&(e.headers["X-Auth-Token"]=r),i&&o&&(e.auth={username:i,password:o}),e},e=>Promise.reject(e));ae.interceptors.response.use(e=>e,e=>{var n,r,i;console.error(e);const t=((r=(n=e.response)==null?void 0:n.data)==null?void 0:r.error_message)||e.message;return ne.error(t),((i=e.response)==null?void 0:i.status)===401&&(localStorage.removeItem("auth"),Ei.navigate("/login")),Promise.reject(e)});const ba=async(e,t)=>ae.put("/v1/entries",{entry_ids:e,status:t}),Ea=async(e,t)=>ba([e],t),Wo=async e=>ae.put(`/v1/entries/${e}/bookmark`),$o=async e=>ae.get(`/v1/entries/${e}/fetch-content`),Yo=async()=>ae.get("/v1/me"),Go=async()=>ae.get("/v1/feeds/counters"),wa=async()=>ae.get("/v1/feeds"),Ca=async()=>ae.get("/v1/categories"),Xo=async e=>ae.delete(`/v1/categories/${e}`),qo=async e=>ae.post("/v1/categories",{title:e}),Ko=async(e,t)=>ae.put(`/v1/categories/${e}`,{title:t}),Qo=async(e,t,n,r,i)=>ae.put(`/v1/feeds/${e}`,{feed_url:t,title:n,category_id:r,crawler:i}),Zo=async e=>ae.put(`/v1/feeds/${e}/refresh`),Jo=async e=>ae.delete(`/v1/feeds/${e}`),es=async(e,t,n)=>ae.post("/v1/feeds",{feed_url:e,category_id:t,crawler:n}),ts=async(e=0,t=null)=>{const n=`/v1/entries?order=published_at&direction=desc&offset=${e}`,r=t?`${n}&status=${t}`:n;return ae.get(r)},ja=async(e=0)=>{const t=`/v1/entries?order=changed_at&direction=desc&status=read&offset=${e}`;return ae.get(t)},Sa=async(e=0,t=null)=>{const n=`/v1/entries?order=published_at&direction=desc&starred=true&offset=${e}`,r=t?`${n}&status=${t}`:n;return ae.get(r)},jn=async(e=0,t=null,n=null)=>{let i=`/v1/entries?order=published_at&direction=desc&published_after=${Ho()}&offset=${e}`;return t&&(i+=`&status=${t}`),n&&(i+=`&limit=${n}`),ae.get(i)},$t=e=>{const t=JSON.parse(localStorage.getItem("config"));if(!t)return console.log("No config found in localStorage"),null;const n=t[e];return typeof n>"u"?(console.log(`Config for "${e}" not found`),null):n},Pt=(e,t)=>{const r={...JSON.parse(localStorage.getItem("config"))||{},[e]:t};localStorage.setItem("config",JSON.stringify(r))},ns=(e,t)=>t==="read"?Math.max(0,e-1):e+1,Pr=(e,t,n)=>e.map(r=>{if(r.id===t){let i;return typeof n=="string"?i=ns(r.unreadCount,n):i=n,{...r,unreadCount:i}}return r}),S=Lo((e,t)=>({feeds:[],groups:[],unreadTotal:0,unreadToday:0,starredCount:0,readCount:0,loading:!0,visible:{settings:!1,addFeed:!1},theme:$t("theme")||"system",layout:$t("layout")||"large",fontSize:$t("fontSize")||1.05,showFeedIcon:$t("showFeedIcon")||!0,collapsed:window.innerWidth<=992,activeContent:null,isSysDarkMode:window.matchMedia("(prefers-color-scheme: dark)").matches,color:$t("themeColor")||"Blue",setUnreadTotal:n=>e(r=>({unreadTotal:n(r.unreadTotal)})),setUnreadToday:n=>e(r=>({unreadToday:n(r.unreadToday)})),setStarredCount:n=>e(r=>({starredCount:n(r.starredCount)})),setReadCount:n=>e(r=>({readCount:n(r.readCount)})),setActiveContent:n=>{e({activeContent:n})},setIsSysDarkMode:n=>e({isSysDarkMode:n}),setColor:n=>{e({color:n})},setTheme:n=>{e({theme:n})},initData:async()=>{e({loading:!0});const[n,r,i,o,c,u]=await Promise.all([wa(),Ca(),Go(),ja(),Sa(),jn(0,"unread")]);if(n&&i&&r&&o&&c&&u){const s=i.data.unreads,d=Object.values(s).reduce((x,w)=>x+w,0);e({unreadTotal:d});const l=n.data.map(x=>({...x,unreadCount:s[x.id]||0}));e({feeds:l.sort((x,w)=>x.title.localeCompare(w.title,"en"))});const h=r.data.map(x=>{let w=0,g=0;for(const v of l)v.category.id===x.id&&(w+=v.unreadCount,g+=1);return{...x,unreadCount:w,feed:g}});e({groups:h.sort((x,w)=>x.title.localeCompare(w.title,"en"))}),e({readCount:o.data.total}),e({starredCount:c.data.total}),e({unreadToday:u.data.total}),e({loading:!1})}},updateFeedUnreadCount:(n,r)=>{e(i=>({feeds:Pr(i.feeds,n,r)}))},updateGroupUnreadCount:(n,r)=>{e(i=>({groups:Pr(i.groups,n,r)}))},toggleTheme:n=>{e({theme:n}),Pt("theme",n)},toggleLayout:()=>{const n=t().layout==="large"?"small":"large";e({layout:n}),Pt("layout",n)},setFontSize:n=>{e({fontSize:n}),Pt("fontSize",n)},setShowFeedIcon:n=>{e({showFeedIcon:n}),Pt("showFeedIcon",n)},setVisible:(n,r)=>{e(i=>({visible:{...i.visible,[n]:r}}))},setCollapsed:n=>{e({collapsed:n})}})),Ta=[{name:"Red",valueLight:"#F53F3F",valueDark:"#F76965"},{name:"Orange",valueLight:"#F77234",valueDark:"#F9925A"},{name:"Green",valueLight:"#00B42A",valueDark:"#27C346"},{name:"Blue",valueLight:"#165DFF",valueDark:"#3C7EFF"},{name:"Purple",valueLight:"#722ED1",valueDark:"#8E51DA"}],Jn=e=>{const t=Ta.find(o=>o.name===e),n=window.matchMedia("(prefers-color-scheme: dark)").matches,r=$t("theme")||"light",i=r==="system"?n:r==="dark";return t?i?t.valueDark:t.valueLight:"#165DFF"},kn=e=>{ji(Jn(e),{list:!0}).map(n=>Si(n)).forEach((n,r)=>{document.body.style.setProperty(`--primary-${r+1}`,n)})},rs=()=>{const e=dn(),t=S(s=>s.setVisible),n=S(s=>s.theme),r=S(s=>s.toggleTheme),i=S(s=>s.collapsed),o=S(s=>s.setCollapsed),c=()=>{localStorage.clear(),document.body.removeAttribute("arco-theme"),kn("Blue"),e("/login"),ne.success("logout")};let u;switch(n){case"dark":u=a.jsx(Pi,{});break;case"light":u=a.jsx(Ai,{});break;default:u=a.jsx(Ii,{})}return a.jsxs("div",{className:"header",children:[a.jsx("div",{className:"brand",style:{marginLeft:"10px",display:"flex",alignItems:"center"},children:a.jsx(le,{shape:"circle",size:"small",className:"trigger",style:{marginRight:"5px",display:"none"},onClick:()=>o(!i),children:a.jsx(Ti,{})})}),a.jsx("div",{className:"button-group",style:{marginRight:"10px"},children:a.jsxs(Rn,{size:16,children:[a.jsx(at,{content:"Add a feed",mini:!0,children:a.jsx(le,{shape:"circle",size:"small",type:"primary",icon:a.jsx(ta,{}),onClick:()=>t("addFeed",!0)})}),a.jsx(le,{shape:"circle",size:"small",icon:a.jsx(_i,{}),onClick:()=>window.open("https://github.com/electh/ReactFlux","_blank")}),a.jsx(Tr,{droplist:a.jsx(mt,{defaultSelectedKeys:[n],className:"theme-menu",children:["light","dark","system"].map(s=>a.jsxs(mt.Item,{className:n===s?"selected-menu":"",onClick:()=>r(s),style:{display:"flex",width:100,justifyContent:"space-between",alignItems:"center"},children:[s.charAt(0).toUpperCase()+s.slice(1),n===s&&a.jsx(na,{style:{marginLeft:8}})]},s))}),trigger:"hover",position:"bottom",children:a.jsx(le,{shape:"circle",size:"small",icon:u})}),a.jsx(Tr,{droplist:a.jsxs(mt,{children:[a.jsxs(mt.Item,{onClick:()=>t("settings",!0),children:[a.jsx(ki,{style:{marginRight:8,fontSize:16,transform:"translateY(1px)"}}),"Settings"]},"0"),a.jsxs(mt.Item,{onClick:c,children:[a.jsx(Mi,{style:{marginRight:8,fontSize:16,transform:"translateY(1px)"}}),"Logout"]},"1")]}),trigger:"click",position:"br",children:a.jsx(ra,{size:28,style:{cursor:"pointer"},children:a.jsx(aa,{})})})]})})]})},_a="/assets/dark-E0XitTFg.png",ka="/assets/light-CsqESGYr.png",Ma="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAeIAAAE6CAMAAAD9WqHTAAAA6lBMVEX////+/v79/f79/f38/P38/Pz7/Pz6+/v5+fr4+Pr4+Pn3+Pr39/n29/n19/n29vj19vjz9Pfz9Pby8/by8/Xy8vby8vXx8vbx8vXx8fXx8fTw8PTw8PPv8PTv8PPv7/Pu7/P/7svu7/Lt7/Pt7/Lt7vLs7fH/5rH/5rD/19XJ8c//3pb/3Zf/w8Cu67et67j/zWP/zWL/r6v/wTuT5KCS5KD/wDv/vC7/h4Fc13H/aWI0zU00zE3/X1cmyUFtbnBmZ2lgYWJfYGJZWltZWVtSU1RLTE03Nzg2NzgpKiopKSoODg4HBwcAAABYTmZ5AAAHR0lEQVR42uzYt3nEMBAFYeaqAsl5SwePDtR/OTL7YdGBDI4z2Yt/Wgx/39vv9r61IIYYYoghhhhiiCGGGGKIIYYYYoi3Qnx0Ibtrm+a52uehzZOPxd8h7pl4zNJY58VK5zqXIi0Q90t8zbWjzIOtGZn3UjtB3C2xU2In86HET5leiT3E3RJnLci02iqzaAnibolD1mROVpOZigbxf40HNcRHJb7KNEq8l3lS4turEvPTNBdpHvolhni4uhzcsc39w05P0+bNl+RPHH1wgAkxxBBDDDHEEEMMMcQQQwwxxBBDDDHEGyX+ZM8ucEQJYQAM5711d7cxeo2Oe+9/nHVfJEYzEP4bkC9C273Te7AcPleNpGruGnS8alww8V4G1sPXyomkTQV6UDktljgDLmIsZ5JVoBeV80KJj4CPGDuSNKAndWbijd2zSACIu7PddTbilJO4IUk1elJjIP53EMG3oq0VHmLgJEaShN6kJz4Q8KvowCPiQLxyD5KiFQbie07iiiQ16EmVhnhLgDSxaZ/4kpN4JEkdetKoJt4CZVvWifc4hyaSNfsyNJGSeBM0bYXVh/urjxUBmsSK/R31UcRB3PQzqRoqdLyv10mII9B27/oZIpwhDsHQgdvEgXglMhGL/04TB+JtMHbgNHEgjszEUSB+au8+k+M29iiOMudUymFE4D0b2AYzWdJQ+9+OP4OxHQBUX567heMgzfRv/jUTb/QF20ZcMfFBCfEh4oqJP5UQf0BcMfGPEuIWccXEXQlxVzEx4r5oiBEjnm3+Q424LSFeIPaXprpriOXN+Vn9u12O9NFHwJOA5flZxM6XTxJv9wXbyq4hbsPfUbf9q2vCa4izlJ0/TXzSv7rd6Boi/x31ate/smbdU/lKNv/DHsQz1RCLV/4ljq8hwokLHtnG1xDRxAXPt3bya4hk4gLj3fwfgoglHmznuWxtIJxaQ7yR+LTpn9hiPf9HmbKJBzt5hNydRP3uFuKV9b0BcnuyuoI4gXiwzYP337u+79r3B9uBv56HeDjEiBEjRowYMWLEiBEjRowYMWLEiBFPWUP8/x3i+NsQ3RHi9NsQ3SHi9NsQXxA/Il49/tpPsB+709QQp4gLfiBxpLXrkzyVR1ycrY1gvIZ4BuK9fsIdT1BDtIgLfndrtH2boIZ4tz8c4n7SjV9DdPuIZyWe4aMPxN+mFF6MXEM0nw8f4SI+mZJ419cQMxCvNtMJNyuIZ/noo5lMeB3xTJ9R732fAvjrMKBB7EkAYsSIESMef4gRI0aMGDFixIgRI0aMOOA2BGI/kIi49tsQiAvnNoQawm0INYTDAWoIxGoItyFmryHchlBDuA0RQOyjDzWE2xB11BBqCDUEYjUEYjUEYk8CECNGjBgxYsSIESNGjBgxYsSIESNWQyBWQyBWQ4w/NYQaYpTe4dECagg1RLteTlznU3k1RLuWTqyGOC7QrbqGUEN8KydWQ1T6VL6cWA2RSBzw0YcaYlGgW3UNoYbYDf8aQg3RrGQTqyGa9VxiNcSwdxgOsScBiBEjRowYMWLEiBEjRowYMWLEiBGrIf7/Lp5YDdEdpROrIbrDv098XhWjGuLL3ye+SRG+fRu3IU7/PvHyPEP4fPlGbkMUEg+MbxOAb5a/429DlBPnL/k2RIs4/TbEO8ThtyG6fcTZtyG6I8TRtyGaz4f7iN2GSJ7bEPFzGyJ+bkPEz5OAgCFGjDhziBEjvr+r/lnA1S/EL2x5cRawyyXiZ5cgPPydXsTD/TwL2R3iZ3adQnyD2DtqtyEQh96GuEkRvnqG2G2IuxTiX88Quw1xn/KXpt+5NUQ58U3+Rx/5NUTp4YDhfl7VjDv4nd7UGqKcuO6pIQpuQ9Q9NUTBbYiqp4YouA0xwxDP8NFHtVNDFN+GyJ8aYv6pIRCrIRCrIRDPMMSIESNGjBgxYjVEALEaArEaIoBYDYFYDaGGqHRqCMRqiLqnhlBDqCHUEAW9Q8GqriHUEO16AW7VNYQaol2rlFgNUbzjAt2qawg1xLdyYjVEpU/ly4nVEJHE9dcQaohFgW7VNYQaYtfDnvAaollBnF1DNOuIo2uIYe8wHGIvMBEjRowYMWLEaoj5IwbEkTXE5RJxeg1xeY84vYa4Q5xeQ9wgjq8hxieOqSH+/w5xfA3RHZUTz15DjPmgLLiG6A7LieeuIcZ8UJZcQ3wpJ567hhjzQVnybYhTH33E34YoJ567hhjzQVn0bQhfQ6TfhmgRp9+GeIc4/DZEt484+zZEd4Q4+jZE8/lwH7HbEPPPbQjEbkMgdhsCsScBiBEjRowYMWLEiBEjRowYMWLEiBEjRowYMWLEiBNqCMTxNQTi+BoCcXwNgTi+hkAc/FQeMWLEATUEYjUEYjUEYjUEYjXEjPM1BGLEiBEjRowYMWLEiBEjRowYMWLEiBEjRowYMWLEiBEjRowYMWLEiBEjRowYMWLEiBEjRowYMWLEiBEjRowYMWLEiBEjRoz4L7eym/HZl0D8AAAAAElFTkSuQmCC",as=()=>{const e=S(l=>l.theme),t=S(l=>l.setTheme),n=S(l=>l.toggleLayout),r=S(l=>l.layout),i=S(l=>l.fontSize),o=S(l=>l.setFontSize),c=S(l=>l.showFeedIcon),u=S(l=>l.setShowFeedIcon),s=S(l=>l.color),d=S(l=>l.setColor);return a.jsxs(a.Fragment,{children:[a.jsx(Y.Title,{heading:6,style:{marginTop:0},children:"Theme"}),a.jsx(Y.Text,{type:"secondary",children:"Customize your UI theme"}),a.jsx("div",{children:a.jsx(on.Group,{name:"card-radio-group",style:{marginTop:"16px"},defaultValue:e,onChange:l=>{t(l),Pt("theme",l)},children:["light","dark","system"].map(l=>a.jsx(at,{content:l.charAt(0).toUpperCase()+l.slice(1),children:a.jsx(on,{value:l,children:({checked:h})=>{const x={light:ka,dark:_a,system:Ma}[l];return a.jsx("div",{className:`custom-radio-card ${h?"custom-radio-card-checked":""}`,children:a.jsx("img",{className:"theme-preview",src:x,alt:l})})}})},l))})}),a.jsx(At,{}),a.jsxs("div",{className:"setting-row",children:[a.jsxs("div",{children:[a.jsx(Y.Title,{heading:6,style:{marginTop:0},children:"Accent color"}),a.jsx(Y.Text,{type:"secondary",children:"Choose your accent color"})]}),a.jsx("div",{style:{display:"flex"},children:Ta.map(l=>a.jsx(at,{content:l.name,children:a.jsx("button",{type:"button",style:{width:"18px",height:"18px",borderRadius:"50%",margin:"2px",backgroundColor:Jn(l.name),cursor:"pointer",border:"3px solid var(--color-bg-3)",outline:l.name===s?`1px solid ${Jn(l.name)}`:"none"},onClick:()=>{d(l.name),Pt("themeColor",l.name),kn(l.name)},onKeyDown:h=>{(h.key==="Enter"||h.key===" ")&&(d(l.name),Pt("themeColor",l.name),kn(l.name))}})},l.name))})]}),a.jsx(At,{}),a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[a.jsxs("div",{children:[a.jsx(Y.Title,{heading:6,style:{marginTop:0},children:"Compact article list"}),a.jsx(Y.Text,{type:"secondary",children:"Use small thumbnail in article list"})]}),a.jsx("div",{children:a.jsx(Tn,{checked:r==="small",onChange:()=>n()})})]}),a.jsx(At,{}),a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[a.jsxs("div",{children:[a.jsx(Y.Title,{heading:6,style:{marginTop:0},children:"Show feed icon"}),a.jsx(Y.Text,{type:"secondary",children:"Show feed icon in feed list and article list"})]}),a.jsx("div",{children:a.jsx(Tn,{checked:c,onChange:()=>u(!c)})})]}),a.jsx(At,{}),a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[a.jsxs("div",{children:[a.jsx(Y.Title,{heading:6,style:{marginTop:0},children:"Font size"}),a.jsx(Y.Text,{type:"secondary",children:"Adjust article text size"})]}),a.jsx("div",{children:a.jsxs(Rn,{children:[a.jsx(Y.Text,{style:{fontSize:"0.75rem"},children:"A"}),a.jsx(Ri,{value:i,showTicks:!0,min:.75,max:1.25,step:.05,formatTooltip:l=>`${l}rem`,onChange:o,style:{width:200}}),a.jsx(Y.Text,{style:{fontSize:"1.25rem"},children:"A"})]})})]})]})},Gt=(e,t)=>e.toLowerCase().includes(t.toLowerCase()),Ia=(e,t,n,r)=>t==="0"?n==="all"?e.filter(i=>Gt(i.title,r)):e.filter(i=>Gt(i.title,r)&&i.status===n):n==="all"?e.filter(i=>Gt(i.content,r)):e.filter(i=>Gt(i.content,r)&&i.status===n),Rr=e=>e.slice().sort((t,n)=>t.parsing_error_count>0&&n.parsing_error_count===0?-1:t.parsing_error_count===0&&n.parsing_error_count>0?1:0),is=({feeds:e,groups:t,loading:n,setFeeds:r,setShowFeeds:i,showFeeds:o})=>{const c=S(E=>E.initData),[u,s]=m.useState(!1),[d,l]=m.useState(!1),[h]=me.useForm(),[x,w]=m.useState({}),[g,v]=m.useState(window.innerWidth);let b=Rr(o);const H=b.map(E=>({key:E.id,title:E.title,feed_url:E.feed_url,category:E.category,checked_at:E.checked_at,parsing_error_count:E.parsing_error_count,feed:E}));m.useEffect(()=>{const E=()=>v(window.innerWidth);return window.addEventListener("resize",E),()=>window.removeEventListener("resize",E)},[]);const X=E=>{w(E.feed),s(!0),h.setFieldsValue({url:E.feed.feed_url,title:E.feed.title,group:E.feed.category.id,crawler:E.feed.crawler})},T=async E=>{Zo(E.feed.id).then(()=>{ne.success("Refreshed"),E.feed.parsing_error_count=0,c()}).catch(()=>{ne.error("Failed to refresh"),E.feed.parsing_error_count++}).finally(()=>{r(e),b=e.sort((_,Q)=>_.title.localeCompare(Q.title,"en")),b=Rr(b),i(b)})},P=async E=>{Jo(E.feed.id).then(()=>{ne.success("Unfollowed"),r(e.filter(_=>_.id!==E.feed.id)),i(b.filter(_=>_.id!==E.feed.id)),c()})},O=g<=700,j=[{title:"Title",dataIndex:"title",sorter:(E,_)=>E.title.localeCompare(_.title,"en"),render:(E,_)=>{const Q=_.parsing_error_count,ve=Q?`⚠️ ${E}`:E,Z=a.jsxs("div",{children:[E,Q>0&&a.jsxs(a.Fragment,{children:[a.jsx("br",{}),"⚠️ Parsing error count: ",Q]})]});return a.jsx(Y.Ellipsis,{expandable:!1,children:a.jsx(at,{mini:!0,content:Z,children:ve})})}},!O&&{title:"Url",dataIndex:"feed_url",sorter:(E,_)=>E.feed_url.localeCompare(_.feed_url,"en"),render:E=>a.jsx(Y.Ellipsis,{expandable:!1,showTooltip:!0,children:E})},{title:"Group",dataIndex:"category.title",sorter:(E,_)=>E.category.title.localeCompare(_.category.title,"en"),render:E=>a.jsx(Y.Ellipsis,{expandable:!1,showTooltip:!0,children:a.jsx(un,{children:E})})},!O&&{title:"Checked at",dataIndex:"checked_at",sorter:(E,_)=>E.checked_at.localeCompare(_.checked_at,"en"),render:E=>a.jsx(Y.Ellipsis,{expandable:!1,children:sr(E)})},{title:"Actions",dataIndex:"op",fixed:"right",width:100,render:(E,_)=>a.jsxs(Rn,{children:[a.jsx("button",{"aria-label":"Edit this feed",className:"list-item-action",onClick:()=>X(_),type:"button",children:a.jsx(Ni,{})}),a.jsx("button",{"aria-label":"Refresh this feed",className:"list-item-action",onClick:()=>T(_),type:"button",children:a.jsx(Oi,{})}),a.jsx(oa,{position:"left",focusLocka:!0,title:"Unfollow？",onOk:async()=>{await P(_)},children:a.jsx("span",{className:"list-item-action",children:a.jsx(Fi,{})})})]})}].filter(Boolean),I=async(E,_,Q,ve,Z)=>{l(!0),Qo(E,_,Q,ve,Z).then(Ne=>{r(e.map(ce=>ce.id===E?Ne.data:ce)),i(b.map(ce=>ce.id===E?Ne.data:ce)),ne.success("Feed updated successfully"),s(!1),c()}).catch(()=>{ne.error("Failed to update feed")}),l(!1),h.resetFields()};return a.jsxs(a.Fragment,{children:[a.jsx("div",{style:{display:"flex",justifyContent:"center"},children:a.jsx(Ue.Search,{searchButton:!0,placeholder:"Search feed title or url",onChange:E=>i(b.filter(_=>Gt(_.title,E)||Gt(_.feed_url,E))),style:{width:300,marginBottom:"24px"}})}),a.jsx(ia,{columns:j,data:H,loading:n,pagePosition:"bottomCenter",scroll:{x:!0},size:"small",style:{width:"100%"},borderCell:!0}),x&&a.jsx(Nn,{title:"Edit Feed",visible:u,unmountOnExit:!0,onOk:h.submit,style:{width:"400px"},confirmLoading:d,onCancel:()=>{s(!1),h.resetFields()},children:a.jsxs(me,{form:h,labelCol:{span:7},layout:"vertical",wrapperCol:{span:17},onSubmit:E=>{E.url.trim()?I(x.id,E.url,E.title,E.group,E.crawler):ne.error("Feed URL cannot be empty")},children:[a.jsx(me.Item,{label:"Feed URL",field:"url",rules:[{required:!0}],children:a.jsx(Ue,{placeholder:"Please input feed URL"})}),a.jsx(me.Item,{label:"Title",field:"title",rules:[{required:!0}],children:a.jsx(Ue,{placeholder:"Please input feed title"})}),a.jsx(me.Item,{label:"Group",required:!0,field:"group",rules:[{required:!0}],children:a.jsx(Rt,{placeholder:"Please select",children:t.map(E=>a.jsx(Rt.Option,{value:E.id,children:E.title},E.id))})}),a.jsx(me.Item,{label:"Fetch original content",field:"crawler",tooltip:a.jsx("div",{children:"Only affects newly retrieved articles"}),style:{marginBottom:0},triggerPropName:"checked",rules:[{type:"boolean"}],children:a.jsx(Tn,{})})]})})]})},os=({groups:e,loading:t,setGroups:n,setShowFeeds:r,showFeeds:i})=>{const o=S(P=>P.initData),[c,u]=m.useState(!1),[s,d]=m.useState(""),[l,h]=m.useState(!1),[x,w]=m.useState(!1),[g]=me.useForm(),[v,b]=m.useState({}),H=async()=>{s&&qo(s).then(P=>{n(O=>[...O,{...P.data,feedCount:0}]),d(""),ne.success("Group added successfully"),o()}).catch(()=>{ne.error("Failed to add group")}),d(""),u(!1)},X=async(P,O)=>{w(!0),Ko(P,O).then(j=>{r(i.map(I=>I.category.id===P?{...I,category:{...I.category,title:O}}:I)),n(e.map(I=>I.id===P?j.data:I)),ne.success("Group updated successfully"),h(!1),o()}).catch(()=>{ne.error("Failed to update group")}),w(!1),g.resetFields()},T=async P=>{Xo(P).then(O=>{O.status===204?(n(e.filter(j=>j.id!==P)),ne.success("Group deleted successfully"),o()):ne.error("Failed to delete group")}).catch(()=>{ne.error("Failed to delete group")})};return a.jsxs(a.Fragment,{children:[a.jsx("div",{children:a.jsxs(Xt,{loading:t,animation:!0,text:{rows:3},children:[e.map(P=>a.jsx(un,{size:"medium",closable:P.feedCount===0,onClick:()=>{b(P),h(!0),g.setFieldsValue({title:P.title})},onClose:async O=>{O.stopPropagation(),await T(P.id)},style:{marginRight:"10px",marginBottom:"10px",cursor:"pointer"},children:P.title},P.id)),c?a.jsx(Ue,{autoFocus:!0,size:"small",value:s,style:{width:84},onPressEnter:H,onBlur:H,onChange:d}):a.jsx(un,{icon:a.jsx(ta,{}),style:{width:84,backgroundColor:"var(--color-fill-2)",border:"1px dashed var(--color-fill-3)",cursor:"pointer"},size:"medium",className:"add-group",tabIndex:0,onClick:()=>u(!0),children:"Add"})]})}),v&&a.jsx(Nn,{title:"Edit Group",visible:l,unmountOnExit:!0,style:{width:"400px"},onOk:g.submit,confirmLoading:x,onCancel:()=>{h(!1),g.resetFields()},children:a.jsx(me,{form:g,layout:"vertical",onSubmit:P=>X(v.id,P.title),labelCol:{style:{flexBasis:90}},wrapperCol:{style:{flexBasis:"calc(100% - 90px)"}},children:a.jsx(me.Item,{label:"Title",field:"title",rules:[{required:!0}],children:a.jsx(Ue,{placeholder:"Please input group title"})})})})]})},ss=[{title:"Key",dataIndex:"keyName",render:e=>a.jsx(un,{children:e})},{title:"Function",dataIndex:"description"}],ls=[{key:"1",keyName:"Esc",description:"Dismiss article"},{key:"2",keyName:"←",description:"Previous article"},{key:"3",keyName:"→",description:"Next article"},{key:"4",keyName:"B",description:"Open link externally"},{key:"5",keyName:"D",description:"Fetch original article"},{key:"6",keyName:"M",description:"Mark as read / unread"},{key:"7",keyName:"S",description:"Star / Unstar"}],cs=()=>a.jsx(ia,{columns:ss,data:ls,pagination:!1,size:"small"}),us=()=>{const[e,t]=m.useState([]),[n,r]=m.useState([]),[i,o]=m.useState([]),[c,u]=m.useState(!1),s=async()=>{u(!0);const l=await wa(),h=await Ca();if(l&&h){const x=l.data,w=h.data.map(v=>({...v,feedCount:x.filter(b=>b.category.id===v.id).length})),g=x.sort((v,b)=>v.title.localeCompare(b.title,"en"));t(g),r(w.sort((v,b)=>v.title.localeCompare(b.title,"en"))),o(g),u(!1)}},d=()=>{const l=[_a,ka,Ma];for(const h of l){const x=new Image;x.src=h}};return m.useEffect(()=>{s(),d()},[]),a.jsxs(nn,{defaultActiveTab:"1",tabPosition:"top",children:[a.jsx(nn.TabPane,{title:a.jsxs("span",{children:[a.jsx(Di,{style:{marginRight:6}}),"Feeds"]}),children:a.jsx(is,{feeds:e,groups:n,loading:c,setFeeds:t,setShowFeeds:o,showFeeds:i})},"1"),a.jsx(nn.TabPane,{title:a.jsxs("span",{children:[a.jsx(Li,{style:{marginRight:6}}),"Groups"]}),children:a.jsx(os,{groups:n,loading:c,setGroups:r,setShowFeeds:o,showFeeds:i})},"2"),a.jsx(nn.TabPane,{title:a.jsxs("span",{children:[a.jsx(Bi,{style:{marginRight:6}}),"Appearance"]}),children:a.jsx(as,{})},"3"),a.jsx(nn.TabPane,{title:a.jsxs("span",{children:[a.jsx(zi,{style:{marginRight:6}}),"Hotkeys"]}),children:a.jsx(cs,{})},"4")]})},ds=({activeContent:e,setActiveContent:t,setVisible:n,visible:r})=>{const[i,o]=m.useState("720px"),[c,u]=m.useState("10%");return m.useEffect(()=>{const s=()=>{const d=window.innerWidth<=700?"100%":"720px",l=window.innerWidth<=700?"5%":"10%";o(d),u(l)};return window.addEventListener("resize",s),s(),()=>{window.removeEventListener("resize",s)}},[]),a.jsx(Nn,{visible:r.settings,alignCenter:!1,title:"Settings",footer:null,unmountOnExit:!0,style:{width:i,top:c},onFocus:()=>{e&&t(null)},onCancel:()=>n("settings",!1),autoFocus:!1,focusLock:!0,children:a.jsx(us,{})})},fs=({activeContent:e,setActiveContent:t,setVisible:n,visible:r})=>{const i=S(l=>l.initData),o=S(l=>l.groups),[c,u]=m.useState(!1),[s]=me.useForm(),d=async(l,h,x)=>{u(!0),es(l,h,x).then(()=>{i(),ne.success("Added a feed successfully"),n("addFeed",!1)}).catch(()=>{ne.error("Failed to add a feed")}),u(!1),s.resetFields()};return a.jsx(Nn,{title:"Add Feed",visible:r.addFeed,unmountOnExit:!0,style:{width:"400px"},onFocus:()=>{e&&t(null)},onOk:s.submit,confirmLoading:c,onCancel:()=>{n("addFeed",!1),s.resetFields()},children:a.jsxs(me,{form:s,labelCol:{span:7},layout:"vertical",wrapperCol:{span:17},onSubmit:l=>{l.url.trim()?d(l.url.trim(),l.group,l.crawler):ne.error("Feed URL cannot be empty")},children:[a.jsx(me.Item,{label:"Feed URL",field:"url",rules:[{required:!0}],children:a.jsx(Ue,{placeholder:"Please input feed URL"})}),a.jsx(me.Item,{label:"Group",required:!0,field:"group",rules:[{required:!0}],children:a.jsx(Rt,{placeholder:"Please select",children:o.map(l=>a.jsx(Rt.Option,{value:l.id,children:l.title},l.id))})}),a.jsx(me.Item,{label:"Fetch original content",initialValue:!1,field:"crawler",style:{marginBottom:0},triggerPropName:"checked",rules:[{type:"boolean"}],children:a.jsx(Tn,{})})]})})},hs=()=>{const e=S(c=>c.visible),t=S(c=>c.setVisible),n=S(c=>c.activeContent),r=S(c=>c.setActiveContent),[i,o]=m.useState(0);return m.useEffect(()=>{const c=()=>{const u=document.querySelector(".entry-panel"),s=u?u.offsetHeight:49,d=window.innerHeight;o(d-s)};return window.addEventListener("resize",c),c(),()=>window.removeEventListener("resize",c)},[]),a.jsxs("div",{className:"main",style:{height:`${i}px`},children:[a.jsx(Ui,{}),a.jsx(ds,{activeContent:n,setActiveContent:r,setVisible:t,visible:e}),a.jsx(fs,{activeContent:n,setActiveContent:r,setVisible:t,visible:e})]})};function Sn(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Sn=function(n){return typeof n}:Sn=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Sn(e)}function lr(e){var t=typeof e=="string"||e instanceof String;if(!t){var n=Sn(e);throw e===null?n="null":n==="object"&&(n=e.constructor.name),new TypeError("Expected a string but received a ".concat(n))}}function Aa(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var n in t)typeof e[n]>"u"&&(e[n]=t[n]);return e}var ps={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function ms(e,t){lr(e),t=Aa(t,ps),t.allow_trailing_dot&&e[e.length-1]==="."&&(e=e.substring(0,e.length-1)),t.allow_wildcard===!0&&e.indexOf("*.")===0&&(e=e.substring(2));var n=e.split("."),r=n[n.length-1];return t.require_tld&&(n.length<2||!t.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(r)||/\s/.test(r))||!t.allow_numeric_tld&&/^\d+$/.test(r)?!1:n.every(function(i){return!(i.length>63&&!t.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(i)||/[\uff01-\uff5e]/.test(i)||/^-|-$/.test(i)||!t.allow_underscores&&/_/.test(i))})}var Nr="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",ht="(".concat(Nr,"[.]){3}").concat(Nr),gs=new RegExp("^".concat(ht,"$")),fe="(?:[0-9a-fA-F]{1,4})",vs=new RegExp("^("+"(?:".concat(fe,":){7}(?:").concat(fe,"|:)|")+"(?:".concat(fe,":){6}(?:").concat(ht,"|:").concat(fe,"|:)|")+"(?:".concat(fe,":){5}(?::").concat(ht,"|(:").concat(fe,"){1,2}|:)|")+"(?:".concat(fe,":){4}(?:(:").concat(fe,"){0,1}:").concat(ht,"|(:").concat(fe,"){1,3}|:)|")+"(?:".concat(fe,":){3}(?:(:").concat(fe,"){0,2}:").concat(ht,"|(:").concat(fe,"){1,4}|:)|")+"(?:".concat(fe,":){2}(?:(:").concat(fe,"){0,3}:").concat(ht,"|(:").concat(fe,"){1,5}|:)|")+"(?:".concat(fe,":){1}(?:(:").concat(fe,"){0,4}:").concat(ht,"|(:").concat(fe,"){1,6}|:)|")+"(?::((?::".concat(fe,"){0,5}:").concat(ht,"|(?::").concat(fe,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");function Mn(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return lr(e),t=String(t),t?t==="4"?gs.test(e):t==="6"?vs.test(e):!1:Mn(e,4)||Mn(e,6)}function ys(e,t){return ws(e)||Es(e,t)||bs(e,t)||xs()}function xs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bs(e,t){if(e){if(typeof e=="string")return Or(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Or(e,t)}}function Or(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Es(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,i=!1,o=void 0;try{for(var c=e[Symbol.iterator](),u;!(r=(u=c.next()).done)&&(n.push(u.value),!(t&&n.length===t));r=!0);}catch(s){i=!0,o=s}finally{try{!r&&c.return!=null&&c.return()}finally{if(i)throw o}}return n}}function ws(e){if(Array.isArray(e))return e}var Cs={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0},js=/^\[([^\]]+)\](?::([0-9]+))?$/;function Ss(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Fr(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(e===r||Ss(r)&&r.test(e))return!0}return!1}function Pa(e,t){if(lr(e),!e||/[\s<>]/.test(e)||e.indexOf("mailto:")===0||(t=Aa(t,Cs),t.validate_length&&e.length>=2083)||!t.allow_fragments&&e.includes("#")||!t.allow_query_components&&(e.includes("?")||e.includes("&")))return!1;var n,r,i,o,c,u,s,d;if(s=e.split("#"),e=s.shift(),s=e.split("?"),e=s.shift(),s=e.split("://"),s.length>1){if(n=s.shift().toLowerCase(),t.require_valid_protocol&&t.protocols.indexOf(n)===-1)return!1}else{if(t.require_protocol)return!1;if(e.slice(0,2)==="//"){if(!t.allow_protocol_relative_urls)return!1;s[0]=e.slice(2)}}if(e=s.join("://"),e==="")return!1;if(s=e.split("/"),e=s.shift(),e===""&&!t.require_host)return!0;if(s=e.split("@"),s.length>1){if(t.disallow_auth||s[0]===""||(r=s.shift(),r.indexOf(":")>=0&&r.split(":").length>2))return!1;var l=r.split(":"),h=ys(l,2),x=h[0],w=h[1];if(x===""&&w==="")return!1}o=s.join("@"),u=null,d=null;var g=o.match(js);if(g?(i="",d=g[1],u=g[2]||null):(s=o.split(":"),i=s.shift(),s.length&&(u=s.join(":"))),u!==null&&u.length>0){if(c=parseInt(u,10),!/^[0-9]+$/.test(u)||c<=0||c>65535)return!1}else if(t.require_port)return!1;return t.host_whitelist?Fr(i,t.host_whitelist):i===""&&!t.require_host?!0:!(!Mn(i)&&!ms(i,t)&&(!d||!Mn(d,6))||(i=i||d,t.host_blacklist&&Fr(i,t.host_blacklist)))}const Ra=e=>{const t=new URL(e);return`${t.protocol}//${t.hostname}`},rn=mt.Item,{Sider:Ts}=Yi,_s=({group:e,isOpen:t})=>a.jsxs("div",{className:"group-title",children:[a.jsxs(Y.Ellipsis,{expandable:!1,showTooltip:!0,style:{width:e.unreadCount?"80%":"100%"},children:[t?a.jsx(Gi,{}):a.jsx(Xi,{}),e.title]}),e.unreadCount>0&&a.jsx(Y.Ellipsis,{className:"unread-count",expandable:!1,children:e.unreadCount})]}),ks=()=>{const e=Hi(),t=dn(),n=S(T=>T.collapsed),r=S(T=>T.feeds),i=S(T=>T.groups),o=S(T=>T.loading),c=S(T=>T.unreadTotal),u=S(T=>T.unreadToday),s=S(T=>T.starredCount),d=S(T=>T.readCount),l=S(T=>T.showFeedIcon),h=S(T=>T.setCollapsed),[x,w]=m.useState([]),[g,v]=m.useState([]),b=e.pathname,H=(T,P)=>{v(P)},X=r.reduce((T,P)=>{Pa(P.site_url)||(P.site_url=Ra(P.feed_url));const{id:O}=P.category;return T[O]=T[O]||[],T[O].push(P),T},{});return m.useEffect(()=>{w([b]),n||window.innerWidth<=992&&h(!0)},[b]),m.useEffect(()=>{o||v([])},[o]),a.jsx(Ts,{className:"sidebar",trigger:null,width:240,collapsedWidth:0,breakpoint:"lg",onCollapse:h,collapsed:n,collapsible:!0,style:{height:"100%",borderRight:n?"none":"1px solid var(--color-border-2)",position:"fixed",top:0,zIndex:999},children:a.jsxs(mt,{autoScrollIntoView:!0,collapse:n,defaultSelectedKeys:[b],hasCollapseButton:!0,onClickSubMenu:H,onCollapseChange:()=>h(!n),selectedKeys:x,style:{width:"240px",height:"100%"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"0 28px 0 10px",height:"48px",marginTop:"-4px",visibility:n?"hidden":"visible"},children:[a.jsx(ra,{size:32,style:{marginRight:"10px",backgroundColor:"var(--color-text-1)"},children:a.jsx(sa,{style:{color:"var(--color-bg-1)"}})}),a.jsx(Y.Title,{heading:6,style:{margin:"0"},children:"ReactFlux"})]}),a.jsx(At,{style:{marginTop:0,marginBottom:"4px"}}),a.jsx(Y.Title,{heading:6,style:{fontStyle:"italic",color:"var(--color-text-3)"},children:"Articles"}),a.jsx(Xt,{loading:o,animation:!0,text:{rows:3}}),o?null:a.jsxs("div",{children:[a.jsx(rn,{onClick:()=>t("/"),children:a.jsxs("div",{className:"custom-menu-item",children:[a.jsxs("span",{children:[a.jsx(Vi,{}),"All"]}),a.jsx(Y.Ellipsis,{className:"item-count",expandable:!1,children:c||""})]})},"/"),a.jsx(rn,{onClick:()=>t("/today"),children:a.jsxs("div",{className:"custom-menu-item",children:[a.jsxs("span",{children:[a.jsx(Wi,{}),"Today"]}),a.jsx(Y.Ellipsis,{className:"item-count",expandable:!1,children:u||""})]})},"/today"),a.jsx(rn,{onClick:()=>t("/starred"),children:a.jsxs("div",{className:"custom-menu-item",children:[a.jsxs("span",{children:[a.jsx(or,{}),"Starred"]}),a.jsx(Y.Ellipsis,{className:"item-count",expandable:!1,children:s||""})]})},"/starred"),a.jsx(rn,{onClick:()=>t("/history"),children:a.jsxs("div",{className:"custom-menu-item",children:[a.jsxs("span",{children:[a.jsx($i,{}),"History"]}),a.jsx(Y.Ellipsis,{className:"item-count",expandable:!1,children:d||""})]})},"/history")]}),a.jsx(Y.Title,{heading:6,style:{fontStyle:"italic",color:"var(--color-text-3)"},children:"Feeds"}),a.jsx(Xt,{loading:o,animation:!0,text:{rows:6}}),o?null:i.map(T=>{var P;return a.jsx(mt.SubMenu,{selectable:!0,title:a.jsx(_s,{group:T,isOpen:g.includes(`/group/${T.id}`)}),onClick:O=>{w([`/group/${T.id}`]),!(O.target.tagName==="svg"||O.target.tagName==="path")&&b!==`/group/${T.id}`&&t(`/group/${T.id}`)},children:(P=X[T.id])==null?void 0:P.map(O=>a.jsx(rn,{onClick:j=>{j.stopPropagation(),w([`/group/${T.id}`]),t(`/feed/${O.id}`)},children:a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs(Y.Ellipsis,{expandable:!1,showTooltip:!0,style:{width:O.unreadCount!==0?"80%":"100%"},children:[l&&a.jsx("img",{src:`https://icons.duckduckgo.com/ip3/${new URL(O.site_url).hostname}.ico`,alt:"Icon",style:{marginRight:"8px",width:"16px",height:"16px",verticalAlign:"-2px"}}),O.title]}),O.unreadCount!==0&&a.jsx(Y.Ellipsis,{expandable:!1,style:{color:"var(--color-text-4)",display:"flex",justifyContent:"flex-end"},children:O.unreadCount})]})},`/feed/${O.id}`))},`/group/${T.id}`)})]})})},Ms=()=>{const e=S(o=>o.initData),t=S(o=>o.theme),n=S(o=>o.isSysDarkMode),r=S(o=>o.setIsSysDarkMode),i=S(o=>o.color);return m.useEffect(()=>{e();const o=u=>{r(u.matches)},c=window.matchMedia("(prefers-color-scheme: dark)");return c.addEventListener("change",o),()=>{c.removeEventListener("change",o)}},[]),m.useEffect(()=>{(c=>{document.body.setAttribute("arco-theme",c?"dark":"light"),document.body.style.colorScheme=c?"dark":"light"})(t==="system"?n:t==="dark")},[n,t]),m.useEffect(()=>{kn(i)},[i]),a.jsxs("div",{className:"app",style:{display:"flex",backgroundColor:"var(--color-bg-1)"},children:[a.jsx(rs,{}),a.jsx(ks,{}),a.jsx(hs,{})]})};var fn={};(function e(t,n,r,i){var o=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),c=typeof Path2D=="function"&&typeof DOMMatrix=="function",u=function(){if(!t.OffscreenCanvas)return!1;var p=new OffscreenCanvas(1,1),f=p.getContext("2d");f.fillRect(0,0,1,1);var k=p.transferToImageBitmap();try{f.createPattern(k,"no-repeat")}catch{return!1}return!0}();function s(){}function d(p){var f=n.exports.Promise,k=f!==void 0?f:t.Promise;return typeof k=="function"?new k(p):(p(s,s),null)}var l=function(p,f){return{transform:function(k){if(p)return k;if(f.has(k))return f.get(k);var A=new OffscreenCanvas(k.width,k.height),M=A.getContext("2d");return M.drawImage(k,0,0),f.set(k,A),A},clear:function(){f.clear()}}}(u,new Map),h=function(){var p=Math.floor(16.666666666666668),f,k,A={},M=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(f=function(F){var R=Math.random();return A[R]=requestAnimationFrame(function N(z){M===z||M+p-1<z?(M=z,delete A[R],F()):A[R]=requestAnimationFrame(N)}),R},k=function(F){A[F]&&cancelAnimationFrame(A[F])}):(f=function(F){return setTimeout(F,p)},k=function(F){return clearTimeout(F)}),{frame:f,cancel:k}}(),x=function(){var p,f,k={};function A(M){function F(R,N){M.postMessage({options:R||{},callback:N})}M.init=function(N){var z=N.transferControlToOffscreen();M.postMessage({canvas:z},[z])},M.fire=function(N,z,W){if(f)return F(N,null),f;var V=Math.random().toString(36).slice(2);return f=d(function(J){function C(U){U.data.callback===V&&(delete k[V],M.removeEventListener("message",C),f=null,l.clear(),W(),J())}M.addEventListener("message",C),F(N,V),k[V]=C.bind(null,{data:{callback:V}})}),f},M.reset=function(){M.postMessage({reset:!0});for(var N in k)k[N](),delete k[N]}}return function(){if(p)return p;if(!r&&o){var M=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{p=new Worker(URL.createObjectURL(new Blob([M])))}catch(F){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",F),null}A(p)}return p}}(),w={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function g(p,f){return f?f(p):p}function v(p){return p!=null}function b(p,f,k){return g(p&&v(p[f])?p[f]:w[f],k)}function H(p){return p<0?0:Math.floor(p)}function X(p,f){return Math.floor(Math.random()*(f-p))+p}function T(p){return parseInt(p,16)}function P(p){return p.map(O)}function O(p){var f=String(p).replace(/[^0-9a-f]/gi,"");return f.length<6&&(f=f[0]+f[0]+f[1]+f[1]+f[2]+f[2]),{r:T(f.substring(0,2)),g:T(f.substring(2,4)),b:T(f.substring(4,6))}}function j(p){var f=b(p,"origin",Object);return f.x=b(f,"x",Number),f.y=b(f,"y",Number),f}function I(p){p.width=document.documentElement.clientWidth,p.height=document.documentElement.clientHeight}function E(p){var f=p.getBoundingClientRect();p.width=f.width,p.height=f.height}function _(p){var f=document.createElement("canvas");return f.style.position="fixed",f.style.top="0px",f.style.left="0px",f.style.pointerEvents="none",f.style.zIndex=p,f}function Q(p,f,k,A,M,F,R,N,z){p.save(),p.translate(f,k),p.rotate(F),p.scale(A,M),p.arc(0,0,1,R,N,z),p.restore()}function ve(p){var f=p.angle*(Math.PI/180),k=p.spread*(Math.PI/180);return{x:p.x,y:p.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:p.startVelocity*.5+Math.random()*p.startVelocity,angle2D:-f+(.5*k-Math.random()*k),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:p.color,shape:p.shape,tick:0,totalTicks:p.ticks,decay:p.decay,drift:p.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:p.gravity*3,ovalScalar:.6,scalar:p.scalar,flat:p.flat}}function Z(p,f){f.x+=Math.cos(f.angle2D)*f.velocity+f.drift,f.y+=Math.sin(f.angle2D)*f.velocity+f.gravity,f.velocity*=f.decay,f.flat?(f.wobble=0,f.wobbleX=f.x+10*f.scalar,f.wobbleY=f.y+10*f.scalar,f.tiltSin=0,f.tiltCos=0,f.random=1):(f.wobble+=f.wobbleSpeed,f.wobbleX=f.x+10*f.scalar*Math.cos(f.wobble),f.wobbleY=f.y+10*f.scalar*Math.sin(f.wobble),f.tiltAngle+=.1,f.tiltSin=Math.sin(f.tiltAngle),f.tiltCos=Math.cos(f.tiltAngle),f.random=Math.random()+2);var k=f.tick++/f.totalTicks,A=f.x+f.random*f.tiltCos,M=f.y+f.random*f.tiltSin,F=f.wobbleX+f.random*f.tiltCos,R=f.wobbleY+f.random*f.tiltSin;if(p.fillStyle="rgba("+f.color.r+", "+f.color.g+", "+f.color.b+", "+(1-k)+")",p.beginPath(),c&&f.shape.type==="path"&&typeof f.shape.path=="string"&&Array.isArray(f.shape.matrix))p.fill(Ge(f.shape.path,f.shape.matrix,f.x,f.y,Math.abs(F-A)*.1,Math.abs(R-M)*.1,Math.PI/10*f.wobble));else if(f.shape.type==="bitmap"){var N=Math.PI/10*f.wobble,z=Math.abs(F-A)*.1,W=Math.abs(R-M)*.1,V=f.shape.bitmap.width*f.scalar,J=f.shape.bitmap.height*f.scalar,C=new DOMMatrix([Math.cos(N)*z,Math.sin(N)*z,-Math.sin(N)*W,Math.cos(N)*W,f.x,f.y]);C.multiplySelf(new DOMMatrix(f.shape.matrix));var U=p.createPattern(l.transform(f.shape.bitmap),"no-repeat");U.setTransform(C),p.globalAlpha=1-k,p.fillStyle=U,p.fillRect(f.x-V/2,f.y-J/2,V,J),p.globalAlpha=1}else if(f.shape==="circle")p.ellipse?p.ellipse(f.x,f.y,Math.abs(F-A)*f.ovalScalar,Math.abs(R-M)*f.ovalScalar,Math.PI/10*f.wobble,0,2*Math.PI):Q(p,f.x,f.y,Math.abs(F-A)*f.ovalScalar,Math.abs(R-M)*f.ovalScalar,Math.PI/10*f.wobble,0,2*Math.PI);else if(f.shape==="star")for(var L=Math.PI/2*3,D=4*f.scalar,ge=8*f.scalar,ie=f.x,ye=f.y,Me=5,se=Math.PI/Me;Me--;)ie=f.x+Math.cos(L)*ge,ye=f.y+Math.sin(L)*ge,p.lineTo(ie,ye),L+=se,ie=f.x+Math.cos(L)*D,ye=f.y+Math.sin(L)*D,p.lineTo(ie,ye),L+=se;else p.moveTo(Math.floor(f.x),Math.floor(f.y)),p.lineTo(Math.floor(f.wobbleX),Math.floor(M)),p.lineTo(Math.floor(F),Math.floor(R)),p.lineTo(Math.floor(A),Math.floor(f.wobbleY));return p.closePath(),p.fill(),f.tick<f.totalTicks}function Ne(p,f,k,A,M){var F=f.slice(),R=p.getContext("2d"),N,z,W=d(function(V){function J(){N=z=null,R.clearRect(0,0,A.width,A.height),l.clear(),M(),V()}function C(){r&&!(A.width===i.width&&A.height===i.height)&&(A.width=p.width=i.width,A.height=p.height=i.height),!A.width&&!A.height&&(k(p),A.width=p.width,A.height=p.height),R.clearRect(0,0,A.width,A.height),F=F.filter(function(U){return Z(R,U)}),F.length?N=h.frame(C):J()}N=h.frame(C),z=J});return{addFettis:function(V){return F=F.concat(V),W},canvas:p,promise:W,reset:function(){N&&h.cancel(N),z&&z()}}}function ce(p,f){var k=!p,A=!!b(f||{},"resize"),M=!1,F=b(f,"disableForReducedMotion",Boolean),R=o&&!!b(f||{},"useWorker"),N=R?x():null,z=k?I:E,W=p&&N?!!p.__confetti_initialized:!1,V=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,J;function C(L,D,ge){for(var ie=b(L,"particleCount",H),ye=b(L,"angle",Number),Me=b(L,"spread",Number),se=b(L,"startVelocity",Number),Xe=b(L,"decay",Number),xt=b(L,"gravity",Number),Oe=b(L,"drift",Number),bt=b(L,"colors",P),Et=b(L,"ticks",Number),Fe=b(L,"shapes"),Ie=b(L,"scalar"),Ve=!!b(L,"flat"),st=j(L),wt=ie,lt=[],Dt=p.width*st.x,we=p.height*st.y;wt--;)lt.push(ve({x:Dt,y:we,angle:ye,spread:Me,startVelocity:se,color:bt[wt%bt.length],shape:Fe[X(0,Fe.length)],ticks:Et,decay:Xe,gravity:xt,drift:Oe,scalar:Ie,flat:Ve}));return J?J.addFettis(lt):(J=Ne(p,lt,z,D,ge),J.promise)}function U(L){var D=F||b(L,"disableForReducedMotion",Boolean),ge=b(L,"zIndex",Number);if(D&&V)return d(function(se){se()});k&&J?p=J.canvas:k&&!p&&(p=_(ge),document.body.appendChild(p)),A&&!W&&z(p);var ie={width:p.width,height:p.height};N&&!W&&N.init(p),W=!0,N&&(p.__confetti_initialized=!0);function ye(){if(N){var se={getBoundingClientRect:function(){if(!k)return p.getBoundingClientRect()}};z(se),N.postMessage({resize:{width:se.width,height:se.height}});return}ie.width=ie.height=null}function Me(){J=null,A&&(M=!1,t.removeEventListener("resize",ye)),k&&p&&(document.body.removeChild(p),p=null,W=!1)}return A&&!M&&(M=!0,t.addEventListener("resize",ye,!1)),N?N.fire(L,ie,Me):C(L,ie,Me)}return U.reset=function(){N&&N.reset(),J&&J.reset()},U}var oe;function ue(){return oe||(oe=ce(null,{useWorker:!0,resize:!0})),oe}function Ge(p,f,k,A,M,F,R){var N=new Path2D(p),z=new Path2D;z.addPath(N,new DOMMatrix(f));var W=new Path2D;return W.addPath(z,new DOMMatrix([Math.cos(R)*M,Math.sin(R)*M,-Math.sin(R)*F,Math.cos(R)*F,k,A])),W}function Ee(p){if(!c)throw new Error("path confetti are not supported in this browser");var f,k;typeof p=="string"?f=p:(f=p.path,k=p.matrix);var A=new Path2D(f),M=document.createElement("canvas"),F=M.getContext("2d");if(!k){for(var R=1e3,N=R,z=R,W=0,V=0,J,C,U=0;U<R;U+=2)for(var L=0;L<R;L+=2)F.isPointInPath(A,U,L,"nonzero")&&(N=Math.min(N,U),z=Math.min(z,L),W=Math.max(W,U),V=Math.max(V,L));J=W-N,C=V-z;var D=10,ge=Math.min(D/J,D/C);k=[ge,0,0,ge,-Math.round(J/2+N)*ge,-Math.round(C/2+z)*ge]}return{type:"path",path:f,matrix:k}}function ot(p){var f,k=1,A="#000000",M='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof p=="string"?f=p:(f=p.text,k="scalar"in p?p.scalar:k,M="fontFamily"in p?p.fontFamily:M,A="color"in p?p.color:A);var F=10*k,R=""+F+"px "+M,N=new OffscreenCanvas(F,F),z=N.getContext("2d");z.font=R;var W=z.measureText(f),V=Math.ceil(W.actualBoundingBoxRight+W.actualBoundingBoxLeft),J=Math.ceil(W.actualBoundingBoxAscent+W.actualBoundingBoxDescent),C=2,U=W.actualBoundingBoxLeft+C,L=W.actualBoundingBoxAscent+C;V+=C+C,J+=C+C,N=new OffscreenCanvas(V,J),z=N.getContext("2d"),z.font=R,z.fillStyle=A,z.fillText(f,U,L);var D=1/k;return{type:"bitmap",bitmap:N.transferToImageBitmap(),matrix:[D,0,0,D,-V*D/2,-J*D/2]}}n.exports=function(){return ue().apply(this,arguments)},n.exports.reset=function(){ue().reset()},n.exports.create=ce,n.exports.shapeFromPath=Ee,n.exports.shapeFromText=ot})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),fn,!1);const Is=fn.exports;fn.exports.create;const it=m.createContext(null),Qt=({children:e})=>{const[t,n]=m.useState(0),[r,i]=m.useState(0),[o,c]=m.useState(0),[u,s]=m.useState(!1),[d,l]=m.useState(!1),[h,x]=m.useState([]),[w,g]=m.useState([]),[v,b]=m.useState("all"),[H,X]=m.useState("0"),[T,P]=m.useState(""),[O,j]=m.useState(!0),I=m.useMemo(()=>({entries:h,filteredEntries:w,filterStatus:v,filterString:T,filterType:H,loading:O,loadMoreUnreadVisible:d,loadMoreVisible:u,offset:o,setEntries:x,setFilteredEntries:g,setFilterStatus:b,setFilterString:P,setFilterType:X,setLoading:j,setLoadMoreUnreadVisible:l,setLoadMoreVisible:s,setOffset:c,setTotal:n,setUnreadCount:i,total:t,unreadCount:r}),[h,w,v,T,H,O,d,u,o,t,r]);return a.jsx(it.Provider,{value:I,children:e})},cr=()=>{const e=S(j=>j.setUnreadTotal),t=S(j=>j.setUnreadToday),n=S(j=>j.setReadCount),r=S(j=>j.setStarredCount),i=S(j=>j.activeContent),o=S(j=>j.setActiveContent),c=S(j=>j.updateFeedUnreadCount),u=S(j=>j.updateGroupUnreadCount),{entries:s,filteredEntries:d,setEntries:l,setFilteredEntries:h,setUnreadCount:x}=m.useContext(it),w=(j,I,E)=>j.map(_=>_.id===I.id?E(_):_),g=(j,I,E)=>{o({...j,...I}),l(w(s,j,E)),h(w(d,j,E))},v=(j,I)=>{const{feed:E}=j,_=E.id,Q=E.category.id,ve=Uo(j.published_at);c(_,I),u(Q,I),I==="read"?(e(Z=>Math.max(0,Z-1)),x(Z=>Math.max(0,Z-1)),n(Z=>Z+1),ve&&t(Z=>Math.max(0,Z-1))):(e(Z=>Z+1),x(Z=>Z+1),n(Z=>Math.max(0,Z-1)),ve&&t(Z=>Z+1)),g(j,{status:I},Z=>({...Z,status:I}))},b=(j,I)=>{I?(r(E=>E+1),Is({particleCount:100,angle:120,spread:70,origin:{x:1,y:1}})):r(E=>Math.max(0,E-1)),g(j,{starred:I},E=>({...E,starred:I}))},H=async()=>{const j=i.status,I=j==="read"?"unread":"read";v(i,I),Ea(i.id,I).catch(()=>{ne.error(`Failed to mark entry as ${I}, please try again later`),v(i,j)})},X=async()=>{const{id:j}=i,I=!i.starred;b(i,I),Wo(j).catch(()=>{ne.error(`Failed to ${I?"star":"unstar"} entry, please try again later`),b(i,!I)})};return{handleEntryStatusUpdate:v,handleFetchContent:async()=>{$o(i.id).then(j=>{ne.success("Fetched content successfully"),o({...i,content:j.data.content})}).catch(()=>{ne.error("Failed to fetch content, please try again later")})},toggleEntryStarred:()=>{X()},toggleEntryStatus:()=>{H()}}},ur=()=>{const{filteredEntries:e}=m.useContext(it),t=S(l=>l.activeContent),n=S(l=>l.setActiveContent);return{handleEscapeKey:l=>{t&&(n(null),l.current&&(l.current.setAttribute("tabIndex","-1"),l.current.focus()))},handleLeftKey:l=>{const h=e.findIndex(x=>x.id===(t==null?void 0:t.id));if(h>0){const x=e[h-1];l(x);const w=document.querySelector(".card-custom-selected-style");w&&w.scrollIntoView({behavior:"smooth",block:"end"})}},handleRightKey:l=>{const h=e.findIndex(x=>x.id===(t==null?void 0:t.id));if(h<e.length-1){const x=e[h+1];l(x);const w=document.querySelector(".card-custom-selected-style");w&&w.scrollIntoView({behavior:"smooth",block:"start"})}},handleBKey:()=>{t&&window.open(t.url,"_blank")},handleDKey:l=>{t&&l()},handleMKey:l=>{t&&l()},handleSKey:l=>{t&&l()}}},Na=()=>{const{entries:e,filterStatus:t,filterString:n,filterType:r,offset:i,setEntries:o,setFilteredEntries:c,setLoadMoreUnreadVisible:u,setLoadMoreVisible:s,setOffset:d,total:l,unreadCount:h}=m.useContext(it),[x,w]=m.useState(!1),g=b=>{const T=new DOMParser().parseFromString(b.content,"text/html").querySelector("img");return T&&(b.imgSrc=T.getAttribute("src")),b};return{getFirstImage:g,handleLoadMore:async b=>{var H;w(!0);try{const X=await b(i+100);if((H=X==null?void 0:X.data)!=null&&H.entries){d(I=>I+100);const T=X.data.entries.map(g),P=[...new Map([...e,...T].map(I=>[I.id,I])).values()];o(P);const O=t==="all"?P:P.filter(I=>I.status==="unread"),j=n?Ia(O,r,t,n):O;c(j),s(P.length<l),u(O.length<h&&t==="unread")}}catch(X){console.error("Error fetching more articles:",X)}w(!1)},loadingMore:x}},As=({handleEntryClick:e})=>{const t=S(d=>d.activeContent),{handleFetchContent:n,toggleEntryStarred:r,toggleEntryStatus:i}=cr(),{handleLeftKey:o,handleRightKey:c}=ur();if(!t)return null;const u=t.status==="unread",s=t.starred;return a.jsx("div",{className:"action-buttons",style:{position:"fixed",bottom:"20px",right:"10px",borderRadius:"50%",boxShadow:"0 4px 10px rgba(var(--primary-6), 0.4)"},children:a.jsxs(Rn,{size:0,direction:"vertical",children:[a.jsx(at,{mini:!0,position:"left",content:u?"Mark as read":"Mark as unread",children:a.jsx(le,{type:"primary",size:"mini",style:{borderBottom:"1px solid rgb(var(--primary-5))",borderRadius:"50% 50% 0 0"},onClick:i,icon:u?a.jsx(la,{}):a.jsx(ca,{})})}),a.jsx(at,{mini:!0,position:"left",content:s?"Unstar":"Star",children:a.jsx(le,{type:"primary",size:"mini",style:{borderRadius:"0"},onClick:r,icon:s?a.jsx(On,{style:{color:"#ffcd00"}}):a.jsx(or,{})})}),a.jsx(at,{mini:!0,position:"left",content:"Fetch original article",children:a.jsx(le,{type:"primary",size:"mini",style:{borderTop:"1px solid rgb(var(--primary-5))",borderRadius:"0"},onClick:n,icon:a.jsx(ua,{})})}),a.jsx(at,{mini:!0,position:"left",content:"Previous article",children:a.jsx(le,{type:"primary",size:"mini",style:{borderTop:"1px solid rgb(var(--primary-5))",borderRadius:"0"},onClick:()=>o(e),icon:a.jsx(da,{})})}),a.jsx(at,{mini:!0,position:"left",content:"Next article",children:a.jsx(le,{type:"primary",size:"mini",style:{borderTop:"1px solid rgb(var(--primary-5))",borderRadius:"0 0 50% 50%"},onClick:()=>c(e),icon:a.jsx(fa,{})})})]})})},Ps=({handleEntryClick:e})=>{const t=S(l=>l.activeContent),{handleFetchContent:n,toggleEntryStarred:r,toggleEntryStatus:i}=cr(),{handleLeftKey:o,handleRightKey:c,handleEscapeKey:u}=ur();if(!t)return null;const s=t.status==="unread",d=t.starred;return a.jsxs(le.Group,{className:"action-buttons-mobile",style:{display:"none",justifyContent:"center",position:"fixed",bottom:"40px",left:"50%",transform:"translateX(-50%)",borderRadius:"50%",boxShadow:"0 4px 10px rgba(var(--primary-6), 0.4)"},children:[a.jsx(le,{type:"primary",shape:"round",onClick:()=>u(e),icon:a.jsx(qi,{})}),a.jsx(le,{type:"primary",onClick:()=>i(),icon:s?a.jsx(la,{}):a.jsx(ca,{})}),a.jsx(le,{type:"primary",onClick:()=>r(),icon:d?a.jsx(On,{style:{color:"#ffcd00"}}):a.jsx(or,{})}),a.jsx(le,{type:"primary",onClick:()=>n(),icon:a.jsx(ua,{})}),a.jsx(le,{type:"primary",onClick:()=>o(e),icon:a.jsx(da,{})}),a.jsx(le,{type:"primary",shape:"round",onClick:()=>c(e),icon:a.jsx(fa,{})})]})};var Oa={},dr={},fr={};Object.defineProperty(fr,"__esModule",{value:!0});var Dr="html",Lr="head",vn="body",Rs=/<([a-zA-Z]+[0-9]?)/,Br=/<head[^]*>/i,zr=/<body[^]*>/i,In=function(e,t){throw new Error("This browser does not support `document.implementation.createHTMLDocument`")},er=function(e,t){throw new Error("This browser does not support `DOMParser.prototype.parseFromString`")},Ur=typeof window=="object"&&window.DOMParser;if(typeof Ur=="function"){var Ns=new Ur,Os="text/html";er=function(e,t){return t&&(e="<".concat(t,">").concat(e,"</").concat(t,">")),Ns.parseFromString(e,Os)},In=er}if(typeof document=="object"&&document.implementation){var yn=document.implementation.createHTMLDocument();In=function(e,t){if(t){var n=yn.documentElement.querySelector(t);return n&&(n.innerHTML=e),yn}return yn.documentElement.innerHTML=e,yn}}var xn=typeof document=="object"&&document.createElement("template"),tr;xn&&xn.content&&(tr=function(e){return xn.innerHTML=e,xn.content.childNodes});function Fs(e){var t,n,r=e.match(Rs),i=r&&r[1]?r[1].toLowerCase():"";switch(i){case Dr:{var o=er(e);if(!Br.test(e)){var c=o.querySelector(Lr);(t=c==null?void 0:c.parentNode)===null||t===void 0||t.removeChild(c)}if(!zr.test(e)){var c=o.querySelector(vn);(n=c==null?void 0:c.parentNode)===null||n===void 0||n.removeChild(c)}return o.querySelectorAll(Dr)}case Lr:case vn:{var u=In(e).querySelectorAll(i);return zr.test(e)&&Br.test(e)?u[0].parentNode.childNodes:u}default:{if(tr)return tr(e);var c=In(e,vn).querySelector(vn);return c.childNodes}}}fr.default=Fs;var Kt={},Fa={},hn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Doctype=e.CDATA=e.Tag=e.Style=e.Script=e.Comment=e.Directive=e.Text=e.Root=e.isTag=e.ElementType=void 0;var t;(function(r){r.Root="root",r.Text="text",r.Directive="directive",r.Comment="comment",r.Script="script",r.Style="style",r.Tag="tag",r.CDATA="cdata",r.Doctype="doctype"})(t=e.ElementType||(e.ElementType={}));function n(r){return r.type===t.Tag||r.type===t.Script||r.type===t.Style}e.isTag=n,e.Root=t.Root,e.Text=t.Text,e.Directive=t.Directive,e.Comment=t.Comment,e.Script=t.Script,e.Style=t.Style,e.Tag=t.Tag,e.CDATA=t.CDATA,e.Doctype=t.Doctype})(hn);var q={},gt=te&&te.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),sn=te&&te.__assign||function(){return sn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},sn.apply(this,arguments)};Object.defineProperty(q,"__esModule",{value:!0});q.cloneNode=q.hasChildren=q.isDocument=q.isDirective=q.isComment=q.isText=q.isCDATA=q.isTag=q.Element=q.Document=q.CDATA=q.NodeWithChildren=q.ProcessingInstruction=q.Comment=q.Text=q.DataNode=q.Node=void 0;var Te=hn,hr=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(t){this.prev=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(t){this.next=t},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(t){return t===void 0&&(t=!1),pr(this,t)},e}();q.Node=hr;var Dn=function(e){gt(t,e);function t(n){var r=e.call(this)||this;return r.data=n,r}return Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(n){this.data=n},enumerable:!1,configurable:!0}),t}(hr);q.DataNode=Dn;var Da=function(e){gt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Te.ElementType.Text,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(Dn);q.Text=Da;var La=function(e){gt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Te.ElementType.Comment,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(Dn);q.Comment=La;var Ba=function(e){gt(t,e);function t(n,r){var i=e.call(this,r)||this;return i.name=n,i.type=Te.ElementType.Directive,i}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(Dn);q.ProcessingInstruction=Ba;var Ln=function(e){gt(t,e);function t(n){var r=e.call(this)||this;return r.children=n,r}return Object.defineProperty(t.prototype,"firstChild",{get:function(){var n;return(n=this.children[0])!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(n){this.children=n},enumerable:!1,configurable:!0}),t}(hr);q.NodeWithChildren=Ln;var za=function(e){gt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Te.ElementType.CDATA,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(Ln);q.CDATA=za;var Ua=function(e){gt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Te.ElementType.Root,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(Ln);q.Document=Ua;var Ha=function(e){gt(t,e);function t(n,r,i,o){i===void 0&&(i=[]),o===void 0&&(o=n==="script"?Te.ElementType.Script:n==="style"?Te.ElementType.Style:Te.ElementType.Tag);var c=e.call(this,i)||this;return c.name=n,c.attribs=r,c.type=o,c}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(n){this.name=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var n=this;return Object.keys(this.attribs).map(function(r){var i,o;return{name:r,value:n.attribs[r],namespace:(i=n["x-attribsNamespace"])===null||i===void 0?void 0:i[r],prefix:(o=n["x-attribsPrefix"])===null||o===void 0?void 0:o[r]}})},enumerable:!1,configurable:!0}),t}(Ln);q.Element=Ha;function Va(e){return(0,Te.isTag)(e)}q.isTag=Va;function Wa(e){return e.type===Te.ElementType.CDATA}q.isCDATA=Wa;function $a(e){return e.type===Te.ElementType.Text}q.isText=$a;function Ya(e){return e.type===Te.ElementType.Comment}q.isComment=Ya;function Ga(e){return e.type===Te.ElementType.Directive}q.isDirective=Ga;function Xa(e){return e.type===Te.ElementType.Root}q.isDocument=Xa;function Ds(e){return Object.prototype.hasOwnProperty.call(e,"children")}q.hasChildren=Ds;function pr(e,t){t===void 0&&(t=!1);var n;if($a(e))n=new Da(e.data);else if(Ya(e))n=new La(e.data);else if(Va(e)){var r=t?Xn(e.children):[],i=new Ha(e.name,sn({},e.attribs),r);r.forEach(function(s){return s.parent=i}),e.namespace!=null&&(i.namespace=e.namespace),e["x-attribsNamespace"]&&(i["x-attribsNamespace"]=sn({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(i["x-attribsPrefix"]=sn({},e["x-attribsPrefix"])),n=i}else if(Wa(e)){var r=t?Xn(e.children):[],o=new za(r);r.forEach(function(d){return d.parent=o}),n=o}else if(Xa(e)){var r=t?Xn(e.children):[],c=new Ua(r);r.forEach(function(d){return d.parent=c}),e["x-mode"]&&(c["x-mode"]=e["x-mode"]),n=c}else if(Ga(e)){var u=new Ba(e.name,e.data);e["x-name"]!=null&&(u["x-name"]=e["x-name"],u["x-publicId"]=e["x-publicId"],u["x-systemId"]=e["x-systemId"]),n=u}else throw new Error("Not implemented yet: ".concat(e.type));return n.startIndex=e.startIndex,n.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(n.sourceCodeLocation=e.sourceCodeLocation),n}q.cloneNode=pr;function Xn(e){for(var t=e.map(function(r){return pr(r,!0)}),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}(function(e){var t=te&&te.__createBinding||(Object.create?function(u,s,d,l){l===void 0&&(l=d);var h=Object.getOwnPropertyDescriptor(s,d);(!h||("get"in h?!s.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return s[d]}}),Object.defineProperty(u,l,h)}:function(u,s,d,l){l===void 0&&(l=d),u[l]=s[d]}),n=te&&te.__exportStar||function(u,s){for(var d in u)d!=="default"&&!Object.prototype.hasOwnProperty.call(s,d)&&t(s,u,d)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var r=hn,i=q;n(q,e);var o={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},c=function(){function u(s,d,l){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof d=="function"&&(l=d,d=o),typeof s=="object"&&(d=s,s=void 0),this.callback=s??null,this.options=d??o,this.elementCB=l??null}return u.prototype.onparserinit=function(s){this.parser=s},u.prototype.onreset=function(){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},u.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},u.prototype.onerror=function(s){this.handleCallback(s)},u.prototype.onclosetag=function(){this.lastNode=null;var s=this.tagStack.pop();this.options.withEndIndices&&(s.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(s)},u.prototype.onopentag=function(s,d){var l=this.options.xmlMode?r.ElementType.Tag:void 0,h=new i.Element(s,d,void 0,l);this.addNode(h),this.tagStack.push(h)},u.prototype.ontext=function(s){var d=this.lastNode;if(d&&d.type===r.ElementType.Text)d.data+=s,this.options.withEndIndices&&(d.endIndex=this.parser.endIndex);else{var l=new i.Text(s);this.addNode(l),this.lastNode=l}},u.prototype.oncomment=function(s){if(this.lastNode&&this.lastNode.type===r.ElementType.Comment){this.lastNode.data+=s;return}var d=new i.Comment(s);this.addNode(d),this.lastNode=d},u.prototype.oncommentend=function(){this.lastNode=null},u.prototype.oncdatastart=function(){var s=new i.Text(""),d=new i.CDATA([s]);this.addNode(d),s.parent=d,this.lastNode=s},u.prototype.oncdataend=function(){this.lastNode=null},u.prototype.onprocessinginstruction=function(s,d){var l=new i.ProcessingInstruction(s,d);this.addNode(l)},u.prototype.handleCallback=function(s){if(typeof this.callback=="function")this.callback(s,this.dom);else if(s)throw s},u.prototype.addNode=function(s){var d=this.tagStack[this.tagStack.length-1],l=d.children[d.children.length-1];this.options.withStartIndices&&(s.startIndex=this.parser.startIndex),this.options.withEndIndices&&(s.endIndex=this.parser.endIndex),d.children.push(s),l&&(s.prev=l,l.next=s),s.parent=d,this.lastNode=null},u}();e.DomHandler=c,e.default=c})(Fa);var qa={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CASE_SENSITIVE_TAG_NAMES_MAP=e.CASE_SENSITIVE_TAG_NAMES=void 0,e.CASE_SENSITIVE_TAG_NAMES=["animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","linearGradient","radialGradient","textPath"],e.CASE_SENSITIVE_TAG_NAMES_MAP=e.CASE_SENSITIVE_TAG_NAMES.reduce(function(t,n){return t[n.toLowerCase()]=n,t},{})})(qa);Object.defineProperty(Kt,"__esModule",{value:!0});Kt.formatDOM=Kt.formatAttributes=void 0;var bn=Fa,Ls=qa;function Bs(e){return Ls.CASE_SENSITIVE_TAG_NAMES_MAP[e]}function Ka(e){for(var t={},n=0,r=e.length;n<r;n++){var i=e[n];t[i.name]=i.value}return t}Kt.formatAttributes=Ka;function zs(e){e=e.toLowerCase();var t=Bs(e);return t||e}function Qa(e,t,n){t===void 0&&(t=null);for(var r=[],i,o=0,c=e.length;o<c;o++){var u=e[o];switch(u.nodeType){case 1:{var s=zs(u.nodeName);i=new bn.Element(s,Ka(u.attributes)),i.children=Qa(s==="template"?u.content.childNodes:u.childNodes,i);break}case 3:i=new bn.Text(u.nodeValue);break;case 8:i=new bn.Comment(u.nodeValue);break;default:continue}var d=r[o-1]||null;d&&(d.next=i),i.parent=t,i.prev=d,i.next=null,r.push(i)}return n&&(i=new bn.ProcessingInstruction(n.substring(0,n.indexOf(" ")).toLowerCase(),n),i.next=r[0]||null,i.parent=t,r.unshift(i),r[1]&&(r[1].prev=r[0])),r}Kt.formatDOM=Qa;var Us=te&&te.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(dr,"__esModule",{value:!0});var Hs=Us(fr),Vs=Kt,Ws=/<(![a-zA-Z\s]+)>/;function $s(e){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];var t=e.match(Ws),n=t?t[1]:void 0;return(0,Vs.formatDOM)((0,Hs.default)(e),null,n)}dr.default=$s;var Bn={},He={},zn={},Ys=0;zn.SAME=Ys;var Gs=1;zn.CAMELCASE=Gs;zn.possibleStandardNames={accept:0,acceptCharset:1,"accept-charset":"acceptCharset",accessKey:1,action:0,allowFullScreen:1,alt:0,as:0,async:0,autoCapitalize:1,autoComplete:1,autoCorrect:1,autoFocus:1,autoPlay:1,autoSave:1,capture:0,cellPadding:1,cellSpacing:1,challenge:0,charSet:1,checked:0,children:0,cite:0,class:"className",classID:1,className:1,cols:0,colSpan:1,content:0,contentEditable:1,contextMenu:1,controls:0,controlsList:1,coords:0,crossOrigin:1,dangerouslySetInnerHTML:1,data:0,dateTime:1,default:0,defaultChecked:1,defaultValue:1,defer:0,dir:0,disabled:0,disablePictureInPicture:1,disableRemotePlayback:1,download:0,draggable:0,encType:1,enterKeyHint:1,for:"htmlFor",form:0,formMethod:1,formAction:1,formEncType:1,formNoValidate:1,formTarget:1,frameBorder:1,headers:0,height:0,hidden:0,high:0,href:0,hrefLang:1,htmlFor:1,httpEquiv:1,"http-equiv":"httpEquiv",icon:0,id:0,innerHTML:1,inputMode:1,integrity:0,is:0,itemID:1,itemProp:1,itemRef:1,itemScope:1,itemType:1,keyParams:1,keyType:1,kind:0,label:0,lang:0,list:0,loop:0,low:0,manifest:0,marginWidth:1,marginHeight:1,max:0,maxLength:1,media:0,mediaGroup:1,method:0,min:0,minLength:1,multiple:0,muted:0,name:0,noModule:1,nonce:0,noValidate:1,open:0,optimum:0,pattern:0,placeholder:0,playsInline:1,poster:0,preload:0,profile:0,radioGroup:1,readOnly:1,referrerPolicy:1,rel:0,required:0,reversed:0,role:0,rows:0,rowSpan:1,sandbox:0,scope:0,scoped:0,scrolling:0,seamless:0,selected:0,shape:0,size:0,sizes:0,span:0,spellCheck:1,src:0,srcDoc:1,srcLang:1,srcSet:1,start:0,step:0,style:0,summary:0,tabIndex:1,target:0,title:0,type:0,useMap:1,value:0,width:0,wmode:0,wrap:0,about:0,accentHeight:1,"accent-height":"accentHeight",accumulate:0,additive:0,alignmentBaseline:1,"alignment-baseline":"alignmentBaseline",allowReorder:1,alphabetic:0,amplitude:0,arabicForm:1,"arabic-form":"arabicForm",ascent:0,attributeName:1,attributeType:1,autoReverse:1,azimuth:0,baseFrequency:1,baselineShift:1,"baseline-shift":"baselineShift",baseProfile:1,bbox:0,begin:0,bias:0,by:0,calcMode:1,capHeight:1,"cap-height":"capHeight",clip:0,clipPath:1,"clip-path":"clipPath",clipPathUnits:1,clipRule:1,"clip-rule":"clipRule",color:0,colorInterpolation:1,"color-interpolation":"colorInterpolation",colorInterpolationFilters:1,"color-interpolation-filters":"colorInterpolationFilters",colorProfile:1,"color-profile":"colorProfile",colorRendering:1,"color-rendering":"colorRendering",contentScriptType:1,contentStyleType:1,cursor:0,cx:0,cy:0,d:0,datatype:0,decelerate:0,descent:0,diffuseConstant:1,direction:0,display:0,divisor:0,dominantBaseline:1,"dominant-baseline":"dominantBaseline",dur:0,dx:0,dy:0,edgeMode:1,elevation:0,enableBackground:1,"enable-background":"enableBackground",end:0,exponent:0,externalResourcesRequired:1,fill:0,fillOpacity:1,"fill-opacity":"fillOpacity",fillRule:1,"fill-rule":"fillRule",filter:0,filterRes:1,filterUnits:1,floodOpacity:1,"flood-opacity":"floodOpacity",floodColor:1,"flood-color":"floodColor",focusable:0,fontFamily:1,"font-family":"fontFamily",fontSize:1,"font-size":"fontSize",fontSizeAdjust:1,"font-size-adjust":"fontSizeAdjust",fontStretch:1,"font-stretch":"fontStretch",fontStyle:1,"font-style":"fontStyle",fontVariant:1,"font-variant":"fontVariant",fontWeight:1,"font-weight":"fontWeight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:1,"glyph-name":"glyphName",glyphOrientationHorizontal:1,"glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphOrientationVertical:1,"glyph-orientation-vertical":"glyphOrientationVertical",glyphRef:1,gradientTransform:1,gradientUnits:1,hanging:0,horizAdvX:1,"horiz-adv-x":"horizAdvX",horizOriginX:1,"horiz-origin-x":"horizOriginX",ideographic:0,imageRendering:1,"image-rendering":"imageRendering",in2:0,in:0,inlist:0,intercept:0,k1:0,k2:0,k3:0,k4:0,k:0,kernelMatrix:1,kernelUnitLength:1,kerning:0,keyPoints:1,keySplines:1,keyTimes:1,lengthAdjust:1,letterSpacing:1,"letter-spacing":"letterSpacing",lightingColor:1,"lighting-color":"lightingColor",limitingConeAngle:1,local:0,markerEnd:1,"marker-end":"markerEnd",markerHeight:1,markerMid:1,"marker-mid":"markerMid",markerStart:1,"marker-start":"markerStart",markerUnits:1,markerWidth:1,mask:0,maskContentUnits:1,maskUnits:1,mathematical:0,mode:0,numOctaves:1,offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:1,"overline-position":"overlinePosition",overlineThickness:1,"overline-thickness":"overlineThickness",paintOrder:1,"paint-order":"paintOrder",panose1:0,"panose-1":"panose1",pathLength:1,patternContentUnits:1,patternTransform:1,patternUnits:1,pointerEvents:1,"pointer-events":"pointerEvents",points:0,pointsAtX:1,pointsAtY:1,pointsAtZ:1,prefix:0,preserveAlpha:1,preserveAspectRatio:1,primitiveUnits:1,property:0,r:0,radius:0,refX:1,refY:1,renderingIntent:1,"rendering-intent":"renderingIntent",repeatCount:1,repeatDur:1,requiredExtensions:1,requiredFeatures:1,resource:0,restart:0,result:0,results:0,rotate:0,rx:0,ry:0,scale:0,security:0,seed:0,shapeRendering:1,"shape-rendering":"shapeRendering",slope:0,spacing:0,specularConstant:1,specularExponent:1,speed:0,spreadMethod:1,startOffset:1,stdDeviation:1,stemh:0,stemv:0,stitchTiles:1,stopColor:1,"stop-color":"stopColor",stopOpacity:1,"stop-opacity":"stopOpacity",strikethroughPosition:1,"strikethrough-position":"strikethroughPosition",strikethroughThickness:1,"strikethrough-thickness":"strikethroughThickness",string:0,stroke:0,strokeDasharray:1,"stroke-dasharray":"strokeDasharray",strokeDashoffset:1,"stroke-dashoffset":"strokeDashoffset",strokeLinecap:1,"stroke-linecap":"strokeLinecap",strokeLinejoin:1,"stroke-linejoin":"strokeLinejoin",strokeMiterlimit:1,"stroke-miterlimit":"strokeMiterlimit",strokeWidth:1,"stroke-width":"strokeWidth",strokeOpacity:1,"stroke-opacity":"strokeOpacity",suppressContentEditableWarning:1,suppressHydrationWarning:1,surfaceScale:1,systemLanguage:1,tableValues:1,targetX:1,targetY:1,textAnchor:1,"text-anchor":"textAnchor",textDecoration:1,"text-decoration":"textDecoration",textLength:1,textRendering:1,"text-rendering":"textRendering",to:0,transform:0,typeof:0,u1:0,u2:0,underlinePosition:1,"underline-position":"underlinePosition",underlineThickness:1,"underline-thickness":"underlineThickness",unicode:0,unicodeBidi:1,"unicode-bidi":"unicodeBidi",unicodeRange:1,"unicode-range":"unicodeRange",unitsPerEm:1,"units-per-em":"unitsPerEm",unselectable:0,vAlphabetic:1,"v-alphabetic":"vAlphabetic",values:0,vectorEffect:1,"vector-effect":"vectorEffect",version:0,vertAdvY:1,"vert-adv-y":"vertAdvY",vertOriginX:1,"vert-origin-x":"vertOriginX",vertOriginY:1,"vert-origin-y":"vertOriginY",vHanging:1,"v-hanging":"vHanging",vIdeographic:1,"v-ideographic":"vIdeographic",viewBox:1,viewTarget:1,visibility:0,vMathematical:1,"v-mathematical":"vMathematical",vocab:0,widths:0,wordSpacing:1,"word-spacing":"wordSpacing",writingMode:1,"writing-mode":"writingMode",x1:0,x2:0,x:0,xChannelSelector:1,xHeight:1,"x-height":"xHeight",xlinkActuate:1,"xlink:actuate":"xlinkActuate",xlinkArcrole:1,"xlink:arcrole":"xlinkArcrole",xlinkHref:1,"xlink:href":"xlinkHref",xlinkRole:1,"xlink:role":"xlinkRole",xlinkShow:1,"xlink:show":"xlinkShow",xlinkTitle:1,"xlink:title":"xlinkTitle",xlinkType:1,"xlink:type":"xlinkType",xmlBase:1,"xml:base":"xmlBase",xmlLang:1,"xml:lang":"xmlLang",xmlns:0,"xml:space":"xmlSpace",xmlnsXlink:1,"xmlns:xlink":"xmlnsXlink",xmlSpace:1,y1:0,y2:0,y:0,yChannelSelector:1,z:0,zoomAndPan:1};const Za=0,vt=1,Un=2,Hn=3,mr=4,Ja=5,ei=6;function Xs(e){return be.hasOwnProperty(e)?be[e]:null}function Se(e,t,n,r,i,o,c){this.acceptsBooleans=t===Un||t===Hn||t===mr,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=c}const be={},qs=["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"];qs.forEach(e=>{be[e]=new Se(e,Za,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(([e,t])=>{be[e]=new Se(e,vt,!1,t,null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(e=>{be[e]=new Se(e,Un,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(e=>{be[e]=new Se(e,Un,!1,e,null,!1,!1)});["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(e=>{be[e]=new Se(e,Hn,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(e=>{be[e]=new Se(e,Hn,!0,e,null,!1,!1)});["capture","download"].forEach(e=>{be[e]=new Se(e,mr,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(e=>{be[e]=new Se(e,ei,!1,e,null,!1,!1)});["rowSpan","start"].forEach(e=>{be[e]=new Se(e,Ja,!1,e.toLowerCase(),null,!1,!1)});const gr=/[\-\:]([a-z])/g,vr=e=>e[1].toUpperCase();["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(e=>{const t=e.replace(gr,vr);be[t]=new Se(t,vt,!1,e,null,!1,!1)});["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(e=>{const t=e.replace(gr,vr);be[t]=new Se(t,vt,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(e=>{const t=e.replace(gr,vr);be[t]=new Se(t,vt,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(e=>{be[e]=new Se(e,vt,!1,e.toLowerCase(),null,!1,!1)});const Ks="xlinkHref";be[Ks]=new Se("xlinkHref",vt,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(e=>{be[e]=new Se(e,vt,!1,e.toLowerCase(),null,!0,!0)});const{CAMELCASE:Qs,SAME:Zs,possibleStandardNames:Hr}=zn,Js=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",el=Js+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",tl=RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+el+"]*$")),nl=Object.keys(Hr).reduce((e,t)=>{const n=Hr[t];return n===Zs?e[t]=t:n===Qs?e[t.toLowerCase()]=t:e[t]=n,e},{});He.BOOLEAN=Hn;He.BOOLEANISH_STRING=Un;He.NUMERIC=Ja;He.OVERLOADED_BOOLEAN=mr;He.POSITIVE_NUMERIC=ei;He.RESERVED=Za;He.STRING=vt;He.getPropertyInfo=Xs;He.isCustomAttribute=tl;He.possibleStandardNames=nl;var yr={},xr={},Vr=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,rl=/\n/g,al=/^\s*/,il=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,ol=/^:\s*/,sl=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,ll=/^[;\s]*/,cl=/^\s+|\s+$/g,ul=`
`,Wr="/",$r="*",Mt="",dl="comment",fl="declaration",hl=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(g){var v=g.match(rl);v&&(n+=v.length);var b=g.lastIndexOf(ul);r=~b?g.length-b:r+g.length}function o(){var g={line:n,column:r};return function(v){return v.position=new c(g),d(),v}}function c(g){this.start=g,this.end={line:n,column:r},this.source=t.source}c.prototype.content=e;function u(g){var v=new Error(t.source+":"+n+":"+r+": "+g);if(v.reason=g,v.filename=t.source,v.line=n,v.column=r,v.source=e,!t.silent)throw v}function s(g){var v=g.exec(e);if(v){var b=v[0];return i(b),e=e.slice(b.length),v}}function d(){s(al)}function l(g){var v;for(g=g||[];v=h();)v!==!1&&g.push(v);return g}function h(){var g=o();if(!(Wr!=e.charAt(0)||$r!=e.charAt(1))){for(var v=2;Mt!=e.charAt(v)&&($r!=e.charAt(v)||Wr!=e.charAt(v+1));)++v;if(v+=2,Mt===e.charAt(v-1))return u("End of comment missing");var b=e.slice(2,v-2);return r+=2,i(b),e=e.slice(v),r+=2,g({type:dl,comment:b})}}function x(){var g=o(),v=s(il);if(v){if(h(),!s(ol))return u("property missing ':'");var b=s(sl),H=g({type:fl,property:Yr(v[0].replace(Vr,Mt)),value:b?Yr(b[0].replace(Vr,Mt)):Mt});return s(ll),H}}function w(){var g=[];l(g);for(var v;v=x();)v!==!1&&(g.push(v),l(g));return g}return d(),w()};function Yr(e){return e?e.replace(cl,Mt):Mt}var pl=te&&te.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xr,"__esModule",{value:!0});var ml=pl(hl);function gl(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,ml.default)(e),i=typeof t=="function";return r.forEach(function(o){if(o.type==="declaration"){var c=o.property,u=o.value;i?t(c,u,o):u&&(n=n||{},n[c]=u)}}),n}xr.default=gl;var Vn={};Object.defineProperty(Vn,"__esModule",{value:!0});Vn.camelCase=void 0;var vl=/^--[a-zA-Z0-9-]+$/,yl=/-([a-z])/g,xl=/^[^-]+$/,bl=/^-(webkit|moz|ms|o|khtml)-/,El=/^-(ms)-/,wl=function(e){return!e||xl.test(e)||vl.test(e)},Cl=function(e,t){return t.toUpperCase()},Gr=function(e,t){return"".concat(t,"-")},jl=function(e,t){return t===void 0&&(t={}),wl(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(El,Gr):e=e.replace(bl,Gr),e.replace(yl,Cl))};Vn.camelCase=jl;var Sl=te&&te.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Tl=Sl(xr),_l=Vn;function nr(e,t){var n={};return!e||typeof e!="string"||(0,Tl.default)(e,function(r,i){r&&i&&(n[(0,_l.camelCase)(r,t)]=i)}),n}nr.default=nr;var kl=nr;(function(e){var t=te&&te.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0}),e.returnFirstArg=e.canTextBeChildOfNode=e.ELEMENTS_WITH_NO_TEXT_CHILDREN=e.PRESERVE_CUSTOM_ATTRIBUTES=e.setStyleProp=e.isCustomComponent=void 0;var n=m,r=t(kl),i=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);function o(l,h){return l.includes("-")?!i.has(l):!!(h&&typeof h.is=="string")}e.isCustomComponent=o;var c={reactCompat:!0};function u(l,h){if(typeof l=="string"){if(!l.trim()){h.style={};return}try{h.style=(0,r.default)(l,c)}catch{h.style={}}}}e.setStyleProp=u,e.PRESERVE_CUSTOM_ATTRIBUTES=Number(n.version.split(".")[0])>=16,e.ELEMENTS_WITH_NO_TEXT_CHILDREN=new Set(["tr","tbody","thead","tfoot","colgroup","table","head","html","frameset"]);var s=function(l){return!e.ELEMENTS_WITH_NO_TEXT_CHILDREN.has(l.name)};e.canTextBeChildOfNode=s;var d=function(l){return l};e.returnFirstArg=d})(yr);Object.defineProperty(Bn,"__esModule",{value:!0});var an=He,Xr=yr,Ml=["checked","value"],Il=["input","select","textarea"],Al={reset:!0,submit:!0};function Pl(e,t){e===void 0&&(e={});var n={},r=!!(e.type&&Al[e.type]);for(var i in e){var o=e[i];if((0,an.isCustomAttribute)(i)){n[i]=o;continue}var c=i.toLowerCase(),u=qr(c);if(u){var s=(0,an.getPropertyInfo)(u);switch(Ml.includes(u)&&Il.includes(t)&&!r&&(u=qr("default"+c)),n[u]=o,s&&s.type){case an.BOOLEAN:n[u]=!0;break;case an.OVERLOADED_BOOLEAN:o===""&&(n[u]=!0);break}continue}Xr.PRESERVE_CUSTOM_ATTRIBUTES&&(n[i]=o)}return(0,Xr.setStyleProp)(e.style,n),n}Bn.default=Pl;function qr(e){return an.possibleStandardNames[e]}var br={},Rl=te&&te.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(br,"__esModule",{value:!0});var qn=m,Nl=Rl(Bn),ln=yr,Ol={cloneElement:qn.cloneElement,createElement:qn.createElement,isValidElement:qn.isValidElement};function ti(e,t){t===void 0&&(t={});for(var n=[],r=typeof t.replace=="function",i=t.transform||ln.returnFirstArg,o=t.library||Ol,c=o.cloneElement,u=o.createElement,s=o.isValidElement,d=e.length,l=0;l<d;l++){var h=e[l];if(r){var x=t.replace(h,l);if(s(x)){d>1&&(x=c(x,{key:x.key||l})),n.push(i(x,h,l));continue}}if(h.type==="text"){var w=!h.data.trim().length;if(w&&h.parent&&!(0,ln.canTextBeChildOfNode)(h.parent)||t.trim&&w)continue;n.push(i(h.data,h,l));continue}var g=h,v={};Fl(g)?((0,ln.setStyleProp)(g.attribs.style,g.attribs),v=g.attribs):g.attribs&&(v=(0,Nl.default)(g.attribs,g.name));var b=void 0;switch(h.type){case"script":case"style":h.children[0]&&(v.dangerouslySetInnerHTML={__html:h.children[0].data});break;case"tag":h.name==="textarea"&&h.children[0]?v.defaultValue=h.children[0].data:h.children&&h.children.length&&(b=ti(h.children,t));break;default:continue}d>1&&(v.key=l),n.push(i(u(h.name,v,b),h,l))}return n.length===1?n[0]:n}br.default=ti;function Fl(e){return ln.PRESERVE_CUSTOM_ATTRIBUTES&&e.type==="tag"&&(0,ln.isCustomComponent)(e.name,e.attribs)}var ni={},K={},yt=te&&te.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),cn=te&&te.__assign||function(){return cn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},cn.apply(this,arguments)};Object.defineProperty(K,"__esModule",{value:!0});K.cloneNode=K.hasChildren=K.isDocument=K.isDirective=K.isComment=K.isText=K.isCDATA=K.isTag=K.Element=K.Document=K.CDATA=K.NodeWithChildren=K.ProcessingInstruction=K.Comment=K.Text=K.DataNode=K.Node=void 0;var _e=hn,Er=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(t){this.prev=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(t){this.next=t},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(t){return t===void 0&&(t=!1),wr(this,t)},e}();K.Node=Er;var Wn=function(e){yt(t,e);function t(n){var r=e.call(this)||this;return r.data=n,r}return Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(n){this.data=n},enumerable:!1,configurable:!0}),t}(Er);K.DataNode=Wn;var ri=function(e){yt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=_e.ElementType.Text,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(Wn);K.Text=ri;var ai=function(e){yt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=_e.ElementType.Comment,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(Wn);K.Comment=ai;var ii=function(e){yt(t,e);function t(n,r){var i=e.call(this,r)||this;return i.name=n,i.type=_e.ElementType.Directive,i}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(Wn);K.ProcessingInstruction=ii;var $n=function(e){yt(t,e);function t(n){var r=e.call(this)||this;return r.children=n,r}return Object.defineProperty(t.prototype,"firstChild",{get:function(){var n;return(n=this.children[0])!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(n){this.children=n},enumerable:!1,configurable:!0}),t}(Er);K.NodeWithChildren=$n;var oi=function(e){yt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=_e.ElementType.CDATA,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}($n);K.CDATA=oi;var si=function(e){yt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=_e.ElementType.Root,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}($n);K.Document=si;var li=function(e){yt(t,e);function t(n,r,i,o){i===void 0&&(i=[]),o===void 0&&(o=n==="script"?_e.ElementType.Script:n==="style"?_e.ElementType.Style:_e.ElementType.Tag);var c=e.call(this,i)||this;return c.name=n,c.attribs=r,c.type=o,c}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(n){this.name=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var n=this;return Object.keys(this.attribs).map(function(r){var i,o;return{name:r,value:n.attribs[r],namespace:(i=n["x-attribsNamespace"])===null||i===void 0?void 0:i[r],prefix:(o=n["x-attribsPrefix"])===null||o===void 0?void 0:o[r]}})},enumerable:!1,configurable:!0}),t}($n);K.Element=li;function ci(e){return(0,_e.isTag)(e)}K.isTag=ci;function ui(e){return e.type===_e.ElementType.CDATA}K.isCDATA=ui;function di(e){return e.type===_e.ElementType.Text}K.isText=di;function fi(e){return e.type===_e.ElementType.Comment}K.isComment=fi;function hi(e){return e.type===_e.ElementType.Directive}K.isDirective=hi;function pi(e){return e.type===_e.ElementType.Root}K.isDocument=pi;function Dl(e){return Object.prototype.hasOwnProperty.call(e,"children")}K.hasChildren=Dl;function wr(e,t){t===void 0&&(t=!1);var n;if(di(e))n=new ri(e.data);else if(fi(e))n=new ai(e.data);else if(ci(e)){var r=t?Kn(e.children):[],i=new li(e.name,cn({},e.attribs),r);r.forEach(function(s){return s.parent=i}),e.namespace!=null&&(i.namespace=e.namespace),e["x-attribsNamespace"]&&(i["x-attribsNamespace"]=cn({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(i["x-attribsPrefix"]=cn({},e["x-attribsPrefix"])),n=i}else if(ui(e)){var r=t?Kn(e.children):[],o=new oi(r);r.forEach(function(d){return d.parent=o}),n=o}else if(pi(e)){var r=t?Kn(e.children):[],c=new si(r);r.forEach(function(d){return d.parent=c}),e["x-mode"]&&(c["x-mode"]=e["x-mode"]),n=c}else if(hi(e)){var u=new ii(e.name,e.data);e["x-name"]!=null&&(u["x-name"]=e["x-name"],u["x-publicId"]=e["x-publicId"],u["x-systemId"]=e["x-systemId"]),n=u}else throw new Error("Not implemented yet: ".concat(e.type));return n.startIndex=e.startIndex,n.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(n.sourceCodeLocation=e.sourceCodeLocation),n}K.cloneNode=wr;function Kn(e){for(var t=e.map(function(r){return wr(r,!0)}),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}(function(e){var t=te&&te.__createBinding||(Object.create?function(u,s,d,l){l===void 0&&(l=d);var h=Object.getOwnPropertyDescriptor(s,d);(!h||("get"in h?!s.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return s[d]}}),Object.defineProperty(u,l,h)}:function(u,s,d,l){l===void 0&&(l=d),u[l]=s[d]}),n=te&&te.__exportStar||function(u,s){for(var d in u)d!=="default"&&!Object.prototype.hasOwnProperty.call(s,d)&&t(s,u,d)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var r=hn,i=K;n(K,e);var o={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},c=function(){function u(s,d,l){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof d=="function"&&(l=d,d=o),typeof s=="object"&&(d=s,s=void 0),this.callback=s??null,this.options=d??o,this.elementCB=l??null}return u.prototype.onparserinit=function(s){this.parser=s},u.prototype.onreset=function(){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},u.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},u.prototype.onerror=function(s){this.handleCallback(s)},u.prototype.onclosetag=function(){this.lastNode=null;var s=this.tagStack.pop();this.options.withEndIndices&&(s.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(s)},u.prototype.onopentag=function(s,d){var l=this.options.xmlMode?r.ElementType.Tag:void 0,h=new i.Element(s,d,void 0,l);this.addNode(h),this.tagStack.push(h)},u.prototype.ontext=function(s){var d=this.lastNode;if(d&&d.type===r.ElementType.Text)d.data+=s,this.options.withEndIndices&&(d.endIndex=this.parser.endIndex);else{var l=new i.Text(s);this.addNode(l),this.lastNode=l}},u.prototype.oncomment=function(s){if(this.lastNode&&this.lastNode.type===r.ElementType.Comment){this.lastNode.data+=s;return}var d=new i.Comment(s);this.addNode(d),this.lastNode=d},u.prototype.oncommentend=function(){this.lastNode=null},u.prototype.oncdatastart=function(){var s=new i.Text(""),d=new i.CDATA([s]);this.addNode(d),s.parent=d,this.lastNode=s},u.prototype.oncdataend=function(){this.lastNode=null},u.prototype.onprocessinginstruction=function(s,d){var l=new i.ProcessingInstruction(s,d);this.addNode(l)},u.prototype.handleCallback=function(s){if(typeof this.callback=="function")this.callback(s,this.dom);else if(s)throw s},u.prototype.addNode=function(s){var d=this.tagStack[this.tagStack.length-1],l=d.children[d.children.length-1];this.options.withStartIndices&&(s.startIndex=this.parser.startIndex),this.options.withEndIndices&&(s.endIndex=this.parser.endIndex),d.children.push(s),l&&(s.prev=l,l.next=s),s.parent=d,this.lastNode=null},u}();e.DomHandler=c,e.default=c})(ni);(function(e){var t=te&&te.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.htmlToDOM=e.domToReact=e.attributesToProps=e.Text=e.ProcessingInstruction=e.Element=e.Comment=void 0;var n=t(dr);e.htmlToDOM=n.default;var r=t(Bn);e.attributesToProps=r.default;var i=t(br);e.domToReact=i.default;var o=ni;Object.defineProperty(e,"Comment",{enumerable:!0,get:function(){return o.Comment}}),Object.defineProperty(e,"Element",{enumerable:!0,get:function(){return o.Element}}),Object.defineProperty(e,"ProcessingInstruction",{enumerable:!0,get:function(){return o.ProcessingInstruction}}),Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return o.Text}});var c={lowerCaseAttributeNames:!1};function u(s,d){if(typeof s!="string")throw new TypeError("First argument must be a string");return s?(0,i.default)((0,n.default)(s,(d==null?void 0:d.htmlparser2)||c),d):[]}e.default=u})(Oa);const Kr=Pn(Oa),Ll=Kr.default||Kr;function pe(){return pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pe.apply(this,arguments)}function Yn(e,t){if(e==null)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t.indexOf(n=o[r])>=0||(i[n]=e[n]);return i}function Nt(e){var t=m.useRef({fn:e,curr:void 0}).current;if(t.fn=e,!t.curr){var n=Object.create(null);Object.keys(e).forEach(function(r){n[r]=function(){var i;return(i=t.fn[r]).call.apply(i,[t.fn].concat([].slice.call(arguments)))}}),t.curr=n}return t.curr}function An(e){return m.useReducer(function(t,n){return pe({},t,typeof n=="function"?n(t):n)},e)}var mi=m.createContext(void 0),rt=typeof window<"u"&&"ontouchstart"in window,rr=function(e,t,n){return Math.max(Math.min(e,n),t)},En=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=0),rr(e,1*(1-n),Math.max(6,t)*(1+n))},ar=typeof window>"u"||/ServerSideRendering/.test(navigator&&navigator.userAgent)?m.useEffect:m.useLayoutEffect;function Yt(e,t,n){var r=m.useRef(t);r.current=t,m.useEffect(function(){function i(o){r.current(o)}return e&&window.addEventListener(e,i,n),function(){e&&window.removeEventListener(e,i)}},[e])}var Bl=["container"];function zl(e){var t=e.container,n=t===void 0?document.body:t,r=Yn(e,Bl);return Ki.createPortal(G.createElement("div",pe({},r)),n)}function Ul(e){return G.createElement("svg",pe({width:"44",height:"44",viewBox:"0 0 768 768"},e),G.createElement("path",{d:"M607.5 205.5l-178.5 178.5 178.5 178.5-45 45-178.5-178.5-178.5 178.5-45-45 178.5-178.5-178.5-178.5 45-45 178.5 178.5 178.5-178.5z"}))}function Hl(e){return G.createElement("svg",pe({width:"44",height:"44",viewBox:"0 0 768 768"},e),G.createElement("path",{d:"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z"}))}function Vl(e){return G.createElement("svg",pe({width:"44",height:"44",viewBox:"0 0 768 768"},e),G.createElement("path",{d:"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z"}))}function Wl(){return m.useEffect(function(){var e=document.body.style,t=e.overflow;return e.overflow="hidden",function(){e.overflow=t}},[]),null}function Qr(e){var t=e.touches[0],n=t.clientX,r=t.clientY;if(e.touches.length>=2){var i=e.touches[1],o=i.clientX,c=i.clientY;return[(n+o)/2,(r+c)/2,Math.sqrt(Math.pow(o-n,2)+Math.pow(c-r,2))]}return[n,r,0]}var pt=function(e,t,n,r){var i=n*t,o=(i-r)/2,c=void 0,u=e;return i<=r?(c=1,u=0):e>0&&o-e<=0?(c=2,u=o):e<0&&o+e<=0&&(c=3,u=-o),[c,u]};function Qn(e,t,n,r,i,o,c,u,s,d){c===void 0&&(c=innerWidth/2),u===void 0&&(u=innerHeight/2),s===void 0&&(s=0),d===void 0&&(d=0);var l=pt(e,o,n,innerWidth)[0],h=pt(t,o,r,innerHeight),x=innerWidth/2,w=innerHeight/2;return{x:c-o/i*(c-(x+e))-x+(r/n>=3&&n*o===innerWidth?0:l?s/2:s),y:u-o/i*(u-(w+t))-w+(h[0]?d/2:d),lastCX:c,lastCY:u}}function ir(e,t,n){var r=e%180!=0;return r?[n,t,r]:[t,n,r]}function Zn(e,t,n){var r=ir(n,innerWidth,innerHeight),i=r[0],o=r[1],c=0,u=i,s=o,d=e/t*o,l=t/e*i;return e<i&&t<o?(u=e,s=t):e<i&&t>=o?u=d:e>=i&&t<o||e/t>i/o?s=l:t/e>=3&&!r[2]?c=((s=l)-o)/2:u=d,{width:u,height:s,x:0,y:c,pause:!0}}function wn(e,t){var n=t.leading,r=n!==void 0&&n,i=t.maxWait,o=t.wait,c=o===void 0?i||0:o,u=m.useRef(e);u.current=e;var s=m.useRef(0),d=m.useRef(),l=function(){return d.current&&clearTimeout(d.current)},h=m.useCallback(function(){var x=[].slice.call(arguments),w=Date.now();function g(){s.current=w,l(),u.current.apply(null,x)}var v=s.current,b=w-v;if(v===0&&(r&&g(),s.current=w),i!==void 0){if(b>i)return void g()}else b<c&&(s.current=w);l(),d.current=setTimeout(function(){g(),s.current=0},c)},[c,i,r]);return h.cancel=l,h}var Zr=function(e,t,n){return It(e,t,n,100,function(r){return r},function(){return It(t,e,n)})},$l=function(e){return 1-Math.pow(1-e,4)};function It(e,t,n,r,i,o){r===void 0&&(r=400),i===void 0&&(i=$l);var c=t-e;if(c!==0){var u=Date.now(),s=0,d=function(){var h=Math.min(1,(Date.now()-u)/r);n(e+i(h)*c)&&h<1?l():(cancelAnimationFrame(s),h>=1&&o&&o())};l()}function l(){s=requestAnimationFrame(d)}}var Yl={T:0,L:0,W:0,H:0,FIT:void 0},gi=function(){var e=m.useRef(!1);return m.useEffect(function(){return e.current=!0,function(){e.current=!1}},[]),e},Gl=["className"];function Xl(e){var t=e.className,n=Yn(e,Gl);return G.createElement("div",pe({className:"PhotoView__Spinner "+t},n),G.createElement("svg",{viewBox:"0 0 32 32",width:"36",height:"36",fill:"white"},G.createElement("path",{opacity:".25",d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"}),G.createElement("path",{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z"})))}var ql=["src","loaded","broken","className","onPhotoLoad","loadingElement","brokenElement"];function Kl(e){var t=e.src,n=e.loaded,r=e.broken,i=e.className,o=e.onPhotoLoad,c=e.loadingElement,u=e.brokenElement,s=Yn(e,ql),d=gi();return t&&!r?G.createElement(G.Fragment,null,G.createElement("img",pe({className:"PhotoView__Photo"+(i?" "+i:""),src:t,onLoad:function(l){var h=l.target;d.current&&o({loaded:!0,naturalWidth:h.naturalWidth,naturalHeight:h.naturalHeight})},onError:function(){d.current&&o({broken:!0})},alt:""},s)),!n&&(G.createElement("span",{className:"PhotoView__icon"},c)||G.createElement(Xl,{className:"PhotoView__icon"}))):u?G.createElement("span",{className:"PhotoView__icon"},typeof u=="function"?u({src:t}):u):null}var Ql={naturalWidth:void 0,naturalHeight:void 0,width:void 0,height:void 0,loaded:void 0,broken:!1,x:0,y:0,touched:!1,maskTouched:!1,rotate:0,scale:1,CX:0,CY:0,lastX:0,lastY:0,lastCX:0,lastCY:0,lastScale:1,touchTime:0,touchLength:0,pause:!0,stopRaf:!0,reach:void 0};function Zl(e){var t=e.item,n=t.src,r=t.render,i=t.width,o=i===void 0?0:i,c=t.height,u=c===void 0?0:c,s=t.originRef,d=e.visible,l=e.speed,h=e.easing,x=e.wrapClassName,w=e.className,g=e.style,v=e.loadingElement,b=e.brokenElement,H=e.onPhotoTap,X=e.onMaskTap,T=e.onReachMove,P=e.onReachUp,O=e.onPhotoResize,j=e.isActive,I=e.expose,E=An(Ql),_=E[0],Q=E[1],ve=m.useRef(0),Z=gi(),Ne=_.naturalWidth,ce=Ne===void 0?o:Ne,oe=_.naturalHeight,ue=oe===void 0?u:oe,Ge=_.width,Ee=Ge===void 0?o:Ge,ot=_.height,p=ot===void 0?u:ot,f=_.loaded,k=f===void 0?!n:f,A=_.broken,M=_.x,F=_.y,R=_.touched,N=_.stopRaf,z=_.maskTouched,W=_.rotate,V=_.scale,J=_.CX,C=_.CY,U=_.lastX,L=_.lastY,D=_.lastCX,ge=_.lastCY,ie=_.lastScale,ye=_.touchTime,Me=_.touchLength,se=_.pause,Xe=_.reach,xt=Nt({onScale:function(y){return Oe(En(y))},onRotate:function(y){W!==y&&(I({rotate:y}),Q(pe({rotate:y},Zn(ce,ue,y))))}});function Oe(y,B,ee){V!==y&&(I({scale:y}),Q(pe({scale:y},Qn(M,F,Ee,p,V,y,B,ee),y<=1&&{x:0,y:0})))}var bt=wn(function(y,B,ee){if(ee===void 0&&(ee=0),(R||z)&&j){var Ct=ir(W,Ee,p),qe=Ct[0],De=Ct[1];if(ee===0&&ve.current===0){var xe=Math.abs(y-J)<=20,ke=Math.abs(B-C)<=20;if(xe&&ke)return void Q({lastCX:y,lastCY:B});ve.current=xe?B>C?3:2:1}var jt=y-D,St=B-ge,Le=void 0;if(ee===0){var Tt=pt(jt+U,V,qe,innerWidth)[0],zt=pt(St+L,V,De,innerHeight);Le=function(ct,Qe,Ze,$e){return Qe&&ct===1||$e==="x"?"x":Ze&&ct>1||$e==="y"?"y":void 0}(ve.current,Tt,zt[0],Xe),Le!==void 0&&T(Le,y,B,V)}if(Le==="x"||z)return void Q({reach:"x"});var Ke=En(V+(ee-Me)/100/2*V,ce/Ee,.2);I({scale:Ke}),Q(pe({touchLength:ee,reach:Le,scale:Ke},Qn(M,F,Ee,p,V,Ke,y,B,jt,St)))}},{maxWait:8});function Et(y){return!N&&!R&&(Z.current&&Q(pe({},y,{pause:d})),Z.current)}var Fe,Ie,Ve,st,wt,lt,Dt,we,pn=(wt=function(y){return Et({x:y})},lt=function(y){return Et({y})},Dt=function(y){return Z.current&&(I({scale:y}),Q({scale:y})),!R&&Z.current},we=Nt({X:function(y){return wt(y)},Y:function(y){return lt(y)},S:function(y){return Dt(y)}}),function(y,B,ee,Ct,qe,De,xe,ke,jt,St,Le){var Tt=ir(St,qe,De),zt=Tt[0],Ke=Tt[1],ct=pt(y,ke,zt,innerWidth),Qe=ct[0],Ze=ct[1],$e=pt(B,ke,Ke,innerHeight),Ut=$e[0],gn=$e[1],Ht=Date.now()-Le;if(Ht>=200||ke!=xe||Math.abs(jt-xe)>1){var ut=Qn(y,B,qe,De,xe,ke),Je=ut.x,_t=ut.y,Ae=Qe?Ze:Je!==y?Je:null,Vt=Ut?gn:_t!==B?_t:null;return Ae!==null&&It(y,Ae,we.X),Vt!==null&&It(B,Vt,we.Y),void(ke!=xe&&It(xe,ke,we.S))}var kt=(y-ee)/Ht,dt=(B-Ct)/Ht,ft=Math.sqrt(Math.pow(kt,2)+Math.pow(dt,2)),et=!1,tt=!1;(function(Be,Ce){var je=Be,nt=0,ze=void 0,Pe=0,Wt=function(en){ze||(ze=en);var tn=en-ze,Cr=Math.sign(Be),jr=-.001*Cr,Sr=Math.sign(-je)*Math.pow(je,2)*2e-4,wi=je*tn+(jr+Sr)*Math.pow(tn,2)/2;nt+=wi,ze=en,Cr*(je+=(jr+Sr)*tn)<=0?Re():Ce(nt)?Ye():Re()};function Ye(){Pe=requestAnimationFrame(Wt)}function Re(){cancelAnimationFrame(Pe)}Ye()})(ft,function(Be){var Ce=y+Be*(kt/ft),je=B+Be*(dt/ft),nt=pt(Ce,xe,zt,innerWidth),ze=nt[0],Pe=nt[1],Wt=pt(je,xe,Ke,innerHeight),Ye=Wt[0],Re=Wt[1];if(ze&&!et&&(et=!0,Qe?It(Ce,Pe,we.X):Zr(Pe,Ce+(Ce-Pe),we.X)),Ye&&!tt&&(tt=!0,Ut?It(je,Re,we.Y):Zr(Re,je+(je-Re),we.Y)),et&&tt)return!1;var en=et||we.X(Pe),tn=tt||we.Y(Re);return en&&tn})}),Lt=(Fe=H,Ie=function(y,B){Xe||Oe(V!==1?1:Math.max(2,ce/Ee),y,B)},Ve=m.useRef(0),st=wn(function(){Ve.current=0,Fe.apply(void 0,[].slice.call(arguments))},{wait:300}),function(){var y=[].slice.call(arguments);Ve.current+=1,st.apply(void 0,y),Ve.current>=2&&(st.cancel(),Ve.current=0,Ie.apply(void 0,y))});function Bt(y,B){if(ve.current=0,(R||z)&&j){Q({touched:!1,maskTouched:!1,pause:!1,stopRaf:!1,reach:void 0});var ee=En(V,ce/Ee);if(pn(M,F,U,L,Ee,p,V,ee,ie,W,ye),P(y,B),J===y&&C===B){if(R)return void Lt(y,B);z&&X(y,B)}}}function Jt(y,B,ee){ee===void 0&&(ee=0),Q({touched:!0,CX:y,CY:B,lastCX:y,lastCY:B,lastX:M,lastY:F,lastScale:V,touchLength:ee,touchTime:Date.now()})}function mn(y){Q({maskTouched:!0,CX:y.clientX,CY:y.clientY,lastX:M,lastY:F})}Yt(rt?void 0:"mousemove",function(y){y.preventDefault(),bt(y.clientX,y.clientY)}),Yt(rt?void 0:"mouseup",function(y){Bt(y.clientX,y.clientY)}),Yt(rt?"touchmove":void 0,function(y){y.preventDefault();var B=Qr(y);bt.apply(void 0,B)},{passive:!1}),Yt(rt?"touchend":void 0,function(y){var B=y.changedTouches[0];Bt(B.clientX,B.clientY)},{passive:!1}),Yt("resize",wn(function(){k&&!R&&(Q(Zn(ce,ue,W)),O())},{maxWait:8})),ar(function(){j&&I(pe({scale:V,rotate:W},xt))},[j]);var We=function(y,B,ee,Ct,qe,De,xe,ke,jt,St){var Le=function(Je,_t,Ae,Vt,kt){var dt=m.useRef(!1),ft=An({lead:!0,scale:Ae}),et=ft[0],tt=et.lead,Be=et.scale,Ce=ft[1],je=wn(function(nt){try{return kt(!0),Ce({lead:!1,scale:nt}),Promise.resolve()}catch(ze){return Promise.reject(ze)}},{wait:Vt});return ar(function(){dt.current?(kt(!1),Ce({lead:!0}),je(Ae)):dt.current=!0},[Ae]),tt?[Je*Be,_t*Be,Ae/Be]:[Je*Ae,_t*Ae,1]}(De,xe,ke,jt,St),Tt=Le[0],zt=Le[1],Ke=Le[2],ct=function(Je,_t,Ae,Vt,kt){var dt=m.useState(Yl),ft=dt[0],et=dt[1],tt=m.useState(0),Be=tt[0],Ce=tt[1],je=m.useRef(),nt=Nt({OK:function(){return Je&&Ce(4)}});function ze(Pe){kt(!1),Ce(Pe)}return m.useEffect(function(){if(je.current||(je.current=Date.now()),Ae){if(function(Pe,Wt){var Ye=Pe&&Pe.current;if(Ye&&Ye.nodeType===1){var Re=Ye.getBoundingClientRect();Wt({T:Re.top,L:Re.left,W:Re.width,H:Re.height,FIT:Ye.tagName==="IMG"?getComputedStyle(Ye).objectFit:void 0})}}(_t,et),Je)return Date.now()-je.current<250?(Ce(1),requestAnimationFrame(function(){Ce(2),requestAnimationFrame(function(){return ze(3)})}),void setTimeout(nt.OK,Vt)):void Ce(4);ze(5)}},[Je,Ae]),[Be,ft]}(y,B,ee,jt,St),Qe=ct[0],Ze=ct[1],$e=Ze.W,Ut=Ze.FIT,gn=innerWidth/2,Ht=innerHeight/2,ut=Qe<3||Qe>4;return[ut?$e?Ze.L:gn:Ct+(gn-De*ke/2),ut?$e?Ze.T:Ht:qe+(Ht-xe*ke/2),Tt,ut&&Ut?Tt*(Ze.H/$e):zt,Qe===0?Ke:ut?$e/(De*ke)||.01:Ke,ut?Ut?1:0:1,Qe,Ut]}(d,s,k,M,F,Ee,p,V,l,function(y){return Q({pause:y})}),$=We[4],re=We[6],he="transform "+l+"ms "+h,de={className:w,onMouseDown:rt?void 0:function(y){y.stopPropagation(),y.button===0&&Jt(y.clientX,y.clientY,0)},onTouchStart:rt?function(y){y.stopPropagation(),Jt.apply(void 0,Qr(y))}:void 0,onWheel:function(y){if(!Xe){var B=En(V-y.deltaY/100/2,ce/Ee);Q({stopRaf:!0}),Oe(B,y.clientX,y.clientY)}},style:{width:We[2],height:We[3],opacity:We[5],objectFit:re===4?void 0:We[7],transform:W?"rotate("+W+"deg)":void 0,transition:re>2?he+", opacity "+l+"ms ease, height "+(re<4?l/2:re>4?l:0)+"ms "+h:void 0}};return G.createElement("div",{className:"PhotoView__PhotoWrap"+(x?" "+x:""),style:g,onMouseDown:!rt&&j?mn:void 0,onTouchStart:rt&&j?function(y){return mn(y.touches[0])}:void 0},G.createElement("div",{className:"PhotoView__PhotoBox",style:{transform:"matrix("+$+", 0, 0, "+$+", "+We[0]+", "+We[1]+")",transition:R||se?void 0:he,willChange:j?"transform":void 0}},n?G.createElement(Kl,pe({src:n,loaded:k,broken:A},de,{onPhotoLoad:function(y){Q(pe({},y,y.loaded&&Zn(y.naturalWidth||0,y.naturalHeight||0,W)))},loadingElement:v,brokenElement:b})):r&&r({attrs:de,scale:$,rotate:W})))}var Jr={x:0,touched:!1,pause:!1,lastCX:void 0,lastCY:void 0,bg:void 0,lastBg:void 0,overlay:!0,minimal:!0,scale:1,rotate:0};function Jl(e){var t=e.loop,n=t===void 0?3:t,r=e.speed,i=e.easing,o=e.photoClosable,c=e.maskClosable,u=c===void 0||c,s=e.maskOpacity,d=s===void 0?1:s,l=e.pullClosable,h=l===void 0||l,x=e.bannerVisible,w=x===void 0||x,g=e.overlayRender,v=e.toolbarRender,b=e.className,H=e.maskClassName,X=e.photoClassName,T=e.photoWrapClassName,P=e.loadingElement,O=e.brokenElement,j=e.images,I=e.index,E=I===void 0?0:I,_=e.onIndexChange,Q=e.visible,ve=e.onClose,Z=e.afterClose,Ne=e.portalContainer,ce=An(Jr),oe=ce[0],ue=ce[1],Ge=m.useState(0),Ee=Ge[0],ot=Ge[1],p=oe.x,f=oe.touched,k=oe.pause,A=oe.lastCX,M=oe.lastCY,F=oe.bg,R=F===void 0?d:F,N=oe.lastBg,z=oe.overlay,W=oe.minimal,V=oe.scale,J=oe.rotate,C=oe.onScale,U=oe.onRotate,L=e.hasOwnProperty("index"),D=L?E:Ee,ge=L?_:ot,ie=m.useRef(D),ye=j.length,Me=j[D],se=typeof n=="boolean"?n:ye>n,Xe=function($,re){var he=m.useReducer(function(ee){return!ee},!1)[1],de=m.useRef(0),y=function(ee,Ct){var qe=m.useRef(ee);function De(xe){qe.current=xe}return m.useMemo(function(){(function(xe){$?(xe($),de.current=1):de.current=2})(De)},[ee]),[qe.current,De]}($),B=y[1];return[y[0],de.current,function(){he(),de.current===2&&(B(!1),re&&re()),de.current=0}]}(Q,Z),xt=Xe[0],Oe=Xe[1],bt=Xe[2];ar(function(){if(xt)return ue({pause:!0,x:D*-(innerWidth+20)}),void(ie.current=D);ue(Jr)},[xt]);var Et=Nt({close:function($){U&&U(0),ue({overlay:!0,lastBg:R}),ve($)},changeIndex:function($,re){re===void 0&&(re=!1);var he=se?ie.current+($-D):$,de=ye-1,y=rr(he,0,de),B=se?he:y,ee=innerWidth+20;ue({touched:!1,lastCX:void 0,lastCY:void 0,x:-ee*B,pause:re}),ie.current=B,ge&&ge(se?$<0?de:$>de?0:$:y)}}),Fe=Et.close,Ie=Et.changeIndex;function Ve($){return $?Fe():ue({overlay:!z})}function st(){ue({x:-(innerWidth+20)*D,lastCX:void 0,lastCY:void 0,pause:!0}),ie.current=D}function wt($,re,he,de){$==="x"?function(y){if(A!==void 0){var B=y-A,ee=B;!se&&(D===0&&B>0||D===ye-1&&B<0)&&(ee=B/2),ue({touched:!0,lastCX:A,x:-(innerWidth+20)*ie.current+ee,pause:!1})}else ue({touched:!0,lastCX:y,x:p,pause:!1})}(re):$==="y"&&function(y,B){if(M!==void 0){var ee=d===null?null:rr(d,.01,d-Math.abs(y-M)/100/4);ue({touched:!0,lastCY:M,bg:B===1?ee:d,minimal:B===1})}else ue({touched:!0,lastCY:y,bg:R,minimal:!0})}(he,de)}function lt($,re){var he=$-(A??$),de=re-(M??re),y=!1;if(he<-40)Ie(D+1);else if(he>40)Ie(D-1);else{var B=-(innerWidth+20)*ie.current;Math.abs(de)>100&&W&&h&&(y=!0,Fe()),ue({touched:!1,x:B,lastCX:void 0,lastCY:void 0,bg:d,overlay:!!y||z})}}Yt("keydown",function($){if(Q)switch($.key){case"ArrowLeft":Ie(D-1,!0);break;case"ArrowRight":Ie(D+1,!0);break;case"Escape":Fe()}});var Dt=function($,re,he){return m.useMemo(function(){var de=$.length;return he?$.concat($).concat($).slice(de+re-1,de+re+2):$.slice(Math.max(re-1,0),Math.min(re+2,de+1))},[$,re,he])}(j,D,se);if(!xt)return null;var we=z&&!Oe,pn=Q?R:N,Lt=C&&U&&{images:j,index:D,visible:Q,onClose:Fe,onIndexChange:Ie,overlayVisible:we,overlay:Me&&Me.overlay,scale:V,rotate:J,onScale:C,onRotate:U},Bt=r?r(Oe):400,Jt=i?i(Oe):"cubic-bezier(0.25, 0.8, 0.25, 1)",mn=r?r(3):600,We=i?i(3):"cubic-bezier(0.25, 0.8, 0.25, 1)";return G.createElement(zl,{className:"PhotoView-Portal"+(we?"":" PhotoView-Slider__clean")+(Q?"":" PhotoView-Slider__willClose")+(b?" "+b:""),role:"dialog",onClick:function($){return $.stopPropagation()},container:Ne},Q&&G.createElement(Wl,null),G.createElement("div",{className:"PhotoView-Slider__Backdrop"+(H?" "+H:"")+(Oe===1?" PhotoView-Slider__fadeIn":Oe===2?" PhotoView-Slider__fadeOut":""),style:{background:pn?"rgba(0, 0, 0, "+pn+")":void 0,transitionTimingFunction:Jt,transitionDuration:(f?0:Bt)+"ms",animationDuration:Bt+"ms"},onAnimationEnd:bt}),w&&G.createElement("div",{className:"PhotoView-Slider__BannerWrap"},G.createElement("div",{className:"PhotoView-Slider__Counter"},D+1," / ",ye),G.createElement("div",{className:"PhotoView-Slider__BannerRight"},v&&Lt&&v(Lt),G.createElement(Ul,{className:"PhotoView-Slider__toolbarIcon",onClick:Fe}))),Dt.map(function($,re){var he=se||D!==0?ie.current-1+re:D+re;return G.createElement(Zl,{key:se?$.key+"/"+$.src+"/"+he:$.key,item:$,speed:Bt,easing:Jt,visible:Q,onReachMove:wt,onReachUp:lt,onPhotoTap:function(){return Ve(o)},onMaskTap:function(){return Ve(u)},wrapClassName:T,className:X,style:{left:(innerWidth+20)*he+"px",transform:"translate3d("+p+"px, 0px, 0)",transition:f||k?void 0:"transform "+mn+"ms "+We},loadingElement:P,brokenElement:O,onPhotoResize:st,isActive:ie.current===he,expose:ue})}),!rt&&w&&G.createElement(G.Fragment,null,(se||D!==0)&&G.createElement("div",{className:"PhotoView-Slider__ArrowLeft",onClick:function(){return Ie(D-1,!0)}},G.createElement(Hl,null)),(se||D+1<ye)&&G.createElement("div",{className:"PhotoView-Slider__ArrowRight",onClick:function(){return Ie(D+1,!0)}},G.createElement(Vl,null))),g&&Lt&&G.createElement("div",{className:"PhotoView-Slider__Overlay"},g(Lt)))}var ec=["children","onIndexChange","onVisibleChange"],tc={images:[],visible:!1,index:0};function nc(e){var t=e.children,n=e.onIndexChange,r=e.onVisibleChange,i=Yn(e,ec),o=An(tc),c=o[0],u=o[1],s=m.useRef(0),d=c.images,l=c.visible,h=c.index,x=Nt({nextId:function(){return s.current+=1},update:function(v){var b=d.findIndex(function(X){return X.key===v.key});if(b>-1){var H=d.slice();return H.splice(b,1,v),void u({images:H})}u(function(X){return{images:X.images.concat(v)}})},remove:function(v){u(function(b){var H=b.images.filter(function(X){return X.key!==v});return{images:H,index:Math.min(H.length-1,h)}})},show:function(v){var b=d.findIndex(function(H){return H.key===v});u({visible:!0,index:b}),r&&r(!0,b,c)}}),w=Nt({close:function(){u({visible:!1}),r&&r(!1,h,c)},changeIndex:function(v){u({index:v}),n&&n(v,c)}}),g=m.useMemo(function(){return pe({},c,x)},[c,x]);return G.createElement(mi.Provider,{value:g},t,G.createElement(Jl,pe({images:d,visible:l,index:h,onIndexChange:w.changeIndex,onClose:w.close},i)))}var rc=function(e){var t,n,r=e.src,i=e.render,o=e.overlay,c=e.width,u=e.height,s=e.triggers,d=s===void 0?["onClick"]:s,l=e.children,h=m.useContext(mi),x=(t=function(){return h.nextId()},(n=m.useRef({sign:!1,fn:void 0}).current).sign||(n.sign=!0,n.fn=t()),n.fn),w=m.useRef(null);m.useImperativeHandle(l==null?void 0:l.ref,function(){return w.current}),m.useEffect(function(){return function(){h.remove(x)}},[]);var g=Nt({render:function(b){return i&&i(b)},show:function(b,H){h.show(x),function(X,T){if(l){var P=l.props[X];P&&P(T)}}(b,H)}}),v=m.useMemo(function(){var b={};return d.forEach(function(H){b[H]=g.show.bind(null,H)}),b},[]);return m.useEffect(function(){h.update({key:x,src:r,originRef:w,render:g.render,overlay:o,width:c,height:u})},[r]),l?m.Children.only(m.cloneElement(l,pe({},v,{ref:w}))):null};const ac=({url:e,text:t})=>{const[n,r]=m.useState(!1);return a.jsx(Zi,{to:e,style:{color:"inherit",textDecoration:n?"underline":"none"},onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:t})},ic={replace:e=>{var r,i;const t=e.name==="a"&&((i=(r=e.children)==null?void 0:r[0])==null?void 0:i.name)==="img",n=e.name==="img";if(t||n){const o=t?e.children[0]:e,{src:c,alt:u}=o.attribs;return a.jsx(rc,{src:c,children:a.jsx("img",{src:c,alt:u})})}}},oc=m.forwardRef((e,t)=>{const n=dn(),r=S(s=>s.activeContent),i=S(s=>s.fontSize);if(!r)return a.jsxs("div",{ref:t,className:"content-empty",style:{display:"flex",flexDirection:"column",backgroundColor:"var(--color-fill-1)",color:"var(--color-text-3)",alignItems:"center",justifyContent:"center",flex:"1",padding:"40px 16px"},children:[a.jsx(Qi,{style:{fontSize:"64px"}}),a.jsx(Y.Title,{heading:6,style:{color:"var(--color-text-3)",marginTop:"10px"},children:"ReactFlux"})]});const o=Ll(r.content,ic),c=r.feed.category.id,u=r.feed.category.title;return a.jsxs("div",{ref:t,className:"article-content",style:{padding:"40px 5%",flex:"1",overflowY:"auto",overflowX:"hidden"},children:[a.jsxs("div",{className:"article-title",style:{maxWidth:"600px",margin:"0 auto"},children:[a.jsx(Y.Title,{heading:3,style:{margin:0},children:a.jsx("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",children:r.title})}),a.jsx(Y.Text,{style:{color:"var(--color-text-3)",fontSize:"0.75 rem"},children:a.jsx(ac,{url:`/feed/${r.feed.id}`,text:r.feed.title})}),a.jsx(Y.Text,{style:{color:"var(--color-text-3)",fontSize:"0.75 rem"},children:` - ${r.author}`}),a.jsx(Y.Text,{children:a.jsx(un,{size:"small",onClick:()=>{n(`/group/${c}`)},style:{marginLeft:"10px",cursor:"pointer"},children:u})}),a.jsx("br",{}),a.jsxs(Y.Text,{style:{color:"var(--color-text-3)",fontSize:"0.75 rem"},children:[Ot(r.published_at).format("MMMM D, YYYY")," AT"," ",Ot(r.published_at).format("hh:mm")]}),a.jsx(At,{})]}),a.jsx("div",{className:"article-body",style:{fontSize:`${i}rem`,maxWidth:"600px",margin:"0 auto",overflowWrap:"break-word"},children:a.jsx(nc,{maskOpacity:.7,children:o})},r.id)]})});var vi={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var o="",c=0;c<arguments.length;c++){var u=arguments[c];u&&(o=i(o,r(u)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var c="";for(var u in o)t.call(o,u)&&o[u]&&(c=i(c,u));return c}function i(o,c){return c?o?o+" "+c:o+c:o}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(vi);var sc=vi.exports;const yi=Pn(sc),xi=({src:e,alt:t,width:n,height:r,status:i,borderRadius:o})=>{const[c,u]=m.useState(!1),s=m.useRef(null);return m.useEffect(()=>{const d=new IntersectionObserver(h=>{for(const x of h)if(x.isIntersecting){const w=new Image;w.onload=()=>u(!0),w.src=e,s.current&&d.unobserve(s.current)}}),l=s.current;return l&&d.observe(l),()=>d.disconnect()},[e]),a.jsxs("div",{className:"image-container",ref:s,children:[!c&&a.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:a.jsx(Xt,{text:{rows:0},image:{style:{width:n,height:r,margin:"0",borderRadius:o}},animation:!0})}),c&&a.jsx("img",{className:i!=="unread"?"read":"",src:e,alt:t,style:{width:n,height:r,objectFit:"cover",borderRadius:o}})]})},lc=({url:e})=>a.jsx("img",{className:"feed-icon",src:`https://icons.duckduckgo.com/ip3/${new URL(e).hostname}.ico`,alt:"Icon"}),cc=({entry:e,showFeedIcon:t})=>a.jsxs("div",{children:[a.jsx(Y.Text,{className:e.status==="unread"?"title-unread":"title-read",children:e.title}),a.jsxs(Y.Text,{className:"article-info",children:[a.jsx("br",{}),t&&a.jsx(lc,{url:e.feed.site_url}),e.feed.title,a.jsx("br",{}),sr(e.published_at)]}),e.starred&&a.jsx(On,{className:"icon-starred"})]}),uc=({entry:e,handleEntryClick:t})=>{const n=S(u=>u.activeContent),r=S(u=>u.showFeedIcon),i=n&&e.id===n.id,o=()=>t(e),c=e.imgSrc?a.jsx("div",{className:"cover-image",children:a.jsx(xi,{width:"100%",height:"160px",alt:e.id,src:e.imgSrc,status:e.status})}):null;return a.jsx("div",{className:"article-card",children:a.jsx(Ft,{className:yi("card-custom-hover-style",{"card-custom-selected-style":i}),hoverable:!0,"data-entry-id":e.id,style:{width:"100%",cursor:"pointer"},onClick:o,cover:c,children:a.jsx(Ft.Meta,{description:a.jsx(cc,{entry:e,showFeedIcon:r})})})},e.id)},dc=({url:e})=>a.jsx("img",{className:"feed-icon-mini",src:`https://icons.duckduckgo.com/ip3/${new URL(e).hostname}.ico`,alt:"Icon"}),fc=({entry:e,showFeedIcon:t})=>a.jsxs("div",{style:{display:"flex",paddingLeft:t?"22px":"0"},children:[a.jsxs("div",{style:{marginRight:"10px",flex:1},children:[a.jsx(Y.Text,{className:e.status==="unread"?"title-unread":"title-read",children:e.title}),a.jsxs(Y.Text,{className:"article-info",children:[a.jsx("br",{}),t&&a.jsx(dc,{url:e.feed.site_url}),e.feed.title,a.jsx("br",{}),sr(e.published_at)]}),e.starred&&a.jsx(On,{className:"icon-starred"})]}),e.imgSrc&&a.jsx("div",{className:"thumbnail",children:a.jsx(xi,{width:"100px",height:"100px",alt:e.id,src:e.imgSrc,status:e.status,borderRadius:"4px"})})]}),hc=({entry:e,handleEntryClick:t})=>{const n=S(c=>c.activeContent),r=S(c=>c.showFeedIcon),i=n&&e.id===n.id,o=()=>t(e);return a.jsx("div",{className:"article-card",children:a.jsx(Ft,{className:yi("card-custom-hover-style",{"card-custom-selected-style":i}),hoverable:!0,"data-entry-id":e.id,style:{width:"100%",cursor:"pointer"},onClick:o,cover:null,children:a.jsx(Ft.Meta,{description:a.jsx(fc,{entry:e,showFeedIcon:r})})})},e.id)},pc=({loading:e})=>{const t=S(i=>i.layout),n=t==="large"?2:4,r=i=>a.jsx(Ft,{style:{width:"100%",marginBottom:"10px"},cover:t==="large"&&a.jsx(Xt,{loading:e,animation:!0,text:{rows:0},image:{style:{width:"100%",height:160}}}),children:a.jsx(Ft.Meta,{description:a.jsx(Xt,{loading:e,animation:!0,text:{rows:3,width:150}})})},i);return e?Array.from({length:n},(i,o)=>r(o)):null},bi=()=>{const{entries:e,filteredEntries:t,filterStatus:n,filterString:r,filterType:i,loadMoreUnreadVisible:o,setFilteredEntries:c,setFilterStatus:u,setFilterString:s,setFilterType:d,setLoadMoreUnreadVisible:l,unreadCount:h}=m.useContext(it);return m.useEffect(()=>{c([]);const w=Ia(e,i,n,r);if(c(w),n==="unread"){const g=e.filter(v=>v.status==="unread");l(g.length<h)}},[n,r,i,o]),{filteredEntries:t,handleFilter:(w,g,v)=>{d(w),u(g),s(v)},loadMoreUnreadVisible:o}},mc=()=>{const{filterStatus:e,filterString:t,filterType:n}=m.useContext(it),r=S(c=>c.activeContent),i=S(c=>c.setActiveContent),{handleFilter:o}=bi();return a.jsx(Ue.Search,{allowClear:!0,placeholder:"Search...",value:t,addBefore:a.jsxs(Rt,{placeholder:"Select type",onChange:c=>{o(c,e,t)},style:{width:100},value:n,children:[a.jsx(Rt.Option,{value:"0",children:"Title"}),a.jsx(Rt.Option,{value:"1",children:"Content"})]}),onFocus:()=>r&&i(null),onChange:c=>o(n,e,c),style:{marginBottom:"10px",width:"100%"}})},gc=m.forwardRef(({loading:e,getEntries:t,handleEntryClick:n,cardsRef:r},i)=>{const{filteredEntries:o,filterStatus:c,loadMoreUnreadVisible:u,loadMoreVisible:s}=m.useContext(it),{loadingMore:d,handleLoadMore:l}=Na(),h=S(x=>x.layout);return a.jsxs("div",{className:"entry-list",ref:i,style:{overflowY:"auto",padding:"10px 10px 0 10px",width:"302px",backgroundColor:"var(--color-fill-1)",flex:"1"},children:[a.jsx(mc,{}),a.jsx(pc,{loading:e}),e?null:a.jsx("div",{ref:r,children:o.map(x=>{Pa(x.feed.site_url)||(x.feed.site_url=Ra(x.feed.feed_url));const w=h==="small"?hc:uc;return a.jsx(w,{entry:x,handleEntryClick:n},x.id)})}),!e&&(c==="all"?s:u)&&a.jsxs(le,{onClick:()=>l(t),loading:d,long:!0,style:{margin:"10px auto",display:"block"},children:[!d&&a.jsx(Ji,{}),"Load more"]})]})}),vc=m.forwardRef(({info:e,markAllAsRead:t},n)=>{const{entries:r,filteredEntries:i,filterStatus:o,filterString:c,filterType:u,setEntries:s,setFilteredEntries:d,setUnreadCount:l}=m.useContext(it),{handleFilter:h}=bi(),x=S(g=>g.initData),w=m.useCallback(async()=>{t().then(()=>{ne.success("Marked all as read successfully"),x(),s(r.map(g=>({...g,status:"read"}))),d(i.map(g=>({...g,status:"read"}))),l(0)}).catch(()=>{ne.error("Failed to mark all as read")})},[r,i,x,t,s,d,l]);return e.from!=="history"?a.jsxs("div",{className:"entry-panel",style:{backgroundColor:"var(--color-bg-2)",bottom:"0",display:"flex",flexDirection:"row",padding:"8px 10px",zIndex:"2",justifyContent:"space-between",borderTop:"1px solid var(--color-border-2)"},children:[a.jsxs(on.Group,{type:"button",name:"lang",value:o,onChange:g=>{n.current&&n.current.scrollTo(0,0),h(u,g,c)},children:[a.jsx(on,{value:"all",children:"ALL"}),a.jsx(on,{value:"unread",children:"UNREAD"})]}),e.from!=="starred"&&a.jsx(oa,{focusLock:!0,title:"Mark All As Read?",onOk:w,children:a.jsx(le,{icon:a.jsx(na,{}),shape:"circle"})})]}):null}),Zt=({info:e,getEntries:t,markAllAsRead:n})=>{const r=S(C=>C.activeContent),i=S(C=>C.setActiveContent),o=S(C=>C.setReadCount),c=S(C=>C.setStarredCount),u=S(C=>C.setUnreadToday),s=S(C=>C.setUnreadTotal),d=S(C=>C.updateFeedUnreadCount),l=S(C=>C.updateGroupUnreadCount),{filteredEntries:h,filterStatus:x,loading:w,offset:g,setEntries:v,setFilteredEntries:b,setLoading:H,setLoadMoreUnreadVisible:X,setLoadMoreVisible:T,setOffset:P,setTotal:O,setUnreadCount:j,total:I,unreadCount:E}=m.useContext(it),{handleFetchContent:_,toggleEntryStarred:Q,toggleEntryStatus:ve,handleEntryStatusUpdate:Z}=cr(),{handleBKey:Ne,handleDKey:ce,handleEscapeKey:oe,handleLeftKey:ue,handleMKey:Ge,handleRightKey:Ee,handleSKey:ot}=ur(),{getFirstImage:p}=Na(),[f,k]=m.useState(!1),A=m.useRef(null),M=m.useRef(null),F=m.useRef(null);m.useEffect(()=>{k(r!==null)},[r]),m.useEffect(()=>{if(!(E===0||I===0))switch(e.from){case"all":s(()=>E);break;case"today":u(()=>E);break;case"starred":c(()=>I);break;case"history":o(()=>I);break;case"feed":{const C=Number.parseInt(e.id);d(C,E);break}case"group":{const C=Number.parseInt(e.id);l(C,E);break}}},[I,E]);const R=async C=>{k(!1),setTimeout(()=>{i({...C,status:"read"})},200),C.status==="unread"&&(setTimeout(()=>{Z(C,"read")},200),Ea(C.id,"read").catch(()=>{ne.error("Failed to mark entry as read, please try again later"),Z(C,"unread")})),M.current&&(M.current.setAttribute("tabIndex","-1"),M.current.focus(),M.current.scrollTo(0,0))};m.useEffect(()=>{const C={27:()=>oe(A),37:()=>ue(R),39:()=>Ee(R),66:()=>Ne(),68:()=>ce(_),77:()=>Ge(ve),83:()=>ot(Q)},U=L=>{const D=C[L.keyCode];D&&D()};return f?document.addEventListener("keydown",U):document.removeEventListener("keydown",U),()=>{document.removeEventListener("keydown",U)}},[r,h,f]);const N=async()=>{const C=await t(),U=await t(g,"unread");return{responseAll:C,responseUnread:U}},z=C=>{const U=C.data.entries.map(p),L=x==="all"?U:U.filter(D=>D.status==="unread");return{fetchedArticles:U,filteredArticles:L}},W=(C,U,L,D)=>{v(C),b(U),O(L.data.total),T(C.length<L.data.total),j(D.data.total),X(U.length<D.data.total)},V=(C,U)=>{var L,D;if((L=C==null?void 0:C.data)!=null&&L.entries&&((D=U==null?void 0:U.data)==null?void 0:D.total)>=0){const{fetchedArticles:ge,filteredArticles:ie}=z(C);W(ge,ie,C,U)}},J=async()=>{H(!0);try{const{responseAll:C,responseUnread:U}=await N();V(C,U)}catch(C){console.error("Error fetching articles:",C)}finally{H(!1)}};return m.useEffect(()=>{J(),i(null),A.current&&A.current.scrollTo(0,0),M.current&&M.current.scrollTo(0,0),P(0)},[e]),a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{display:"flex",flexDirection:"column",borderRight:"1px solid var(--color-border-2)"},className:"entry-col",children:[a.jsx(_r,{in:!w,timeout:200,nodeRef:F,classNames:"fade",children:a.jsx(gc,{cardsRef:F,loading:w,getEntries:t,handleEntryClick:R,ref:A})}),a.jsx(vc,{info:e,markAllAsRead:n,ref:A})]}),a.jsx(_r,{in:f,timeout:200,nodeRef:M,classNames:"fade",unmountOnExit:!0,children:a.jsx(oc,{ref:M})}),a.jsx(As,{handleEntryClick:R}),a.jsx(Ps,{handleEntryClick:R})]})},yc=()=>{const e=async()=>{const t=await Yo();return ae.put(`/v1/users/${t.data.id}/mark-all-as-read`)};return a.jsx(Qt,{children:a.jsx(Zt,{info:{from:"all",id:""},getEntries:ts,markAllAsRead:e})})},xc=()=>{const e=dn(),t=eo();return console.error(t),a.jsx("div",{id:"error-page",style:{top:"30%",position:"relative"},children:a.jsx("div",{children:a.jsx(to,{status:"404",subTitle:"Whoops, that page is gone. ",extra:[a.jsx(le,{type:"primary",onClick:()=>e("/"),children:"Back to Home"},"back")]})})})},bc=()=>{const{f_id:e}=ha(),t=async(r=0,i=null)=>{const o=`/v1/feeds/${e}/entries?order=published_at&direction=desc&offset=${r}`,c=i?`${o}&status=${i}`:o;return ae.get(c)},n=async()=>ae.put(`/v1/feeds/${e}/mark-all-as-read`);return a.jsx(Qt,{children:a.jsx(Zt,{info:{from:"feed",id:e},getEntries:t,markAllAsRead:n})})},Ec=()=>{const{c_id:e}=ha(),t=async(r=0,i=null)=>{const o=`/v1/categories/${e}/entries?order=published_at&direction=desc&offset=${r}`,c=i?`${o}&status=${i}`:o;return ae.get(c)},n=async()=>ae.put(`/v1/categories/${e}/mark-all-as-read`);return a.jsx(Qt,{children:a.jsx(Zt,{info:{from:"group",id:e},getEntries:t,markAllAsRead:n})})},wc=()=>a.jsx(Qt,{children:a.jsx(Zt,{info:{from:"history",id:""},getEntries:ja})}),Cc=e=>{var r;const t=e.getFieldsValue();let n=!0;for(const i of Object.keys(t))if(i!=="password"){const o=(r=t[i])==null?void 0:r.trim();e.setFieldValue(i,o),o||(n=!1)}else t[i]||(n=!1);return n},Cn=(e,t)=>{e.key==="Enter"&&t.submit()},jc=()=>{const[e]=no(),[t,n]=m.useState(!1),[r,i]=m.useState(_n()||"token"),o=dn();m.useEffect(()=>{_n()&&o("/")},[]);const c=async()=>{n(!0);try{(await ea({url:"/v1/me",method:"get",baseURL:e.getFieldsValue().server,headers:{"X-Auth-Token":e.getFieldsValue().token},auth:{username:e.getFieldsValue().username,password:e.getFieldsValue().password},timeout:5e3})).status===200&&(ne.success("Success"),Vo(r,e.getFieldsValue()),o("/"))}catch(s){console.error(s),ne.error(s.message)}n(!1)},u=()=>{c()};return a.jsx("div",{style:{backgroundColor:"var(--color-bg-1)",height:"100%"},children:a.jsx("div",{style:{backgroundColor:"var(--color-fill-1)",height:"100%"},children:a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",overflowY:"auto"},children:[a.jsx(sa,{style:{fontSize:48,color:"rgb(var(--primary-6))",marginTop:"20px"}}),a.jsx(Y.Title,{heading:3,children:"Connect to your server"}),a.jsxs(Ft,{style:{boxShadow:"0 4px 10px rgb(var(--color-bg-3))",padding:"20px",width:"380px",marginTop:"20px"},children:[a.jsxs(me,{autoComplete:"off",form:e,layout:"vertical",onSubmit:()=>{Cc(e)?u():ne.error("Please fill in all required fields")},children:[a.jsx(me.Item,{field:"server",label:"Server address",rules:[{required:!0}],onKeyDown:s=>{Cn(s,e)},children:a.jsx(Ue,{disabled:t,placeholder:"Please input server address",prefix:a.jsx(ro,{})})}),r==="token"&&a.jsx(me.Item,{field:"token",label:"API Token",rules:[{required:!0}],onKeyDown:s=>{Cn(s,e)},children:a.jsx(Ue,{disabled:t,placeholder:"Please input api token",prefix:a.jsx(kr,{})})}),r==="user"&&a.jsxs(a.Fragment,{children:[a.jsx(me.Item,{field:"username",label:"Username",rules:[{required:!0}],onKeyDown:s=>{Cn(s,e)},children:a.jsx(Ue,{disabled:t,prefix:a.jsx(aa,{}),placeholder:"Please input username"})}),a.jsx(me.Item,{field:"password",label:"Password",rules:[{required:!0}],onKeyDown:s=>{Cn(s,e)},children:a.jsx(Ue.Password,{disabled:t,prefix:a.jsx(kr,{}),placeholder:"Please input password"})})]})]}),a.jsx(le,{loading:t,type:"primary",long:!0,onClick:()=>e.submit(),style:{marginTop:"20px"},children:"Connect"}),a.jsx(At,{orientation:"center",children:"Or connect with"}),a.jsx(le,{type:"secondary",long:!0,onClick:()=>i(r==="token"?"user":"token"),style:{marginTop:"20px"},children:r==="token"?"Username and password":"API Token"})]}),a.jsxs("div",{style:{display:"flex",marginTop:"40px"},children:[a.jsx(Y.Text,{disabled:!0,children:"Need more information?"}),a.jsx(ao,{href:"https://miniflux.app/docs/api.html#authentication",style:{fontWeight:"500"},children:"Go to Miniflux official website"})]})]})})})},Sc=({children:e})=>_n()?a.jsx(a.Fragment,{children:e}):a.jsx(io,{to:"/login"}),Tc=()=>a.jsx(Qt,{children:a.jsx(Zt,{info:{from:"starred",id:""},getEntries:Sa})}),_c=()=>{const e=async()=>{const t=await jn(0,"unread"),n=t.data.entries.map(r=>r.id);if(t.data.total>n.length){const r=t.data.total-n.length,i=Math.ceil(r/100)*100,o=await jn(n.length,"unread",i);n.push(...o.data.entries.map(c=>c.id))}return ba(n,"read")};return a.jsx(Qt,{children:a.jsx(Zt,{info:{from:"today",id:""},getEntries:jn,markAllAsRead:e})})},kc=oo([{path:"/",element:a.jsx(Sc,{children:a.jsx(Ms,{})}),errorElement:a.jsx(xc,{}),children:[{index:!0,element:a.jsx(yc,{})},{path:"/today",element:a.jsx(_c,{})},{path:"/starred",element:a.jsx(Tc,{})},{path:"/history",element:a.jsx(wc,{})},{path:"/group/:c_id",element:a.jsx(Ec,{})},{path:"/feed/:f_id",element:a.jsx(bc,{})}]},{path:"/login",element:a.jsx(jc,{})}]),Ei=kc;so.createRoot(document.getElementById("root")).render(a.jsx(lo,{locale:co,children:a.jsx(uo,{router:Ei})}))});export default Mc();
