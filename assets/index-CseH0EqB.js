var Ti=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);import{r as y,g as Pn,e as G,c as te,d as qt,a as aa,M as ee,b as _i,f as ki,u as fn,j as r,B as ue,I as Ii,S as Fn,T as dt,h as ia,i as Mi,D as Mr,k as Ct,l as oa,m as Ai,n as Pi,A as sa,o as la,p as Fi,q as Ni,s as Oi,t as R,R as on,v as Be,w as un,x as Ri,F as xe,y as Ge,z as ca,C as Nn,E as fe,G as dn,H as Di,J as ua,P as da,K as Li,L as zi,N as Gt,O as Bi,Q as Ui,U as Vi,V as $i,W as Hi,X as Wi,Y as Gi,Z as fa,_ as _n,$ as Xi,a0 as qi,a1 as lr,a2 as Yi,a3 as Ki,a4 as Zi,a5 as Ji,a6 as ha,a7 as pa,a8 as On,a9 as ma,aa as ga,ab as va,ac as Qi,ad as eo,ae as to,af as no,ag as Dt,ah as ro,ai as Ar,aj as ao,ak as io,al as ya,am as oo,an as so,ao as Pr,ap as lo,aq as xa,ar as co,as as uo,at as fo,au as ho,av as po}from"./vendor-D4JvI6rQ.js";var Lc=Ti((Uc,hn)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var mo={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Fr=e=>{let t;const n=new Set,a=(c,h)=>{const j=typeof c=="function"?c(t):c;if(!Object.is(j,t)){const E=t;t=h??(typeof j!="object"||j===null)?j:Object.assign({},t,j),n.forEach(v=>v(t,E))}},i=()=>t,o={setState:a,getState:i,getInitialState:()=>d,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{(mo?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=t=e(a,i,o);return o},go=e=>e?Fr(e):Fr;var ba={exports:{}},wa={},Ca={exports:{}},ja={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yt=y;function vo(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var yo=typeof Object.is=="function"?Object.is:vo,xo=Yt.useState,bo=Yt.useEffect,wo=Yt.useLayoutEffect,Co=Yt.useDebugValue;function jo(e,t){var n=t(),a=xo({inst:{value:n,getSnapshot:t}}),i=a[0].inst,s=a[1];return wo(function(){i.value=n,i.getSnapshot=t,Xn(i)&&s({inst:i})},[e,n,t]),bo(function(){return Xn(i)&&s({inst:i}),e(function(){Xn(i)&&s({inst:i})})},[e]),Co(n),n}function Xn(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!yo(e,n)}catch{return!0}}function Eo(e,t){return t()}var So=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Eo:jo;ja.useSyncExternalStore=Yt.useSyncExternalStore!==void 0?Yt.useSyncExternalStore:So;Ca.exports=ja;var To=Ca.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rn=y,_o=To;function ko(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Io=typeof Object.is=="function"?Object.is:ko,Mo=_o.useSyncExternalStore,Ao=Rn.useRef,Po=Rn.useEffect,Fo=Rn.useMemo,No=Rn.useDebugValue;wa.useSyncExternalStoreWithSelector=function(e,t,n,a,i){var s=Ao(null);if(s.current===null){var u={hasValue:!1,value:null};s.current=u}else u=s.current;s=Fo(function(){function o(E){if(!d){if(d=!0,c=E,E=a(E),i!==void 0&&u.hasValue){var v=u.value;if(i(v,E))return h=v}return h=E}if(v=h,Io(c,E))return v;var m=a(E);return i!==void 0&&i(v,m)?v:(c=E,h=m)}var d=!1,c,h,j=n===void 0?null:n;return[function(){return o(t())},j===null?void 0:function(){return o(j())}]},[t,n,a,i]);var l=Mo(e,s[0],s[1]);return Po(function(){u.hasValue=!0,u.value=l},[l]),No(l),l};ba.exports=wa;var Oo=ba.exports;const Ro=Pn(Oo);var Ea={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:Do}=G,{useSyncExternalStoreWithSelector:Lo}=Ro;let Nr=!1;const zo=e=>e;function Bo(e,t=zo,n){(Ea?"production":void 0)!=="production"&&n&&!Nr&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Nr=!0);const a=Lo(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Do(a),a}const Or=e=>{(Ea?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?go(e):e,n=(a,i)=>Bo(t,a,i);return Object.assign(n,t),n},Uo=e=>e?Or(e):Or,Vo={color:"Blue",showStatus:"all",homePage:"all",orderBy:"published_at",orderDirection:"desc",pageSize:100,fontSize:1.05,layout:"large",showAllFeeds:!1,showFeedIcon:!0,theme:"light"},se=e=>{const t=JSON.parse(localStorage.getItem("config"))||{};return Object.hasOwn(t,e)?t[e]:Vo[e]||null},ze=(e,t)=>{const n=JSON.parse(localStorage.getItem("config"))||{};n[e]=t,localStorage.setItem("config",JSON.stringify(n))};var Sa={exports:{}};(function(e,t){(function(n,a){e.exports=a()})(te,function(){return function(n,a,i){n=n||{};var s=a.prototype,u={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function l(d,c,h,j){return s.fromToBase(d,c,h,j)}i.en.relativeTime=u,s.fromToBase=function(d,c,h,j,E){for(var v,m,x,T=h.$locale().relativeTime||u,L=n.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],w=L.length,N=0;N<w;N+=1){var Y=L[N];Y.d&&(v=j?i(d).diff(h,Y.d,!0):h.diff(d,Y.d,!0));var g=(n.rounding||Math.round)(Math.abs(v));if(x=v>0,g<=Y.r||!Y.r){g<=1&&N>0&&(Y=L[N-1]);var _=T[Y.l];E&&(g=E(""+g)),m=typeof _=="string"?_.replace("%d",g):_(g,c,Y.l,x);break}}if(c)return m;var M=x?T.future:T.past;return typeof M=="function"?M(m):M.replace("%s",m)},s.to=function(d,c){return l(d,c,this,!0)},s.from=function(d,c){return l(d,c,this)};var o=function(d){return d.$u?i.utc():i()};s.toNow=function(d){return this.to(o(this),d)},s.fromNow=function(d){return this.from(o(this),d)}}})})(Sa);var $o=Sa.exports;const Ho=Pn($o);qt.extend(Ho);const Wo=e=>{const t=qt(e),n=qt();return t.isAfter(n.subtract(24,"hour"))},Go=()=>qt().subtract(24,"hour").unix(),cr=e=>qt(e).fromNow(),kn=()=>{const e=JSON.parse(localStorage.getItem("auth"));return e||(console.log("No auth info found in localStorage"),null)},Xo=(e,t)=>{const n={method:e,secret:t};localStorage.setItem("auth",JSON.stringify(n))},le=aa.create({timeout:5e3});le.interceptors.request.use(e=>{const t=kn(),{server:n,token:a,username:i,password:s}=(t==null?void 0:t.secret)||{};return e.baseURL=n,a&&(e.headers["X-Auth-Token"]=a),i&&s&&(e.auth={username:i,password:s}),e},e=>Promise.reject(e));le.interceptors.response.use(e=>e,e=>{var n,a,i;console.error(e);const t=((a=(n=e.response)==null?void 0:n.data)==null?void 0:a.error_message)||e.message;return ee.error(t),((i=e.response)==null?void 0:i.status)===401&&(localStorage.removeItem("auth"),Ei.navigate("/login")),Promise.reject(e)});const Ta=async(e,t)=>le.put("/v1/entries",{entry_ids:e,status:t}),_a=async(e,t)=>Ta([e],t),qo=async e=>le.put(`/v1/entries/${e}/bookmark`),Yo=async e=>le.get(`/v1/entries/${e}/fetch-content`),Ko=async()=>le.get("/v1/me"),Zo=async()=>le.get("/v1/feeds/counters"),Jo=async()=>le.get("/v1/feeds"),Qo=async()=>le.get("/v1/categories"),es=async e=>le.delete(`/v1/categories/${e}`),ts=async e=>le.post("/v1/categories",{title:e}),ns=async(e,t)=>le.put(`/v1/categories/${e}`,{title:t}),rs=async(e,t,n,a,i)=>le.put(`/v1/feeds/${e}`,{feed_url:t,title:n,category_id:a,crawler:i}),as=async e=>le.put(`/v1/feeds/${e}/refresh`),is=async e=>le.delete(`/v1/feeds/${e}`),os=async(e,t,n)=>le.post("/v1/feeds",{feed_url:e,category_id:t,crawler:n}),Zt=(e,t={})=>{const{baseUrl:n,orderField:a,direction:i,offset:s,limit:u,status:l}=e,o=new URLSearchParams({...t,order:a,direction:i,offset:s,limit:u});return l&&o.append("status",l),`${n}?${o.toString()}`},ss=async(e=0,t=null)=>{const n=se("orderBy"),a=se("orderDirection"),i=se("pageSize"),u=Zt({baseUrl:"/v1/entries",orderField:n,direction:a,offset:e,limit:i,status:t});return le.get(u)},ka=async(e=0)=>{const t=se("orderDirection"),n=se("pageSize"),i=Zt({baseUrl:"/v1/entries",orderField:"changed_at",direction:t,offset:e,limit:n,status:"read"});return le.get(i)},Ia=async(e=0,t=null)=>{const n=se("orderBy"),a=se("orderDirection"),i=se("pageSize"),l=Zt({baseUrl:"/v1/entries",orderField:n,direction:a,offset:e,limit:i,status:t},{starred:"true"});return le.get(l)},Sn=async(e=0,t=null,n=null)=>{const a=se("orderBy"),i=se("orderDirection"),s=n||se("pageSize"),u=Go(),d=Zt({baseUrl:"/v1/entries",orderField:a,direction:i,offset:e,limit:s,status:t},{published_after:u});return le.get(d)},ls=(e,t)=>t==="read"?Math.max(0,e-1):e+1,Rr=(e,t,n)=>e.map(a=>{if(a.id===t){let i;return typeof n=="string"?i=ls(a.unreadCount,n):i=n,{...a,unreadCount:i}}return a}),b=Uo((e,t)=>({feeds:[],groups:[],unreadTotal:0,unreadToday:0,starredCount:0,readCount:0,hiddenFeedIds:[],hiddenGroupIds:[],showStatus:se("showStatus"),homePage:se("homePage"),orderBy:se("orderBy"),orderDirection:se("orderDirection"),pageSize:se("pageSize"),showAllFeeds:se("showAllFeeds"),loading:!0,visible:{settings:!1,addFeed:!1},theme:se("theme"),layout:se("layout"),fontSize:se("fontSize"),showFeedIcon:se("showFeedIcon"),collapsed:window.innerWidth<=992,activeContent:null,isSysDarkMode:window.matchMedia("(prefers-color-scheme: dark)").matches,color:se("themeColor"),setFeeds:n=>e({feeds:n}),setGroups:n=>e({groups:n}),setUnreadTotal:n=>e(a=>({unreadTotal:n(a.unreadTotal)})),setUnreadToday:n=>e(a=>({unreadToday:n(a.unreadToday)})),setStarredCount:n=>e(a=>({starredCount:n(a.starredCount)})),setReadCount:n=>e(a=>({readCount:n(a.readCount)})),setShowStatus:n=>e({showStatus:n}),setHomePage:n=>e({homePage:n}),setOrderBy:n=>e({orderBy:n}),setOrderDirection:n=>e({orderDirection:n}),setPageSize:n=>e({pageSize:n}),toggleShowAllFeeds:()=>e(n=>({showAllFeeds:!n.showAllFeeds})),setActiveContent:n=>{e({activeContent:n})},setIsSysDarkMode:n=>e({isSysDarkMode:n}),setColor:n=>{e({color:n})},setTheme:n=>{e({theme:n})},initData:async()=>{e({loading:!0});const[n,a,i,s,u,l]=await Promise.all([Jo(),Qo(),ka(),Ia(),Sn(0,"unread"),Zo()]);if(n&&a&&i&&s&&u&&l){const o=n.data.filter(v=>v.hide_globally||v.category.hide_globally).map(v=>v.id),d=a.data.filter(v=>v.hide_globally).map(v=>v.id);e({hiddenFeedIds:o}),e({hiddenGroupIds:d});const c=l.data.unreads,h=Object.keys(c).reduce((v,m)=>t().showAllFeeds||!o.includes(Number.parseInt(m))?v+c[m]:v,0);e({unreadTotal:h});const j=n.data.map(v=>({...v,unreadCount:c[v.id]||0}));e({feeds:j.sort((v,m)=>v.title.localeCompare(m.title,"en"))});const E=a.data.map(v=>{let m=0,x=0;for(const T of j)T.category.id===v.id&&(m+=T.unreadCount,x+=1);return{...v,unreadCount:m,feedCount:x}});e({groups:E.sort((v,m)=>v.title.localeCompare(m.title,"en"))}),e({readCount:i.data.total}),e({starredCount:s.data.total}),e({unreadToday:u.data.total}),e({loading:!1})}},updateFeedUnreadCount:(n,a)=>{e(i=>({feeds:Rr(i.feeds,n,a)}))},updateGroupUnreadCount:(n,a)=>{e(i=>({groups:Rr(i.groups,n,a)}))},toggleLayout:()=>{const n=t().layout==="large"?"small":"large";e({layout:n})},setFontSize:n=>e({fontSize:n}),toggleShowFeedIcon:()=>e(n=>({showFeedIcon:!n.showFeedIcon})),setVisible:(n,a)=>{e(i=>({visible:{...i.visible,[n]:a}}))},toggleCollapsed:()=>e(n=>({collapsed:!n.collapsed}))})),Ma=[{name:"Red",valueLight:"#F53F3F",valueDark:"#F76965"},{name:"Orange",valueLight:"#F77234",valueDark:"#F9925A"},{name:"Green",valueLight:"#00B42A",valueDark:"#27C346"},{name:"Blue",valueLight:"#165DFF",valueDark:"#3C7EFF"},{name:"Purple",valueLight:"#722ED1",valueDark:"#8E51DA"}],er=e=>{const t=Ma.find(s=>s.name===e),n=window.matchMedia("(prefers-color-scheme: dark)").matches,a=se("theme"),i=a==="system"?n:a==="dark";return t?i?t.valueDark:t.valueLight:"#165DFF"},ur=e=>{_i(er(e),{list:!0}).map(n=>ki(n)).forEach((n,a)=>{document.body.style.setProperty(`--primary-${a+1}`,n)})},cs=()=>{const e=fn(),t=b(l=>l.setVisible),n=b(l=>l.theme),a=b(l=>l.setTheme),i=b(l=>l.toggleCollapsed),s=()=>{localStorage.clear(),document.body.removeAttribute("arco-theme"),ur("Blue"),e("/login"),ee.success("logout")};let u;switch(n){case"dark":u=r.jsx(Oi,{});break;case"system":u=r.jsx(Ni,{});break;default:u=r.jsx(Fi,{})}return y.useEffect(()=>{ze("theme",n)},[n]),r.jsxs("div",{className:"header",children:[r.jsx("div",{className:"brand",style:{marginLeft:"10px",display:"flex",alignItems:"center"},children:r.jsx(ue,{shape:"circle",size:"small",className:"trigger",style:{marginRight:"5px",display:"none"},onClick:i,children:r.jsx(Ii,{})})}),r.jsx("div",{className:"button-group",style:{marginRight:"10px"},children:r.jsxs(Fn,{size:16,children:[r.jsx(dt,{content:"Add a feed",mini:!0,children:r.jsx(ue,{shape:"circle",size:"small",type:"primary",icon:r.jsx(ia,{}),onClick:()=>t("addFeed",!0)})}),r.jsx(ue,{shape:"circle",size:"small",icon:r.jsx(Mi,{}),onClick:()=>window.open("https://github.com/electh/ReactFlux","_blank")}),r.jsx(Mr,{droplist:r.jsx(Ct,{defaultSelectedKeys:[n],className:"theme-menu",children:["light","dark","system"].map(l=>r.jsxs(Ct.Item,{className:n===l?"selected-menu":"",onClick:()=>a(l),style:{display:"flex",width:100,justifyContent:"space-between",alignItems:"center"},children:[l.charAt(0).toUpperCase()+l.slice(1),n===l&&r.jsx(oa,{style:{marginLeft:8}})]},l))}),trigger:"hover",position:"bottom",children:r.jsx(ue,{icon:u,shape:"circle",size:"small",onClick:()=>{switch(n){case"light":a("dark");break;case"dark":a("light");break}}})}),r.jsx(Mr,{droplist:r.jsxs(Ct,{children:[r.jsxs(Ct.Item,{onClick:()=>t("settings",!0),children:[r.jsx(Ai,{style:{marginRight:8,fontSize:16,transform:"translateY(1px)"}}),"Settings"]},"0"),r.jsxs(Ct.Item,{onClick:s,children:[r.jsx(Pi,{style:{marginRight:8,fontSize:16,transform:"translateY(1px)"}}),"Logout"]},"1")]}),trigger:"click",position:"br",children:r.jsx(sa,{size:28,style:{cursor:"pointer"},children:r.jsx(la,{})})})]})})]})},Ot=(e,t)=>e.toLowerCase().includes(t.toLowerCase()),Aa=(e,t,n,a)=>t==="0"?n==="all"?e.filter(i=>Ot(i.title,a)):e.filter(i=>Ot(i.title,a)&&i.status===n):n==="all"?e.filter(i=>Ot(i.content,a)):e.filter(i=>Ot(i.content,a)&&i.status===n),tr=(e=768)=>window.innerWidth<=e,Pa="/assets/dark-E0XitTFg.png",Fa="/assets/light-CsqESGYr.png",Na="/assets/system-BwMbv8Ny.png",us=()=>{const e=b(c=>c.theme),t=b(c=>c.setTheme),n=b(c=>c.toggleLayout),a=b(c=>c.layout),i=b(c=>c.fontSize),s=b(c=>c.setFontSize),u=b(c=>c.showFeedIcon),l=b(c=>c.toggleShowFeedIcon),o=b(c=>c.color),d=b(c=>c.setColor);return y.useEffect(()=>{ze("fontSize",i)},[i]),y.useEffect(()=>{ze("layout",a)},[a]),y.useEffect(()=>{ze("showFeedIcon",u)},[u]),y.useEffect(()=>{ze("theme",e)},[e]),y.useEffect(()=>{ze("themeColor",o),ur(o)},[o]),r.jsxs(r.Fragment,{children:[r.jsx(R.Title,{heading:6,style:{marginTop:0},children:"Theme"}),r.jsx(R.Text,{type:"secondary",children:"Customize your UI theme"}),r.jsx("div",{children:r.jsx(on.Group,{name:"card-radio-group",style:{marginTop:"16px"},defaultValue:e,onChange:t,children:["light","dark","system"].map(c=>r.jsx(dt,{content:c.charAt(0).toUpperCase()+c.slice(1),children:r.jsx(on,{value:c,children:({checked:h})=>{const j={light:Fa,dark:Pa,system:Na}[c];return r.jsx("div",{className:`custom-radio-card ${h?"custom-radio-card-checked":""}`,children:r.jsx("img",{className:"theme-preview",src:j,alt:c})})}})},c))})}),r.jsx(Be,{}),r.jsxs("div",{className:"setting-row",children:[r.jsxs("div",{children:[r.jsx(R.Title,{heading:6,style:{marginTop:0},children:"Accent color"}),r.jsx(R.Text,{type:"secondary",children:"Choose your accent color"})]}),r.jsx("div",{style:{display:"flex"},children:Ma.map(c=>r.jsx(dt,{content:c.name,children:r.jsx("button",{type:"button",style:{width:"18px",height:"18px",borderRadius:"50%",margin:"2px",backgroundColor:er(c.name),cursor:"pointer",border:"3px solid var(--color-bg-3)",outline:c.name===o?`1px solid ${er(c.name)}`:"none"},onClick:()=>d(c.name),onKeyDown:h=>{(h.key==="Enter"||h.key===" ")&&d(c.name)}})},c.name))})]}),r.jsx(Be,{}),r.jsxs("div",{className:"setting-row",children:[r.jsxs("div",{children:[r.jsx(R.Title,{heading:6,style:{marginTop:0},children:"Compact article list"}),r.jsx(R.Text,{type:"secondary",children:"Use small thumbnail in article list"})]}),r.jsx("div",{children:r.jsx(un,{checked:a==="small",onChange:n})})]}),r.jsx(Be,{}),r.jsxs("div",{className:"setting-row",children:[r.jsxs("div",{children:[r.jsx(R.Title,{heading:6,style:{marginTop:0},children:"Show feed icon"}),r.jsx(R.Text,{type:"secondary",children:"Show feed icon in feed list and article list"})]}),r.jsx("div",{children:r.jsx(un,{checked:u,onChange:l})})]}),r.jsx(Be,{}),r.jsxs("div",{className:"setting-row",children:[r.jsxs("div",{children:[r.jsx(R.Title,{heading:6,style:{marginTop:0},children:"Font size"}),r.jsx(R.Text,{type:"secondary",children:"Adjust article text size"})]}),r.jsx("div",{children:r.jsxs(Fn,{children:[r.jsx(R.Text,{style:{fontSize:"0.75rem"},children:"A"}),r.jsx(Ri,{value:i,showTicks:!0,min:.75,max:1.25,step:.05,formatTooltip:c=>`${c}rem`,onChange:s,style:{width:200}}),r.jsx(R.Text,{style:{fontSize:"1.25rem"},children:"A"})]})})]})]})},qn=e=>e.slice().sort((t,n)=>t.parsing_error_count>0&&n.parsing_error_count===0?-1:t.parsing_error_count===0&&n.parsing_error_count>0?1:0),ds=()=>{const[e,t]=y.useState(!1),[n]=xe.useForm(),[a,i]=y.useState(null),[s,u]=y.useState(window.innerWidth),l=b(w=>w.feeds),o=b(w=>w.setFeeds),[d,c]=y.useState(qn(l)),h=b(w=>w.groups),j=d.map(w=>({category:w.category,checked_at:w.checked_at,crawler:w.crawler,feed_url:w.feed_url,key:w.id,parsing_error_count:w.parsing_error_count,title:w.title}));y.useEffect(()=>{const w=()=>u(window.innerWidth);return window.addEventListener("resize",w),()=>window.removeEventListener("resize",w)},[]),y.useEffect(()=>{c(qn(l))},l);const E=w=>{i(w.key),t(!0),n.setFieldsValue({crawler:w.crawler,group:w.category.id,title:w.title,url:w.feed_url})},v=async w=>{as(w.key).then(()=>{ee.success("Refreshed"),w.parsing_error_count=0}).catch(()=>{ee.error("Failed to refresh"),w.parsing_error_count++}).finally(()=>{o(l.map(N=>N.id===w.key?{...N,parsing_error_count:w.parsing_error_count}:N))})},m=async w=>{is(w.key).then(()=>{ee.success("Unfollowed"),o(l.filter(N=>N.id!==w.key))}).catch(()=>{ee.error("Failed to unfollow")})},x=s<=768,T=[{title:"Title",dataIndex:"title",sorter:(w,N)=>w.title.localeCompare(N.title,"en"),render:(w,N)=>{const Y=N.parsing_error_count,g=Y?`! ${w}`:w,_=r.jsxs("div",{children:[w,Y>0&&r.jsxs(r.Fragment,{children:[r.jsx("br",{}),"! Parsing error count: ",Y]})]});return r.jsx(R.Ellipsis,{expandable:!1,children:r.jsx(dt,{mini:!0,content:_,children:g})})}},!x&&{title:"Url",dataIndex:"feed_url",sorter:(w,N)=>w.feed_url.localeCompare(N.feed_url,"en"),render:w=>r.jsx(R.Ellipsis,{expandable:!1,showTooltip:!0,children:w})},{title:"Group",dataIndex:"category.title",sorter:(w,N)=>w.category.title.localeCompare(N.category.title,"en"),render:w=>r.jsx(R.Ellipsis,{expandable:!1,showTooltip:!0,children:r.jsx(dn,{children:w})})},!x&&{title:"Checked at",dataIndex:"checked_at",sorter:(w,N)=>w.checked_at.localeCompare(N.checked_at,"en"),render:w=>r.jsx(R.Ellipsis,{expandable:!1,children:cr(w)})},{title:"Actions",dataIndex:"op",fixed:"right",width:100,render:(w,N)=>r.jsxs(Fn,{children:[r.jsx("button",{"aria-label":"Edit this feed",className:"list-item-action",onClick:()=>E(N),type:"button",children:r.jsx(Di,{})}),r.jsx("button",{"aria-label":"Refresh this feed",className:"list-item-action",onClick:()=>v(N),type:"button",children:r.jsx(ua,{})}),r.jsx(da,{position:"left",focusLock:!0,title:"Unfollow？",onOk:async()=>{await m(N)},children:r.jsx("span",{className:"list-item-action",children:r.jsx(Li,{})})})]})}].filter(Boolean),L=async(w,N,Y,g,_)=>{rs(w,N,Y,g,_).then(M=>{o(l.map(B=>B.id===w?{...B,...M.data}:B)),ee.success("Feed updated successfully"),t(!1)}).catch(()=>{ee.error("Failed to update feed")}),n.resetFields()};return r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:r.jsx(Ge.Search,{searchButton:!0,placeholder:"Search feed title or url",onChange:w=>c(qn(l).filter(N=>Ot(N.title,w)||Ot(N.feed_url,w))),style:{width:300,marginBottom:"16px"}})}),r.jsx(ca,{columns:T,data:j,scroll:{x:!0},size:"small",style:{width:"100%"},borderCell:!0}),a&&r.jsx(Nn,{title:"Edit Feed",visible:e,unmountOnExit:!0,onOk:n.submit,style:{width:"400px"},onCancel:()=>{t(!1),n.resetFields()},children:r.jsxs(xe,{form:n,labelCol:{span:7},layout:"vertical",wrapperCol:{span:17},onSubmit:w=>{w.url.trim()?L(a,w.url,w.title,w.group,w.crawler):ee.error("Feed URL cannot be empty")},children:[r.jsx(xe.Item,{label:"Feed URL",field:"url",rules:[{required:!0}],children:r.jsx(Ge,{placeholder:"Please input feed URL"})}),r.jsx(xe.Item,{label:"Title",field:"title",rules:[{required:!0}],children:r.jsx(Ge,{placeholder:"Please input feed title"})}),r.jsx(xe.Item,{label:"Group",required:!0,field:"group",rules:[{required:!0}],children:r.jsx(fe,{placeholder:"Please select",children:h.map(w=>r.jsx(fe.Option,{value:w.id,children:w.title},w.id))})}),r.jsx(xe.Item,{label:"Fetch original content",field:"crawler",tooltip:r.jsx("div",{children:"Only affects newly retrieved articles"}),style:{marginBottom:0},triggerPropName:"checked",rules:[{type:"boolean"}],children:r.jsx(un,{})})]})})]})},fs=()=>{const e=b(m=>m.showStatus),t=b(m=>m.setShowStatus),n=b(m=>m.homePage),a=b(m=>m.setHomePage),i=b(m=>m.orderBy),s=b(m=>m.orderDirection),u=b(m=>m.pageSize),l=b(m=>m.showAllFeeds),o=b(m=>m.setOrderBy),d=b(m=>m.setOrderDirection),c=b(m=>m.setPageSize),h=b(m=>m.toggleShowAllFeeds),j=b(m=>m.feeds),E=b(m=>m.hiddenFeedIds),v=b(m=>m.setUnreadTotal);return y.useEffect(()=>{ze("showStatus",e)},[e]),y.useEffect(()=>{ze("homePage",n)},[n]),y.useEffect(()=>{ze("orderBy",i)},[i]),y.useEffect(()=>{ze("orderDirection",s)},[s]),y.useEffect(()=>{ze("pageSize",u)},[u]),y.useEffect(()=>{if(ze("showAllFeeds",l),!l&&E){const m=j.filter(x=>!E.includes(x.id)).reduce((x,T)=>x+T.unreadCount,0);v(()=>m)}else v(()=>j.reduce((m,x)=>m+x.unreadCount,0))},[l]),r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"setting-row",children:[r.jsxs("div",{children:[r.jsx(R.Title,{heading:6,style:{marginTop:0},children:"Default show status"}),r.jsx(R.Text,{type:"secondary",children:"Which status to show by default:"})]}),r.jsx("div",{children:r.jsxs(fe,{onChange:t,placeholder:"Select status",style:{width:128,marginLeft:16},value:e,children:[r.jsx(fe.Option,{value:"all",children:"All"}),r.jsx(fe.Option,{value:"unread",children:"Unread"})]})})]}),r.jsx(Be,{}),r.jsxs("div",{className:"setting-row",children:[r.jsxs("div",{children:[r.jsx(R.Title,{heading:6,style:{marginTop:0},children:"Default home page"}),r.jsx(R.Text,{type:"secondary",children:"Which page to show by default:"})]}),r.jsx("div",{children:r.jsxs(fe,{onChange:a,placeholder:"Select page",style:{width:128,marginLeft:16},value:n,children:[r.jsx(fe.Option,{value:"all",children:"All"}),r.jsx(fe.Option,{value:"today",children:"Today"}),r.jsx(fe.Option,{value:"starred",children:"Starred"}),r.jsx(fe.Option,{value:"history",children:"History"})]})})]}),r.jsx(Be,{}),r.jsxs("div",{className:"setting-row",children:[r.jsxs("div",{children:[r.jsx(R.Title,{heading:6,style:{marginTop:0},children:"Entries order"}),r.jsx(R.Text,{type:"secondary",children:"What order to show entries:"})]}),r.jsx("div",{children:r.jsxs(fe,{onChange:o,placeholder:"Select order",style:{width:128,marginLeft:16},value:i,children:[r.jsx(fe.Option,{value:"published_at",children:"Published at"}),r.jsx(fe.Option,{value:"created_at",children:"Created at"})]})})]}),r.jsx(Be,{}),r.jsxs("div",{className:"setting-row",children:[r.jsxs("div",{children:[r.jsx(R.Title,{heading:6,style:{marginTop:0},children:"Entries order direction"}),r.jsx(R.Text,{type:"secondary",children:"What order direction to show entries:"})]}),r.jsx("div",{children:r.jsxs(fe,{onChange:d,placeholder:"Select order",style:{width:128,marginLeft:16},value:s,children:[r.jsx(fe.Option,{value:"asc",children:"Oldest first"}),r.jsx(fe.Option,{value:"desc",children:"Newest first"})]})})]}),r.jsx(Be,{}),r.jsxs("div",{className:"setting-row",children:[r.jsxs("div",{children:[r.jsx(R.Title,{heading:6,style:{marginTop:0},children:"Entries per page"}),r.jsx(R.Text,{type:"secondary",children:"Show how many entries per page:"})]}),r.jsx("div",{children:r.jsx(zi,{defaultValue:u,min:1,mode:"button",onChange:c,size:"small",style:{width:128,marginLeft:16}})})]}),r.jsx(Be,{}),r.jsxs("div",{className:"setting-row",children:[r.jsxs("div",{children:[r.jsx(R.Title,{heading:6,style:{marginTop:0},children:"Show all entries"}),r.jsx(R.Text,{type:"secondary",children:"Whether to show all entries of all feeds (including hidden)"})]}),r.jsx("div",{children:r.jsx(un,{checked:l,onChange:h})})]})]})},hs=()=>{const e=b(x=>x.feeds),t=b(x=>x.setFeeds),n=b(x=>x.groups),a=b(x=>x.setGroups),[i,s]=y.useState(!1),[u,l]=y.useState(""),[o,d]=y.useState(!1),[c]=xe.useForm(),[h,j]=y.useState({}),E=async()=>{u&&ts(u).then(x=>{a(T=>[...T,{...x.data,feedCount:0}]),l(""),ee.success("Group added successfully")}).catch(()=>{ee.error("Failed to add group")}),l(""),s(!1)},v=async(x,T)=>{ns(x,T).then(L=>{t(e.map(w=>w.category.id===x?{...w,category:{...w.category,title:T}}:w)),a(n.map(w=>w.id===x?L.data:w)),ee.success("Group updated successfully"),d(!1)}).catch(()=>{ee.error("Failed to update group")}),c.resetFields()},m=async x=>{es(x).then(T=>{T.status===204?(a(n.filter(L=>L.id!==x)),ee.success("Group deleted successfully")):ee.error("Failed to delete group")}).catch(()=>{ee.error("Failed to delete group")})};return r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[n.map(x=>r.jsx(dn,{size:"medium",closable:x.feedCount===0,onClick:()=>{j(x),d(!0),c.setFieldsValue({title:x.title})},onClose:async T=>{T.stopPropagation(),await m(x.id)},style:{marginRight:"10px",marginBottom:"10px",cursor:"pointer"},children:x.title},x.id)),i?r.jsx(Ge,{autoFocus:!0,size:"small",value:u,style:{width:84},onPressEnter:E,onBlur:E,onChange:l}):r.jsx(dn,{icon:r.jsx(ia,{}),style:{width:84,backgroundColor:"var(--color-fill-2)",border:"1px dashed var(--color-fill-3)",cursor:"pointer"},size:"medium",className:"add-group",tabIndex:0,onClick:()=>s(!0),children:"Add"})]}),h&&r.jsx(Nn,{title:"Edit Group",visible:o,unmountOnExit:!0,style:{width:"400px"},onOk:c.submit,onCancel:()=>{d(!1),c.resetFields()},children:r.jsx(xe,{form:c,layout:"vertical",onSubmit:x=>v(h.id,x.title),labelCol:{style:{flexBasis:90}},wrapperCol:{style:{flexBasis:"calc(100% - 90px)"}},children:r.jsx(xe.Item,{label:"Title",field:"title",rules:[{required:!0}],children:r.jsx(Ge,{placeholder:"Please input group title"})})})})]})},ps=[{title:"Key",dataIndex:"keyName",render:e=>r.jsx(dn,{children:e})},{title:"Function",dataIndex:"description"}],ms=[{key:"1",keyName:"Esc",description:"Dismiss article"},{key:"2",keyName:"←",description:"Previous article"},{key:"3",keyName:"→",description:"Next article"},{key:"4",keyName:"B",description:"Open link externally"},{key:"5",keyName:"D",description:"Fetch original article"},{key:"6",keyName:"M",description:"Mark as read / unread"},{key:"7",keyName:"S",description:"Star / Unstar"}],gs=()=>r.jsx(ca,{columns:ps,data:ms,pagination:!1,size:"small"}),vs=()=>{const e=()=>{const t=[Pa,Fa,Na];for(const n of t){const a=new Image;a.src=n}};return y.useEffect(()=>{e()},[]),r.jsxs(Gt,{defaultActiveTab:"1",tabPosition:"top",children:[r.jsx(Gt.TabPane,{title:r.jsxs("span",{children:[r.jsx(Bi,{style:{marginRight:6}}),"Feeds"]}),children:r.jsx(ds,{})},"1"),r.jsx(Gt.TabPane,{title:r.jsxs("span",{children:[r.jsx(Ui,{style:{marginRight:6}}),"Groups"]}),children:r.jsx(hs,{})},"2"),r.jsx(Gt.TabPane,{title:r.jsxs("span",{children:[r.jsx(Vi,{style:{marginRight:6}}),"General"]}),children:r.jsx(fs,{})},"3"),r.jsx(Gt.TabPane,{title:r.jsxs("span",{children:[r.jsx($i,{style:{marginRight:6}}),"Appearance"]}),children:r.jsx(us,{})},"4"),r.jsx(Gt.TabPane,{title:r.jsxs("span",{children:[r.jsx(Hi,{style:{marginRight:6}}),"Hotkeys"]}),children:r.jsx(gs,{})},"5")]})},ys=()=>{const e=b(o=>o.activeContent),t=b(o=>o.setActiveContent),n=b(o=>o.setVisible),a=b(o=>o.visible),[i,s]=y.useState("720px"),[u,l]=y.useState("10%");return y.useEffect(()=>{const o=()=>{const d=tr()?"100%":"720px",c=tr()?"5%":"10%";s(d),l(c)};return window.addEventListener("resize",o),o(),()=>{window.removeEventListener("resize",o)}},[]),r.jsx(Nn,{visible:a.settings,alignCenter:!1,title:"Settings",footer:null,unmountOnExit:!0,style:{width:i,top:u},onFocus:()=>{e&&t(null)},onCancel:()=>n("settings",!1),autoFocus:!1,focusLock:!0,children:r.jsx(vs,{})})},xs=()=>{const e=b(c=>c.activeContent),t=b(c=>c.groups),n=b(c=>c.initData),a=b(c=>c.setActiveContent),i=b(c=>c.setVisible),s=b(c=>c.visible),[u,l]=y.useState(!1),[o]=xe.useForm(),d=async(c,h,j)=>{l(!0),os(c,h,j).then(()=>{n(),ee.success("Added a feed successfully"),i("addFeed",!1)}).catch(()=>{ee.error("Failed to add a feed")}),l(!1),o.resetFields()};return r.jsx(Nn,{title:"Add Feed",visible:s.addFeed,unmountOnExit:!0,style:{width:"400px"},onFocus:()=>{e&&a(null)},onOk:o.submit,confirmLoading:u,onCancel:()=>{i("addFeed",!1),o.resetFields()},children:r.jsxs(xe,{form:o,labelCol:{span:7},layout:"vertical",wrapperCol:{span:17},onSubmit:c=>{c.url.trim()?d(c.url.trim(),c.group,c.crawler):ee.error("Feed URL cannot be empty")},children:[r.jsx(xe.Item,{label:"Feed URL",field:"url",rules:[{required:!0}],children:r.jsx(Ge,{placeholder:"Please input a feed URL"})}),r.jsx(xe.Item,{label:"Group",required:!0,field:"group",rules:[{required:!0}],children:r.jsx(fe,{placeholder:"Please select a category",showSearch:!0,filterOption:(c,h)=>Ot(h.props.children,c),children:t.map(c=>r.jsx(fe.Option,{value:c.id,children:c.title},c.id))})}),r.jsx(xe.Item,{label:"Fetch original content",initialValue:!1,field:"crawler",style:{marginBottom:0},triggerPropName:"checked",rules:[{type:"boolean"}],children:r.jsx(un,{})})]})})},bs=()=>{const[e,t]=y.useState(0);return y.useEffect(()=>{const n=()=>{const a=document.querySelector(".entry-panel"),i=a?a.offsetHeight:49,s=window.innerHeight;t(s-i)};return window.addEventListener("resize",n),n(),()=>window.removeEventListener("resize",n)},[]),r.jsxs("div",{className:"main",style:{height:`${e}px`},children:[r.jsx(Wi,{}),r.jsx(ys,{}),r.jsx(xs,{})]})};function Tn(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Tn=function(n){return typeof n}:Tn=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Tn(e)}function dr(e){var t=typeof e=="string"||e instanceof String;if(!t){var n=Tn(e);throw e===null?n="null":n==="object"&&(n=e.constructor.name),new TypeError("Expected a string but received a ".concat(n))}}function Oa(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var n in t)typeof e[n]>"u"&&(e[n]=t[n]);return e}var ws={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function Cs(e,t){dr(e),t=Oa(t,ws),t.allow_trailing_dot&&e[e.length-1]==="."&&(e=e.substring(0,e.length-1)),t.allow_wildcard===!0&&e.indexOf("*.")===0&&(e=e.substring(2));var n=e.split("."),a=n[n.length-1];return t.require_tld&&(n.length<2||!t.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(a)||/\s/.test(a))||!t.allow_numeric_tld&&/^\d+$/.test(a)?!1:n.every(function(i){return!(i.length>63&&!t.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(i)||/[\uff01-\uff5e]/.test(i)||/^-|-$/.test(i)||!t.allow_underscores&&/_/.test(i))})}var Dr="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",bt="(".concat(Dr,"[.]){3}").concat(Dr),js=new RegExp("^".concat(bt,"$")),me="(?:[0-9a-fA-F]{1,4})",Es=new RegExp("^("+"(?:".concat(me,":){7}(?:").concat(me,"|:)|")+"(?:".concat(me,":){6}(?:").concat(bt,"|:").concat(me,"|:)|")+"(?:".concat(me,":){5}(?::").concat(bt,"|(:").concat(me,"){1,2}|:)|")+"(?:".concat(me,":){4}(?:(:").concat(me,"){0,1}:").concat(bt,"|(:").concat(me,"){1,3}|:)|")+"(?:".concat(me,":){3}(?:(:").concat(me,"){0,2}:").concat(bt,"|(:").concat(me,"){1,4}|:)|")+"(?:".concat(me,":){2}(?:(:").concat(me,"){0,3}:").concat(bt,"|(:").concat(me,"){1,5}|:)|")+"(?:".concat(me,":){1}(?:(:").concat(me,"){0,4}:").concat(bt,"|(:").concat(me,"){1,6}|:)|")+"(?::((?::".concat(me,"){0,5}:").concat(bt,"|(?::").concat(me,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");function In(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return dr(e),t=String(t),t?t==="4"?js.test(e):t==="6"?Es.test(e):!1:In(e,4)||In(e,6)}function Ss(e,t){return Is(e)||ks(e,t)||_s(e,t)||Ts()}function Ts(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _s(e,t){if(e){if(typeof e=="string")return Lr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lr(e,t)}}function Lr(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function ks(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],a=!0,i=!1,s=void 0;try{for(var u=e[Symbol.iterator](),l;!(a=(l=u.next()).done)&&(n.push(l.value),!(t&&n.length===t));a=!0);}catch(o){i=!0,s=o}finally{try{!a&&u.return!=null&&u.return()}finally{if(i)throw s}}return n}}function Is(e){if(Array.isArray(e))return e}var Ms={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0},As=/^\[([^\]]+)\](?::([0-9]+))?$/;function Ps(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function zr(e,t){for(var n=0;n<t.length;n++){var a=t[n];if(e===a||Ps(a)&&a.test(e))return!0}return!1}function Ra(e,t){if(dr(e),!e||/[\s<>]/.test(e)||e.indexOf("mailto:")===0||(t=Oa(t,Ms),t.validate_length&&e.length>=2083)||!t.allow_fragments&&e.includes("#")||!t.allow_query_components&&(e.includes("?")||e.includes("&")))return!1;var n,a,i,s,u,l,o,d;if(o=e.split("#"),e=o.shift(),o=e.split("?"),e=o.shift(),o=e.split("://"),o.length>1){if(n=o.shift().toLowerCase(),t.require_valid_protocol&&t.protocols.indexOf(n)===-1)return!1}else{if(t.require_protocol)return!1;if(e.slice(0,2)==="//"){if(!t.allow_protocol_relative_urls)return!1;o[0]=e.slice(2)}}if(e=o.join("://"),e==="")return!1;if(o=e.split("/"),e=o.shift(),e===""&&!t.require_host)return!0;if(o=e.split("@"),o.length>1){if(t.disallow_auth||o[0]===""||(a=o.shift(),a.indexOf(":")>=0&&a.split(":").length>2))return!1;var c=a.split(":"),h=Ss(c,2),j=h[0],E=h[1];if(j===""&&E==="")return!1}s=o.join("@"),l=null,d=null;var v=s.match(As);if(v?(i="",d=v[1],l=v[2]||null):(o=s.split(":"),i=o.shift(),o.length&&(l=o.join(":"))),l!==null&&l.length>0){if(u=parseInt(l,10),!/^[0-9]+$/.test(l)||u<=0||u>65535)return!1}else if(t.require_port)return!1;return t.host_whitelist?zr(i,t.host_whitelist):i===""&&!t.require_host?!0:!(!In(i)&&!Cs(i,t)&&(!d||!In(d,6))||(i=i||d,t.host_blacklist&&zr(i,t.host_blacklist)))}const Da=e=>{const t=new URL(e);return`${t.protocol}//${t.hostname}`},rn=Ct.Item,{Sider:Fs}=Ki,Ns=({group:e,isOpen:t})=>r.jsxs("div",{className:"group-title",children:[r.jsxs(R.Ellipsis,{expandable:!1,showTooltip:!0,style:{width:e.unreadCount?"80%":"100%"},children:[t?r.jsx(Zi,{}):r.jsx(Ji,{}),e.title]}),e.unreadCount>0&&r.jsx(R.Ellipsis,{className:"unread-count",expandable:!1,children:e.unreadCount})]}),Os=()=>{const e=Gi(),t=fn(),n=b(g=>g.collapsed),a=b(g=>g.feeds),i=b(g=>g.groups),s=b(g=>g.loading),u=b(g=>g.unreadTotal),l=b(g=>g.unreadToday),o=b(g=>g.starredCount),d=b(g=>g.readCount),c=b(g=>g.showFeedIcon),h=b(g=>g.toggleCollapsed),j=b(g=>g.hiddenFeedIds),E=b(g=>g.hiddenGroupIds),v=b(g=>g.showAllFeeds),[m,x]=y.useState([]),[T,L]=y.useState([]),w=e.pathname,N=(g,_)=>{L(_)},Y=a.reduce((g,_)=>{if(!v&&j.includes(_.id))return g;Ra(_.site_url)||(_.site_url=Da(_.feed_url));const{id:M}=_.category;return g[M]=g[M]||[],g[M].push(_),g},{});return y.useEffect(()=>{x([w]),n||window.innerWidth<=992&&h(!0)},[w]),y.useEffect(()=>{s||L([])},[s]),r.jsx(Fs,{className:"sidebar",trigger:null,width:240,collapsedWidth:0,breakpoint:"lg",onCollapse:h,collapsed:n,collapsible:!0,style:{height:"100%",borderRight:n?"none":"1px solid var(--color-border-2)",position:"fixed",top:0,zIndex:999},children:r.jsxs(Ct,{autoScrollIntoView:!0,collapse:n,defaultSelectedKeys:[w],hasCollapseButton:!0,onClickSubMenu:N,onCollapseChange:h,selectedKeys:m,style:{width:"240px",height:"100%"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"0 28px 0 10px",height:"48px",marginTop:"-4px",visibility:n?"hidden":"visible"},children:[r.jsx(sa,{size:32,style:{marginRight:"10px",backgroundColor:"var(--color-text-1)"},children:r.jsx(fa,{style:{color:"var(--color-bg-1)"}})}),r.jsx(R.Title,{heading:6,style:{margin:"0"},children:"ReactFlux"})]}),r.jsx(Be,{style:{marginTop:0,marginBottom:"4px"}}),r.jsx(R.Title,{heading:6,style:{fontStyle:"italic",color:"var(--color-text-3)"},children:"Articles"}),r.jsx(_n,{loading:s,animation:!0,text:{rows:3}}),s?null:r.jsxs("div",{children:[r.jsx(rn,{onClick:()=>t("/all"),children:r.jsxs("div",{className:"custom-menu-item",children:[r.jsxs("span",{children:[r.jsx(Xi,{}),"All"]}),r.jsx(R.Ellipsis,{className:"item-count",expandable:!1,children:u||""})]})},"/all"),r.jsx(rn,{onClick:()=>t("/today"),children:r.jsxs("div",{className:"custom-menu-item",children:[r.jsxs("span",{children:[r.jsx(qi,{}),"Today"]}),r.jsx(R.Ellipsis,{className:"item-count",expandable:!1,children:l||""})]})},"/today"),r.jsx(rn,{onClick:()=>t("/starred"),children:r.jsxs("div",{className:"custom-menu-item",children:[r.jsxs("span",{children:[r.jsx(lr,{}),"Starred"]}),r.jsx(R.Ellipsis,{className:"item-count",expandable:!1,children:o||""})]})},"/starred"),r.jsx(rn,{onClick:()=>t("/history"),children:r.jsxs("div",{className:"custom-menu-item",children:[r.jsxs("span",{children:[r.jsx(Yi,{}),"History"]}),r.jsx(R.Ellipsis,{className:"item-count",expandable:!1,children:d||""})]})},"/history")]}),r.jsx(R.Title,{heading:6,style:{fontStyle:"italic",color:"var(--color-text-3)"},children:"Feeds"}),r.jsx(_n,{loading:s,animation:!0,text:{rows:6}}),s?null:i.filter(g=>v||!E.includes(g.id)).map(g=>{var _;return r.jsx(Ct.SubMenu,{selectable:!0,title:r.jsx(Ns,{group:g,isOpen:T.includes(`/group/${g.id}`)}),onClick:M=>{x([`/group/${g.id}`]),!(M.target.tagName==="svg"||M.target.tagName==="path")&&w!==`/group/${g.id}`&&t(`/group/${g.id}`)},children:(_=Y[g.id])==null?void 0:_.map(M=>r.jsx(rn,{onClick:B=>{B.stopPropagation(),x([`/group/${g.id}`]),t(`/feed/${M.id}`)},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs(R.Ellipsis,{expandable:!1,showTooltip:!0,style:{width:M.unreadCount!==0?"80%":"100%"},children:[c&&r.jsx("img",{src:`https://icons.duckduckgo.com/ip3/${new URL(M.site_url).hostname}.ico`,alt:"Icon",style:{marginRight:"8px",width:"16px",height:"16px",verticalAlign:"-2px"}}),M.title]}),M.unreadCount!==0&&r.jsx(R.Ellipsis,{expandable:!1,style:{color:"var(--color-text-4)",display:"flex",justifyContent:"flex-end"},children:M.unreadCount})]})},`/feed/${M.id}`))},`/group/${g.id}`)})]})})},Rs=()=>{const e=b(s=>s.initData),t=b(s=>s.theme),n=b(s=>s.isSysDarkMode),a=b(s=>s.setIsSysDarkMode),i=b(s=>s.color);return y.useEffect(()=>{e();const s=l=>{a(l.matches)},u=window.matchMedia("(prefers-color-scheme: dark)");return u.addEventListener("change",s),()=>{u.removeEventListener("change",s)}},[]),y.useEffect(()=>{(u=>{document.body.setAttribute("arco-theme",u?"dark":"light"),document.body.style.colorScheme=u?"dark":"light"})(t==="system"?n:t==="dark")},[n,t]),y.useEffect(()=>{ur(i)},[i]),r.jsxs("div",{className:"app",style:{display:"flex",backgroundColor:"var(--color-bg-1)"},children:[r.jsx(cs,{}),r.jsx(Os,{}),r.jsx(bs,{})]})};var hn={};(function e(t,n,a,i){var s=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),u=typeof Path2D=="function"&&typeof DOMMatrix=="function",l=function(){if(!t.OffscreenCanvas)return!1;var p=new OffscreenCanvas(1,1),f=p.getContext("2d");f.fillRect(0,0,1,1);var k=p.transferToImageBitmap();try{f.createPattern(k,"no-repeat")}catch{return!1}return!0}();function o(){}function d(p){var f=n.exports.Promise,k=f!==void 0?f:t.Promise;return typeof k=="function"?new k(p):(p(o,o),null)}var c=function(p,f){return{transform:function(k){if(p)return k;if(f.has(k))return f.get(k);var P=new OffscreenCanvas(k.width,k.height),I=P.getContext("2d");return I.drawImage(k,0,0),f.set(k,P),P},clear:function(){f.clear()}}}(l,new Map),h=function(){var p=Math.floor(16.666666666666668),f,k,P={},I=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(f=function(A){var O=Math.random();return P[O]=requestAnimationFrame(function F(z){I===z||I+p-1<z?(I=z,delete P[O],A()):P[O]=requestAnimationFrame(F)}),O},k=function(A){P[A]&&cancelAnimationFrame(P[A])}):(f=function(A){return setTimeout(A,p)},k=function(A){return clearTimeout(A)}),{frame:f,cancel:k}}(),j=function(){var p,f,k={};function P(I){function A(O,F){I.postMessage({options:O||{},callback:F})}I.init=function(F){var z=F.transferControlToOffscreen();I.postMessage({canvas:z},[z])},I.fire=function(F,z,H){if(f)return A(F,null),f;var U=Math.random().toString(36).slice(2);return f=d(function(Z){function J(re){re.data.callback===U&&(delete k[U],I.removeEventListener("message",J),f=null,c.clear(),H(),Z())}I.addEventListener("message",J),A(F,U),k[U]=J.bind(null,{data:{callback:U}})}),f},I.reset=function(){I.postMessage({reset:!0});for(var F in k)k[F](),delete k[F]}}return function(){if(p)return p;if(!a&&s){var I=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{p=new Worker(URL.createObjectURL(new Blob([I])))}catch(A){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",A),null}P(p)}return p}}(),E={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function v(p,f){return f?f(p):p}function m(p){return p!=null}function x(p,f,k){return v(p&&m(p[f])?p[f]:E[f],k)}function T(p){return p<0?0:Math.floor(p)}function L(p,f){return Math.floor(Math.random()*(f-p))+p}function w(p){return parseInt(p,16)}function N(p){return p.map(Y)}function Y(p){var f=String(p).replace(/[^0-9a-f]/gi,"");return f.length<6&&(f=f[0]+f[0]+f[1]+f[1]+f[2]+f[2]),{r:w(f.substring(0,2)),g:w(f.substring(2,4)),b:w(f.substring(4,6))}}function g(p){var f=x(p,"origin",Object);return f.x=x(f,"x",Number),f.y=x(f,"y",Number),f}function _(p){p.width=document.documentElement.clientWidth,p.height=document.documentElement.clientHeight}function M(p){var f=p.getBoundingClientRect();p.width=f.width,p.height=f.height}function B(p){var f=document.createElement("canvas");return f.style.position="fixed",f.style.top="0px",f.style.left="0px",f.style.pointerEvents="none",f.style.zIndex=p,f}function ne(p,f,k,P,I,A,O,F,z){p.save(),p.translate(f,k),p.rotate(A),p.scale(P,I),p.arc(0,0,1,O,F,z),p.restore()}function Se(p){var f=p.angle*(Math.PI/180),k=p.spread*(Math.PI/180);return{x:p.x,y:p.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:p.startVelocity*.5+Math.random()*p.startVelocity,angle2D:-f+(.5*k-Math.random()*k),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:p.color,shape:p.shape,tick:0,totalTicks:p.ticks,decay:p.decay,drift:p.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:p.gravity*3,ovalScalar:.6,scalar:p.scalar,flat:p.flat}}function K(p,f){f.x+=Math.cos(f.angle2D)*f.velocity+f.drift,f.y+=Math.sin(f.angle2D)*f.velocity+f.gravity,f.velocity*=f.decay,f.flat?(f.wobble=0,f.wobbleX=f.x+10*f.scalar,f.wobbleY=f.y+10*f.scalar,f.tiltSin=0,f.tiltCos=0,f.random=1):(f.wobble+=f.wobbleSpeed,f.wobbleX=f.x+10*f.scalar*Math.cos(f.wobble),f.wobbleY=f.y+10*f.scalar*Math.sin(f.wobble),f.tiltAngle+=.1,f.tiltSin=Math.sin(f.tiltAngle),f.tiltCos=Math.cos(f.tiltAngle),f.random=Math.random()+2);var k=f.tick++/f.totalTicks,P=f.x+f.random*f.tiltCos,I=f.y+f.random*f.tiltSin,A=f.wobbleX+f.random*f.tiltCos,O=f.wobbleY+f.random*f.tiltSin;if(p.fillStyle="rgba("+f.color.r+", "+f.color.g+", "+f.color.b+", "+(1-k)+")",p.beginPath(),u&&f.shape.type==="path"&&typeof f.shape.path=="string"&&Array.isArray(f.shape.matrix))p.fill(Qe(f.shape.path,f.shape.matrix,f.x,f.y,Math.abs(A-P)*.1,Math.abs(O-I)*.1,Math.PI/10*f.wobble));else if(f.shape.type==="bitmap"){var F=Math.PI/10*f.wobble,z=Math.abs(A-P)*.1,H=Math.abs(O-I)*.1,U=f.shape.bitmap.width*f.scalar,Z=f.shape.bitmap.height*f.scalar,J=new DOMMatrix([Math.cos(F)*z,Math.sin(F)*z,-Math.sin(F)*H,Math.cos(F)*H,f.x,f.y]);J.multiplySelf(new DOMMatrix(f.shape.matrix));var re=p.createPattern(c.transform(f.shape.bitmap),"no-repeat");re.setTransform(J),p.globalAlpha=1-k,p.fillStyle=re,p.fillRect(f.x-U/2,f.y-Z/2,U,Z),p.globalAlpha=1}else if(f.shape==="circle")p.ellipse?p.ellipse(f.x,f.y,Math.abs(A-P)*f.ovalScalar,Math.abs(O-I)*f.ovalScalar,Math.PI/10*f.wobble,0,2*Math.PI):ne(p,f.x,f.y,Math.abs(A-P)*f.ovalScalar,Math.abs(O-I)*f.ovalScalar,Math.PI/10*f.wobble,0,2*Math.PI);else if(f.shape==="star")for(var $=Math.PI/2*3,V=4*f.scalar,be=8*f.scalar,ie=f.x,ge=f.y,Ce=5,S=Math.PI/Ce;Ce--;)ie=f.x+Math.cos($)*be,ge=f.y+Math.sin($)*be,p.lineTo(ie,ge),$+=S,ie=f.x+Math.cos($)*V,ge=f.y+Math.sin($)*V,p.lineTo(ie,ge),$+=S;else p.moveTo(Math.floor(f.x),Math.floor(f.y)),p.lineTo(Math.floor(f.wobbleX),Math.floor(I)),p.lineTo(Math.floor(A),Math.floor(O)),p.lineTo(Math.floor(P),Math.floor(f.wobbleY));return p.closePath(),p.fill(),f.tick<f.totalTicks}function ht(p,f,k,P,I){var A=f.slice(),O=p.getContext("2d"),F,z,H=d(function(U){function Z(){F=z=null,O.clearRect(0,0,P.width,P.height),c.clear(),I(),U()}function J(){a&&!(P.width===i.width&&P.height===i.height)&&(P.width=p.width=i.width,P.height=p.height=i.height),!P.width&&!P.height&&(k(p),P.width=p.width,P.height=p.height),O.clearRect(0,0,P.width,P.height),A=A.filter(function(re){return K(O,re)}),A.length?F=h.frame(J):Z()}F=h.frame(J),z=Z});return{addFettis:function(U){return A=A.concat(U),H},canvas:p,promise:H,reset:function(){F&&h.cancel(F),z&&z()}}}function Ae(p,f){var k=!p,P=!!x(f||{},"resize"),I=!1,A=x(f,"disableForReducedMotion",Boolean),O=s&&!!x(f||{},"useWorker"),F=O?j():null,z=k?_:M,H=p&&F?!!p.__confetti_initialized:!1,U=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,Z;function J($,V,be){for(var ie=x($,"particleCount",T),ge=x($,"angle",Number),Ce=x($,"spread",Number),S=x($,"startVelocity",Number),ae=x($,"decay",Number),Te=x($,"gravity",Number),he=x($,"drift",Number),qe=x($,"colors",N),tt=x($,"ticks",Number),Ue=x($,"shapes"),Oe=x($,"scalar"),Ye=!!x($,"flat"),pt=g($),Tt=ie,mt=[],Lt=p.width*pt.x,_e=p.height*pt.y;Tt--;)mt.push(Se({x:Lt,y:_e,angle:ge,spread:Ce,startVelocity:S,color:qe[Tt%qe.length],shape:Ue[L(0,Ue.length)],ticks:tt,decay:ae,gravity:Te,drift:he,scalar:Oe,flat:Ye}));return Z?Z.addFettis(mt):(Z=ht(p,mt,z,V,be),Z.promise)}function re($){var V=A||x($,"disableForReducedMotion",Boolean),be=x($,"zIndex",Number);if(V&&U)return d(function(S){S()});k&&Z?p=Z.canvas:k&&!p&&(p=B(be),document.body.appendChild(p)),P&&!H&&z(p);var ie={width:p.width,height:p.height};F&&!H&&F.init(p),H=!0,F&&(p.__confetti_initialized=!0);function ge(){if(F){var S={getBoundingClientRect:function(){if(!k)return p.getBoundingClientRect()}};z(S),F.postMessage({resize:{width:S.width,height:S.height}});return}ie.width=ie.height=null}function Ce(){Z=null,P&&(I=!1,t.removeEventListener("resize",ge)),k&&p&&(document.body.removeChild(p),p=null,H=!1)}return P&&!I&&(I=!0,t.addEventListener("resize",ge,!1)),F?F.fire($,ie,Ce):J($,ie,Ce)}return re.reset=function(){F&&F.reset(),Z&&Z.reset()},re}var ce;function de(){return ce||(ce=Ae(null,{useWorker:!0,resize:!0})),ce}function Qe(p,f,k,P,I,A,O){var F=new Path2D(p),z=new Path2D;z.addPath(F,new DOMMatrix(f));var H=new Path2D;return H.addPath(z,new DOMMatrix([Math.cos(O)*I,Math.sin(O)*I,-Math.sin(O)*A,Math.cos(O)*A,k,P])),H}function we(p){if(!u)throw new Error("path confetti are not supported in this browser");var f,k;typeof p=="string"?f=p:(f=p.path,k=p.matrix);var P=new Path2D(f),I=document.createElement("canvas"),A=I.getContext("2d");if(!k){for(var O=1e3,F=O,z=O,H=0,U=0,Z,J,re=0;re<O;re+=2)for(var $=0;$<O;$+=2)A.isPointInPath(P,re,$,"nonzero")&&(F=Math.min(F,re),z=Math.min(z,$),H=Math.max(H,re),U=Math.max(U,$));Z=H-F,J=U-z;var V=10,be=Math.min(V/Z,V/J);k=[be,0,0,be,-Math.round(Z/2+F)*be,-Math.round(J/2+z)*be]}return{type:"path",path:f,matrix:k}}function et(p){var f,k=1,P="#000000",I='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof p=="string"?f=p:(f=p.text,k="scalar"in p?p.scalar:k,I="fontFamily"in p?p.fontFamily:I,P="color"in p?p.color:P);var A=10*k,O=""+A+"px "+I,F=new OffscreenCanvas(A,A),z=F.getContext("2d");z.font=O;var H=z.measureText(f),U=Math.ceil(H.actualBoundingBoxRight+H.actualBoundingBoxLeft),Z=Math.ceil(H.actualBoundingBoxAscent+H.actualBoundingBoxDescent),J=2,re=H.actualBoundingBoxLeft+J,$=H.actualBoundingBoxAscent+J;U+=J+J,Z+=J+J,F=new OffscreenCanvas(U,Z),z=F.getContext("2d"),z.font=O,z.fillStyle=P,z.fillText(f,re,$);var V=1/k;return{type:"bitmap",bitmap:F.transferToImageBitmap(),matrix:[V,0,0,V,-U*V/2,-Z*V/2]}}n.exports=function(){return de().apply(this,arguments)},n.exports.reset=function(){de().reset()},n.exports.create=Ae,n.exports.shapeFromPath=we,n.exports.shapeFromText=et})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),hn,!1);const Ds=hn.exports;hn.exports.create;const ft=y.createContext(null),Jt=({children:e})=>{const[t,n]=y.useState(0),[a,i]=y.useState(0),[s,u]=y.useState(0),[l,o]=y.useState(!1),[d,c]=y.useState(!1),[h,j]=y.useState([]),[E,v]=y.useState([]),[m,x]=y.useState(se("showStatus")),[T,L]=y.useState("0"),[w,N]=y.useState(""),[Y,g]=y.useState(!0),_=y.useMemo(()=>({entries:h,filteredEntries:E,filterStatus:m,filterString:w,filterType:T,loading:Y,loadMoreUnreadVisible:d,loadMoreVisible:l,offset:s,setEntries:j,setFilteredEntries:v,setFilterStatus:x,setFilterString:N,setFilterType:L,setLoading:g,setLoadMoreUnreadVisible:c,setLoadMoreVisible:o,setOffset:u,setTotal:n,setUnreadCount:i,total:t,unreadCount:a}),[h,E,m,w,T,Y,d,l,s,t,a]);return r.jsx(ft.Provider,{value:_,children:e})},fr=()=>{const e=b(g=>g.setUnreadTotal),t=b(g=>g.setUnreadToday),n=b(g=>g.setReadCount),a=b(g=>g.setStarredCount),i=b(g=>g.activeContent),s=b(g=>g.setActiveContent),u=b(g=>g.updateFeedUnreadCount),l=b(g=>g.updateGroupUnreadCount),{entries:o,filteredEntries:d,setEntries:c,setFilteredEntries:h,setUnreadCount:j}=y.useContext(ft),E=(g,_,M)=>g.map(B=>B.id===_.id?M(B):B),v=(g,_,M)=>{s({...g,..._}),c(E(o,g,M)),h(E(d,g,M))},m=(g,_)=>{const{feed:M}=g,B=M.id,ne=M.category.id,Se=Wo(g.published_at);u(B,_),l(ne,_),_==="read"?(e(K=>Math.max(0,K-1)),j(K=>Math.max(0,K-1)),n(K=>K+1),Se&&t(K=>Math.max(0,K-1))):(e(K=>K+1),j(K=>K+1),n(K=>Math.max(0,K-1)),Se&&t(K=>K+1)),v(g,{status:_},K=>({...K,status:_}))},x=(g,_)=>{_?(a(M=>M+1),Ds({particleCount:100,angle:120,spread:70,origin:{x:1,y:1}})):a(M=>Math.max(0,M-1)),v(g,{starred:_},M=>({...M,starred:_}))},T=async()=>{const g=i.status,_=g==="read"?"unread":"read";m(i,_),_a(i.id,_).catch(()=>{ee.error(`Failed to mark entry as ${_}, please try again later`),m(i,g)})},L=async()=>{const{id:g}=i,_=!i.starred;x(i,_),qo(g).catch(()=>{ee.error(`Failed to ${_?"star":"unstar"} entry, please try again later`),x(i,!_)})};return{handleEntryStatusUpdate:m,handleFetchContent:async()=>{Yo(i.id).then(g=>{ee.success("Fetched content successfully"),s({...i,content:g.data.content})}).catch(()=>{ee.error("Failed to fetch content, please try again later")})},toggleEntryStarred:()=>{L()},toggleEntryStatus:()=>{T()}}},Br=(e,t="start")=>{const n=document.querySelector(e);n&&n.scrollIntoView({behavior:"smooth",block:t})},hr=()=>{const e=b(T=>T.pageSize),{entries:t,filterStatus:n,filterString:a,filterType:i,offset:s,setEntries:u,setFilteredEntries:l,setLoadMoreUnreadVisible:o,setLoadMoreVisible:d,setOffset:c,total:h,unreadCount:j}=y.useContext(ft),[E,v]=y.useState(!1),m=T=>{const N=new DOMParser().parseFromString(T.content,"text/html").querySelector("img");return N&&(T.imgSrc=N.getAttribute("src")),T};return{getFirstImage:m,handleLoadMore:async T=>{var L;v(!0);try{const w=await T(s+e);if((L=w==null?void 0:w.data)!=null&&L.entries){c(M=>M+e);const N=w.data.entries.map(m),Y=[...new Map([...t,...N].map(M=>[M.id,M])).values()];u(Y);const g=n==="all"?Y:Y.filter(M=>M.status==="unread"),_=a?Aa(g,i,n,a):g;l(_),d(Y.length<h),o(g.length<j&&n==="unread")}}catch(w){console.error("Error fetching more articles:",w)}v(!1)},loadingMore:E}},pr=(e,t,n,a)=>{const{filteredEntries:i,filterStatus:s,loadMoreUnreadVisible:u,loadMoreVisible:l}=y.useContext(ft),o=b(g=>g.activeContent),d=b(g=>g.setActiveContent),{handleLoadMore:c}=hr(),[h,j]=y.useState(!1),[E,v]=y.useState(!1);y.useEffect(()=>{const g=document.querySelector(".entry-list");!g||!tr()||(o?g.style.visibility="hidden":g.style.visibility="visible")},[o]),y.useEffect(()=>{E&&!h&&n&&(T(),v(!1),a(!1))},[h,E]);const m=g=>{o&&(d(null),g.current&&(g.current.setAttribute("tabIndex","-1"),g.current.focus()))},x=()=>{const g=i.findIndex(_=>_.id===(o==null?void 0:o.id));if(g>0){const _=i[g-1];e(_),Br(".card-custom-selected-style","end")}},T=()=>{if(h)return;const g=i.findIndex(M=>M.id===(o==null?void 0:o.id));if(g===i.length-1&&(s==="all"&&l||u)){j(!0),c(t).then(()=>v(!0)).finally(()=>j(!1));return}if(g===-1){const M=document.querySelector(".entry-list");M&&M.scrollTo(0,0)}if(g<i.length-1){const M=i[g+1];e(M),v(!1),Br(".card-custom-selected-style")}};return{handleEscapeKey:m,handleLeftKey:x,handleRightKey:T,handleBKey:()=>{o&&window.open(o.url,"_blank")},handleDKey:g=>{o&&g()},handleMKey:g=>{o&&g()},handleSKey:g=>{o&&g()}}},Ls=({handleEntryClick:e,getEntries:t,isFilteredEntriesUpdated:n,setIsFilteredEntriesUpdated:a})=>{const i=b(j=>j.activeContent),{handleFetchContent:s,toggleEntryStarred:u,toggleEntryStatus:l}=fr(),{handleLeftKey:o,handleRightKey:d}=pr(e,t,n,a);if(!i)return null;const c=i.status==="unread",h=i.starred;return r.jsx("div",{className:"action-buttons",style:{position:"fixed",bottom:"20px",right:"10px",borderRadius:"50%",boxShadow:"0 4px 10px rgba(var(--primary-6), 0.4)"},children:r.jsxs(Fn,{size:0,direction:"vertical",children:[r.jsx(dt,{mini:!0,position:"left",content:c?"Mark as read":"Mark as unread",children:r.jsx(ue,{type:"primary",size:"mini",style:{borderBottom:"1px solid rgb(var(--primary-5))",borderRadius:"50% 50% 0 0"},onClick:l,icon:c?r.jsx(ha,{}):r.jsx(pa,{})})}),r.jsx(dt,{mini:!0,position:"left",content:h?"Unstar":"Star",children:r.jsx(ue,{type:"primary",size:"mini",style:{borderRadius:"0"},onClick:u,icon:h?r.jsx(On,{style:{color:"#ffcd00"}}):r.jsx(lr,{})})}),r.jsx(dt,{mini:!0,position:"left",content:"Fetch original article",children:r.jsx(ue,{type:"primary",size:"mini",style:{borderTop:"1px solid rgb(var(--primary-5))",borderRadius:"0"},onClick:s,icon:r.jsx(ma,{})})}),r.jsx(dt,{mini:!0,position:"left",content:"Previous article",children:r.jsx(ue,{type:"primary",size:"mini",style:{borderTop:"1px solid rgb(var(--primary-5))",borderRadius:"0"},onClick:()=>o(e),icon:r.jsx(ga,{})})}),r.jsx(dt,{mini:!0,position:"left",content:"Next article",children:r.jsx(ue,{type:"primary",size:"mini",style:{borderTop:"1px solid rgb(var(--primary-5))",borderRadius:"0 0 50% 50%"},onClick:()=>d(e),icon:r.jsx(va,{})})})]})})},zs=({handleEntryClick:e,getEntries:t,isFilteredEntriesUpdated:n,setIsFilteredEntriesUpdated:a})=>{const i=b(E=>E.activeContent),{handleFetchContent:s,toggleEntryStarred:u,toggleEntryStatus:l}=fr(),{handleLeftKey:o,handleRightKey:d,handleEscapeKey:c}=pr(e,t,n,a);if(!i)return null;const h=i.status==="unread",j=i.starred;return r.jsxs(ue.Group,{className:"action-buttons-mobile",style:{display:"none",justifyContent:"center",position:"fixed",bottom:"40px",left:"50%",transform:"translateX(-50%)",borderRadius:"50%",boxShadow:"0 4px 10px rgba(var(--primary-6), 0.4)"},children:[r.jsx(ue,{type:"primary",shape:"round",onClick:()=>c(e),icon:r.jsx(Qi,{})}),r.jsx(ue,{type:"primary",onClick:()=>l(),icon:h?r.jsx(ha,{}):r.jsx(pa,{})}),r.jsx(ue,{type:"primary",onClick:()=>u(),icon:j?r.jsx(On,{style:{color:"#ffcd00"}}):r.jsx(lr,{})}),r.jsx(ue,{type:"primary",onClick:()=>s(),icon:r.jsx(ma,{})}),r.jsx(ue,{type:"primary",onClick:()=>o(e),icon:r.jsx(ga,{})}),r.jsx(ue,{type:"primary",shape:"round",onClick:()=>d(e),icon:r.jsx(va,{})})]})};var La={},mr={},gr={};Object.defineProperty(gr,"__esModule",{value:!0});var Ur="html",Vr="head",yn="body",Bs=/<([a-zA-Z]+[0-9]?)/,$r=/<head[^]*>/i,Hr=/<body[^]*>/i,Mn=function(e,t){throw new Error("This browser does not support `document.implementation.createHTMLDocument`")},nr=function(e,t){throw new Error("This browser does not support `DOMParser.prototype.parseFromString`")},Wr=typeof window=="object"&&window.DOMParser;if(typeof Wr=="function"){var Us=new Wr,Vs="text/html";nr=function(e,t){return t&&(e="<".concat(t,">").concat(e,"</").concat(t,">")),Us.parseFromString(e,Vs)},Mn=nr}if(typeof document=="object"&&document.implementation){var xn=document.implementation.createHTMLDocument();Mn=function(e,t){if(t){var n=xn.documentElement.querySelector(t);return n&&(n.innerHTML=e),xn}return xn.documentElement.innerHTML=e,xn}}var bn=typeof document=="object"&&document.createElement("template"),rr;bn&&bn.content&&(rr=function(e){return bn.innerHTML=e,bn.content.childNodes});function $s(e){var t,n,a=e.match(Bs),i=a&&a[1]?a[1].toLowerCase():"";switch(i){case Ur:{var s=nr(e);if(!$r.test(e)){var u=s.querySelector(Vr);(t=u==null?void 0:u.parentNode)===null||t===void 0||t.removeChild(u)}if(!Hr.test(e)){var u=s.querySelector(yn);(n=u==null?void 0:u.parentNode)===null||n===void 0||n.removeChild(u)}return s.querySelectorAll(Ur)}case Vr:case yn:{var l=Mn(e).querySelectorAll(i);return Hr.test(e)&&$r.test(e)?l[0].parentNode.childNodes:l}default:{if(rr)return rr(e);var u=Mn(e,yn).querySelector(yn);return u.childNodes}}}gr.default=$s;var Kt={},za={},pn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Doctype=e.CDATA=e.Tag=e.Style=e.Script=e.Comment=e.Directive=e.Text=e.Root=e.isTag=e.ElementType=void 0;var t;(function(a){a.Root="root",a.Text="text",a.Directive="directive",a.Comment="comment",a.Script="script",a.Style="style",a.Tag="tag",a.CDATA="cdata",a.Doctype="doctype"})(t=e.ElementType||(e.ElementType={}));function n(a){return a.type===t.Tag||a.type===t.Script||a.type===t.Style}e.isTag=n,e.Root=t.Root,e.Text=t.Text,e.Directive=t.Directive,e.Comment=t.Comment,e.Script=t.Script,e.Style=t.Style,e.Tag=t.Tag,e.CDATA=t.CDATA,e.Doctype=t.Doctype})(pn);var X={},jt=te&&te.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(a[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),sn=te&&te.__assign||function(){return sn=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},sn.apply(this,arguments)};Object.defineProperty(X,"__esModule",{value:!0});X.cloneNode=X.hasChildren=X.isDocument=X.isDirective=X.isComment=X.isText=X.isCDATA=X.isTag=X.Element=X.Document=X.CDATA=X.NodeWithChildren=X.ProcessingInstruction=X.Comment=X.Text=X.DataNode=X.Node=void 0;var Pe=pn,vr=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(t){this.prev=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(t){this.next=t},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(t){return t===void 0&&(t=!1),yr(this,t)},e}();X.Node=vr;var Dn=function(e){jt(t,e);function t(n){var a=e.call(this)||this;return a.data=n,a}return Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(n){this.data=n},enumerable:!1,configurable:!0}),t}(vr);X.DataNode=Dn;var Ba=function(e){jt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Pe.ElementType.Text,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(Dn);X.Text=Ba;var Ua=function(e){jt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Pe.ElementType.Comment,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(Dn);X.Comment=Ua;var Va=function(e){jt(t,e);function t(n,a){var i=e.call(this,a)||this;return i.name=n,i.type=Pe.ElementType.Directive,i}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(Dn);X.ProcessingInstruction=Va;var Ln=function(e){jt(t,e);function t(n){var a=e.call(this)||this;return a.children=n,a}return Object.defineProperty(t.prototype,"firstChild",{get:function(){var n;return(n=this.children[0])!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(n){this.children=n},enumerable:!1,configurable:!0}),t}(vr);X.NodeWithChildren=Ln;var $a=function(e){jt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Pe.ElementType.CDATA,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(Ln);X.CDATA=$a;var Ha=function(e){jt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Pe.ElementType.Root,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(Ln);X.Document=Ha;var Wa=function(e){jt(t,e);function t(n,a,i,s){i===void 0&&(i=[]),s===void 0&&(s=n==="script"?Pe.ElementType.Script:n==="style"?Pe.ElementType.Style:Pe.ElementType.Tag);var u=e.call(this,i)||this;return u.name=n,u.attribs=a,u.type=s,u}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(n){this.name=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var n=this;return Object.keys(this.attribs).map(function(a){var i,s;return{name:a,value:n.attribs[a],namespace:(i=n["x-attribsNamespace"])===null||i===void 0?void 0:i[a],prefix:(s=n["x-attribsPrefix"])===null||s===void 0?void 0:s[a]}})},enumerable:!1,configurable:!0}),t}(Ln);X.Element=Wa;function Ga(e){return(0,Pe.isTag)(e)}X.isTag=Ga;function Xa(e){return e.type===Pe.ElementType.CDATA}X.isCDATA=Xa;function qa(e){return e.type===Pe.ElementType.Text}X.isText=qa;function Ya(e){return e.type===Pe.ElementType.Comment}X.isComment=Ya;function Ka(e){return e.type===Pe.ElementType.Directive}X.isDirective=Ka;function Za(e){return e.type===Pe.ElementType.Root}X.isDocument=Za;function Hs(e){return Object.prototype.hasOwnProperty.call(e,"children")}X.hasChildren=Hs;function yr(e,t){t===void 0&&(t=!1);var n;if(qa(e))n=new Ba(e.data);else if(Ya(e))n=new Ua(e.data);else if(Ga(e)){var a=t?Yn(e.children):[],i=new Wa(e.name,sn({},e.attribs),a);a.forEach(function(o){return o.parent=i}),e.namespace!=null&&(i.namespace=e.namespace),e["x-attribsNamespace"]&&(i["x-attribsNamespace"]=sn({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(i["x-attribsPrefix"]=sn({},e["x-attribsPrefix"])),n=i}else if(Xa(e)){var a=t?Yn(e.children):[],s=new $a(a);a.forEach(function(d){return d.parent=s}),n=s}else if(Za(e)){var a=t?Yn(e.children):[],u=new Ha(a);a.forEach(function(d){return d.parent=u}),e["x-mode"]&&(u["x-mode"]=e["x-mode"]),n=u}else if(Ka(e)){var l=new Va(e.name,e.data);e["x-name"]!=null&&(l["x-name"]=e["x-name"],l["x-publicId"]=e["x-publicId"],l["x-systemId"]=e["x-systemId"]),n=l}else throw new Error("Not implemented yet: ".concat(e.type));return n.startIndex=e.startIndex,n.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(n.sourceCodeLocation=e.sourceCodeLocation),n}X.cloneNode=yr;function Yn(e){for(var t=e.map(function(a){return yr(a,!0)}),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}(function(e){var t=te&&te.__createBinding||(Object.create?function(l,o,d,c){c===void 0&&(c=d);var h=Object.getOwnPropertyDescriptor(o,d);(!h||("get"in h?!o.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return o[d]}}),Object.defineProperty(l,c,h)}:function(l,o,d,c){c===void 0&&(c=d),l[c]=o[d]}),n=te&&te.__exportStar||function(l,o){for(var d in l)d!=="default"&&!Object.prototype.hasOwnProperty.call(o,d)&&t(o,l,d)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var a=pn,i=X;n(X,e);var s={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},u=function(){function l(o,d,c){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof d=="function"&&(c=d,d=s),typeof o=="object"&&(d=o,o=void 0),this.callback=o??null,this.options=d??s,this.elementCB=c??null}return l.prototype.onparserinit=function(o){this.parser=o},l.prototype.onreset=function(){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},l.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},l.prototype.onerror=function(o){this.handleCallback(o)},l.prototype.onclosetag=function(){this.lastNode=null;var o=this.tagStack.pop();this.options.withEndIndices&&(o.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(o)},l.prototype.onopentag=function(o,d){var c=this.options.xmlMode?a.ElementType.Tag:void 0,h=new i.Element(o,d,void 0,c);this.addNode(h),this.tagStack.push(h)},l.prototype.ontext=function(o){var d=this.lastNode;if(d&&d.type===a.ElementType.Text)d.data+=o,this.options.withEndIndices&&(d.endIndex=this.parser.endIndex);else{var c=new i.Text(o);this.addNode(c),this.lastNode=c}},l.prototype.oncomment=function(o){if(this.lastNode&&this.lastNode.type===a.ElementType.Comment){this.lastNode.data+=o;return}var d=new i.Comment(o);this.addNode(d),this.lastNode=d},l.prototype.oncommentend=function(){this.lastNode=null},l.prototype.oncdatastart=function(){var o=new i.Text(""),d=new i.CDATA([o]);this.addNode(d),o.parent=d,this.lastNode=o},l.prototype.oncdataend=function(){this.lastNode=null},l.prototype.onprocessinginstruction=function(o,d){var c=new i.ProcessingInstruction(o,d);this.addNode(c)},l.prototype.handleCallback=function(o){if(typeof this.callback=="function")this.callback(o,this.dom);else if(o)throw o},l.prototype.addNode=function(o){var d=this.tagStack[this.tagStack.length-1],c=d.children[d.children.length-1];this.options.withStartIndices&&(o.startIndex=this.parser.startIndex),this.options.withEndIndices&&(o.endIndex=this.parser.endIndex),d.children.push(o),c&&(o.prev=c,c.next=o),o.parent=d,this.lastNode=null},l}();e.DomHandler=u,e.default=u})(za);var Ja={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CASE_SENSITIVE_TAG_NAMES_MAP=e.CASE_SENSITIVE_TAG_NAMES=void 0,e.CASE_SENSITIVE_TAG_NAMES=["animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","linearGradient","radialGradient","textPath"],e.CASE_SENSITIVE_TAG_NAMES_MAP=e.CASE_SENSITIVE_TAG_NAMES.reduce(function(t,n){return t[n.toLowerCase()]=n,t},{})})(Ja);Object.defineProperty(Kt,"__esModule",{value:!0});Kt.formatDOM=Kt.formatAttributes=void 0;var wn=za,Ws=Ja;function Gs(e){return Ws.CASE_SENSITIVE_TAG_NAMES_MAP[e]}function Qa(e){for(var t={},n=0,a=e.length;n<a;n++){var i=e[n];t[i.name]=i.value}return t}Kt.formatAttributes=Qa;function Xs(e){e=e.toLowerCase();var t=Gs(e);return t||e}function ei(e,t,n){t===void 0&&(t=null);for(var a=[],i,s=0,u=e.length;s<u;s++){var l=e[s];switch(l.nodeType){case 1:{var o=Xs(l.nodeName);i=new wn.Element(o,Qa(l.attributes)),i.children=ei(o==="template"?l.content.childNodes:l.childNodes,i);break}case 3:i=new wn.Text(l.nodeValue);break;case 8:i=new wn.Comment(l.nodeValue);break;default:continue}var d=a[s-1]||null;d&&(d.next=i),i.parent=t,i.prev=d,i.next=null,a.push(i)}return n&&(i=new wn.ProcessingInstruction(n.substring(0,n.indexOf(" ")).toLowerCase(),n),i.next=a[0]||null,i.parent=t,a.unshift(i),a[1]&&(a[1].prev=a[0])),a}Kt.formatDOM=ei;var qs=te&&te.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(mr,"__esModule",{value:!0});var Ys=qs(gr),Ks=Kt,Zs=/<(![a-zA-Z\s]+)>/;function Js(e){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];var t=e.match(Zs),n=t?t[1]:void 0;return(0,Ks.formatDOM)((0,Ys.default)(e),null,n)}mr.default=Js;var zn={},Xe={},Bn={},Qs=0;Bn.SAME=Qs;var el=1;Bn.CAMELCASE=el;Bn.possibleStandardNames={accept:0,acceptCharset:1,"accept-charset":"acceptCharset",accessKey:1,action:0,allowFullScreen:1,alt:0,as:0,async:0,autoCapitalize:1,autoComplete:1,autoCorrect:1,autoFocus:1,autoPlay:1,autoSave:1,capture:0,cellPadding:1,cellSpacing:1,challenge:0,charSet:1,checked:0,children:0,cite:0,class:"className",classID:1,className:1,cols:0,colSpan:1,content:0,contentEditable:1,contextMenu:1,controls:0,controlsList:1,coords:0,crossOrigin:1,dangerouslySetInnerHTML:1,data:0,dateTime:1,default:0,defaultChecked:1,defaultValue:1,defer:0,dir:0,disabled:0,disablePictureInPicture:1,disableRemotePlayback:1,download:0,draggable:0,encType:1,enterKeyHint:1,for:"htmlFor",form:0,formMethod:1,formAction:1,formEncType:1,formNoValidate:1,formTarget:1,frameBorder:1,headers:0,height:0,hidden:0,high:0,href:0,hrefLang:1,htmlFor:1,httpEquiv:1,"http-equiv":"httpEquiv",icon:0,id:0,innerHTML:1,inputMode:1,integrity:0,is:0,itemID:1,itemProp:1,itemRef:1,itemScope:1,itemType:1,keyParams:1,keyType:1,kind:0,label:0,lang:0,list:0,loop:0,low:0,manifest:0,marginWidth:1,marginHeight:1,max:0,maxLength:1,media:0,mediaGroup:1,method:0,min:0,minLength:1,multiple:0,muted:0,name:0,noModule:1,nonce:0,noValidate:1,open:0,optimum:0,pattern:0,placeholder:0,playsInline:1,poster:0,preload:0,profile:0,radioGroup:1,readOnly:1,referrerPolicy:1,rel:0,required:0,reversed:0,role:0,rows:0,rowSpan:1,sandbox:0,scope:0,scoped:0,scrolling:0,seamless:0,selected:0,shape:0,size:0,sizes:0,span:0,spellCheck:1,src:0,srcDoc:1,srcLang:1,srcSet:1,start:0,step:0,style:0,summary:0,tabIndex:1,target:0,title:0,type:0,useMap:1,value:0,width:0,wmode:0,wrap:0,about:0,accentHeight:1,"accent-height":"accentHeight",accumulate:0,additive:0,alignmentBaseline:1,"alignment-baseline":"alignmentBaseline",allowReorder:1,alphabetic:0,amplitude:0,arabicForm:1,"arabic-form":"arabicForm",ascent:0,attributeName:1,attributeType:1,autoReverse:1,azimuth:0,baseFrequency:1,baselineShift:1,"baseline-shift":"baselineShift",baseProfile:1,bbox:0,begin:0,bias:0,by:0,calcMode:1,capHeight:1,"cap-height":"capHeight",clip:0,clipPath:1,"clip-path":"clipPath",clipPathUnits:1,clipRule:1,"clip-rule":"clipRule",color:0,colorInterpolation:1,"color-interpolation":"colorInterpolation",colorInterpolationFilters:1,"color-interpolation-filters":"colorInterpolationFilters",colorProfile:1,"color-profile":"colorProfile",colorRendering:1,"color-rendering":"colorRendering",contentScriptType:1,contentStyleType:1,cursor:0,cx:0,cy:0,d:0,datatype:0,decelerate:0,descent:0,diffuseConstant:1,direction:0,display:0,divisor:0,dominantBaseline:1,"dominant-baseline":"dominantBaseline",dur:0,dx:0,dy:0,edgeMode:1,elevation:0,enableBackground:1,"enable-background":"enableBackground",end:0,exponent:0,externalResourcesRequired:1,fill:0,fillOpacity:1,"fill-opacity":"fillOpacity",fillRule:1,"fill-rule":"fillRule",filter:0,filterRes:1,filterUnits:1,floodOpacity:1,"flood-opacity":"floodOpacity",floodColor:1,"flood-color":"floodColor",focusable:0,fontFamily:1,"font-family":"fontFamily",fontSize:1,"font-size":"fontSize",fontSizeAdjust:1,"font-size-adjust":"fontSizeAdjust",fontStretch:1,"font-stretch":"fontStretch",fontStyle:1,"font-style":"fontStyle",fontVariant:1,"font-variant":"fontVariant",fontWeight:1,"font-weight":"fontWeight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:1,"glyph-name":"glyphName",glyphOrientationHorizontal:1,"glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphOrientationVertical:1,"glyph-orientation-vertical":"glyphOrientationVertical",glyphRef:1,gradientTransform:1,gradientUnits:1,hanging:0,horizAdvX:1,"horiz-adv-x":"horizAdvX",horizOriginX:1,"horiz-origin-x":"horizOriginX",ideographic:0,imageRendering:1,"image-rendering":"imageRendering",in2:0,in:0,inlist:0,intercept:0,k1:0,k2:0,k3:0,k4:0,k:0,kernelMatrix:1,kernelUnitLength:1,kerning:0,keyPoints:1,keySplines:1,keyTimes:1,lengthAdjust:1,letterSpacing:1,"letter-spacing":"letterSpacing",lightingColor:1,"lighting-color":"lightingColor",limitingConeAngle:1,local:0,markerEnd:1,"marker-end":"markerEnd",markerHeight:1,markerMid:1,"marker-mid":"markerMid",markerStart:1,"marker-start":"markerStart",markerUnits:1,markerWidth:1,mask:0,maskContentUnits:1,maskUnits:1,mathematical:0,mode:0,numOctaves:1,offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:1,"overline-position":"overlinePosition",overlineThickness:1,"overline-thickness":"overlineThickness",paintOrder:1,"paint-order":"paintOrder",panose1:0,"panose-1":"panose1",pathLength:1,patternContentUnits:1,patternTransform:1,patternUnits:1,pointerEvents:1,"pointer-events":"pointerEvents",points:0,pointsAtX:1,pointsAtY:1,pointsAtZ:1,prefix:0,preserveAlpha:1,preserveAspectRatio:1,primitiveUnits:1,property:0,r:0,radius:0,refX:1,refY:1,renderingIntent:1,"rendering-intent":"renderingIntent",repeatCount:1,repeatDur:1,requiredExtensions:1,requiredFeatures:1,resource:0,restart:0,result:0,results:0,rotate:0,rx:0,ry:0,scale:0,security:0,seed:0,shapeRendering:1,"shape-rendering":"shapeRendering",slope:0,spacing:0,specularConstant:1,specularExponent:1,speed:0,spreadMethod:1,startOffset:1,stdDeviation:1,stemh:0,stemv:0,stitchTiles:1,stopColor:1,"stop-color":"stopColor",stopOpacity:1,"stop-opacity":"stopOpacity",strikethroughPosition:1,"strikethrough-position":"strikethroughPosition",strikethroughThickness:1,"strikethrough-thickness":"strikethroughThickness",string:0,stroke:0,strokeDasharray:1,"stroke-dasharray":"strokeDasharray",strokeDashoffset:1,"stroke-dashoffset":"strokeDashoffset",strokeLinecap:1,"stroke-linecap":"strokeLinecap",strokeLinejoin:1,"stroke-linejoin":"strokeLinejoin",strokeMiterlimit:1,"stroke-miterlimit":"strokeMiterlimit",strokeWidth:1,"stroke-width":"strokeWidth",strokeOpacity:1,"stroke-opacity":"strokeOpacity",suppressContentEditableWarning:1,suppressHydrationWarning:1,surfaceScale:1,systemLanguage:1,tableValues:1,targetX:1,targetY:1,textAnchor:1,"text-anchor":"textAnchor",textDecoration:1,"text-decoration":"textDecoration",textLength:1,textRendering:1,"text-rendering":"textRendering",to:0,transform:0,typeof:0,u1:0,u2:0,underlinePosition:1,"underline-position":"underlinePosition",underlineThickness:1,"underline-thickness":"underlineThickness",unicode:0,unicodeBidi:1,"unicode-bidi":"unicodeBidi",unicodeRange:1,"unicode-range":"unicodeRange",unitsPerEm:1,"units-per-em":"unitsPerEm",unselectable:0,vAlphabetic:1,"v-alphabetic":"vAlphabetic",values:0,vectorEffect:1,"vector-effect":"vectorEffect",version:0,vertAdvY:1,"vert-adv-y":"vertAdvY",vertOriginX:1,"vert-origin-x":"vertOriginX",vertOriginY:1,"vert-origin-y":"vertOriginY",vHanging:1,"v-hanging":"vHanging",vIdeographic:1,"v-ideographic":"vIdeographic",viewBox:1,viewTarget:1,visibility:0,vMathematical:1,"v-mathematical":"vMathematical",vocab:0,widths:0,wordSpacing:1,"word-spacing":"wordSpacing",writingMode:1,"writing-mode":"writingMode",x1:0,x2:0,x:0,xChannelSelector:1,xHeight:1,"x-height":"xHeight",xlinkActuate:1,"xlink:actuate":"xlinkActuate",xlinkArcrole:1,"xlink:arcrole":"xlinkArcrole",xlinkHref:1,"xlink:href":"xlinkHref",xlinkRole:1,"xlink:role":"xlinkRole",xlinkShow:1,"xlink:show":"xlinkShow",xlinkTitle:1,"xlink:title":"xlinkTitle",xlinkType:1,"xlink:type":"xlinkType",xmlBase:1,"xml:base":"xmlBase",xmlLang:1,"xml:lang":"xmlLang",xmlns:0,"xml:space":"xmlSpace",xmlnsXlink:1,"xmlns:xlink":"xmlnsXlink",xmlSpace:1,y1:0,y2:0,y:0,yChannelSelector:1,z:0,zoomAndPan:1};const ti=0,Et=1,Un=2,Vn=3,xr=4,ni=5,ri=6;function tl(e){return Ee.hasOwnProperty(e)?Ee[e]:null}function Me(e,t,n,a,i,s,u){this.acceptsBooleans=t===Un||t===Vn||t===xr,this.attributeName=a,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=u}const Ee={},nl=["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"];nl.forEach(e=>{Ee[e]=new Me(e,ti,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(([e,t])=>{Ee[e]=new Me(e,Et,!1,t,null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(e=>{Ee[e]=new Me(e,Un,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(e=>{Ee[e]=new Me(e,Un,!1,e,null,!1,!1)});["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(e=>{Ee[e]=new Me(e,Vn,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(e=>{Ee[e]=new Me(e,Vn,!0,e,null,!1,!1)});["capture","download"].forEach(e=>{Ee[e]=new Me(e,xr,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(e=>{Ee[e]=new Me(e,ri,!1,e,null,!1,!1)});["rowSpan","start"].forEach(e=>{Ee[e]=new Me(e,ni,!1,e.toLowerCase(),null,!1,!1)});const br=/[\-\:]([a-z])/g,wr=e=>e[1].toUpperCase();["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(e=>{const t=e.replace(br,wr);Ee[t]=new Me(t,Et,!1,e,null,!1,!1)});["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(e=>{const t=e.replace(br,wr);Ee[t]=new Me(t,Et,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(e=>{const t=e.replace(br,wr);Ee[t]=new Me(t,Et,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(e=>{Ee[e]=new Me(e,Et,!1,e.toLowerCase(),null,!1,!1)});const rl="xlinkHref";Ee[rl]=new Me("xlinkHref",Et,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(e=>{Ee[e]=new Me(e,Et,!1,e.toLowerCase(),null,!0,!0)});const{CAMELCASE:al,SAME:il,possibleStandardNames:Gr}=Bn,ol=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",sl=ol+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",ll=RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+sl+"]*$")),cl=Object.keys(Gr).reduce((e,t)=>{const n=Gr[t];return n===il?e[t]=t:n===al?e[t.toLowerCase()]=t:e[t]=n,e},{});Xe.BOOLEAN=Vn;Xe.BOOLEANISH_STRING=Un;Xe.NUMERIC=ni;Xe.OVERLOADED_BOOLEAN=xr;Xe.POSITIVE_NUMERIC=ri;Xe.RESERVED=ti;Xe.STRING=Et;Xe.getPropertyInfo=tl;Xe.isCustomAttribute=ll;Xe.possibleStandardNames=cl;var Cr={},jr={},Xr=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,ul=/\n/g,dl=/^\s*/,fl=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,hl=/^:\s*/,pl=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,ml=/^[;\s]*/,gl=/^\s+|\s+$/g,vl=`
`,qr="/",Yr="*",Ft="",yl="comment",xl="declaration",bl=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,a=1;function i(v){var m=v.match(ul);m&&(n+=m.length);var x=v.lastIndexOf(vl);a=~x?v.length-x:a+v.length}function s(){var v={line:n,column:a};return function(m){return m.position=new u(v),d(),m}}function u(v){this.start=v,this.end={line:n,column:a},this.source=t.source}u.prototype.content=e;function l(v){var m=new Error(t.source+":"+n+":"+a+": "+v);if(m.reason=v,m.filename=t.source,m.line=n,m.column=a,m.source=e,!t.silent)throw m}function o(v){var m=v.exec(e);if(m){var x=m[0];return i(x),e=e.slice(x.length),m}}function d(){o(dl)}function c(v){var m;for(v=v||[];m=h();)m!==!1&&v.push(m);return v}function h(){var v=s();if(!(qr!=e.charAt(0)||Yr!=e.charAt(1))){for(var m=2;Ft!=e.charAt(m)&&(Yr!=e.charAt(m)||qr!=e.charAt(m+1));)++m;if(m+=2,Ft===e.charAt(m-1))return l("End of comment missing");var x=e.slice(2,m-2);return a+=2,i(x),e=e.slice(m),a+=2,v({type:yl,comment:x})}}function j(){var v=s(),m=o(fl);if(m){if(h(),!o(hl))return l("property missing ':'");var x=o(pl),T=v({type:xl,property:Kr(m[0].replace(Xr,Ft)),value:x?Kr(x[0].replace(Xr,Ft)):Ft});return o(ml),T}}function E(){var v=[];c(v);for(var m;m=j();)m!==!1&&(v.push(m),c(v));return v}return d(),E()};function Kr(e){return e?e.replace(gl,Ft):Ft}var wl=te&&te.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(jr,"__esModule",{value:!0});var Cl=wl(bl);function jl(e,t){var n=null;if(!e||typeof e!="string")return n;var a=(0,Cl.default)(e),i=typeof t=="function";return a.forEach(function(s){if(s.type==="declaration"){var u=s.property,l=s.value;i?t(u,l,s):l&&(n=n||{},n[u]=l)}}),n}jr.default=jl;var $n={};Object.defineProperty($n,"__esModule",{value:!0});$n.camelCase=void 0;var El=/^--[a-zA-Z0-9-]+$/,Sl=/-([a-z])/g,Tl=/^[^-]+$/,_l=/^-(webkit|moz|ms|o|khtml)-/,kl=/^-(ms)-/,Il=function(e){return!e||Tl.test(e)||El.test(e)},Ml=function(e,t){return t.toUpperCase()},Zr=function(e,t){return"".concat(t,"-")},Al=function(e,t){return t===void 0&&(t={}),Il(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(kl,Zr):e=e.replace(_l,Zr),e.replace(Sl,Ml))};$n.camelCase=Al;var Pl=te&&te.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Fl=Pl(jr),Nl=$n;function ar(e,t){var n={};return!e||typeof e!="string"||(0,Fl.default)(e,function(a,i){a&&i&&(n[(0,Nl.camelCase)(a,t)]=i)}),n}ar.default=ar;var Ol=ar;(function(e){var t=te&&te.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0}),e.returnFirstArg=e.canTextBeChildOfNode=e.ELEMENTS_WITH_NO_TEXT_CHILDREN=e.PRESERVE_CUSTOM_ATTRIBUTES=e.setStyleProp=e.isCustomComponent=void 0;var n=y,a=t(Ol),i=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);function s(c,h){return c.includes("-")?!i.has(c):!!(h&&typeof h.is=="string")}e.isCustomComponent=s;var u={reactCompat:!0};function l(c,h){if(typeof c=="string"){if(!c.trim()){h.style={};return}try{h.style=(0,a.default)(c,u)}catch{h.style={}}}}e.setStyleProp=l,e.PRESERVE_CUSTOM_ATTRIBUTES=Number(n.version.split(".")[0])>=16,e.ELEMENTS_WITH_NO_TEXT_CHILDREN=new Set(["tr","tbody","thead","tfoot","colgroup","table","head","html","frameset"]);var o=function(c){return!e.ELEMENTS_WITH_NO_TEXT_CHILDREN.has(c.name)};e.canTextBeChildOfNode=o;var d=function(c){return c};e.returnFirstArg=d})(Cr);Object.defineProperty(zn,"__esModule",{value:!0});var an=Xe,Jr=Cr,Rl=["checked","value"],Dl=["input","select","textarea"],Ll={reset:!0,submit:!0};function zl(e,t){e===void 0&&(e={});var n={},a=!!(e.type&&Ll[e.type]);for(var i in e){var s=e[i];if((0,an.isCustomAttribute)(i)){n[i]=s;continue}var u=i.toLowerCase(),l=Qr(u);if(l){var o=(0,an.getPropertyInfo)(l);switch(Rl.includes(l)&&Dl.includes(t)&&!a&&(l=Qr("default"+u)),n[l]=s,o&&o.type){case an.BOOLEAN:n[l]=!0;break;case an.OVERLOADED_BOOLEAN:s===""&&(n[l]=!0);break}continue}Jr.PRESERVE_CUSTOM_ATTRIBUTES&&(n[i]=s)}return(0,Jr.setStyleProp)(e.style,n),n}zn.default=zl;function Qr(e){return an.possibleStandardNames[e]}var Er={},Bl=te&&te.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Er,"__esModule",{value:!0});var Kn=y,Ul=Bl(zn),ln=Cr,Vl={cloneElement:Kn.cloneElement,createElement:Kn.createElement,isValidElement:Kn.isValidElement};function ai(e,t){t===void 0&&(t={});for(var n=[],a=typeof t.replace=="function",i=t.transform||ln.returnFirstArg,s=t.library||Vl,u=s.cloneElement,l=s.createElement,o=s.isValidElement,d=e.length,c=0;c<d;c++){var h=e[c];if(a){var j=t.replace(h,c);if(o(j)){d>1&&(j=u(j,{key:j.key||c})),n.push(i(j,h,c));continue}}if(h.type==="text"){var E=!h.data.trim().length;if(E&&h.parent&&!(0,ln.canTextBeChildOfNode)(h.parent)||t.trim&&E)continue;n.push(i(h.data,h,c));continue}var v=h,m={};$l(v)?((0,ln.setStyleProp)(v.attribs.style,v.attribs),m=v.attribs):v.attribs&&(m=(0,Ul.default)(v.attribs,v.name));var x=void 0;switch(h.type){case"script":case"style":h.children[0]&&(m.dangerouslySetInnerHTML={__html:h.children[0].data});break;case"tag":h.name==="textarea"&&h.children[0]?m.defaultValue=h.children[0].data:h.children&&h.children.length&&(x=ai(h.children,t));break;default:continue}d>1&&(m.key=c),n.push(i(l(h.name,m,x),h,c))}return n.length===1?n[0]:n}Er.default=ai;function $l(e){return ln.PRESERVE_CUSTOM_ATTRIBUTES&&e.type==="tag"&&(0,ln.isCustomComponent)(e.name,e.attribs)}var ii={},q={},St=te&&te.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(a[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),cn=te&&te.__assign||function(){return cn=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},cn.apply(this,arguments)};Object.defineProperty(q,"__esModule",{value:!0});q.cloneNode=q.hasChildren=q.isDocument=q.isDirective=q.isComment=q.isText=q.isCDATA=q.isTag=q.Element=q.Document=q.CDATA=q.NodeWithChildren=q.ProcessingInstruction=q.Comment=q.Text=q.DataNode=q.Node=void 0;var Fe=pn,Sr=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(t){this.prev=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(t){this.next=t},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(t){return t===void 0&&(t=!1),Tr(this,t)},e}();q.Node=Sr;var Hn=function(e){St(t,e);function t(n){var a=e.call(this)||this;return a.data=n,a}return Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(n){this.data=n},enumerable:!1,configurable:!0}),t}(Sr);q.DataNode=Hn;var oi=function(e){St(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Fe.ElementType.Text,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(Hn);q.Text=oi;var si=function(e){St(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Fe.ElementType.Comment,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(Hn);q.Comment=si;var li=function(e){St(t,e);function t(n,a){var i=e.call(this,a)||this;return i.name=n,i.type=Fe.ElementType.Directive,i}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(Hn);q.ProcessingInstruction=li;var Wn=function(e){St(t,e);function t(n){var a=e.call(this)||this;return a.children=n,a}return Object.defineProperty(t.prototype,"firstChild",{get:function(){var n;return(n=this.children[0])!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(n){this.children=n},enumerable:!1,configurable:!0}),t}(Sr);q.NodeWithChildren=Wn;var ci=function(e){St(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Fe.ElementType.CDATA,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(Wn);q.CDATA=ci;var ui=function(e){St(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Fe.ElementType.Root,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(Wn);q.Document=ui;var di=function(e){St(t,e);function t(n,a,i,s){i===void 0&&(i=[]),s===void 0&&(s=n==="script"?Fe.ElementType.Script:n==="style"?Fe.ElementType.Style:Fe.ElementType.Tag);var u=e.call(this,i)||this;return u.name=n,u.attribs=a,u.type=s,u}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(n){this.name=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var n=this;return Object.keys(this.attribs).map(function(a){var i,s;return{name:a,value:n.attribs[a],namespace:(i=n["x-attribsNamespace"])===null||i===void 0?void 0:i[a],prefix:(s=n["x-attribsPrefix"])===null||s===void 0?void 0:s[a]}})},enumerable:!1,configurable:!0}),t}(Wn);q.Element=di;function fi(e){return(0,Fe.isTag)(e)}q.isTag=fi;function hi(e){return e.type===Fe.ElementType.CDATA}q.isCDATA=hi;function pi(e){return e.type===Fe.ElementType.Text}q.isText=pi;function mi(e){return e.type===Fe.ElementType.Comment}q.isComment=mi;function gi(e){return e.type===Fe.ElementType.Directive}q.isDirective=gi;function vi(e){return e.type===Fe.ElementType.Root}q.isDocument=vi;function Hl(e){return Object.prototype.hasOwnProperty.call(e,"children")}q.hasChildren=Hl;function Tr(e,t){t===void 0&&(t=!1);var n;if(pi(e))n=new oi(e.data);else if(mi(e))n=new si(e.data);else if(fi(e)){var a=t?Zn(e.children):[],i=new di(e.name,cn({},e.attribs),a);a.forEach(function(o){return o.parent=i}),e.namespace!=null&&(i.namespace=e.namespace),e["x-attribsNamespace"]&&(i["x-attribsNamespace"]=cn({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(i["x-attribsPrefix"]=cn({},e["x-attribsPrefix"])),n=i}else if(hi(e)){var a=t?Zn(e.children):[],s=new ci(a);a.forEach(function(d){return d.parent=s}),n=s}else if(vi(e)){var a=t?Zn(e.children):[],u=new ui(a);a.forEach(function(d){return d.parent=u}),e["x-mode"]&&(u["x-mode"]=e["x-mode"]),n=u}else if(gi(e)){var l=new li(e.name,e.data);e["x-name"]!=null&&(l["x-name"]=e["x-name"],l["x-publicId"]=e["x-publicId"],l["x-systemId"]=e["x-systemId"]),n=l}else throw new Error("Not implemented yet: ".concat(e.type));return n.startIndex=e.startIndex,n.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(n.sourceCodeLocation=e.sourceCodeLocation),n}q.cloneNode=Tr;function Zn(e){for(var t=e.map(function(a){return Tr(a,!0)}),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}(function(e){var t=te&&te.__createBinding||(Object.create?function(l,o,d,c){c===void 0&&(c=d);var h=Object.getOwnPropertyDescriptor(o,d);(!h||("get"in h?!o.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return o[d]}}),Object.defineProperty(l,c,h)}:function(l,o,d,c){c===void 0&&(c=d),l[c]=o[d]}),n=te&&te.__exportStar||function(l,o){for(var d in l)d!=="default"&&!Object.prototype.hasOwnProperty.call(o,d)&&t(o,l,d)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var a=pn,i=q;n(q,e);var s={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},u=function(){function l(o,d,c){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof d=="function"&&(c=d,d=s),typeof o=="object"&&(d=o,o=void 0),this.callback=o??null,this.options=d??s,this.elementCB=c??null}return l.prototype.onparserinit=function(o){this.parser=o},l.prototype.onreset=function(){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},l.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},l.prototype.onerror=function(o){this.handleCallback(o)},l.prototype.onclosetag=function(){this.lastNode=null;var o=this.tagStack.pop();this.options.withEndIndices&&(o.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(o)},l.prototype.onopentag=function(o,d){var c=this.options.xmlMode?a.ElementType.Tag:void 0,h=new i.Element(o,d,void 0,c);this.addNode(h),this.tagStack.push(h)},l.prototype.ontext=function(o){var d=this.lastNode;if(d&&d.type===a.ElementType.Text)d.data+=o,this.options.withEndIndices&&(d.endIndex=this.parser.endIndex);else{var c=new i.Text(o);this.addNode(c),this.lastNode=c}},l.prototype.oncomment=function(o){if(this.lastNode&&this.lastNode.type===a.ElementType.Comment){this.lastNode.data+=o;return}var d=new i.Comment(o);this.addNode(d),this.lastNode=d},l.prototype.oncommentend=function(){this.lastNode=null},l.prototype.oncdatastart=function(){var o=new i.Text(""),d=new i.CDATA([o]);this.addNode(d),o.parent=d,this.lastNode=o},l.prototype.oncdataend=function(){this.lastNode=null},l.prototype.onprocessinginstruction=function(o,d){var c=new i.ProcessingInstruction(o,d);this.addNode(c)},l.prototype.handleCallback=function(o){if(typeof this.callback=="function")this.callback(o,this.dom);else if(o)throw o},l.prototype.addNode=function(o){var d=this.tagStack[this.tagStack.length-1],c=d.children[d.children.length-1];this.options.withStartIndices&&(o.startIndex=this.parser.startIndex),this.options.withEndIndices&&(o.endIndex=this.parser.endIndex),d.children.push(o),c&&(o.prev=c,c.next=o),o.parent=d,this.lastNode=null},l}();e.DomHandler=u,e.default=u})(ii);(function(e){var t=te&&te.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0}),e.htmlToDOM=e.domToReact=e.attributesToProps=e.Text=e.ProcessingInstruction=e.Element=e.Comment=void 0;var n=t(mr);e.htmlToDOM=n.default;var a=t(zn);e.attributesToProps=a.default;var i=t(Er);e.domToReact=i.default;var s=ii;Object.defineProperty(e,"Comment",{enumerable:!0,get:function(){return s.Comment}}),Object.defineProperty(e,"Element",{enumerable:!0,get:function(){return s.Element}}),Object.defineProperty(e,"ProcessingInstruction",{enumerable:!0,get:function(){return s.ProcessingInstruction}}),Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return s.Text}});var u={lowerCaseAttributeNames:!1};function l(o,d){if(typeof o!="string")throw new TypeError("First argument must be a string");return o?(0,i.default)((0,n.default)(o,(d==null?void 0:d.htmlparser2)||u),d):[]}e.default=l})(La);const ea=Pn(La),Wl=ea.default||ea;function ye(){return ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ye.apply(this,arguments)}function Gn(e,t){if(e==null)return{};var n,a,i={},s=Object.keys(e);for(a=0;a<s.length;a++)t.indexOf(n=s[a])>=0||(i[n]=e[n]);return i}function Rt(e){var t=y.useRef({fn:e,curr:void 0}).current;if(t.fn=e,!t.curr){var n=Object.create(null);Object.keys(e).forEach(function(a){n[a]=function(){var i;return(i=t.fn[a]).call.apply(i,[t.fn].concat([].slice.call(arguments)))}}),t.curr=n}return t.curr}function An(e){return y.useReducer(function(t,n){return ye({},t,typeof n=="function"?n(t):n)},e)}var yi=y.createContext(void 0),ut=typeof window<"u"&&"ontouchstart"in window,ir=function(e,t,n){return Math.max(Math.min(e,n),t)},Cn=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=0),ir(e,1*(1-n),Math.max(6,t)*(1+n))},or=typeof window>"u"||/ServerSideRendering/.test(navigator&&navigator.userAgent)?y.useEffect:y.useLayoutEffect;function Xt(e,t,n){var a=y.useRef(t);a.current=t,y.useEffect(function(){function i(s){a.current(s)}return e&&window.addEventListener(e,i,n),function(){e&&window.removeEventListener(e,i)}},[e])}var Gl=["container"];function Xl(e){var t=e.container,n=t===void 0?document.body:t,a=Gn(e,Gl);return eo.createPortal(G.createElement("div",ye({},a)),n)}function ql(e){return G.createElement("svg",ye({width:"44",height:"44",viewBox:"0 0 768 768"},e),G.createElement("path",{d:"M607.5 205.5l-178.5 178.5 178.5 178.5-45 45-178.5-178.5-178.5 178.5-45-45 178.5-178.5-178.5-178.5 45-45 178.5 178.5 178.5-178.5z"}))}function Yl(e){return G.createElement("svg",ye({width:"44",height:"44",viewBox:"0 0 768 768"},e),G.createElement("path",{d:"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z"}))}function Kl(e){return G.createElement("svg",ye({width:"44",height:"44",viewBox:"0 0 768 768"},e),G.createElement("path",{d:"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z"}))}function Zl(){return y.useEffect(function(){var e=document.body.style,t=e.overflow;return e.overflow="hidden",function(){e.overflow=t}},[]),null}function ta(e){var t=e.touches[0],n=t.clientX,a=t.clientY;if(e.touches.length>=2){var i=e.touches[1],s=i.clientX,u=i.clientY;return[(n+s)/2,(a+u)/2,Math.sqrt(Math.pow(s-n,2)+Math.pow(u-a,2))]}return[n,a,0]}var wt=function(e,t,n,a){var i=n*t,s=(i-a)/2,u=void 0,l=e;return i<=a?(u=1,l=0):e>0&&s-e<=0?(u=2,l=s):e<0&&s+e<=0&&(u=3,l=-s),[u,l]};function Jn(e,t,n,a,i,s,u,l,o,d){u===void 0&&(u=innerWidth/2),l===void 0&&(l=innerHeight/2),o===void 0&&(o=0),d===void 0&&(d=0);var c=wt(e,s,n,innerWidth)[0],h=wt(t,s,a,innerHeight),j=innerWidth/2,E=innerHeight/2;return{x:u-s/i*(u-(j+e))-j+(a/n>=3&&n*s===innerWidth?0:c?o/2:o),y:l-s/i*(l-(E+t))-E+(h[0]?d/2:d),lastCX:u,lastCY:l}}function sr(e,t,n){var a=e%180!=0;return a?[n,t,a]:[t,n,a]}function Qn(e,t,n){var a=sr(n,innerWidth,innerHeight),i=a[0],s=a[1],u=0,l=i,o=s,d=e/t*s,c=t/e*i;return e<i&&t<s?(l=e,o=t):e<i&&t>=s?l=d:e>=i&&t<s||e/t>i/s?o=c:t/e>=3&&!a[2]?u=((o=c)-s)/2:l=d,{width:l,height:o,x:0,y:u,pause:!0}}function jn(e,t){var n=t.leading,a=n!==void 0&&n,i=t.maxWait,s=t.wait,u=s===void 0?i||0:s,l=y.useRef(e);l.current=e;var o=y.useRef(0),d=y.useRef(),c=function(){return d.current&&clearTimeout(d.current)},h=y.useCallback(function(){var j=[].slice.call(arguments),E=Date.now();function v(){o.current=E,c(),l.current.apply(null,j)}var m=o.current,x=E-m;if(m===0&&(a&&v(),o.current=E),i!==void 0){if(x>i)return void v()}else x<u&&(o.current=E);c(),d.current=setTimeout(function(){v(),o.current=0},u)},[u,i,a]);return h.cancel=c,h}var na=function(e,t,n){return Nt(e,t,n,100,function(a){return a},function(){return Nt(t,e,n)})},Jl=function(e){return 1-Math.pow(1-e,4)};function Nt(e,t,n,a,i,s){a===void 0&&(a=400),i===void 0&&(i=Jl);var u=t-e;if(u!==0){var l=Date.now(),o=0,d=function(){var h=Math.min(1,(Date.now()-l)/a);n(e+i(h)*u)&&h<1?c():(cancelAnimationFrame(o),h>=1&&s&&s())};c()}function c(){o=requestAnimationFrame(d)}}var Ql={T:0,L:0,W:0,H:0,FIT:void 0},xi=function(){var e=y.useRef(!1);return y.useEffect(function(){return e.current=!0,function(){e.current=!1}},[]),e},ec=["className"];function tc(e){var t=e.className,n=Gn(e,ec);return G.createElement("div",ye({className:"PhotoView__Spinner "+t},n),G.createElement("svg",{viewBox:"0 0 32 32",width:"36",height:"36",fill:"white"},G.createElement("path",{opacity:".25",d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"}),G.createElement("path",{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z"})))}var nc=["src","loaded","broken","className","onPhotoLoad","loadingElement","brokenElement"];function rc(e){var t=e.src,n=e.loaded,a=e.broken,i=e.className,s=e.onPhotoLoad,u=e.loadingElement,l=e.brokenElement,o=Gn(e,nc),d=xi();return t&&!a?G.createElement(G.Fragment,null,G.createElement("img",ye({className:"PhotoView__Photo"+(i?" "+i:""),src:t,onLoad:function(c){var h=c.target;d.current&&s({loaded:!0,naturalWidth:h.naturalWidth,naturalHeight:h.naturalHeight})},onError:function(){d.current&&s({broken:!0})},alt:""},o)),!n&&(G.createElement("span",{className:"PhotoView__icon"},u)||G.createElement(tc,{className:"PhotoView__icon"}))):l?G.createElement("span",{className:"PhotoView__icon"},typeof l=="function"?l({src:t}):l):null}var ac={naturalWidth:void 0,naturalHeight:void 0,width:void 0,height:void 0,loaded:void 0,broken:!1,x:0,y:0,touched:!1,maskTouched:!1,rotate:0,scale:1,CX:0,CY:0,lastX:0,lastY:0,lastCX:0,lastCY:0,lastScale:1,touchTime:0,touchLength:0,pause:!0,stopRaf:!0,reach:void 0};function ic(e){var t=e.item,n=t.src,a=t.render,i=t.width,s=i===void 0?0:i,u=t.height,l=u===void 0?0:u,o=t.originRef,d=e.visible,c=e.speed,h=e.easing,j=e.wrapClassName,E=e.className,v=e.style,m=e.loadingElement,x=e.brokenElement,T=e.onPhotoTap,L=e.onMaskTap,w=e.onReachMove,N=e.onReachUp,Y=e.onPhotoResize,g=e.isActive,_=e.expose,M=An(ac),B=M[0],ne=M[1],Se=y.useRef(0),K=xi(),ht=B.naturalWidth,Ae=ht===void 0?s:ht,ce=B.naturalHeight,de=ce===void 0?l:ce,Qe=B.width,we=Qe===void 0?s:Qe,et=B.height,p=et===void 0?l:et,f=B.loaded,k=f===void 0?!n:f,P=B.broken,I=B.x,A=B.y,O=B.touched,F=B.stopRaf,z=B.maskTouched,H=B.rotate,U=B.scale,Z=B.CX,J=B.CY,re=B.lastX,$=B.lastY,V=B.lastCX,be=B.lastCY,ie=B.lastScale,ge=B.touchTime,Ce=B.touchLength,S=B.pause,ae=B.reach,Te=Rt({onScale:function(C){return he(Cn(C))},onRotate:function(C){H!==C&&(_({rotate:C}),ne(ye({rotate:C},Qn(Ae,de,C))))}});function he(C,D,Q){U!==C&&(_({scale:C}),ne(ye({scale:C},Jn(I,A,we,p,U,C,D,Q),C<=1&&{x:0,y:0})))}var qe=jn(function(C,D,Q){if(Q===void 0&&(Q=0),(O||z)&&g){var _t=sr(H,we,p),nt=_t[0],Ve=_t[1];if(Q===0&&Se.current===0){var je=Math.abs(C-Z)<=20,Ne=Math.abs(D-J)<=20;if(je&&Ne)return void ne({lastCX:C,lastCY:D});Se.current=je?D>J?3:2:1}var kt=C-V,It=D-be,$e=void 0;if(Q===0){var Mt=wt(kt+re,U,nt,innerWidth)[0],Ut=wt(It+$,U,Ve,innerHeight);$e=function(gt,at,it,Ze){return at&&gt===1||Ze==="x"?"x":it&&gt>1||Ze==="y"?"y":void 0}(Se.current,Mt,Ut[0],ae),$e!==void 0&&w($e,C,D,U)}if($e==="x"||z)return void ne({reach:"x"});var rt=Cn(U+(Q-Ce)/100/2*U,Ae/we,.2);_({scale:rt}),ne(ye({touchLength:Q,reach:$e,scale:rt},Jn(I,A,we,p,U,rt,C,D,kt,It)))}},{maxWait:8});function tt(C){return!F&&!O&&(K.current&&ne(ye({},C,{pause:d})),K.current)}var Ue,Oe,Ye,pt,Tt,mt,Lt,_e,mn=(Tt=function(C){return tt({x:C})},mt=function(C){return tt({y:C})},Lt=function(C){return K.current&&(_({scale:C}),ne({scale:C})),!O&&K.current},_e=Rt({X:function(C){return Tt(C)},Y:function(C){return mt(C)},S:function(C){return Lt(C)}}),function(C,D,Q,_t,nt,Ve,je,Ne,kt,It,$e){var Mt=sr(It,nt,Ve),Ut=Mt[0],rt=Mt[1],gt=wt(C,Ne,Ut,innerWidth),at=gt[0],it=gt[1],Ze=wt(D,Ne,rt,innerHeight),Vt=Ze[0],vn=Ze[1],$t=Date.now()-$e;if($t>=200||Ne!=je||Math.abs(kt-je)>1){var vt=Jn(C,D,nt,Ve,je,Ne),ot=vt.x,At=vt.y,Re=at?it:ot!==C?ot:null,Ht=Vt?vn:At!==D?At:null;return Re!==null&&Nt(C,Re,_e.X),Ht!==null&&Nt(D,Ht,_e.Y),void(Ne!=je&&Nt(je,Ne,_e.S))}var Pt=(C-Q)/$t,yt=(D-_t)/$t,xt=Math.sqrt(Math.pow(Pt,2)+Math.pow(yt,2)),st=!1,lt=!1;(function(He,ke){var Ie=He,ct=0,We=void 0,De=0,Wt=function(tn){We||(We=tn);var nn=tn-We,_r=Math.sign(He),kr=-.001*_r,Ir=Math.sign(-Ie)*Math.pow(Ie,2)*2e-4,Si=Ie*nn+(kr+Ir)*Math.pow(nn,2)/2;ct+=Si,We=tn,_r*(Ie+=(kr+Ir)*nn)<=0?Le():ke(ct)?Je():Le()};function Je(){De=requestAnimationFrame(Wt)}function Le(){cancelAnimationFrame(De)}Je()})(xt,function(He){var ke=C+He*(Pt/xt),Ie=D+He*(yt/xt),ct=wt(ke,je,Ut,innerWidth),We=ct[0],De=ct[1],Wt=wt(Ie,je,rt,innerHeight),Je=Wt[0],Le=Wt[1];if(We&&!st&&(st=!0,at?Nt(ke,De,_e.X):na(De,ke+(ke-De),_e.X)),Je&&!lt&&(lt=!0,Vt?Nt(Ie,Le,_e.Y):na(Le,Ie+(Ie-Le),_e.Y)),st&&lt)return!1;var tn=st||_e.X(De),nn=lt||_e.Y(Le);return tn&&nn})}),zt=(Ue=T,Oe=function(C,D){ae||he(U!==1?1:Math.max(2,Ae/we),C,D)},Ye=y.useRef(0),pt=jn(function(){Ye.current=0,Ue.apply(void 0,[].slice.call(arguments))},{wait:300}),function(){var C=[].slice.call(arguments);Ye.current+=1,pt.apply(void 0,C),Ye.current>=2&&(pt.cancel(),Ye.current=0,Oe.apply(void 0,C))});function Bt(C,D){if(Se.current=0,(O||z)&&g){ne({touched:!1,maskTouched:!1,pause:!1,stopRaf:!1,reach:void 0});var Q=Cn(U,Ae/we);if(mn(I,A,re,$,we,p,U,Q,ie,H,ge),N(C,D),Z===C&&J===D){if(O)return void zt(C,D);z&&L(C,D)}}}function en(C,D,Q){Q===void 0&&(Q=0),ne({touched:!0,CX:C,CY:D,lastCX:C,lastCY:D,lastX:I,lastY:A,lastScale:U,touchLength:Q,touchTime:Date.now()})}function gn(C){ne({maskTouched:!0,CX:C.clientX,CY:C.clientY,lastX:I,lastY:A})}Xt(ut?void 0:"mousemove",function(C){C.preventDefault(),qe(C.clientX,C.clientY)}),Xt(ut?void 0:"mouseup",function(C){Bt(C.clientX,C.clientY)}),Xt(ut?"touchmove":void 0,function(C){C.preventDefault();var D=ta(C);qe.apply(void 0,D)},{passive:!1}),Xt(ut?"touchend":void 0,function(C){var D=C.changedTouches[0];Bt(D.clientX,D.clientY)},{passive:!1}),Xt("resize",jn(function(){k&&!O&&(ne(Qn(Ae,de,H)),Y())},{maxWait:8})),or(function(){g&&_(ye({scale:U,rotate:H},Te))},[g]);var Ke=function(C,D,Q,_t,nt,Ve,je,Ne,kt,It){var $e=function(ot,At,Re,Ht,Pt){var yt=y.useRef(!1),xt=An({lead:!0,scale:Re}),st=xt[0],lt=st.lead,He=st.scale,ke=xt[1],Ie=jn(function(ct){try{return Pt(!0),ke({lead:!1,scale:ct}),Promise.resolve()}catch(We){return Promise.reject(We)}},{wait:Ht});return or(function(){yt.current?(Pt(!1),ke({lead:!0}),Ie(Re)):yt.current=!0},[Re]),lt?[ot*He,At*He,Re/He]:[ot*Re,At*Re,1]}(Ve,je,Ne,kt,It),Mt=$e[0],Ut=$e[1],rt=$e[2],gt=function(ot,At,Re,Ht,Pt){var yt=y.useState(Ql),xt=yt[0],st=yt[1],lt=y.useState(0),He=lt[0],ke=lt[1],Ie=y.useRef(),ct=Rt({OK:function(){return ot&&ke(4)}});function We(De){Pt(!1),ke(De)}return y.useEffect(function(){if(Ie.current||(Ie.current=Date.now()),Re){if(function(De,Wt){var Je=De&&De.current;if(Je&&Je.nodeType===1){var Le=Je.getBoundingClientRect();Wt({T:Le.top,L:Le.left,W:Le.width,H:Le.height,FIT:Je.tagName==="IMG"?getComputedStyle(Je).objectFit:void 0})}}(At,st),ot)return Date.now()-Ie.current<250?(ke(1),requestAnimationFrame(function(){ke(2),requestAnimationFrame(function(){return We(3)})}),void setTimeout(ct.OK,Ht)):void ke(4);We(5)}},[ot,Re]),[He,xt]}(C,D,Q,kt,It),at=gt[0],it=gt[1],Ze=it.W,Vt=it.FIT,vn=innerWidth/2,$t=innerHeight/2,vt=at<3||at>4;return[vt?Ze?it.L:vn:_t+(vn-Ve*Ne/2),vt?Ze?it.T:$t:nt+($t-je*Ne/2),Mt,vt&&Vt?Mt*(it.H/Ze):Ut,at===0?rt:vt?Ze/(Ve*Ne)||.01:rt,vt?Vt?1:0:1,at,Vt]}(d,o,k,I,A,we,p,U,c,function(C){return ne({pause:C})}),W=Ke[4],oe=Ke[6],ve="transform "+c+"ms "+h,pe={className:E,onMouseDown:ut?void 0:function(C){C.stopPropagation(),C.button===0&&en(C.clientX,C.clientY,0)},onTouchStart:ut?function(C){C.stopPropagation(),en.apply(void 0,ta(C))}:void 0,onWheel:function(C){if(!ae){var D=Cn(U-C.deltaY/100/2,Ae/we);ne({stopRaf:!0}),he(D,C.clientX,C.clientY)}},style:{width:Ke[2],height:Ke[3],opacity:Ke[5],objectFit:oe===4?void 0:Ke[7],transform:H?"rotate("+H+"deg)":void 0,transition:oe>2?ve+", opacity "+c+"ms ease, height "+(oe<4?c/2:oe>4?c:0)+"ms "+h:void 0}};return G.createElement("div",{className:"PhotoView__PhotoWrap"+(j?" "+j:""),style:v,onMouseDown:!ut&&g?gn:void 0,onTouchStart:ut&&g?function(C){return gn(C.touches[0])}:void 0},G.createElement("div",{className:"PhotoView__PhotoBox",style:{transform:"matrix("+W+", 0, 0, "+W+", "+Ke[0]+", "+Ke[1]+")",transition:O||S?void 0:ve,willChange:g?"transform":void 0}},n?G.createElement(rc,ye({src:n,loaded:k,broken:P},pe,{onPhotoLoad:function(C){ne(ye({},C,C.loaded&&Qn(C.naturalWidth||0,C.naturalHeight||0,H)))},loadingElement:m,brokenElement:x})):a&&a({attrs:pe,scale:W,rotate:H})))}var ra={x:0,touched:!1,pause:!1,lastCX:void 0,lastCY:void 0,bg:void 0,lastBg:void 0,overlay:!0,minimal:!0,scale:1,rotate:0};function oc(e){var t=e.loop,n=t===void 0?3:t,a=e.speed,i=e.easing,s=e.photoClosable,u=e.maskClosable,l=u===void 0||u,o=e.maskOpacity,d=o===void 0?1:o,c=e.pullClosable,h=c===void 0||c,j=e.bannerVisible,E=j===void 0||j,v=e.overlayRender,m=e.toolbarRender,x=e.className,T=e.maskClassName,L=e.photoClassName,w=e.photoWrapClassName,N=e.loadingElement,Y=e.brokenElement,g=e.images,_=e.index,M=_===void 0?0:_,B=e.onIndexChange,ne=e.visible,Se=e.onClose,K=e.afterClose,ht=e.portalContainer,Ae=An(ra),ce=Ae[0],de=Ae[1],Qe=y.useState(0),we=Qe[0],et=Qe[1],p=ce.x,f=ce.touched,k=ce.pause,P=ce.lastCX,I=ce.lastCY,A=ce.bg,O=A===void 0?d:A,F=ce.lastBg,z=ce.overlay,H=ce.minimal,U=ce.scale,Z=ce.rotate,J=ce.onScale,re=ce.onRotate,$=e.hasOwnProperty("index"),V=$?M:we,be=$?B:et,ie=y.useRef(V),ge=g.length,Ce=g[V],S=typeof n=="boolean"?n:ge>n,ae=function(W,oe){var ve=y.useReducer(function(Q){return!Q},!1)[1],pe=y.useRef(0),C=function(Q,_t){var nt=y.useRef(Q);function Ve(je){nt.current=je}return y.useMemo(function(){(function(je){W?(je(W),pe.current=1):pe.current=2})(Ve)},[Q]),[nt.current,Ve]}(W),D=C[1];return[C[0],pe.current,function(){ve(),pe.current===2&&(D(!1),oe&&oe()),pe.current=0}]}(ne,K),Te=ae[0],he=ae[1],qe=ae[2];or(function(){if(Te)return de({pause:!0,x:V*-(innerWidth+20)}),void(ie.current=V);de(ra)},[Te]);var tt=Rt({close:function(W){re&&re(0),de({overlay:!0,lastBg:O}),Se(W)},changeIndex:function(W,oe){oe===void 0&&(oe=!1);var ve=S?ie.current+(W-V):W,pe=ge-1,C=ir(ve,0,pe),D=S?ve:C,Q=innerWidth+20;de({touched:!1,lastCX:void 0,lastCY:void 0,x:-Q*D,pause:oe}),ie.current=D,be&&be(S?W<0?pe:W>pe?0:W:C)}}),Ue=tt.close,Oe=tt.changeIndex;function Ye(W){return W?Ue():de({overlay:!z})}function pt(){de({x:-(innerWidth+20)*V,lastCX:void 0,lastCY:void 0,pause:!0}),ie.current=V}function Tt(W,oe,ve,pe){W==="x"?function(C){if(P!==void 0){var D=C-P,Q=D;!S&&(V===0&&D>0||V===ge-1&&D<0)&&(Q=D/2),de({touched:!0,lastCX:P,x:-(innerWidth+20)*ie.current+Q,pause:!1})}else de({touched:!0,lastCX:C,x:p,pause:!1})}(oe):W==="y"&&function(C,D){if(I!==void 0){var Q=d===null?null:ir(d,.01,d-Math.abs(C-I)/100/4);de({touched:!0,lastCY:I,bg:D===1?Q:d,minimal:D===1})}else de({touched:!0,lastCY:C,bg:O,minimal:!0})}(ve,pe)}function mt(W,oe){var ve=W-(P??W),pe=oe-(I??oe),C=!1;if(ve<-40)Oe(V+1);else if(ve>40)Oe(V-1);else{var D=-(innerWidth+20)*ie.current;Math.abs(pe)>100&&H&&h&&(C=!0,Ue()),de({touched:!1,x:D,lastCX:void 0,lastCY:void 0,bg:d,overlay:!!C||z})}}Xt("keydown",function(W){if(ne)switch(W.key){case"ArrowLeft":Oe(V-1,!0);break;case"ArrowRight":Oe(V+1,!0);break;case"Escape":Ue()}});var Lt=function(W,oe,ve){return y.useMemo(function(){var pe=W.length;return ve?W.concat(W).concat(W).slice(pe+oe-1,pe+oe+2):W.slice(Math.max(oe-1,0),Math.min(oe+2,pe+1))},[W,oe,ve])}(g,V,S);if(!Te)return null;var _e=z&&!he,mn=ne?O:F,zt=J&&re&&{images:g,index:V,visible:ne,onClose:Ue,onIndexChange:Oe,overlayVisible:_e,overlay:Ce&&Ce.overlay,scale:U,rotate:Z,onScale:J,onRotate:re},Bt=a?a(he):400,en=i?i(he):"cubic-bezier(0.25, 0.8, 0.25, 1)",gn=a?a(3):600,Ke=i?i(3):"cubic-bezier(0.25, 0.8, 0.25, 1)";return G.createElement(Xl,{className:"PhotoView-Portal"+(_e?"":" PhotoView-Slider__clean")+(ne?"":" PhotoView-Slider__willClose")+(x?" "+x:""),role:"dialog",onClick:function(W){return W.stopPropagation()},container:ht},ne&&G.createElement(Zl,null),G.createElement("div",{className:"PhotoView-Slider__Backdrop"+(T?" "+T:"")+(he===1?" PhotoView-Slider__fadeIn":he===2?" PhotoView-Slider__fadeOut":""),style:{background:mn?"rgba(0, 0, 0, "+mn+")":void 0,transitionTimingFunction:en,transitionDuration:(f?0:Bt)+"ms",animationDuration:Bt+"ms"},onAnimationEnd:qe}),E&&G.createElement("div",{className:"PhotoView-Slider__BannerWrap"},G.createElement("div",{className:"PhotoView-Slider__Counter"},V+1," / ",ge),G.createElement("div",{className:"PhotoView-Slider__BannerRight"},m&&zt&&m(zt),G.createElement(ql,{className:"PhotoView-Slider__toolbarIcon",onClick:Ue}))),Lt.map(function(W,oe){var ve=S||V!==0?ie.current-1+oe:V+oe;return G.createElement(ic,{key:S?W.key+"/"+W.src+"/"+ve:W.key,item:W,speed:Bt,easing:en,visible:ne,onReachMove:Tt,onReachUp:mt,onPhotoTap:function(){return Ye(s)},onMaskTap:function(){return Ye(l)},wrapClassName:w,className:L,style:{left:(innerWidth+20)*ve+"px",transform:"translate3d("+p+"px, 0px, 0)",transition:f||k?void 0:"transform "+gn+"ms "+Ke},loadingElement:N,brokenElement:Y,onPhotoResize:pt,isActive:ie.current===ve,expose:de})}),!ut&&E&&G.createElement(G.Fragment,null,(S||V!==0)&&G.createElement("div",{className:"PhotoView-Slider__ArrowLeft",onClick:function(){return Oe(V-1,!0)}},G.createElement(Yl,null)),(S||V+1<ge)&&G.createElement("div",{className:"PhotoView-Slider__ArrowRight",onClick:function(){return Oe(V+1,!0)}},G.createElement(Kl,null))),v&&zt&&G.createElement("div",{className:"PhotoView-Slider__Overlay"},v(zt)))}var sc=["children","onIndexChange","onVisibleChange"],lc={images:[],visible:!1,index:0};function cc(e){var t=e.children,n=e.onIndexChange,a=e.onVisibleChange,i=Gn(e,sc),s=An(lc),u=s[0],l=s[1],o=y.useRef(0),d=u.images,c=u.visible,h=u.index,j=Rt({nextId:function(){return o.current+=1},update:function(m){var x=d.findIndex(function(L){return L.key===m.key});if(x>-1){var T=d.slice();return T.splice(x,1,m),void l({images:T})}l(function(L){return{images:L.images.concat(m)}})},remove:function(m){l(function(x){var T=x.images.filter(function(L){return L.key!==m});return{images:T,index:Math.min(T.length-1,h)}})},show:function(m){var x=d.findIndex(function(T){return T.key===m});l({visible:!0,index:x}),a&&a(!0,x,u)}}),E=Rt({close:function(){l({visible:!1}),a&&a(!1,h,u)},changeIndex:function(m){l({index:m}),n&&n(m,u)}}),v=y.useMemo(function(){return ye({},u,j)},[u,j]);return G.createElement(yi.Provider,{value:v},t,G.createElement(oc,ye({images:d,visible:c,index:h,onIndexChange:E.changeIndex,onClose:E.close},i)))}var uc=function(e){var t,n,a=e.src,i=e.render,s=e.overlay,u=e.width,l=e.height,o=e.triggers,d=o===void 0?["onClick"]:o,c=e.children,h=y.useContext(yi),j=(t=function(){return h.nextId()},(n=y.useRef({sign:!1,fn:void 0}).current).sign||(n.sign=!0,n.fn=t()),n.fn),E=y.useRef(null);y.useImperativeHandle(c==null?void 0:c.ref,function(){return E.current}),y.useEffect(function(){return function(){h.remove(j)}},[]);var v=Rt({render:function(x){return i&&i(x)},show:function(x,T){h.show(j),function(L,w){if(c){var N=c.props[L];N&&N(w)}}(x,T)}}),m=y.useMemo(function(){var x={};return d.forEach(function(T){x[T]=v.show.bind(null,T)}),x},[]);return y.useEffect(function(){h.update({key:j,src:a,originRef:E,render:v.render,overlay:s,width:u,height:l})},[a]),c?y.Children.only(y.cloneElement(c,ye({},m,{ref:E}))):null};const dc=({url:e,text:t})=>{const[n,a]=y.useState(!1);return r.jsx(no,{to:e,style:{color:"inherit",textDecoration:n?"underline":"none"},onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:t})},fc={replace:e=>{var a,i;const t=e.name==="a"&&((i=(a=e.children)==null?void 0:a[0])==null?void 0:i.name)==="img",n=e.name==="img";if(t||n){const s=t?e.children[0]:e,{src:u,alt:l}=s.attribs;return r.jsx(uc,{src:u,children:r.jsx("img",{src:u,alt:l})})}}},hc=y.forwardRef((e,t)=>{const n=fn(),a=b(o=>o.activeContent),i=b(o=>o.fontSize);if(!a)return r.jsxs("div",{ref:t,className:"content-empty",style:{display:"flex",flexDirection:"column",backgroundColor:"var(--color-fill-1)",color:"var(--color-text-3)",alignItems:"center",justifyContent:"center",flex:"1",padding:"40px 16px"},children:[r.jsx(to,{style:{fontSize:"64px"}}),r.jsx(R.Title,{heading:6,style:{color:"var(--color-text-3)",marginTop:"10px"},children:"ReactFlux"})]});const s=Wl(a.content,fc),u=a.feed.category.id,l=a.feed.category.title;return r.jsxs("div",{ref:t,className:"article-content",style:{padding:"40px 5%",flex:"1",overflowY:"auto",overflowX:"hidden"},children:[r.jsxs("div",{className:"article-title",style:{maxWidth:"600px",margin:"0 auto"},children:[r.jsx(R.Title,{heading:3,style:{margin:0},children:r.jsx("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",children:a.title})}),r.jsx(R.Text,{style:{color:"var(--color-text-3)",fontSize:"0.75 rem"},children:r.jsx(dc,{url:`/feed/${a.feed.id}`,text:a.feed.title})}),r.jsx(R.Text,{style:{color:"var(--color-text-3)",fontSize:"0.75 rem"},children:` - ${a.author}`}),r.jsx(R.Text,{children:r.jsx(dn,{size:"small",onClick:()=>{n(`/group/${u}`)},style:{marginLeft:"10px",cursor:"pointer"},children:l})}),r.jsx("br",{}),r.jsx(R.Text,{style:{color:"var(--color-text-3)",fontSize:"0.75 rem"},children:qt(a.published_at).format("dddd, MMMM D, YYYY [at] h:mm A")}),r.jsx(Be,{})]}),r.jsx("div",{className:"article-body",style:{fontSize:`${i}rem`,maxWidth:"600px",margin:"0 auto",overflowWrap:"break-word"},children:r.jsx(cc,{maskOpacity:.7,children:s})},a.id)]})});var bi={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var s="",u=0;u<arguments.length;u++){var l=arguments[u];l&&(s=i(s,a(l)))}return s}function a(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var u="";for(var l in s)t.call(s,l)&&s[l]&&(u=i(u,l));return u}function i(s,u){return u?s?s+" "+u:s+u:s}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(bi);var pc=bi.exports;const wi=Pn(pc),Ci=({src:e,alt:t,width:n,height:a,status:i,borderRadius:s})=>{const[u,l]=y.useState(!1),o=y.useRef(null);return y.useEffect(()=>{const d=new IntersectionObserver(h=>{for(const j of h)if(j.isIntersecting){const E=new Image;E.onload=()=>l(!0),E.onerror=()=>{o.current&&(d.unobserve(o.current),o.current.parentElement.style.display="none")},E.src=e,o.current&&d.unobserve(o.current)}}),c=o.current;return c&&d.observe(c),()=>d.disconnect()},[e]),r.jsxs("div",{className:"image-container",ref:o,children:[!u&&r.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:r.jsx(_n,{text:{rows:0},image:{style:{width:n,height:a,margin:"0",borderRadius:s}},animation:!0})}),u&&r.jsx("img",{className:i!=="unread"?"read":"",src:e,alt:t,style:{width:n,height:a,objectFit:"cover",borderRadius:s}})]})},mc=({url:e})=>r.jsx("img",{className:"feed-icon",src:`https://icons.duckduckgo.com/ip3/${new URL(e).hostname}.ico`,alt:"Icon"}),gc=({entry:e,showFeedIcon:t})=>r.jsxs("div",{children:[r.jsx(R.Text,{className:e.status==="unread"?"title-unread":"title-read",children:e.title}),r.jsxs(R.Text,{className:"article-info",children:[r.jsx("br",{}),t&&r.jsx(mc,{url:e.feed.site_url}),e.feed.title,r.jsx("br",{}),cr(e.published_at)]}),e.starred&&r.jsx(On,{className:"icon-starred"})]}),vc=({entry:e,handleEntryClick:t})=>{const n=b(l=>l.activeContent),a=b(l=>l.showFeedIcon),i=n&&e.id===n.id,s=()=>t(e),u=e.imgSrc?r.jsx("div",{className:"cover-image",children:r.jsx(Ci,{width:"100%",height:"160px",alt:e.id,src:e.imgSrc,status:e.status})}):null;return r.jsx("div",{className:"article-card",children:r.jsx(Dt,{className:wi("card-custom-hover-style",{"card-custom-selected-style":i}),hoverable:!0,"data-entry-id":e.id,style:{width:"100%",cursor:"pointer"},onClick:s,cover:u,children:r.jsx(Dt.Meta,{description:r.jsx(gc,{entry:e,showFeedIcon:a})})})},e.id)},yc=({url:e})=>r.jsx("img",{className:"feed-icon-mini",src:`https://icons.duckduckgo.com/ip3/${new URL(e).hostname}.ico`,alt:"Icon"}),xc=({entry:e,showFeedIcon:t})=>r.jsxs("div",{style:{display:"flex",paddingLeft:t?"22px":"0"},children:[r.jsxs("div",{style:{marginRight:"10px",flex:1},children:[r.jsx(R.Text,{className:e.status==="unread"?"title-unread":"title-read",children:e.title}),r.jsxs(R.Text,{className:"article-info",children:[r.jsx("br",{}),t&&r.jsx(yc,{url:e.feed.site_url}),e.feed.title,r.jsx("br",{}),cr(e.published_at)]}),e.starred&&r.jsx(On,{className:"icon-starred"})]}),e.imgSrc&&r.jsx("div",{className:"thumbnail",children:r.jsx(Ci,{width:"100px",height:"100px",alt:e.id,src:e.imgSrc,status:e.status,borderRadius:"4px"})})]}),bc=({entry:e,handleEntryClick:t})=>{const n=b(u=>u.activeContent),a=b(u=>u.showFeedIcon),i=n&&e.id===n.id,s=()=>t(e);return r.jsx("div",{className:"article-card",children:r.jsx(Dt,{className:wi("card-custom-hover-style",{"card-custom-selected-style":i}),hoverable:!0,"data-entry-id":e.id,style:{width:"100%",cursor:"pointer"},onClick:s,cover:null,children:r.jsx(Dt.Meta,{description:r.jsx(xc,{entry:e,showFeedIcon:a})})})},e.id)},wc=({loading:e})=>{const t=b(i=>i.layout),n=t==="large"?2:4,a=i=>r.jsx(Dt,{style:{width:"100%",marginBottom:"10px"},cover:t==="large"&&r.jsx("div",{style:{width:"100%",aspectRatio:16/9}}),children:r.jsx(Dt.Meta,{description:r.jsx(_n,{loading:e,animation:!0,text:{rows:3,width:150}})})},i);return e?Array.from({length:n},(i,s)=>a(s)):null},ji=()=>{const{entries:e,filteredEntries:t,filterStatus:n,filterString:a,filterType:i,loadMoreUnreadVisible:s,setFilteredEntries:u,setFilterStatus:l,setFilterString:o,setFilterType:d,setLoadMoreUnreadVisible:c,unreadCount:h}=y.useContext(ft);return y.useEffect(()=>{u([]);const E=Aa(e,i,n,a);if(u(E),n==="unread"){const v=e.filter(m=>m.status==="unread");c(v.length<h)}},[n,a,i,s]),{filteredEntries:t,handleFilter:(E,v,m)=>{d(E),l(v),o(m)},loadMoreUnreadVisible:s}},Cc=()=>{const{filterStatus:e,filterString:t,filterType:n}=y.useContext(ft),a=b(u=>u.activeContent),i=b(u=>u.setActiveContent),{handleFilter:s}=ji();return r.jsx(Ge.Search,{allowClear:!0,placeholder:"Search...",value:t,addBefore:r.jsxs(fe,{placeholder:"Select type",onChange:u=>{s(u,e,t)},style:{width:100},value:n,children:[r.jsx(fe.Option,{value:"0",children:"Title"}),r.jsx(fe.Option,{value:"1",children:"Content"})]}),onFocus:()=>a&&i(null),onChange:u=>s(n,e,u),style:{marginBottom:"10px",width:"100%"}})},jc=y.forwardRef(({loading:e,getEntries:t,handleEntryClick:n,cardsRef:a},i)=>{const{filteredEntries:s,filterStatus:u,loadMoreUnreadVisible:l,loadMoreVisible:o}=y.useContext(ft),{loadingMore:d,handleLoadMore:c}=hr(),h=b(v=>v.layout),j=b(v=>v.hiddenFeedIds),E=b(v=>v.showAllFeeds);return r.jsxs("div",{className:"entry-list",ref:i,style:{overflowY:"auto",padding:"10px 10px 0 10px",width:"302px",backgroundColor:"var(--color-fill-1)",flex:"1"},children:[r.jsx(Cc,{}),r.jsx(wc,{loading:e}),e?null:r.jsx("div",{ref:a,children:s.filter(v=>E||!j.includes(v.feed.id)).map(v=>{Ra(v.feed.site_url)||(v.feed.site_url=Da(v.feed.feed_url));const m=h==="small"?bc:vc;return r.jsx(m,{entry:v,handleEntryClick:n},v.id)})}),!e&&(u==="all"?o:l)&&r.jsxs(ue,{onClick:()=>c(t),loading:d,long:!0,style:{margin:"10px auto",display:"block"},children:[!d&&r.jsx(ro,{}),"Load more"]})]})}),Ec=y.forwardRef(({info:e,refreshArticleList:t,markAllAsRead:n},a)=>{const{entries:i,filteredEntries:s,filterStatus:u,filterString:l,filterType:o,loading:d,setEntries:c,setFilteredEntries:h,setFilterStatus:j,setUnreadCount:E}=y.useContext(ft),{handleFilter:v}=ji(),m=b(L=>L.initData),x=b(L=>L.showStatus),T=y.useCallback(async()=>{n().then(()=>{ee.success("Marked all as read successfully"),m(),c(i.map(L=>({...L,status:"read"}))),h(s.map(L=>({...L,status:"read"}))),E(0)}).catch(()=>{ee.error("Failed to mark all as read")})},[i,s,m,n,c,h,E]);return y.useEffect(()=>{j(x)},[x]),r.jsxs("div",{className:"entry-panel",style:{backgroundColor:"var(--color-bg-2)",bottom:"0",display:"flex",flexDirection:"row",padding:"8px 10px",zIndex:"2",justifyContent:"space-between",borderTop:"1px solid var(--color-border-2)"},children:[e.from!=="starred"&&e.from!=="history"&&r.jsx(da,{focusLock:!0,title:"Mark All As Read?",onOk:T,children:r.jsx(ue,{icon:r.jsx(oa,{}),shape:"circle"})}),r.jsxs(on.Group,{type:"button",name:"lang",value:u,onChange:L=>{a.current&&a.current.scrollTo(0,0),v(o,L,l)},children:[r.jsx(on,{value:"all",children:"ALL"}),r.jsx(on,{value:"unread",children:"UNREAD"})]}),r.jsx(ue,{icon:r.jsx(ua,{}),loading:d,shape:"circle",onClick:t})]})}),Qt=({info:e,getEntries:t,markAllAsRead:n})=>{const a=b(S=>S.activeContent),i=b(S=>S.setActiveContent),s=b(S=>S.setReadCount),u=b(S=>S.setStarredCount),l=b(S=>S.setUnreadToday),o=b(S=>S.setUnreadTotal),d=b(S=>S.updateFeedUnreadCount),c=b(S=>S.updateGroupUnreadCount),h=b(S=>S.showAllFeeds),j=b(S=>S.hiddenFeedIds),E=b(S=>S.orderBy),v=b(S=>S.orderDirection),{entries:m,filteredEntries:x,filterStatus:T,loading:L,setEntries:w,setFilteredEntries:N,setLoading:Y,setLoadMoreUnreadVisible:g,setLoadMoreVisible:_,setOffset:M,setTotal:B,setUnreadCount:ne,total:Se,unreadCount:K}=y.useContext(ft),{handleFetchContent:ht,toggleEntryStarred:Ae,toggleEntryStatus:ce,handleEntryStatusUpdate:de}=fr(),{getFirstImage:Qe}=hr(),[we,et]=y.useState(!1),[p,f]=y.useState(!1),[k,P]=y.useState(!1),I=y.useRef(null),A=y.useRef(null),O=y.useRef(null);y.useEffect(()=>{et(a!==null)},[a]),y.useEffect(()=>{P(!0)},[h]),y.useEffect(()=>{e.from!=="history"&&setTimeout(()=>{Ce()},200)},[E]),y.useEffect(()=>{setTimeout(()=>{Ce()},200)},[v]),y.useEffect(()=>{!h&&j?N(S=>S.filter(ae=>!j.includes(ae.feed.id))):k&&(N(()=>V(m)),P(!1)),f(!0)},[j,h]),y.useEffect(()=>{if(!(K===0||Se===0))switch(e.from){case"all":h&&o(()=>K);break;case"today":l(()=>K);break;case"starred":u(()=>Se);break;case"history":s(()=>Se);break;case"feed":{const S=Number.parseInt(e.id);d(S,K);break}case"group":{const S=Number.parseInt(e.id);c(S,K);break}}},[Se,K]);const F=y.useCallback(async S=>{et(!1),setTimeout(()=>{i({...S,status:"read"})},200),S.status==="unread"&&(setTimeout(()=>{de(S,"read")},200),_a(S.id,"read").catch(()=>{ee.error("Failed to mark entry as read, please try again later"),de(S,"unread")})),A.current&&(A.current.setAttribute("tabIndex","-1"),A.current.focus(),A.current.scrollTo(0,0))}),{handleBKey:z,handleDKey:H,handleEscapeKey:U,handleLeftKey:Z,handleMKey:J,handleRightKey:re,handleSKey:$}=pr(F,t,p,f);y.useEffect(()=>{const S={27:()=>U(I),37:()=>Z(),39:()=>re(),66:()=>z(),68:()=>H(ht),77:()=>J(ce),83:()=>$(Ae)},ae=Te=>{const he=S[Te.keyCode];he&&he()};return we?document.addEventListener("keydown",ae):document.removeEventListener("keydown",ae),()=>{document.removeEventListener("keydown",ae)}},[a,x,we]);const V=S=>T==="all"?S:S.filter(ae=>ae.status==="unread"),be=(S,ae,Te,he)=>{w(S),N(ae),B(Te.data.total),_(S.length<Te.data.total),ne(he.data.total),g(ae.length<he.data.total)},ie=(S,ae)=>{var Te,he;if((Te=S==null?void 0:S.data)!=null&&Te.entries&&((he=ae==null?void 0:ae.data)==null?void 0:he.total)>=0){const qe=S.data.entries.map(Qe),tt=V(qe);be(qe,tt,S,ae)}},ge=async()=>{Y(!0);try{const S=await t();if(e.from==="history")ie(S,S);else{const ae=await t(0,"unread");ie(S,ae)}}catch(S){console.error("Error fetching articles:",S)}finally{Y(!1)}},Ce=async()=>{await ge(),I.current&&I.current.scrollTo(0,0),M(0)};return y.useEffect(()=>{Ce(),i(null),A.current&&A.current.scrollTo(0,0)},[e]),r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",flexDirection:"column",borderRight:"1px solid var(--color-border-2)"},className:"entry-col",children:[r.jsx(Ar,{in:!L,timeout:200,nodeRef:O,classNames:"fade",children:r.jsx(jc,{cardsRef:O,loading:L,getEntries:t,handleEntryClick:F,ref:I})}),r.jsx(Ec,{info:e,refreshArticleList:Ce,markAllAsRead:n,ref:I})]}),r.jsx(Ar,{in:we,timeout:200,nodeRef:A,classNames:"fade",unmountOnExit:!0,children:r.jsx(hc,{ref:A})}),r.jsx(Ls,{handleEntryClick:F,getEntries:t,isFilteredEntriesUpdated:p,setIsFilteredEntriesUpdated:f}),r.jsx(zs,{handleEntryClick:F,getEntries:t,isFilteredEntriesUpdated:p,setIsFilteredEntriesUpdated:f})]})},Sc=()=>{const e=async()=>{const t=await Ko();return le.put(`/v1/users/${t.data.id}/mark-all-as-read`)};return r.jsx(Jt,{children:r.jsx(Qt,{info:{from:"all",id:""},getEntries:ss,markAllAsRead:e})})},Tc=()=>{const e=fn(),t=ao();return console.error(t),r.jsx("div",{id:"error-page",style:{top:"30%",position:"relative"},children:r.jsx("div",{children:r.jsx(io,{status:"404",subTitle:"Whoops, that page is gone. ",extra:[r.jsx(ue,{type:"primary",onClick:()=>e("/"),children:"Back to Home"},"back")]})})})},_c=()=>{const{id:e}=ya(),t=b(u=>u.orderBy),n=b(u=>u.orderDirection),a=b(u=>u.pageSize),i=async(u=0,l=null)=>{const o={baseUrl:`/v1/feeds/${e}/entries`,orderField:t,direction:n,offset:u,limit:a,status:l},d=Zt(o);return le.get(d)},s=async()=>le.put(`/v1/feeds/${id}/mark-all-as-read`);return r.jsx(Jt,{children:r.jsx(Qt,{info:{from:"feed",id:e},getEntries:i,markAllAsRead:s})})},kc=()=>{const{id:e}=ya(),t=b(u=>u.orderBy),n=b(u=>u.orderDirection),a=b(u=>u.pageSize),i=async(u=0,l=null)=>{const o={baseUrl:`/v1/categories/${e}/entries`,orderField:t,direction:n,offset:u,limit:a,status:l},d=Zt(o);return le.get(d)},s=async()=>le.put(`/v1/categories/${e}/mark-all-as-read`);return r.jsx(Jt,{children:r.jsx(Qt,{info:{from:"group",id:e},getEntries:i,markAllAsRead:s})})},Ic=()=>r.jsx(Jt,{children:r.jsx(Qt,{info:{from:"history",id:""},getEntries:ka})}),Mc=e=>{var a;const t=e.getFieldsValue();let n=!0;for(const i of Object.keys(t))if(i!=="password"){const s=(a=t[i])==null?void 0:a.trim();e.setFieldValue(i,s),s||(n=!1)}else t[i]||(n=!1);return n},En=(e,t)=>{e.key==="Enter"&&t.submit()},Ac=()=>{const[e]=oo(),[t,n]=y.useState(!1),[a,i]=y.useState(kn()||"token"),s=fn();y.useEffect(()=>{kn()&&s("/")},[]);const u=async()=>{n(!0);try{(await aa({url:"/v1/me",method:"get",baseURL:e.getFieldsValue().server,headers:{"X-Auth-Token":e.getFieldsValue().token},auth:{username:e.getFieldsValue().username,password:e.getFieldsValue().password},timeout:5e3})).status===200&&(ee.success("Success"),Xo(a,e.getFieldsValue()),s("/"))}catch(o){console.error(o),ee.error(o.message)}n(!1)},l=()=>{u()};return r.jsx("div",{style:{backgroundColor:"var(--color-bg-1)",height:"100%"},children:r.jsx("div",{style:{backgroundColor:"var(--color-fill-1)",height:"100%"},children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",overflowY:"auto"},children:[r.jsx(fa,{style:{fontSize:48,color:"rgb(var(--primary-6))",marginTop:"20px"}}),r.jsx(R.Title,{heading:3,children:"Connect to your server"}),r.jsxs(Dt,{style:{boxShadow:"0 4px 10px rgb(var(--color-bg-3))",padding:"20px",width:"380px",marginTop:"20px"},children:[r.jsxs(xe,{autoComplete:"off",form:e,layout:"vertical",onSubmit:()=>{Mc(e)?l():ee.error("Please fill in all required fields")},children:[r.jsx(xe.Item,{field:"server",label:"Server address",rules:[{required:!0}],onKeyDown:o=>{En(o,e)},children:r.jsx(Ge,{disabled:t,placeholder:"Please input server address",prefix:r.jsx(so,{})})}),a==="token"&&r.jsx(xe.Item,{field:"token",label:"API Token",rules:[{required:!0}],onKeyDown:o=>{En(o,e)},children:r.jsx(Ge,{disabled:t,placeholder:"Please input api token",prefix:r.jsx(Pr,{})})}),a==="user"&&r.jsxs(r.Fragment,{children:[r.jsx(xe.Item,{field:"username",label:"Username",rules:[{required:!0}],onKeyDown:o=>{En(o,e)},children:r.jsx(Ge,{disabled:t,prefix:r.jsx(la,{}),placeholder:"Please input username"})}),r.jsx(xe.Item,{field:"password",label:"Password",rules:[{required:!0}],onKeyDown:o=>{En(o,e)},children:r.jsx(Ge.Password,{disabled:t,prefix:r.jsx(Pr,{}),placeholder:"Please input password"})})]})]}),r.jsx(ue,{loading:t,type:"primary",long:!0,onClick:()=>e.submit(),style:{marginTop:"20px"},children:"Connect"}),r.jsx(Be,{orientation:"center",children:"Or connect with"}),r.jsx(ue,{type:"secondary",long:!0,onClick:()=>i(a==="token"?"user":"token"),style:{marginTop:"20px"},children:a==="token"?"Username and password":"API Token"})]}),r.jsxs("div",{style:{display:"flex",marginTop:"40px"},children:[r.jsx(R.Text,{disabled:!0,children:"Need more information?"}),r.jsx(lo,{href:"https://miniflux.app/docs/api.html#authentication",style:{fontWeight:"500"},children:"Go to Miniflux official website"})]})]})})})},Pc=({children:e})=>kn()?r.jsx(r.Fragment,{children:e}):r.jsx(xa,{to:"/login"}),Fc=()=>r.jsx(Jt,{children:r.jsx(Qt,{info:{from:"starred",id:""},getEntries:Ia})}),Nc=()=>{const e=async()=>{const t=await Sn(0,"unread"),n=t.data.entries.map(a=>a.id);if(t.data.total>n.length){const a=t.data.total-n.length,i=Math.ceil(a/100)*100,s=await Sn(n.length,"unread",i);n.push(...s.data.entries.map(u=>u.id))}return Ta(n,"read")};return r.jsx(Jt,{children:r.jsx(Qt,{info:{from:"today",id:""},getEntries:Sn,markAllAsRead:e})})},Oc=se("homePage"),Rc=[{path:"/all",element:r.jsx(Sc,{})},{path:"/today",element:r.jsx(Nc,{})},{path:"/starred",element:r.jsx(Fc,{})},{path:"/history",element:r.jsx(Ic,{})},{path:"/group/:id",element:r.jsx(kc,{})},{path:"/feed/:id",element:r.jsx(_c,{})}],Dc=co([{path:"/",element:r.jsx(Pc,{children:r.jsx(Rs,{})}),errorElement:r.jsx(Tc,{}),children:[...Rc,{index:!0,element:r.jsx(xa,{to:`/${Oc}`,replace:!0})}]},{path:"/login",element:r.jsx(Ac,{})}]),Ei=Dc;uo.createRoot(document.getElementById("root")).render(r.jsx(fo,{locale:ho,children:r.jsx(po,{router:Ei})}))});export default Lc();
