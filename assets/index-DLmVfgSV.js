var ic=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);import{r as w,g as Zn,e as te,c as de,d as _r,a as Zs,M as ie,b as sc,u as oc,f as un,j as c,B as Ee,I as lc,S as Vn,T as Qr,h as Js,i as cc,k as uc,l as dc,D as Bi,m as Bt,n as eo,o as fc,p as hc,A as to,q as ro,s as pc,t as mc,v as vc,w as z,x as dt,y as lr,z as Hi,F as be,C as ft,E as no,G as Jn,H as Me,J as Zr,K as gc,L as ao,P as io,N as yc,O as bc,Q as yr,R as xc,U as wc,V as Sc,W as Ec,X as Cc,Y as _c,Z as jc,_ as so,$ as Un,a0 as Tc,a1 as kc,a2 as si,a3 as Mc,a4 as Ic,a5 as Ac,a6 as Oc,a7 as oo,a8 as Pc,a9 as lo,aa as co,ab as oi,ac as Fc,ad as Rc,ae as Nc,af as Dc,ag as Lc,ah as Vc,ai as Jr,aj as Uc,ak as $c,al as zc,am as ba,an as qi,ao as Bc,ap as Hc,aq as uo,ar as qc,as as Wc,at as Wi,au as Gc,av as fo,aw as Xc,ax as Yc,ay as Kc,az as Qc,aA as Zc}from"./vendor-BHae5EI0.js";var G0=ic((K0,hn)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Jc={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Gi=e=>{let t;const r=new Set,n=(d,f)=>{const m=typeof d=="function"?d(t):d;if(!Object.is(m,t)){const x=t;t=f??(typeof m!="object"||m===null)?m:Object.assign({},t,m),r.forEach(g=>g(t,x))}},a=()=>t,l={setState:n,getState:a,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(Jc?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(n,a,l);return l},eu=e=>e?Gi(e):Gi;var ho={exports:{}},po={},mo={exports:{}},vo={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jr=w;function tu(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ru=typeof Object.is=="function"?Object.is:tu,nu=jr.useState,au=jr.useEffect,iu=jr.useLayoutEffect,su=jr.useDebugValue;function ou(e,t){var r=t(),n=nu({inst:{value:r,getSnapshot:t}}),a=n[0].inst,i=n[1];return iu(function(){a.value=r,a.getSnapshot=t,xa(a)&&i({inst:a})},[e,r,t]),au(function(){return xa(a)&&i({inst:a}),e(function(){xa(a)&&i({inst:a})})},[e]),su(r),r}function xa(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ru(e,r)}catch{return!0}}function lu(e,t){return t()}var cu=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?lu:ou;vo.useSyncExternalStore=jr.useSyncExternalStore!==void 0?jr.useSyncExternalStore:cu;mo.exports=vo;var uu=mo.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ea=w,du=uu;function fu(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var hu=typeof Object.is=="function"?Object.is:fu,pu=du.useSyncExternalStore,mu=ea.useRef,vu=ea.useEffect,gu=ea.useMemo,yu=ea.useDebugValue;po.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=mu(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=gu(function(){function l(x){if(!u){if(u=!0,d=x,x=n(x),a!==void 0&&o.hasValue){var g=o.value;if(a(g,x))return f=g}return f=x}if(g=f,hu(d,x))return g;var v=n(x);return a!==void 0&&a(g,v)?g:(d=x,f=v)}var u=!1,d,f,m=r===void 0?null:r;return[function(){return l(t())},m===null?void 0:function(){return l(m())}]},[t,r,n,a]);var s=pu(e,i[0],i[1]);return vu(function(){o.hasValue=!0,o.value=s},[s]),yu(s),s};ho.exports=po;var bu=ho.exports;const xu=Zn(bu);var go={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:wu}=te,{useSyncExternalStoreWithSelector:Su}=xu;let Xi=!1;const Eu=e=>e;function Cu(e,t=Eu,r){(go?"production":void 0)!=="production"&&r&&!Xi&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Xi=!0);const n=Su(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return wu(n),n}const Yi=e=>{(go?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?eu(e):e,r=(n,a)=>Cu(t,n,a);return Object.assign(r,t),r},_u=e=>e?Yi(e):Yi,Ra={articleWidth:90,fontSize:1.05,homePage:"all",layout:"large",markReadOnScroll:!1,orderBy:"created_at",orderDirection:"desc",pageSize:100,showAllFeeds:!1,showFeedIcon:!0,showStatus:"all",theme:"light",themeColor:"Blue"},Re=e=>{const t=JSON.parse(localStorage.getItem("config"))||{};return Object.hasOwn(t,e)?t[e]:Object.hasOwn(Ra,e)?Ra[e]:null};var yo={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(de,function(){return function(r,n,a){r=r||{};var i=n.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function s(u,d,f,m){return i.fromToBase(u,d,f,m)}a.en.relativeTime=o,i.fromToBase=function(u,d,f,m,x){for(var g,v,S,E=f.$locale().relativeTime||o,h=r.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],y=h.length,j=0;j<y;j+=1){var k=h[j];k.d&&(g=m?a(u).diff(f,k.d,!0):f.diff(u,k.d,!0));var O=(r.rounding||Math.round)(Math.abs(g));if(S=g>0,O<=k.r||!k.r){O<=1&&j>0&&(k=h[j-1]);var C=E[k.l];x&&(O=x(""+O)),v=typeof C=="string"?C.replace("%d",O):C(O,d,k.l,S);break}}if(d)return v;var I=S?E.future:E.past;return typeof I=="function"?I(v):I.replace("%s",v)},i.to=function(u,d){return s(u,d,this,!0)},i.from=function(u,d){return s(u,d,this)};var l=function(u){return u.$u?a.utc():a()};i.toNow=function(u){return this.to(l(this),u)},i.fromNow=function(u){return this.from(l(this),u)}}})})(yo);var ju=yo.exports;const Tu=Zn(ju);_r.extend(Tu);const ku=e=>{const t=_r(e),r=_r();return t.isAfter(r.subtract(24,"hour"))},Mu=()=>_r().subtract(24,"hour").unix(),bo=e=>_r(e).fromNow(),$n=()=>{const e=JSON.parse(localStorage.getItem("auth"));return e||(console.log("No auth info found in localStorage"),null)},Iu=(e,t)=>{const r={method:e,secret:t};localStorage.setItem("auth",JSON.stringify(r))},he=Zs.create({timeout:3e3,retry:3,retryDelay:1e3});he.interceptors.request.use(e=>{const t=$n(),{server:r,token:n,username:a,password:i}=(t==null?void 0:t.secret)||{};return e.baseURL=r,n&&(e.headers["X-Auth-Token"]=n),a&&i&&(e.auth={username:a,password:i}),e},e=>Promise.reject(e));const Au=async e=>{const{config:t}=e;return e.code!=="ECONNABORTED"||!(t!=null&&t.retry)||(t.__retryCount=t.__retryCount||0,t.__retryCount>=t.retry)?Promise.reject(e):(t.__retryCount+=1,await new Promise(n=>{setTimeout(()=>{n()},t.retryDelay||1e3)}),he(t))},Ou=e=>{var r,n,a;const t=((n=(r=e.response)==null?void 0:r.data)==null?void 0:n.error_message)||e.message;return ie.error(t),((a=e.response)==null?void 0:a.status)===401&&(localStorage.removeItem("auth"),nc.navigate("/login")),Promise.reject(e)};he.interceptors.response.use(e=>e,async e=>{try{return await Au(e)}catch(t){return Ou(t)}});const xo=async(e,t)=>he.put("/v1/entries",{entry_ids:e,status:t}),wo=async(e,t)=>xo([e],t),Pu=async e=>he.put(`/v1/entries/${e}/bookmark`),Fu=async e=>he.get(`/v1/entries/${e}/fetch-content`),Ru=async()=>he.get("/v1/me"),Nu=async()=>he.get("/v1/feeds/counters"),Du=async()=>he.get("/v1/feeds"),Lu=async()=>he.get("/v1/categories"),Vu=async e=>he.delete(`/v1/categories/${e}`),Uu=async e=>he.post("/v1/categories",{title:e}),$u=async(e,t,r=!1)=>{const n={title:t};return r&&(n.hide_globally="on"),he.put(`/v1/categories/${e}`,n)},zu=async(e,t,r,n,a,i=!1)=>he.put(`/v1/feeds/${e}`,{feed_url:t,title:r,category_id:n,crawler:a,hide_globally:i}),Bu=async e=>he.put(`/v1/feeds/${e}/refresh`),Hu=async e=>he.delete(`/v1/feeds/${e}`),qu=async(e,t,r)=>he.post("/v1/feeds",{feed_url:e,category_id:t,crawler:r}),Mr=(e,t={})=>{const{baseUrl:r,orderField:n,direction:a,offset:i,limit:o,status:s}=e,l=new URLSearchParams({...t,order:n,direction:a,offset:i,limit:o});return s&&l.append("status",s),`${r}?${l.toString()}`},Wu=async(e=0,t=null)=>{const r=Re("orderBy"),n=Re("orderDirection"),a=Re("pageSize"),o=Mr({baseUrl:"/v1/entries",orderField:r,direction:n,offset:e,limit:a,status:t});return he.get(o)},So=async(e=0)=>{const t=Re("orderDirection"),r=Re("pageSize"),a=Mr({baseUrl:"/v1/entries",orderField:"changed_at",direction:t,offset:e,limit:r,status:"read"});return he.get(a)},Eo=async(e=0,t=null)=>{const r=Re("orderDirection"),n=Re("pageSize"),o=Mr({baseUrl:"/v1/entries",orderField:"changed_at",direction:r,offset:e,limit:n,status:t},{starred:"true"});return he.get(o)},Fn=async(e=0,t=null,r=null)=>{const n=Re("orderBy"),a=Re("orderDirection"),i=r||Re("pageSize"),o=Mu(),u=Mr({baseUrl:"/v1/entries",orderField:n,direction:a,offset:e,limit:i,status:t},{published_after:o});return he.get(u)},Gu=(e,t)=>t==="read"?Math.max(0,e-1):e+1,Ki=(e,t,r)=>e.map(n=>n.id===t?{...n,hide_globally:r}:n),Qi=(e,t,r)=>r?[...e,t]:e.filter(n=>n!==t),Zi=(e,t,r)=>e.map(n=>{if(n.id===t){let a;return typeof r=="string"?a=Gu(n.unreadCount,r):a=r,{...n,unreadCount:a}}return n}),A=_u((e,t)=>({feeds:[],groups:[],unreadTotal:0,unreadToday:0,starredCount:0,readCount:0,hiddenFeedIds:[],hiddenGroupIds:[],loading:!0,visible:{settings:!1,addFeed:!1},collapsed:window.innerWidth<=992,activeContent:null,isSysDarkMode:window.matchMedia("(prefers-color-scheme: dark)").matches,isInitCompleted:!1,setFeeds:r=>e({feeds:r}),setGroups:r=>e({groups:r}),setUnreadTotal:r=>e(n=>({unreadTotal:r(n.unreadTotal)})),setUnreadToday:r=>e(n=>({unreadToday:r(n.unreadToday)})),setStarredCount:r=>e(n=>({starredCount:r(n.starredCount)})),setReadCount:r=>e(n=>({readCount:r(n.readCount)})),setActiveContent:r=>{e({activeContent:r})},setIsSysDarkMode:r=>e({isSysDarkMode:r}),initData:async()=>{e({loading:!0});const[r,n,a,i,o,s]=await Promise.all([Du(),Lu(),So(),Eo(),Fn(0,"unread"),Nu()]);if(r&&n&&a&&i&&o&&s){const l=r.data.filter(v=>v.hide_globally||v.category.hide_globally).map(v=>v.id),u=n.data.filter(v=>v.hide_globally).map(v=>v.id);e({hiddenFeedIds:l}),e({hiddenGroupIds:u});const d=s.data.unreads,f=Re("showAllFeeds"),m=Object.keys(d).reduce((v,S)=>f||!l.includes(Number.parseInt(S))?v+d[S]:v,0);e({unreadTotal:m});const x=r.data.map(v=>({...v,unreadCount:d[v.id]||0}));e({feeds:x.sort((v,S)=>v.title.localeCompare(S.title,"en"))});const g=n.data.map(v=>{let S=0,E=0;for(const h of x)h.category.id===v.id&&(S+=h.unreadCount,E+=1);return{...v,unreadCount:S,feedCount:E}});e({groups:g.sort((v,S)=>v.title.localeCompare(S.title,"en"))}),e({readCount:a.data.total}),e({starredCount:i.data.total}),e({unreadToday:o.data.total}),e({isInitCompleted:!0}),e({loading:!1})}},updateFeedHidden:(r,n)=>{e(a=>{let{unreadTotal:i}=a;if(!Re("showAllFeeds")){const s=a.feeds.find(l=>l.id===r);s&&(i+=n?-s.unreadCount:s.unreadCount,i=Math.max(0,i))}return{feeds:Ki(a.feeds,r,n),hiddenFeedIds:Qi(a.hiddenFeedIds,r,n),unreadTotal:i}})},updateGroupHidden:(r,n)=>{e(a=>{let{unreadTotal:i}=a,o=[...a.hiddenFeedIds];if(!Re("showAllFeeds")){const u=a.groups.find(d=>d.id===r);u&&(i+=n?-u.unreadCount:u.unreadCount,i=Math.max(0,i))}const l=a.feeds.filter(u=>u.category.id===r).map(u=>u.id);return o=n?[...o,...l]:o.filter(u=>!l.includes(u)),{groups:Ki(a.groups,r,n),hiddenGroupIds:Qi(a.hiddenGroupIds,r,n),hiddenFeedIds:o,unreadTotal:i}})},updateFeedUnreadCount:(r,n)=>{e(a=>({feeds:Zi(a.feeds,r,n)}))},updateGroupUnreadCount:(r,n)=>{e(a=>({groups:Zi(a.groups,r,n)}))},setVisible:(r,n)=>{e(a=>({visible:{...a.visible,[r]:n}}))},toggleCollapsed:()=>e(r=>({collapsed:!r.collapsed}))}));var Co={exports:{}},_o={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},jo={exports:{}},Xu=function(t){return!t||typeof t=="string"?!1:t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&t.constructor.name!=="String")},Yu=Xu,Ku=Array.prototype.concat,Qu=Array.prototype.slice,Ji=jo.exports=function(t){for(var r=[],n=0,a=t.length;n<a;n++){var i=t[n];Yu(i)?r=Ku.call(r,Qu.call(i)):r.push(i)}return r};Ji.wrap=function(e){return function(){return e(Ji(arguments))}};var Zu=jo.exports,Br=_o,dn=Zu,To=Object.hasOwnProperty,ko=Object.create(null);for(var wa in Br)To.call(Br,wa)&&(ko[Br[wa]]=wa);var Ye=Co.exports={to:{},get:{}};Ye.get=function(e){var t=e.substring(0,3).toLowerCase(),r,n;switch(t){case"hsl":r=Ye.get.hsl(e),n="hsl";break;case"hwb":r=Ye.get.hwb(e),n="hwb";break;default:r=Ye.get.rgb(e),n="rgb";break}return r?{model:n,value:r}:null};Ye.get.rgb=function(e){if(!e)return null;var t=/^#([a-f0-9]{3,4})$/i,r=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,n=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,a=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,i=/^(\w+)$/,o=[0,0,0,1],s,l,u;if(s=e.match(r)){for(u=s[2],s=s[1],l=0;l<3;l++){var d=l*2;o[l]=parseInt(s.slice(d,d+2),16)}u&&(o[3]=parseInt(u,16)/255)}else if(s=e.match(t)){for(s=s[1],u=s[3],l=0;l<3;l++)o[l]=parseInt(s[l]+s[l],16);u&&(o[3]=parseInt(u+u,16)/255)}else if(s=e.match(n)){for(l=0;l<3;l++)o[l]=parseInt(s[l+1],0);s[4]&&(s[5]?o[3]=parseFloat(s[4])*.01:o[3]=parseFloat(s[4]))}else if(s=e.match(a)){for(l=0;l<3;l++)o[l]=Math.round(parseFloat(s[l+1])*2.55);s[4]&&(s[5]?o[3]=parseFloat(s[4])*.01:o[3]=parseFloat(s[4]))}else return(s=e.match(i))?s[1]==="transparent"?[0,0,0,0]:To.call(Br,s[1])?(o=Br[s[1]],o[3]=1,o):null:null;for(l=0;l<3;l++)o[l]=Wt(o[l],0,255);return o[3]=Wt(o[3],0,1),o};Ye.get.hsl=function(e){if(!e)return null;var t=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=e.match(t);if(r){var n=parseFloat(r[4]),a=(parseFloat(r[1])%360+360)%360,i=Wt(parseFloat(r[2]),0,100),o=Wt(parseFloat(r[3]),0,100),s=Wt(isNaN(n)?1:n,0,1);return[a,i,o,s]}return null};Ye.get.hwb=function(e){if(!e)return null;var t=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=e.match(t);if(r){var n=parseFloat(r[4]),a=(parseFloat(r[1])%360+360)%360,i=Wt(parseFloat(r[2]),0,100),o=Wt(parseFloat(r[3]),0,100),s=Wt(isNaN(n)?1:n,0,1);return[a,i,o,s]}return null};Ye.to.hex=function(){var e=dn(arguments);return"#"+wn(e[0])+wn(e[1])+wn(e[2])+(e[3]<1?wn(Math.round(e[3]*255)):"")};Ye.to.rgb=function(){var e=dn(arguments);return e.length<4||e[3]===1?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"};Ye.to.rgb.percent=function(){var e=dn(arguments),t=Math.round(e[0]/255*100),r=Math.round(e[1]/255*100),n=Math.round(e[2]/255*100);return e.length<4||e[3]===1?"rgb("+t+"%, "+r+"%, "+n+"%)":"rgba("+t+"%, "+r+"%, "+n+"%, "+e[3]+")"};Ye.to.hsl=function(){var e=dn(arguments);return e.length<4||e[3]===1?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"};Ye.to.hwb=function(){var e=dn(arguments),t="";return e.length>=4&&e[3]!==1&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"};Ye.to.keyword=function(e){return ko[e.slice(0,3)]};function Wt(e,t,r){return Math.min(Math.max(t,e),r)}function wn(e){var t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}var Ju=Co.exports,Mo={exports:{}},or=_o,Io={};for(var Sa in or)or.hasOwnProperty(Sa)&&(Io[or[Sa]]=Sa);var P=Mo.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var Be in P)if(P.hasOwnProperty(Be)){if(!("channels"in P[Be]))throw new Error("missing channels property: "+Be);if(!("labels"in P[Be]))throw new Error("missing channel labels property: "+Be);if(P[Be].labels.length!==P[Be].channels)throw new Error("channel and label counts mismatch: "+Be);var ed=P[Be].channels,td=P[Be].labels;delete P[Be].channels,delete P[Be].labels,Object.defineProperty(P[Be],"channels",{value:ed}),Object.defineProperty(P[Be],"labels",{value:td})}P.rgb.hsl=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,a=Math.min(t,r,n),i=Math.max(t,r,n),o=i-a,s,l,u;return i===a?s=0:t===i?s=(r-n)/o:r===i?s=2+(n-t)/o:n===i&&(s=4+(t-r)/o),s=Math.min(s*60,360),s<0&&(s+=360),u=(a+i)/2,i===a?l=0:u<=.5?l=o/(i+a):l=o/(2-i-a),[s,l*100,u*100]};P.rgb.hsv=function(e){var t,r,n,a,i,o=e[0]/255,s=e[1]/255,l=e[2]/255,u=Math.max(o,s,l),d=u-Math.min(o,s,l),f=function(m){return(u-m)/6/d+1/2};return d===0?a=i=0:(i=d/u,t=f(o),r=f(s),n=f(l),o===u?a=n-r:s===u?a=1/3+t-n:l===u&&(a=2/3+r-t),a<0?a+=1:a>1&&(a-=1)),[a*360,i*100,u*100]};P.rgb.hwb=function(e){var t=e[0],r=e[1],n=e[2],a=P.rgb.hsl(e)[0],i=1/255*Math.min(t,Math.min(r,n));return n=1-1/255*Math.max(t,Math.max(r,n)),[a,i*100,n*100]};P.rgb.cmyk=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,a,i,o,s;return s=Math.min(1-t,1-r,1-n),a=(1-t-s)/(1-s)||0,i=(1-r-s)/(1-s)||0,o=(1-n-s)/(1-s)||0,[a*100,i*100,o*100,s*100]};function rd(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2)}P.rgb.keyword=function(e){var t=Io[e];if(t)return t;var r=1/0,n;for(var a in or)if(or.hasOwnProperty(a)){var i=or[a],o=rd(e,i);o<r&&(r=o,n=a)}return n};P.keyword.rgb=function(e){return or[e]};P.rgb.xyz=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;var a=t*.4124+r*.3576+n*.1805,i=t*.2126+r*.7152+n*.0722,o=t*.0193+r*.1192+n*.9505;return[a*100,i*100,o*100]};P.rgb.lab=function(e){var t=P.rgb.xyz(e),r=t[0],n=t[1],a=t[2],i,o,s;return r/=95.047,n/=100,a/=108.883,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,i=116*n-16,o=500*(r-n),s=200*(n-a),[i,o,s]};P.hsl.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100,a,i,o,s,l;if(r===0)return l=n*255,[l,l,l];n<.5?i=n*(1+r):i=n+r-n*r,a=2*n-i,s=[0,0,0];for(var u=0;u<3;u++)o=t+1/3*-(u-1),o<0&&o++,o>1&&o--,6*o<1?l=a+(i-a)*6*o:2*o<1?l=i:3*o<2?l=a+(i-a)*(2/3-o)*6:l=a,s[u]=l*255;return s};P.hsl.hsv=function(e){var t=e[0],r=e[1]/100,n=e[2]/100,a=r,i=Math.max(n,.01),o,s;return n*=2,r*=n<=1?n:2-n,a*=i<=1?i:2-i,s=(n+r)/2,o=n===0?2*a/(i+a):2*r/(n+r),[t,o*100,s*100]};P.hsv.rgb=function(e){var t=e[0]/60,r=e[1]/100,n=e[2]/100,a=Math.floor(t)%6,i=t-Math.floor(t),o=255*n*(1-r),s=255*n*(1-r*i),l=255*n*(1-r*(1-i));switch(n*=255,a){case 0:return[n,l,o];case 1:return[s,n,o];case 2:return[o,n,l];case 3:return[o,s,n];case 4:return[l,o,n];case 5:return[n,o,s]}};P.hsv.hsl=function(e){var t=e[0],r=e[1]/100,n=e[2]/100,a=Math.max(n,.01),i,o,s;return s=(2-r)*n,i=(2-r)*a,o=r*a,o/=i<=1?i:2-i,o=o||0,s/=2,[t,o*100,s*100]};P.hwb.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100,a=r+n,i,o,s,l;a>1&&(r/=a,n/=a),i=Math.floor(6*t),o=1-n,s=6*t-i,i&1&&(s=1-s),l=r+s*(o-r);var u,d,f;switch(i){default:case 6:case 0:u=o,d=l,f=r;break;case 1:u=l,d=o,f=r;break;case 2:u=r,d=o,f=l;break;case 3:u=r,d=l,f=o;break;case 4:u=l,d=r,f=o;break;case 5:u=o,d=r,f=l;break}return[u*255,d*255,f*255]};P.cmyk.rgb=function(e){var t=e[0]/100,r=e[1]/100,n=e[2]/100,a=e[3]/100,i,o,s;return i=1-Math.min(1,t*(1-a)+a),o=1-Math.min(1,r*(1-a)+a),s=1-Math.min(1,n*(1-a)+a),[i*255,o*255,s*255]};P.xyz.rgb=function(e){var t=e[0]/100,r=e[1]/100,n=e[2]/100,a,i,o;return a=t*3.2406+r*-1.5372+n*-.4986,i=t*-.9689+r*1.8758+n*.0415,o=t*.0557+r*-.204+n*1.057,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a*12.92,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*12.92,a=Math.min(Math.max(0,a),1),i=Math.min(Math.max(0,i),1),o=Math.min(Math.max(0,o),1),[a*255,i*255,o*255]};P.xyz.lab=function(e){var t=e[0],r=e[1],n=e[2],a,i,o;return t/=95.047,r/=100,n/=108.883,t=t>.008856?Math.pow(t,1/3):7.787*t+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,a=116*r-16,i=500*(t-r),o=200*(r-n),[a,i,o]};P.lab.xyz=function(e){var t=e[0],r=e[1],n=e[2],a,i,o;i=(t+16)/116,a=r/500+i,o=i-n/200;var s=Math.pow(i,3),l=Math.pow(a,3),u=Math.pow(o,3);return i=s>.008856?s:(i-16/116)/7.787,a=l>.008856?l:(a-16/116)/7.787,o=u>.008856?u:(o-16/116)/7.787,a*=95.047,i*=100,o*=108.883,[a,i,o]};P.lab.lch=function(e){var t=e[0],r=e[1],n=e[2],a,i,o;return a=Math.atan2(n,r),i=a*360/2/Math.PI,i<0&&(i+=360),o=Math.sqrt(r*r+n*n),[t,o,i]};P.lch.lab=function(e){var t=e[0],r=e[1],n=e[2],a,i,o;return o=n/360*2*Math.PI,a=r*Math.cos(o),i=r*Math.sin(o),[t,a,i]};P.rgb.ansi16=function(e){var t=e[0],r=e[1],n=e[2],a=1 in arguments?arguments[1]:P.rgb.hsv(e)[2];if(a=Math.round(a/50),a===0)return 30;var i=30+(Math.round(n/255)<<2|Math.round(r/255)<<1|Math.round(t/255));return a===2&&(i+=60),i};P.hsv.ansi16=function(e){return P.rgb.ansi16(P.hsv.rgb(e),e[2])};P.rgb.ansi256=function(e){var t=e[0],r=e[1],n=e[2];if(t===r&&r===n)return t<8?16:t>248?231:Math.round((t-8)/247*24)+232;var a=16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5);return a};P.ansi16.rgb=function(e){var t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];var r=(~~(e>50)+1)*.5,n=(t&1)*r*255,a=(t>>1&1)*r*255,i=(t>>2&1)*r*255;return[n,a,i]};P.ansi256.rgb=function(e){if(e>=232){var t=(e-232)*10+8;return[t,t,t]}e-=16;var r,n=Math.floor(e/36)/5*255,a=Math.floor((r=e%36)/6)/5*255,i=r%6/5*255;return[n,a,i]};P.rgb.hex=function(e){var t=((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255),r=t.toString(16).toUpperCase();return"000000".substring(r.length)+r};P.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var r=t[0];t[0].length===3&&(r=r.split("").map(function(s){return s+s}).join(""));var n=parseInt(r,16),a=n>>16&255,i=n>>8&255,o=n&255;return[a,i,o]};P.rgb.hcg=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,a=Math.max(Math.max(t,r),n),i=Math.min(Math.min(t,r),n),o=a-i,s,l;return o<1?s=i/(1-o):s=0,o<=0?l=0:a===t?l=(r-n)/o%6:a===r?l=2+(n-t)/o:l=4+(t-r)/o+4,l/=6,l%=1,[l*360,o*100,s*100]};P.hsl.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=1,a=0;return r<.5?n=2*t*r:n=2*t*(1-r),n<1&&(a=(r-.5*n)/(1-n)),[e[0],n*100,a*100]};P.hsv.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=t*r,a=0;return n<1&&(a=(r-n)/(1-n)),[e[0],n*100,a*100]};P.hcg.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100;if(r===0)return[n*255,n*255,n*255];var a=[0,0,0],i=t%1*6,o=i%1,s=1-o,l=0;switch(Math.floor(i)){case 0:a[0]=1,a[1]=o,a[2]=0;break;case 1:a[0]=s,a[1]=1,a[2]=0;break;case 2:a[0]=0,a[1]=1,a[2]=o;break;case 3:a[0]=0,a[1]=s,a[2]=1;break;case 4:a[0]=o,a[1]=0,a[2]=1;break;default:a[0]=1,a[1]=0,a[2]=s}return l=(1-r)*n,[(r*a[0]+l)*255,(r*a[1]+l)*255,(r*a[2]+l)*255]};P.hcg.hsv=function(e){var t=e[1]/100,r=e[2]/100,n=t+r*(1-t),a=0;return n>0&&(a=t/n),[e[0],a*100,n*100]};P.hcg.hsl=function(e){var t=e[1]/100,r=e[2]/100,n=r*(1-t)+.5*t,a=0;return n>0&&n<.5?a=t/(2*n):n>=.5&&n<1&&(a=t/(2*(1-n))),[e[0],a*100,n*100]};P.hcg.hwb=function(e){var t=e[1]/100,r=e[2]/100,n=t+r*(1-t);return[e[0],(n-t)*100,(1-n)*100]};P.hwb.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=1-r,a=n-t,i=0;return a<1&&(i=(n-a)/(1-a)),[e[0],a*100,i*100]};P.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};P.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};P.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};P.gray.hsl=P.gray.hsv=function(e){return[0,0,e[0]]};P.gray.hwb=function(e){return[0,100,e[0]]};P.gray.cmyk=function(e){return[0,0,0,e[0]]};P.gray.lab=function(e){return[e[0],0,0]};P.gray.hex=function(e){var t=Math.round(e[0]/100*255)&255,r=(t<<16)+(t<<8)+t,n=r.toString(16).toUpperCase();return"000000".substring(n.length)+n};P.rgb.gray=function(e){var t=(e[0]+e[1]+e[2])/3;return[t/255*100]};var Ao=Mo.exports,zn=Ao;function nd(){for(var e={},t=Object.keys(zn),r=t.length,n=0;n<r;n++)e[t[n]]={distance:-1,parent:null};return e}function ad(e){var t=nd(),r=[e];for(t[e].distance=0;r.length;)for(var n=r.pop(),a=Object.keys(zn[n]),i=a.length,o=0;o<i;o++){var s=a[o],l=t[s];l.distance===-1&&(l.distance=t[n].distance+1,l.parent=n,r.unshift(s))}return t}function sd(e,t){return function(r){return t(e(r))}}function od(e,t){for(var r=[t[e].parent,e],n=zn[t[e].parent][e],a=t[e].parent;t[a].parent;)r.unshift(t[a].parent),n=sd(zn[t[a].parent][a],n),a=t[a].parent;return n.conversion=r,n}var ld=function(e){for(var t=ad(e),r={},n=Object.keys(t),a=n.length,i=0;i<a;i++){var o=n[i],s=t[o];s.parent!==null&&(r[o]=od(o,t))}return r},Na=Ao,cd=ld,xr={},ud=Object.keys(Na);function dd(e){var t=function(r){return r==null?r:(arguments.length>1&&(r=Array.prototype.slice.call(arguments)),e(r))};return"conversion"in e&&(t.conversion=e.conversion),t}function fd(e){var t=function(r){if(r==null)return r;arguments.length>1&&(r=Array.prototype.slice.call(arguments));var n=e(r);if(typeof n=="object")for(var a=n.length,i=0;i<a;i++)n[i]=Math.round(n[i]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}ud.forEach(function(e){xr[e]={},Object.defineProperty(xr[e],"channels",{value:Na[e].channels}),Object.defineProperty(xr[e],"labels",{value:Na[e].labels});var t=cd(e),r=Object.keys(t);r.forEach(function(n){var a=t[n];xr[e][n]=fd(a),xr[e][n].raw=dd(a)})});var hd=xr,Ur=Ju,Xe=hd,li=[].slice,Oo=["keyword","gray","hex"],Da={};Object.keys(Xe).forEach(function(e){Da[li.call(Xe[e].labels).sort().join("")]=e});var Bn={};function Ae(e,t){if(!(this instanceof Ae))return new Ae(e,t);if(t&&t in Oo&&(t=null),t&&!(t in Xe))throw new Error("Unknown model: "+t);var r,n;if(e==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof Ae)this.model=e.model,this.color=e.color.slice(),this.valpha=e.valpha;else if(typeof e=="string"){var a=Ur.get(e);if(a===null)throw new Error("Unable to parse color from string: "+e);this.model=a.model,n=Xe[this.model].channels,this.color=a.value.slice(0,n),this.valpha=typeof a.value[n]=="number"?a.value[n]:1}else if(e.length){this.model=t||"rgb",n=Xe[this.model].channels;var i=li.call(e,0,n);this.color=La(i,n),this.valpha=typeof e[n]=="number"?e[n]:1}else if(typeof e=="number")e&=16777215,this.model="rgb",this.color=[e>>16&255,e>>8&255,e&255],this.valpha=1;else{this.valpha=1;var o=Object.keys(e);"alpha"in e&&(o.splice(o.indexOf("alpha"),1),this.valpha=typeof e.alpha=="number"?e.alpha:0);var s=o.sort().join("");if(!(s in Da))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=Da[s];var l=Xe[this.model].labels,u=[];for(r=0;r<l.length;r++)u.push(e[l[r]]);this.color=La(u)}if(Bn[this.model])for(n=Xe[this.model].channels,r=0;r<n;r++){var d=Bn[this.model][r];d&&(this.color[r]=d(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Ae.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(e){var t=this.model in Ur.to?this:this.rgb();t=t.round(typeof e=="number"?e:1);var r=t.valpha===1?t.color:t.color.concat(this.valpha);return Ur.to[t.model](r)},percentString:function(e){var t=this.rgb().round(typeof e=="number"?e:1),r=t.valpha===1?t.color:t.color.concat(this.valpha);return Ur.to.rgb.percent(r)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var e={},t=Xe[this.model].channels,r=Xe[this.model].labels,n=0;n<t;n++)e[r[n]]=this.color[n];return this.valpha!==1&&(e.alpha=this.valpha),e},unitArray:function(){var e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,this.valpha!==1&&e.push(this.valpha),e},unitObject:function(){var e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,this.valpha!==1&&(e.alpha=this.valpha),e},round:function(e){return e=Math.max(e||0,0),new Ae(this.color.map(md(e)).concat(this.valpha),this.model)},alpha:function(e){return arguments.length?new Ae(this.color.concat(Math.max(0,Math.min(1,e))),this.model):this.valpha},red:ye("rgb",0,Te(255)),green:ye("rgb",1,Te(255)),blue:ye("rgb",2,Te(255)),hue:ye(["hsl","hsv","hsl","hwb","hcg"],0,function(e){return(e%360+360)%360}),saturationl:ye("hsl",1,Te(100)),lightness:ye("hsl",2,Te(100)),saturationv:ye("hsv",1,Te(100)),value:ye("hsv",2,Te(100)),chroma:ye("hcg",1,Te(100)),gray:ye("hcg",2,Te(100)),white:ye("hwb",1,Te(100)),wblack:ye("hwb",2,Te(100)),cyan:ye("cmyk",0,Te(100)),magenta:ye("cmyk",1,Te(100)),yellow:ye("cmyk",2,Te(100)),black:ye("cmyk",3,Te(100)),x:ye("xyz",0,Te(100)),y:ye("xyz",1,Te(100)),z:ye("xyz",2,Te(100)),l:ye("lab",0,Te(100)),a:ye("lab",1),b:ye("lab",2),keyword:function(e){return arguments.length?new Ae(e):Xe[this.model].keyword(this.color)},hex:function(e){return arguments.length?new Ae(e):Ur.to.hex(this.rgb().round().color)},rgbNumber:function(){var e=this.rgb().color;return(e[0]&255)<<16|(e[1]&255)<<8|e[2]&255},luminosity:function(){for(var e=this.rgb().color,t=[],r=0;r<e.length;r++){var n=e[r]/255;t[r]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return .2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),r=e.luminosity();return t>r?(t+.05)/(r+.05):(r+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},isDark:function(){var e=this.rgb().color,t=(e[0]*299+e[1]*587+e[2]*114)/1e3;return t<128},isLight:function(){return!this.isDark()},negate:function(){for(var e=this.rgb(),t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten:function(e){var t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken:function(e){var t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate:function(e){var t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate:function(e){var t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten:function(e){var t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken:function(e){var t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale:function(){var e=this.rgb().color,t=e[0]*.3+e[1]*.59+e[2]*.11;return Ae.rgb(t,t,t)},fade:function(e){return this.alpha(this.valpha-this.valpha*e)},opaquer:function(e){return this.alpha(this.valpha+this.valpha*e)},rotate:function(e){var t=this.hsl(),r=t.color[0];return r=(r+e)%360,r=r<0?360+r:r,t.color[0]=r,t},mix:function(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);var r=e.rgb(),n=this.rgb(),a=t===void 0?.5:t,i=2*a-1,o=r.alpha()-n.alpha(),s=((i*o===-1?i:(i+o)/(1+i*o))+1)/2,l=1-s;return Ae.rgb(s*r.red()+l*n.red(),s*r.green()+l*n.green(),s*r.blue()+l*n.blue(),r.alpha()*a+n.alpha()*(1-a))}};Object.keys(Xe).forEach(function(e){if(Oo.indexOf(e)===-1){var t=Xe[e].channels;Ae.prototype[e]=function(){if(this.model===e)return new Ae(this);if(arguments.length)return new Ae(arguments,e);var r=typeof arguments[t]=="number"?t:this.valpha;return new Ae(vd(Xe[this.model][e].raw(this.color)).concat(r),e)},Ae[e]=function(r){return typeof r=="number"&&(r=La(li.call(arguments),t)),new Ae(r,e)}}});function pd(e,t){return Number(e.toFixed(t))}function md(e){return function(t){return pd(t,e)}}function ye(e,t,r){return e=Array.isArray(e)?e:[e],e.forEach(function(n){(Bn[n]||(Bn[n]=[]))[t]=r}),e=e[0],function(n){var a;return arguments.length?(r&&(n=r(n)),a=this[e](),a.color[t]=n,a):(a=this[e]().color[t],r&&(a=r(a)),a)}}function Te(e){return function(t){return Math.max(0,Math.min(e,t))}}function vd(e){return Array.isArray(e)?e:[e]}function La(e,t){for(var r=0;r<t;r++)typeof e[r]!="number"&&(e[r]=0);return e}var ci=Ae,fn={};const gd=ci;fn.getRgbStr=function(e){return gd(e).rgb().round().color.join(",")};const yd=["hex","rgb","hsl"];function bd(e){return!e||yd.indexOf(e)<0?"hex":e}fn.getColorString=function(e,t){const r=bd(t);return r==="hex"?e[r]():e[r]().round().string()};const es=ci,{getColorString:xd}=fn;function wd(e,t,r){const n=es(e),a=n.hue(),i=n.saturationv(),o=n.value(),s=2,l=100,u=9,d=100,f=30;function m(h,y){let j;return a>=60&&a<=240?j=h?a-s*y:a+s*y:j=h?a+s*y:a-s*y,j<0?j+=360:j>=360&&(j-=360),Math.round(j)}function x(h,y){let j;return h?j=i<=u?i:i-(i-u)/5*y:j=i+(l-i)/4*y,j}function g(h,y){return h?o+(d-o)/5*y:o<=f?o:o-(o-f)/4*y}const v=t<6,S=v?6-t:t-6,E=t===6?n:es({h:m(v,S),s:x(v,S),v:g(v,S)});return xd(E,r)}var Po=wd;const Sn=ci,Sd=Po,{getColorString:Ed}=fn;function Cd(e,t,r){const n=Sn(Sd(e,10-t+1)),a=Sn(e),i=a.hue(),o=a.saturationv(),l=Sn({h:a.hue(),s:f(6),v:a.value()}).saturationv(),u=Math.ceil((l-9)/4),d=Math.ceil((100-l)/5);function f(x){if(x<6)return l+(6-x)*d;if(x===6){if(i>=0&&i<50)return o-15;if(i>=50&&i<191)return o-20;if(i>=191&&i<=360)return o-15}return l-u*(x-6)}const m=Sn({h:n.hue(),s:f(t),v:n.value()});return Ed(m,r)}var _d=Cd;const ts=Po,rs=_d;function jd(e,t={}){const{dark:r,list:n,index:a=6,format:i="hex"}=t;if(n){const o=[],s=r?rs:ts;for(let l=1;l<=10;l++)o.push(s(e,l,i));return o}return r?rs(e,a,i):ts(e,a,i)}var Td=jd;const kd=Td,{getRgbStr:Md}=fn;var Id=kd,Ad=Md;const Fo=[{name:"Red",valueLight:"#F53F3F",valueDark:"#F76965"},{name:"Orange",valueLight:"#F77234",valueDark:"#F9925A"},{name:"Green",valueLight:"#00B42A",valueDark:"#27C346"},{name:"Blue",valueLight:"#165DFF",valueDark:"#3C7EFF"},{name:"Purple",valueLight:"#722ED1",valueDark:"#8E51DA"}],Va=e=>{const t=Fo.find(i=>i.name===e),r=window.matchMedia("(prefers-color-scheme: dark)").matches,n=Re("theme"),a=n==="system"?r:n==="dark";return t?a?t.valueDark:t.valueLight:"#165DFF"},Ua=e=>{Id(Va(e),{list:!0}).map(r=>Ad(r)).forEach((r,n)=>{document.body.style.setProperty(`--primary-${n+1}`,r)})},Od=sc("config",Ra),Pe=()=>{const[e,t]=oc(Od);return{config:e,updateConfig:n=>{t(a=>({...a,...n}))}}},Pd=()=>{const e=un(),t=A(m=>m.setVisible),r=A(m=>m.toggleCollapsed),n=A(m=>m.feeds),a=A(m=>m.hiddenFeedIds),i=A(m=>m.setUnreadTotal),{config:o,updateConfig:s}=Pe(),{showAllFeeds:l,theme:u}=o,d=()=>{localStorage.clear(),document.body.removeAttribute("arco-theme"),Ua("Blue"),e("/login"),ie.success("logout")};let f;switch(u){case"dark":f=c.jsx(vc,{});break;case"system":f=c.jsx(mc,{});break;default:f=c.jsx(pc,{})}return c.jsxs("div",{className:"header",children:[c.jsx("div",{className:"brand",children:c.jsx(Ee,{className:"trigger",onClick:r,shape:"circle",size:"small",children:c.jsx(lc,{})})}),c.jsx("div",{className:"button-group",children:c.jsxs(Vn,{size:16,children:[c.jsx(Qr,{content:"Add a feed",mini:!0,children:c.jsx(Ee,{shape:"circle",size:"small",type:"primary",icon:c.jsx(Js,{}),onClick:()=>t("addFeed",!0)})}),c.jsx(Qr,{content:l?"Hide some feeds":"Show all feeds",mini:!0,children:c.jsx(Ee,{shape:"circle",size:"small",icon:l?c.jsx(cc,{}):c.jsx(uc,{}),onClick:()=>{const m=!l;if(m)i(()=>n.reduce((x,g)=>x+g.unreadCount,0));else{const x=n.filter(g=>!a.includes(g.id)).reduce((g,v)=>g+v.unreadCount,0);i(()=>x)}s({showAllFeeds:m})}})}),c.jsx(Ee,{shape:"circle",size:"small",icon:c.jsx(dc,{}),onClick:()=>window.open("https://github.com/electh/ReactFlux","_blank")}),c.jsx(Bi,{droplist:c.jsx(Bt,{defaultSelectedKeys:[u],className:"theme-menu",children:["light","dark","system"].map(m=>c.jsxs(Bt.Item,{className:"theme-menu-item",onClick:()=>s({theme:m}),children:[m.charAt(0).toUpperCase()+m.slice(1),u===m&&c.jsx(eo,{style:{marginLeft:8}})]},m))}),trigger:"hover",position:"bottom",children:c.jsx(Ee,{icon:f,shape:"circle",size:"small",onClick:()=>{switch(u){case"light":s({theme:"dark"});break;case"dark":s({theme:"light"});break}}})}),c.jsx(Bi,{droplist:c.jsxs(Bt,{children:[c.jsxs(Bt.Item,{onClick:()=>t("settings",!0),children:[c.jsx(fc,{className:"icon-right"}),"Settings"]},"0"),c.jsxs(Bt.Item,{onClick:d,children:[c.jsx(hc,{className:"icon-right"}),"Logout"]},"1")]}),trigger:"click",position:"br",children:c.jsx(to,{size:28,style:{cursor:"pointer"},children:c.jsx(ro,{})})})]})})]})},sr=(e,t)=>e.toLowerCase().includes(t.toLowerCase()),Ro=(e,t,r,n)=>n?t==="0"?r==="all"?e.filter(a=>sr(a.title,n)):e.filter(a=>sr(a.title,n)&&a.status===r):r==="all"?e.filter(a=>sr(a.content,n)):e.filter(a=>sr(a.content,n)&&a.status===r):e,Hn=(e,t,r,n)=>{const a=i=>r||!n.includes(i.feed.id);return["all","today","group"].includes(t.from)?e.filter(a):e},Fd=()=>{const{config:e,updateConfig:t}=Pe(),{articleWidth:r,fontSize:n,layout:a,showFeedIcon:i,themeColor:o}=e;return c.jsxs(c.Fragment,{children:[c.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Theme"}),c.jsx(z.Text,{type:"secondary",children:"Customize your UI theme"}),c.jsxs("div",{className:"setting-row",children:[c.jsxs("div",{children:[c.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Accent color"}),c.jsx(z.Text,{type:"secondary",children:"Choose your accent color"})]}),c.jsx("div",{style:{display:"flex"},children:Fo.map(s=>c.jsx(Qr,{content:s.name,children:c.jsx("button",{type:"button",className:"accent-color-button",style:{backgroundColor:Va(s.name),outline:s.name===o?`1px solid ${Va(s.name)}`:"none"},onClick:()=>{t({themeColor:s.name}),Ua(s.name)},onKeyDown:l=>{(l.key==="Enter"||l.key===" ")&&(t({themeColor:s.name}),Ua(s.name))}})},s.name))})]}),c.jsx(dt,{}),c.jsxs("div",{className:"setting-row",children:[c.jsxs("div",{children:[c.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Compact article list"}),c.jsx(z.Text,{type:"secondary",children:"Use small thumbnail in article list"})]}),c.jsx("div",{children:c.jsx(lr,{checked:a==="small",onChange:s=>t({layout:s?"small":"large"})})})]}),c.jsx(dt,{}),c.jsxs("div",{className:"setting-row",children:[c.jsxs("div",{children:[c.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Show feed icon"}),c.jsx(z.Text,{type:"secondary",children:"Show feed icon in feed list and article list"})]}),c.jsx("div",{children:c.jsx(lr,{checked:i,onChange:s=>t({showFeedIcon:s})})})]}),c.jsx(dt,{}),c.jsxs("div",{className:"setting-row",children:[c.jsxs("div",{children:[c.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Font size"}),c.jsx(z.Text,{type:"secondary",children:"Adjust article text size"})]}),c.jsx("div",{children:c.jsxs(Vn,{children:[c.jsx(z.Text,{style:{fontSize:"0.75rem"},children:"A"}),c.jsx(Hi,{formatTooltip:s=>`${s}rem`,max:1.25,min:.75,showTicks:!0,step:.05,style:{width:200},value:n,onChange:s=>t({fontSize:s})}),c.jsx(z.Text,{style:{fontSize:"1.25rem"},children:"A"})]})})]}),c.jsx(dt,{}),c.jsxs("div",{className:"setting-row",children:[c.jsxs("div",{children:[c.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Article width"}),c.jsx(z.Text,{type:"secondary",children:"Adjust article width"})]}),c.jsx("div",{children:c.jsxs(Vn,{children:[c.jsx(z.Text,{children:"60%"}),c.jsx(Hi,{formatTooltip:s=>`${s}%`,max:90,min:60,showTicks:!0,step:10,style:{width:200},value:r,onChange:s=>t({articleWidth:s})}),c.jsx(z.Text,{children:"90%"})]})})]})]})},ta=()=>{const[e,t]=w.useState(window.innerWidth),r=e<=768;return w.useEffect(()=>{const n=()=>t(window.innerWidth);return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),{screenWidth:e,isMobileView:r}},Ea=e=>e.slice().sort((t,r)=>t.parsing_error_count>0&&r.parsing_error_count===0?-1:t.parsing_error_count===0&&r.parsing_error_count>0?1:0),Rd=()=>{const[e,t]=w.useState(!1),[r]=be.useForm(),[n,a]=w.useState({}),i=A(h=>h.feeds),o=A(h=>h.setFeeds),[s,l]=w.useState(Ea(i)),u=A(h=>h.groups),d=A(h=>h.updateFeedHidden),{isMobileView:f}=ta(),m=s.map(h=>({category:h.category,checked_at:h.checked_at,crawler:h.crawler,feed_url:h.feed_url,key:h.id,parsing_error_count:h.parsing_error_count,title:h.title,hidden:h.hide_globally}));w.useEffect(()=>{l(Ea(i))},[i]);const x=h=>{a(h),t(!0),r.setFieldsValue({crawler:h.crawler,group:h.category.id,title:h.title,url:h.feed_url,hidden:h.hidden})},g=async h=>{Bu(h.key).then(()=>{ie.success("Refreshed"),h.parsing_error_count=0}).catch(()=>{ie.error("Failed to refresh"),h.parsing_error_count++}).finally(()=>{o(i.map(y=>y.id===h.key?{...y,parsing_error_count:h.parsing_error_count}:y))})},v=async h=>{Hu(h.key).then(()=>{ie.success("Unfollowed"),o(i.filter(y=>y.id!==h.key))}).catch(()=>{ie.error("Failed to unfollow")})},S=[{title:"Title",dataIndex:"title",sorter:(h,y)=>h.title.localeCompare(y.title,"en"),render:(h,y)=>{const j=y.parsing_error_count,k=j?`⚠️ ${h}`:h,O=c.jsxs("div",{children:[h,j>0&&c.jsxs(c.Fragment,{children:[c.jsx("br",{}),"⚠️ Parsing error count: ",j]})]});return c.jsx(z.Ellipsis,{expandable:!1,children:c.jsx(Qr,{mini:!0,content:O,children:k})})}},!f&&{title:"Url",dataIndex:"feed_url",sorter:(h,y)=>h.feed_url.localeCompare(y.feed_url,"en"),render:h=>c.jsx(z.Ellipsis,{expandable:!1,showTooltip:!0,children:h})},{title:"Group",dataIndex:"category.title",sorter:(h,y)=>h.category.title.localeCompare(y.category.title,"en"),render:h=>c.jsx(z.Ellipsis,{expandable:!1,showTooltip:!0,children:c.jsx(Zr,{children:h})})},!f&&{title:"Checked at",dataIndex:"checked_at",sorter:(h,y)=>h.checked_at.localeCompare(y.checked_at,"en"),render:h=>c.jsx(z.Ellipsis,{expandable:!1,children:bo(h)})},{title:"Actions",dataIndex:"op",fixed:"right",width:100,render:(h,y)=>c.jsxs(Vn,{children:[c.jsx("button",{"aria-label":"Edit this feed",className:"list-item-action",onClick:()=>x(y),type:"button",children:c.jsx(gc,{})}),c.jsx("button",{"aria-label":"Refresh this feed",className:"list-item-action",onClick:()=>g(y),type:"button",children:c.jsx(ao,{})}),c.jsx(io,{position:"left",focusLock:!0,title:"Unfollow？",onOk:async()=>{await v(y)},children:c.jsx("span",{className:"list-item-action",children:c.jsx(yc,{})})})]})}].filter(Boolean),E=async(h,y,j,k,O,C)=>{zu(h,y,j,k,O,C).then(I=>{o(i.map(M=>M.id===h?{...M,...I.data}:M)),ie.success("Feed updated successfully"),t(!1),r.resetFields()}).catch(()=>{ie.error("Failed to update feed")})};return c.jsxs(c.Fragment,{children:[c.jsx("div",{style:{display:"flex",justifyContent:"center"},children:c.jsx(ft.Search,{className:"search-input",placeholder:"Search feed title or url",searchButton:!0,onChange:h=>l(Ea(i).filter(y=>sr(y.title,h)||sr(y.feed_url,h)))})}),c.jsx(no,{borderCell:!0,className:"feed-table",columns:S,data:m,pagePosition:"bottomCenter",scroll:{x:!0},size:"small"}),n&&c.jsx(Jn,{className:"edit-modal",onOk:r.submit,title:"Edit Feed",unmountOnExit:!0,visible:e,onCancel:()=>{t(!1),r.resetFields()},children:c.jsxs(be,{form:r,labelCol:{span:7},layout:"vertical",wrapperCol:{span:17},onSubmit:h=>{h.url.trim()?E(n.key,h.url,h.title,h.group,h.crawler,h.hidden).then(()=>{n.hidden!==h.hidden&&d(n.key,h.hidden)}):ie.error("Feed URL cannot be empty")},children:[c.jsx(be.Item,{label:"Feed URL",field:"url",rules:[{required:!0}],children:c.jsx(ft,{placeholder:"Please input feed URL"})}),c.jsx(be.Item,{label:"Title",field:"title",rules:[{required:!0}],children:c.jsx(ft,{placeholder:"Please input feed title"})}),c.jsx(be.Item,{label:"Group",required:!0,field:"group",rules:[{required:!0}],children:c.jsx(Me,{placeholder:"Please select",children:u.map(h=>c.jsx(Me.Option,{value:h.id,children:h.title},h.id))})}),c.jsx(be.Item,{label:"Hidden",field:"hidden",initialValue:n.hide_globally,triggerPropName:"checked",rules:[{type:"boolean"}],children:c.jsx(lr,{})}),c.jsx(be.Item,{label:"Fetch original content",field:"crawler",tooltip:c.jsx("div",{children:"Only affects newly retrieved articles"}),style:{marginBottom:0},triggerPropName:"checked",rules:[{type:"boolean"}],children:c.jsx(lr,{})})]})})]})},Nd=()=>{const{config:e,updateConfig:t}=Pe(),{homePage:r,markReadOnScroll:n,orderBy:a,pageSize:i,showStatus:o}=e;return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"setting-row",children:[c.jsxs("div",{children:[c.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Default show status"}),c.jsx(z.Text,{type:"secondary",children:"Which status to show by default:"})]}),c.jsx("div",{children:c.jsxs(Me,{className:"select-style",placeholder:"Select status",value:o,onChange:s=>t({showStatus:s}),children:[c.jsx(Me.Option,{value:"all",children:"All"}),c.jsx(Me.Option,{value:"unread",children:"Unread"})]})})]}),c.jsx(dt,{}),c.jsxs("div",{className:"setting-row",children:[c.jsxs("div",{children:[c.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Default home page"}),c.jsx(z.Text,{type:"secondary",children:"Which page to show by default:"})]}),c.jsx("div",{children:c.jsxs(Me,{onChange:s=>t({homePage:s}),placeholder:"Select page",style:{width:128,marginLeft:16},value:r,children:[c.jsx(Me.Option,{value:"all",children:"All"}),c.jsx(Me.Option,{value:"today",children:"Today"}),c.jsx(Me.Option,{value:"starred",children:"Starred"}),c.jsx(Me.Option,{value:"history",children:"History"})]})})]}),c.jsx(dt,{}),c.jsxs("div",{className:"setting-row",children:[c.jsxs("div",{children:[c.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Entries order"}),c.jsx(z.Text,{type:"secondary",children:"What order to show entries:"})]}),c.jsx("div",{children:c.jsxs(Me,{onChange:s=>t({orderBy:s}),placeholder:"Select order",style:{width:128,marginLeft:16},value:a,children:[c.jsx(Me.Option,{value:"published_at",children:"Published at"}),c.jsx(Me.Option,{value:"created_at",children:"Created at"})]})})]}),c.jsx(dt,{}),c.jsxs("div",{className:"setting-row",children:[c.jsxs("div",{children:[c.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Entries per page"}),c.jsx(z.Text,{type:"secondary",children:"Show how many entries per page:"})]}),c.jsx("div",{children:c.jsx(bc,{defaultValue:i,min:1,mode:"button",onChange:s=>t({pageSize:s}),size:"small",style:{width:128,marginLeft:16}})})]}),c.jsx(dt,{}),c.jsxs("div",{className:"setting-row",children:[c.jsxs("div",{children:[c.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Mark articles as read when scrolled off screen"}),c.jsx(z.Text,{type:"secondary",children:"Automatically mark articles as read when they are scrolled out of the visible screen area"})]}),c.jsx("div",{children:c.jsx(lr,{checked:n,onChange:s=>t({markReadOnScroll:s})})})]})]})},Dd=()=>{const e=A(E=>E.feeds),t=A(E=>E.setFeeds),r=A(E=>E.groups),n=A(E=>E.setGroups),a=A(E=>E.updateGroupHidden),[i,o]=w.useState(!1),[s,l]=w.useState(""),[u,d]=w.useState(!1),[f]=be.useForm(),[m,x]=w.useState({}),g=async()=>{s&&Uu(s).then(E=>{n(h=>[...h,{...E.data,feedCount:0}]),l(""),ie.success("Group added successfully")}).catch(()=>{ie.error("Failed to add group")}),l(""),o(!1)},v=async(E,h,y)=>{$u(E,h,y).then(j=>{t(e.map(k=>k.category.id===E?{...k,category:{...k.category,title:h}}:k)),n(r.map(k=>k.id===E?{...k,...j.data}:k)),ie.success("Group updated successfully"),d(!1),f.resetFields()}).catch(()=>{ie.error("Failed to update group")})},S=async E=>{Vu(E).then(h=>{h.status===204?(n(r.filter(y=>y.id!==E)),ie.success("Group deleted successfully")):ie.error("Failed to delete group")}).catch(()=>{ie.error("Failed to delete group")})};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[r.map(E=>c.jsx(Zr,{className:"tag-style",closable:E.feedCount===0,size:"medium",onClick:()=>{x(E),d(!0),f.setFieldsValue({title:E.title})},onClose:async h=>{h.stopPropagation(),await S(E.id)},children:E.title},E.id)),i?c.jsx(ft,{autoFocus:!0,className:"input-style",onBlur:g,onChange:l,onPressEnter:g,size:"small",value:s}):c.jsx(Zr,{className:"add-group-tag",icon:c.jsx(Js,{}),onClick:()=>o(!0),size:"medium",tabIndex:0,children:"Add"})]}),m&&c.jsx(Jn,{className:"modal-style",onOk:f.submit,title:"Edit Group",unmountOnExit:!0,visible:u,onCancel:()=>{d(!1),f.resetFields()},children:c.jsxs(be,{form:f,layout:"vertical",onSubmit:E=>{v(m.id,E.title,E.hidden).then(()=>{m.hide_globally!==E.hidden&&a(m.id,E.hidden)})},labelCol:{style:{flexBasis:90}},wrapperCol:{style:{flexBasis:"calc(100% - 90px)"}},children:[c.jsx(be.Item,{label:"Title",field:"title",rules:[{required:!0}],children:c.jsx(ft,{placeholder:"Please input group title"})}),c.jsx(be.Item,{label:"Hidden",field:"hidden",initialValue:m.hide_globally,triggerPropName:"checked",rules:[{type:"boolean"}],children:c.jsx(lr,{})})]})})]})},Ld=[{title:"Key",dataIndex:"keyName",render:e=>c.jsx(Zr,{children:e})},{title:"Function",dataIndex:"description"}],Vd=[{key:"1",keyName:"Esc",description:"Dismiss article"},{key:"2",keyName:"←",description:"Previous article"},{key:"3",keyName:"→",description:"Next article"},{key:"4",keyName:"B",description:"Open link externally"},{key:"5",keyName:"D",description:"Fetch original article"},{key:"6",keyName:"M",description:"Mark as read / unread"},{key:"7",keyName:"S",description:"Star / Unstar"}],Ud=()=>c.jsx(no,{borderCell:!0,columns:Ld,data:Vd,pagination:!1,size:"small",style:{margin:"0 auto",width:"80%"}}),$d=()=>c.jsxs(yr,{className:"custom-tabs",defaultActiveTab:"1",tabPosition:"top",children:[c.jsx(yr.TabPane,{title:c.jsxs("span",{children:[c.jsx(xc,{style:{marginRight:6}}),"Feeds"]}),children:c.jsx(Rd,{})},"1"),c.jsx(yr.TabPane,{title:c.jsxs("span",{children:[c.jsx(wc,{style:{marginRight:6}}),"Groups"]}),children:c.jsx(Dd,{})},"2"),c.jsx(yr.TabPane,{title:c.jsxs("span",{children:[c.jsx(Sc,{style:{marginRight:6}}),"General"]}),children:c.jsx(Nd,{})},"3"),c.jsx(yr.TabPane,{title:c.jsxs("span",{children:[c.jsx(Ec,{style:{marginRight:6}}),"Appearance"]}),children:c.jsx(Fd,{})},"4"),c.jsx(yr.TabPane,{title:c.jsxs("span",{children:[c.jsx(Cc,{style:{marginRight:6}}),"Hotkeys"]}),children:c.jsx(Ud,{})},"5")]}),zd=[{required:!0}],Bd=[{required:!0}],Hd=[{type:"boolean"}],qd=()=>{const e=A(r=>r.setVisible),t=A(r=>r.visible);return c.jsx(Jn,{className:"settings-modal",visible:t.settings,alignCenter:!1,title:"Settings",footer:null,unmountOnExit:!0,onCancel:()=>e("settings",!1),autoFocus:!1,focusLock:!0,children:c.jsx($d,{})})},Wd=()=>{const e=A(l=>l.groups),t=A(l=>l.initData),r=A(l=>l.setVisible),n=A(l=>l.visible),[a,i]=w.useState(!1),[o]=be.useForm(),s=async(l,u,d)=>{i(!0),qu(l,u,d).then(()=>{t(),ie.success("Added a feed successfully"),r("addFeed",!1),o.resetFields()}).catch(()=>{ie.error("Failed to add a feed")}),i(!1)};return c.jsx(Jn,{title:"Add Feed",visible:n.addFeed,unmountOnExit:!0,style:{width:"400px"},onOk:o.submit,confirmLoading:a,onCancel:()=>{r("addFeed",!1),o.resetFields()},children:c.jsxs(be,{form:o,labelCol:{span:7},layout:"vertical",wrapperCol:{span:17},onSubmit:l=>{l.url.trim()?s(l.url.trim(),l.group,l.crawler):ie.error("Feed URL cannot be empty")},children:[c.jsx(be.Item,{label:"Feed URL",field:"url",rules:zd,children:c.jsx(ft,{placeholder:"Please input a feed URL"})}),c.jsx(be.Item,{label:"Group",required:!0,field:"group",rules:Bd,children:c.jsx(Me,{placeholder:"Please select a category",showSearch:!0,filterOption:(l,u)=>sr(u.props.children,l),children:e.map(l=>c.jsx(Me.Option,{value:l.id,children:l.title},l.id))})}),c.jsx(be.Item,{label:"Fetch original content",initialValue:!1,field:"crawler",style:{marginBottom:0},triggerPropName:"checked",rules:Hd,children:c.jsx(lr,{})})]})})},Gd=()=>c.jsxs("div",{className:"main",children:[c.jsx(_c,{}),c.jsx(qd,{}),c.jsx(Wd,{})]});function Rn(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Rn=function(r){return typeof r}:Rn=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Rn(e)}function ui(e){var t=typeof e=="string"||e instanceof String;if(!t){var r=Rn(e);throw e===null?r="null":r==="object"&&(r=e.constructor.name),new TypeError("Expected a string but received a ".concat(r))}}function No(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var r in t)typeof e[r]>"u"&&(e[r]=t[r]);return e}var Xd={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function Yd(e,t){ui(e),t=No(t,Xd),t.allow_trailing_dot&&e[e.length-1]==="."&&(e=e.substring(0,e.length-1)),t.allow_wildcard===!0&&e.indexOf("*.")===0&&(e=e.substring(2));var r=e.split("."),n=r[r.length-1];return t.require_tld&&(r.length<2||!t.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(n)||/\s/.test(n))||!t.allow_numeric_tld&&/^\d+$/.test(n)?!1:r.every(function(a){return!(a.length>63&&!t.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(a)||/[\uff01-\uff5e]/.test(a)||/^-|-$/.test(a)||!t.allow_underscores&&/_/.test(a))})}var ns="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",$t="(".concat(ns,"[.]){3}").concat(ns),Kd=new RegExp("^".concat($t,"$")),Se="(?:[0-9a-fA-F]{1,4})",Qd=new RegExp("^("+"(?:".concat(Se,":){7}(?:").concat(Se,"|:)|")+"(?:".concat(Se,":){6}(?:").concat($t,"|:").concat(Se,"|:)|")+"(?:".concat(Se,":){5}(?::").concat($t,"|(:").concat(Se,"){1,2}|:)|")+"(?:".concat(Se,":){4}(?:(:").concat(Se,"){0,1}:").concat($t,"|(:").concat(Se,"){1,3}|:)|")+"(?:".concat(Se,":){3}(?:(:").concat(Se,"){0,2}:").concat($t,"|(:").concat(Se,"){1,4}|:)|")+"(?:".concat(Se,":){2}(?:(:").concat(Se,"){0,3}:").concat($t,"|(:").concat(Se,"){1,5}|:)|")+"(?:".concat(Se,":){1}(?:(:").concat(Se,"){0,4}:").concat($t,"|(:").concat(Se,"){1,6}|:)|")+"(?::((?::".concat(Se,"){0,5}:").concat($t,"|(?::").concat(Se,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");function qn(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return ui(e),t=String(t),t?t==="4"?Kd.test(e):t==="6"?Qd.test(e):!1:qn(e,4)||qn(e,6)}function Zd(e,t){return rf(e)||tf(e,t)||ef(e,t)||Jd()}function Jd(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ef(e,t){if(e){if(typeof e=="string")return as(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return as(e,t)}}function as(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function tf(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),s;!(n=(s=o.next()).done)&&(r.push(s.value),!(t&&r.length===t));n=!0);}catch(l){a=!0,i=l}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function rf(e){if(Array.isArray(e))return e}var nf={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0},af=/^\[([^\]]+)\](?::([0-9]+))?$/;function sf(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function is(e,t){for(var r=0;r<t.length;r++){var n=t[r];if(e===n||sf(n)&&n.test(e))return!0}return!1}function Do(e,t){if(ui(e),!e||/[\s<>]/.test(e)||e.indexOf("mailto:")===0||(t=No(t,nf),t.validate_length&&e.length>=2083)||!t.allow_fragments&&e.includes("#")||!t.allow_query_components&&(e.includes("?")||e.includes("&")))return!1;var r,n,a,i,o,s,l,u;if(l=e.split("#"),e=l.shift(),l=e.split("?"),e=l.shift(),l=e.split("://"),l.length>1){if(r=l.shift().toLowerCase(),t.require_valid_protocol&&t.protocols.indexOf(r)===-1)return!1}else{if(t.require_protocol)return!1;if(e.slice(0,2)==="//"){if(!t.allow_protocol_relative_urls)return!1;l[0]=e.slice(2)}}if(e=l.join("://"),e==="")return!1;if(l=e.split("/"),e=l.shift(),e===""&&!t.require_host)return!0;if(l=e.split("@"),l.length>1){if(t.disallow_auth||l[0]===""||(n=l.shift(),n.indexOf(":")>=0&&n.split(":").length>2))return!1;var d=n.split(":"),f=Zd(d,2),m=f[0],x=f[1];if(m===""&&x==="")return!1}i=l.join("@"),s=null,u=null;var g=i.match(af);if(g?(a="",u=g[1],s=g[2]||null):(l=i.split(":"),a=l.shift(),l.length&&(s=l.join(":"))),s!==null&&s.length>0){if(o=parseInt(s,10),!/^[0-9]+$/.test(s)||o<=0||o>65535)return!1}else if(t.require_port)return!1;return t.host_whitelist?is(a,t.host_whitelist):a===""&&!t.require_host?!0:!(!qn(a)&&!Yd(a,t)&&(!u||!qn(u,6))||(a=a||u,t.host_blacklist&&is(a,t.host_blacklist)))}const Lo=e=>{const t=new URL(e);return`${t.protocol}//${t.hostname}`},Nr=Bt.Item,{Sider:of}=Ic,lf=({group:e,isOpen:t,feedsGroupedById:r})=>{const{config:n}=Pe(),{showAllFeeds:a}=n,i=A(s=>s.hiddenFeedIds);let{unreadCount:o}=e;return!a&&i&&(o=r[e.id].filter(s=>!i.includes(s.id)).reduce((s,l)=>s+l.unreadCount,0)),c.jsxs("div",{className:"group-title",children:[c.jsxs(z.Ellipsis,{expandable:!1,showTooltip:!0,style:{width:o?"80%":"100%"},children:[t?c.jsx(Ac,{}):c.jsx(Oc,{}),e.title]}),o>0&&c.jsx(z.Ellipsis,{className:"unread-count",expandable:!1,children:o})]})},cf=()=>{const e=jc(),t=un(),r=A(C=>C.collapsed),n=A(C=>C.feeds),a=A(C=>C.groups),i=A(C=>C.loading),o=A(C=>C.unreadTotal),s=A(C=>C.unreadToday),l=A(C=>C.starredCount),u=A(C=>C.readCount),d=A(C=>C.toggleCollapsed),f=A(C=>C.hiddenFeedIds),m=A(C=>C.hiddenGroupIds),[x,g]=w.useState([]),[v,S]=w.useState([]),{config:E}=Pe(),{showAllFeeds:h,showFeedIcon:y}=E,j=e.pathname,k=(C,I)=>{S(I)},O=n.reduce((C,I)=>{if(!h&&f.includes(I.id))return C;Do(I.site_url)||(I.site_url=Lo(I.feed_url));const{id:M}=I.category;return C[M]=C[M]||[],C[M].push(I),C},{});return w.useEffect(()=>{g([j]),r||window.innerWidth<=992&&d(!0)},[j]),w.useEffect(()=>{i||S([])},[i]),c.jsx(of,{breakpoint:"lg",className:"sidebar",collapsed:r,collapsedWidth:0,collapsible:!0,onCollapse:d,trigger:null,width:240,style:{borderRight:r?"none":"1px solid var(--color-border-2)",display:r?"none":"block"},children:c.jsxs(Bt,{autoScrollIntoView:!0,collapse:r,defaultSelectedKeys:[j],hasCollapseButton:!0,onClickSubMenu:k,onCollapseChange:d,selectedKeys:x,style:{width:"240px",height:"100%"},children:[c.jsxs("div",{className:"menu-header",style:{visibility:r?"hidden":"visible"},children:[c.jsx(to,{className:"avatar",size:32,children:c.jsx(so,{style:{color:"var(--color-bg-1)"}})}),c.jsx(z.Title,{heading:6,style:{margin:"0"},children:"ReactFlux"})]}),c.jsx(dt,{className:"divider"}),c.jsx(z.Title,{className:"section-title",heading:6,children:"Articles"}),c.jsx(Un,{loading:i,animation:!0,text:{rows:3}}),i?null:c.jsxs("div",{children:[c.jsx(Nr,{onClick:()=>t("/all"),children:c.jsxs("div",{className:"custom-menu-item",children:[c.jsxs("span",{children:[c.jsx(Tc,{}),"All"]}),c.jsx(z.Ellipsis,{className:"item-count",expandable:!1,children:o||""})]})},"/all"),c.jsx(Nr,{onClick:()=>t("/today"),children:c.jsxs("div",{className:"custom-menu-item",children:[c.jsxs("span",{children:[c.jsx(kc,{}),"Today"]}),c.jsx(z.Ellipsis,{className:"item-count",expandable:!1,children:s||""})]})},"/today"),c.jsx(Nr,{onClick:()=>t("/starred"),children:c.jsxs("div",{className:"custom-menu-item",children:[c.jsxs("span",{children:[c.jsx(si,{}),"Starred"]}),c.jsx(z.Ellipsis,{className:"item-count",expandable:!1,children:l||""})]})},"/starred"),c.jsx(Nr,{onClick:()=>t("/history"),children:c.jsxs("div",{className:"custom-menu-item",children:[c.jsxs("span",{children:[c.jsx(Mc,{}),"History"]}),c.jsx(z.Ellipsis,{className:"item-count",expandable:!1,children:u||""})]})},"/history")]}),c.jsx(z.Title,{className:"section-title",heading:6,children:"Feeds"}),c.jsx(Un,{loading:i,animation:!0,text:{rows:6}}),i?null:a.filter(C=>h||!m.includes(C.id)).map(C=>{var I;return c.jsx(Bt.SubMenu,{selectable:!0,title:c.jsx(lf,{group:C,isOpen:v.includes(`/group/${C.id}`),feedsGroupedById:O}),onClick:M=>{g([`/group/${C.id}`]),!(M.target.tagName==="svg"||M.target.tagName==="path")&&j!==`/group/${C.id}`&&t(`/group/${C.id}`)},children:(I=O[C.id])==null?void 0:I.map(M=>c.jsx(Nr,{onClick:V=>{V.stopPropagation(),g([`/group/${C.id}`]),t(`/feed/${M.id}`)},children:c.jsxs("div",{className:"custom-menu-item",children:[c.jsxs(z.Ellipsis,{expandable:!1,showTooltip:!0,style:{width:M.unreadCount!==0?"80%":"100%"},children:[y&&c.jsx("img",{src:`https://icons.duckduckgo.com/ip3/${new URL(M.site_url).hostname}.ico`,alt:"Icon",style:{marginRight:"8px",width:"16px",height:"16px",verticalAlign:"-2px"}}),M.title]}),M.unreadCount!==0&&c.jsx(z.Ellipsis,{className:"item-count",expandable:!1,children:M.unreadCount})]})},`/feed/${M.id}`))},`/group/${C.id}`)})]})})},uf=()=>{const e=A(i=>i.initData),{config:t}=Pe(),{theme:r}=t,n=A(i=>i.isSysDarkMode),a=A(i=>i.setIsSysDarkMode);return w.useEffect(()=>{e();const i=s=>{a(s.matches)},o=window.matchMedia("(prefers-color-scheme: dark)");return o.addEventListener("change",i),()=>{o.removeEventListener("change",i)}},[]),w.useEffect(()=>{(o=>{document.body.setAttribute("arco-theme",o?"dark":"light"),document.body.style.colorScheme=o?"dark":"light"})(r==="system"?n:r==="dark")},[n,r]),c.jsxs("div",{className:"app",children:[c.jsx(cf,{}),c.jsx(Pd,{}),c.jsx(Gd,{})]})};var hn={};(function e(t,r,n,a){var i=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",s=function(){if(!t.OffscreenCanvas)return!1;var b=new OffscreenCanvas(1,1),p=b.getContext("2d");p.fillRect(0,0,1,1);var F=b.transferToImageBitmap();try{p.createPattern(F,"no-repeat")}catch{return!1}return!0}();function l(){}function u(b){var p=r.exports.Promise,F=p!==void 0?p:t.Promise;return typeof F=="function"?new F(b):(b(l,l),null)}var d=function(b,p){return{transform:function(F){if(b)return F;if(p.has(F))return p.get(F);var N=new OffscreenCanvas(F.width,F.height),D=N.getContext("2d");return D.drawImage(F,0,0),p.set(F,N),N},clear:function(){p.clear()}}}(s,new Map),f=function(){var b=Math.floor(16.666666666666668),p,F,N={},D=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(p=function(U){var $=Math.random();return N[$]=requestAnimationFrame(function L(q){D===q||D+b-1<q?(D=q,delete N[$],U()):N[$]=requestAnimationFrame(L)}),$},F=function(U){N[U]&&cancelAnimationFrame(N[U])}):(p=function(U){return setTimeout(U,b)},F=function(U){return clearTimeout(U)}),{frame:p,cancel:F}}(),m=function(){var b,p,F={};function N(D){function U($,L){D.postMessage({options:$||{},callback:L})}D.init=function(L){var q=L.transferControlToOffscreen();D.postMessage({canvas:q},[q])},D.fire=function(L,q,X){if(p)return U(L,null),p;var G=Math.random().toString(36).slice(2);return p=u(function(ee){function ae(ce){ce.data.callback===G&&(delete F[G],D.removeEventListener("message",ae),p=null,d.clear(),X(),ee())}D.addEventListener("message",ae),U(L,G),F[G]=ae.bind(null,{data:{callback:G}})}),p},D.reset=function(){D.postMessage({reset:!0});for(var L in F)F[L](),delete F[L]}}return function(){if(b)return b;if(!n&&i){var D=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{b=new Worker(URL.createObjectURL(new Blob([D])))}catch(U){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",U),null}N(b)}return b}}(),x={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function g(b,p){return p?p(b):b}function v(b){return b!=null}function S(b,p,F){return g(b&&v(b[p])?b[p]:x[p],F)}function E(b){return b<0?0:Math.floor(b)}function h(b,p){return Math.floor(Math.random()*(p-b))+b}function y(b){return parseInt(b,16)}function j(b){return b.map(k)}function k(b){var p=String(b).replace(/[^0-9a-f]/gi,"");return p.length<6&&(p=p[0]+p[0]+p[1]+p[1]+p[2]+p[2]),{r:y(p.substring(0,2)),g:y(p.substring(2,4)),b:y(p.substring(4,6))}}function O(b){var p=S(b,"origin",Object);return p.x=S(p,"x",Number),p.y=S(p,"y",Number),p}function C(b){b.width=document.documentElement.clientWidth,b.height=document.documentElement.clientHeight}function I(b){var p=b.getBoundingClientRect();b.width=p.width,b.height=p.height}function M(b){var p=document.createElement("canvas");return p.style.position="fixed",p.style.top="0px",p.style.left="0px",p.style.pointerEvents="none",p.style.zIndex=b,p}function V(b,p,F,N,D,U,$,L,q){b.save(),b.translate(p,F),b.rotate(U),b.scale(N,D),b.arc(0,0,1,$,L,q),b.restore()}function B(b){var p=b.angle*(Math.PI/180),F=b.spread*(Math.PI/180);return{x:b.x,y:b.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:b.startVelocity*.5+Math.random()*b.startVelocity,angle2D:-p+(.5*F-Math.random()*F),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:b.color,shape:b.shape,tick:0,totalTicks:b.ticks,decay:b.decay,drift:b.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:b.gravity*3,ovalScalar:.6,scalar:b.scalar,flat:b.flat}}function se(b,p){p.x+=Math.cos(p.angle2D)*p.velocity+p.drift,p.y+=Math.sin(p.angle2D)*p.velocity+p.gravity,p.velocity*=p.decay,p.flat?(p.wobble=0,p.wobbleX=p.x+10*p.scalar,p.wobbleY=p.y+10*p.scalar,p.tiltSin=0,p.tiltCos=0,p.random=1):(p.wobble+=p.wobbleSpeed,p.wobbleX=p.x+10*p.scalar*Math.cos(p.wobble),p.wobbleY=p.y+10*p.scalar*Math.sin(p.wobble),p.tiltAngle+=.1,p.tiltSin=Math.sin(p.tiltAngle),p.tiltCos=Math.cos(p.tiltAngle),p.random=Math.random()+2);var F=p.tick++/p.totalTicks,N=p.x+p.random*p.tiltCos,D=p.y+p.random*p.tiltSin,U=p.wobbleX+p.random*p.tiltCos,$=p.wobbleY+p.random*p.tiltSin;if(b.fillStyle="rgba("+p.color.r+", "+p.color.g+", "+p.color.b+", "+(1-F)+")",b.beginPath(),o&&p.shape.type==="path"&&typeof p.shape.path=="string"&&Array.isArray(p.shape.matrix))b.fill(rt(p.shape.path,p.shape.matrix,p.x,p.y,Math.abs(U-N)*.1,Math.abs($-D)*.1,Math.PI/10*p.wobble));else if(p.shape.type==="bitmap"){var L=Math.PI/10*p.wobble,q=Math.abs(U-N)*.1,X=Math.abs($-D)*.1,G=p.shape.bitmap.width*p.scalar,ee=p.shape.bitmap.height*p.scalar,ae=new DOMMatrix([Math.cos(L)*q,Math.sin(L)*q,-Math.sin(L)*X,Math.cos(L)*X,p.x,p.y]);ae.multiplySelf(new DOMMatrix(p.shape.matrix));var ce=b.createPattern(d.transform(p.shape.bitmap),"no-repeat");ce.setTransform(ae),b.globalAlpha=1-F,b.fillStyle=ce,b.fillRect(p.x-G/2,p.y-ee/2,G,ee),b.globalAlpha=1}else if(p.shape==="circle")b.ellipse?b.ellipse(p.x,p.y,Math.abs(U-N)*p.ovalScalar,Math.abs($-D)*p.ovalScalar,Math.PI/10*p.wobble,0,2*Math.PI):V(b,p.x,p.y,Math.abs(U-N)*p.ovalScalar,Math.abs($-D)*p.ovalScalar,Math.PI/10*p.wobble,0,2*Math.PI);else if(p.shape==="star")for(var Y=Math.PI/2*3,K=4*p.scalar,ke=8*p.scalar,me=p.x,Ce=p.y,$e=5,ve=Math.PI/$e;$e--;)me=p.x+Math.cos(Y)*ke,Ce=p.y+Math.sin(Y)*ke,b.lineTo(me,Ce),Y+=ve,me=p.x+Math.cos(Y)*K,Ce=p.y+Math.sin(Y)*K,b.lineTo(me,Ce),Y+=ve;else b.moveTo(Math.floor(p.x),Math.floor(p.y)),b.lineTo(Math.floor(p.wobbleX),Math.floor(D)),b.lineTo(Math.floor(U),Math.floor($)),b.lineTo(Math.floor(N),Math.floor(p.wobbleY));return b.closePath(),b.fill(),p.tick<p.totalTicks}function le(b,p,F,N,D){var U=p.slice(),$=b.getContext("2d"),L,q,X=u(function(G){function ee(){L=q=null,$.clearRect(0,0,N.width,N.height),d.clear(),D(),G()}function ae(){n&&!(N.width===a.width&&N.height===a.height)&&(N.width=b.width=a.width,N.height=b.height=a.height),!N.width&&!N.height&&(F(b),N.width=b.width,N.height=b.height),$.clearRect(0,0,N.width,N.height),U=U.filter(function(ce){return se($,ce)}),U.length?L=f.frame(ae):ee()}L=f.frame(ae),q=ee});return{addFettis:function(G){return U=U.concat(G),X},canvas:b,promise:X,reset:function(){L&&f.cancel(L),q&&q()}}}function re(b,p){var F=!b,N=!!S(p||{},"resize"),D=!1,U=S(p,"disableForReducedMotion",Boolean),$=i&&!!S(p||{},"useWorker"),L=$?m():null,q=F?C:I,X=b&&L?!!b.__confetti_initialized:!1,G=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,ee;function ae(Y,K,ke){for(var me=S(Y,"particleCount",E),Ce=S(Y,"angle",Number),$e=S(Y,"spread",Number),ve=S(Y,"startVelocity",Number),at=S(Y,"decay",Number),vt=S(Y,"gravity",Number),ze=S(Y,"drift",Number),it=S(Y,"colors",j),R=S(Y,"ticks",Number),ue=S(Y,"shapes"),xe=S(Y,"scalar"),_e=!!S(Y,"flat"),gt=O(Y),Ct=me,Rt=[],ur=b.width*gt.x,De=b.height*gt.y;Ct--;)Rt.push(B({x:ur,y:De,angle:Ce,spread:$e,startVelocity:ve,color:it[Ct%it.length],shape:ue[h(0,ue.length)],ticks:R,decay:at,gravity:vt,drift:ze,scalar:xe,flat:_e}));return ee?ee.addFettis(Rt):(ee=le(b,Rt,q,K,ke),ee.promise)}function ce(Y){var K=U||S(Y,"disableForReducedMotion",Boolean),ke=S(Y,"zIndex",Number);if(K&&G)return u(function(ve){ve()});F&&ee?b=ee.canvas:F&&!b&&(b=M(ke),document.body.appendChild(b)),N&&!X&&q(b);var me={width:b.width,height:b.height};L&&!X&&L.init(b),X=!0,L&&(b.__confetti_initialized=!0);function Ce(){if(L){var ve={getBoundingClientRect:function(){if(!F)return b.getBoundingClientRect()}};q(ve),L.postMessage({resize:{width:ve.width,height:ve.height}});return}me.width=me.height=null}function $e(){ee=null,N&&(D=!1,t.removeEventListener("resize",Ce)),F&&b&&(document.body.removeChild(b),b=null,X=!1)}return N&&!D&&(D=!0,t.addEventListener("resize",Ce,!1)),L?L.fire(Y,me,$e):ae(Y,me,$e)}return ce.reset=function(){L&&L.reset(),ee&&ee.reset()},ce}var fe;function ge(){return fe||(fe=re(null,{useWorker:!0,resize:!0})),fe}function rt(b,p,F,N,D,U,$){var L=new Path2D(b),q=new Path2D;q.addPath(L,new DOMMatrix(p));var X=new Path2D;return X.addPath(q,new DOMMatrix([Math.cos($)*D,Math.sin($)*D,-Math.sin($)*U,Math.cos($)*U,F,N])),X}function Ne(b){if(!o)throw new Error("path confetti are not supported in this browser");var p,F;typeof b=="string"?p=b:(p=b.path,F=b.matrix);var N=new Path2D(p),D=document.createElement("canvas"),U=D.getContext("2d");if(!F){for(var $=1e3,L=$,q=$,X=0,G=0,ee,ae,ce=0;ce<$;ce+=2)for(var Y=0;Y<$;Y+=2)U.isPointInPath(N,ce,Y,"nonzero")&&(L=Math.min(L,ce),q=Math.min(q,Y),X=Math.max(X,ce),G=Math.max(G,Y));ee=X-L,ae=G-q;var K=10,ke=Math.min(K/ee,K/ae);F=[ke,0,0,ke,-Math.round(ee/2+L)*ke,-Math.round(ae/2+q)*ke]}return{type:"path",path:p,matrix:F}}function nt(b){var p,F=1,N="#000000",D='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof b=="string"?p=b:(p=b.text,F="scalar"in b?b.scalar:F,D="fontFamily"in b?b.fontFamily:D,N="color"in b?b.color:N);var U=10*F,$=""+U+"px "+D,L=new OffscreenCanvas(U,U),q=L.getContext("2d");q.font=$;var X=q.measureText(p),G=Math.ceil(X.actualBoundingBoxRight+X.actualBoundingBoxLeft),ee=Math.ceil(X.actualBoundingBoxAscent+X.actualBoundingBoxDescent),ae=2,ce=X.actualBoundingBoxLeft+ae,Y=X.actualBoundingBoxAscent+ae;G+=ae+ae,ee+=ae+ae,L=new OffscreenCanvas(G,ee),q=L.getContext("2d"),q.font=$,q.fillStyle=N,q.fillText(p,ce,Y);var K=1/F;return{type:"bitmap",bitmap:L.transferToImageBitmap(),matrix:[K,0,0,K,-G*K/2,-ee*K/2]}}r.exports=function(){return ge().apply(this,arguments)},r.exports.reset=function(){ge().reset()},r.exports.create=re,r.exports.shapeFromPath=Ne,r.exports.shapeFromText=nt})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),hn,!1);const df=hn.exports;hn.exports.create;const Et=w.createContext(null),Ir=({children:e})=>{const[t,r]=w.useState(0),[n,a]=w.useState(0),[i,o]=w.useState(0),[s,l]=w.useState(0),[u,d]=w.useState(!1),[f,m]=w.useState(!1),[x,g]=w.useState([]),[v,S]=w.useState([]),[E,h]=w.useState([]),[y,j]=w.useState(Re("showStatus")),[k,O]=w.useState("0"),[C,I]=w.useState(""),[M,V]=w.useState(!0),[B,se]=w.useState(!1),le=w.useRef(null),re=w.useMemo(()=>({entries:x,entryDetailRef:le,filteredEntries:E,filterStatus:y,filterString:C,filterType:k,isArticleFocused:B,loading:M,loadMoreUnreadVisible:f,loadMoreVisible:u,offset:i,setEntries:g,setFilteredEntries:h,setFilterStatus:j,setFilterString:I,setFilterType:O,setIsArticleFocused:se,setLoading:V,setLoadMoreUnreadVisible:m,setLoadMoreVisible:d,setOffset:o,setTotal:r,setUnreadCount:a,setUnreadEntries:S,setUnreadOffset:l,total:t,unreadCount:n,unreadEntries:v,unreadOffset:s}),[x,E,y,C,k,B,M,f,u,i,t,n,v,s]);return c.jsx(Et.Provider,{value:re,children:e})},di=()=>{const e=A(h=>h.setUnreadTotal),t=A(h=>h.setUnreadToday),r=A(h=>h.setReadCount),n=A(h=>h.setStarredCount),a=A(h=>h.activeContent),i=A(h=>h.setActiveContent),o=A(h=>h.updateFeedUnreadCount),s=A(h=>h.updateGroupUnreadCount),{setEntries:l,setFilteredEntries:u,setUnreadCount:d,setUnreadEntries:f}=w.useContext(Et),m=(h,y)=>h.map(j=>j.id===y.id?y:j),x=(h,y)=>{const{id:j,category:{id:k}}=h.feed,O=ku(h.published_at);o(j,y),s(k,y),y==="read"?(e(I=>Math.max(0,I-1)),d(I=>Math.max(0,I-1)),r(I=>I+1),O&&t(I=>Math.max(0,I-1))):(e(I=>I+1),d(I=>I+1),r(I=>Math.max(0,I-1)),O&&t(I=>I+1));const C={...h,status:y};a&&i(C),l(I=>m(I,C)),f(I=>m(I,C)),u(I=>m(I,C))},g=(h,y)=>{y?(n(k=>k+1),df({particleCount:100,angle:120,spread:70,origin:{x:1,y:1}})):n(k=>Math.max(0,k-1));const j={...h,starred:y};a&&i(j),l(k=>m(k,j)),f(k=>m(k,j)),u(k=>m(k,j))};return{handleEntryStatusUpdate:x,handleFetchContent:async()=>{Fu(a.id).then(h=>{ie.success("Fetched content successfully"),i({...a,content:h.data.content})}).catch(()=>{ie.error("Failed to fetch content, please try again later")})},handleToggleStarred:async h=>{const y=!h.starred;g(h,y),Pu(h.id).catch(()=>{ie.error(`Failed to ${y?"star":"unstar"} entry, please try again later`),g(h,!y)})},handleToggleStatus:async h=>{const y=h.status,j=y==="read"?"unread":"read";x(h,j),wo(h.id,j).catch(()=>{ie.error(`Failed to mark entry as ${j}, please try again later`),x(h,y)})}}},ss=(e,t="start")=>{const r=document.querySelector(e);r&&r.scrollIntoView({behavior:"smooth",block:t})},fi=()=>{const{config:e}=Pe(),{pageSize:t,showAllFeeds:r}=e,n=A(B=>B.hiddenFeedIds),{entries:a,filterStatus:i,filterString:o,filterType:s,offset:l,setEntries:u,setFilteredEntries:d,setLoadMoreUnreadVisible:f,setLoadMoreVisible:m,setOffset:x,setUnreadEntries:g,setUnreadOffset:v,total:S,unreadCount:E,unreadEntries:h,unreadOffset:y}=w.useContext(Et),[j,k]=w.useState(!1),O=B=>{var fe;const re=(fe=new DOMParser().parseFromString(B.content,"text/html").querySelector("img"))==null?void 0:fe.getAttribute("src");return{...B,imgSrc:re}},C=()=>{i==="all"?x(B=>B+t):v(B=>B+t)},I=B=>{const se=new Map([...(i==="all"?a:h).map(re=>[re.id,re]),...B.map(re=>[re.id,re])]),le=Array.from(se.values());return i==="all"?(u(le),m(le.length<S)):(g(le),f(le.length<E)),le},M=(B,se)=>{const le=o?Ro(B,s,i,o):B;return Hn(le,se,r,n)};return{parseFirstImage:O,handleLoadMore:async(B,se)=>{var le;k(!0);try{let re;if(i==="all"?re=await se(l+t):re=await se(y+t,i),(le=re==null?void 0:re.data)!=null&&le.entries){C();const fe=re.data.entries.map(O),ge=I(fe),rt=M(ge,B);d(rt)}}catch(re){console.error("Error fetching more articles:",re)}k(!1)},loadingMore:j}},Vo=(e,t,r)=>{const{entryDetailRef:n,filteredEntries:a,filterStatus:i,loadMoreUnreadVisible:o,loadMoreVisible:s}=w.useContext(Et),l=A(C=>C.activeContent),u=A(C=>C.setActiveContent),{handleLoadMore:d}=fi(),[f,m]=w.useState(!1),[x,g]=w.useState(!1),{isMobileView:v}=ta();w.useEffect(()=>{const C=document.querySelector(".entry-list");!C||!v||(l?C.style.visibility="hidden":C.style.visibility="visible")},[l,v]),w.useEffect(()=>{x&&!f&&(h(e),g(!1))},[f,x]);const S=C=>{l&&(u(null),C.current&&(C.current.setAttribute("tabIndex","-1"),C.current.focus()),n.current&&n.current.scrollTo(0,0))},E=()=>{const C=a.findIndex(I=>I.id===(l==null?void 0:l.id));if(C>0){const I=a[C-1];t(I),ss(".card-custom-selected-style","end")}},h=C=>{if(f)return;const I=a.findIndex(V=>V.id===(l==null?void 0:l.id));if(I===a.length-1&&(i==="all"&&s||o)){m(!0),d(C,r).then(()=>g(!0)).finally(()=>m(!1));return}if(I===-1){const V=document.querySelector(".entry-list");V&&V.scrollTo(0,0)}if(I<a.length-1){const V=a[I+1];t(V),g(!1),ss(".card-custom-selected-style")}};return{handleEscapeKey:S,handleLeftKey:E,handleRightKey:h,handleBKey:()=>{l&&window.open(l.url,"_blank")},handleDKey:C=>{l&&C()},handleMKey:C=>{l&&C()},handleSKey:C=>{l&&C()}}};var Uo={},hi={},pi={};Object.defineProperty(pi,"__esModule",{value:!0});var os="html",ls="head",En="body",ff=/<([a-zA-Z]+[0-9]?)/,cs=/<head[^]*>/i,us=/<body[^]*>/i,Wn=function(e,t){throw new Error("This browser does not support `document.implementation.createHTMLDocument`")},$a=function(e,t){throw new Error("This browser does not support `DOMParser.prototype.parseFromString`")},ds=typeof window=="object"&&window.DOMParser;if(typeof ds=="function"){var hf=new ds,pf="text/html";$a=function(e,t){return t&&(e="<".concat(t,">").concat(e,"</").concat(t,">")),hf.parseFromString(e,pf)},Wn=$a}if(typeof document=="object"&&document.implementation){var Cn=document.implementation.createHTMLDocument();Wn=function(e,t){if(t){var r=Cn.documentElement.querySelector(t);return r&&(r.innerHTML=e),Cn}return Cn.documentElement.innerHTML=e,Cn}}var _n=typeof document=="object"&&document.createElement("template"),za;_n&&_n.content&&(za=function(e){return _n.innerHTML=e,_n.content.childNodes});function mf(e){var t,r,n=e.match(ff),a=n&&n[1]?n[1].toLowerCase():"";switch(a){case os:{var i=$a(e);if(!cs.test(e)){var o=i.querySelector(ls);(t=o==null?void 0:o.parentNode)===null||t===void 0||t.removeChild(o)}if(!us.test(e)){var o=i.querySelector(En);(r=o==null?void 0:o.parentNode)===null||r===void 0||r.removeChild(o)}return i.querySelectorAll(os)}case ls:case En:{var s=Wn(e).querySelectorAll(a);return us.test(e)&&cs.test(e)?s[0].parentNode.childNodes:s}default:{if(za)return za(e);var o=Wn(e,En).querySelector(En);return o.childNodes}}}pi.default=mf;var Tr={},$o={},pn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Doctype=e.CDATA=e.Tag=e.Style=e.Script=e.Comment=e.Directive=e.Text=e.Root=e.isTag=e.ElementType=void 0;var t;(function(n){n.Root="root",n.Text="text",n.Directive="directive",n.Comment="comment",n.Script="script",n.Style="style",n.Tag="tag",n.CDATA="cdata",n.Doctype="doctype"})(t=e.ElementType||(e.ElementType={}));function r(n){return n.type===t.Tag||n.type===t.Script||n.type===t.Style}e.isTag=r,e.Root=t.Root,e.Text=t.Text,e.Directive=t.Directive,e.Comment=t.Comment,e.Script=t.Script,e.Style=t.Style,e.Tag=t.Tag,e.CDATA=t.CDATA,e.Doctype=t.Doctype})(pn);var Z={},Xt=de&&de.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hr=de&&de.__assign||function(){return Hr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Hr.apply(this,arguments)};Object.defineProperty(Z,"__esModule",{value:!0});Z.cloneNode=Z.hasChildren=Z.isDocument=Z.isDirective=Z.isComment=Z.isText=Z.isCDATA=Z.isTag=Z.Element=Z.Document=Z.CDATA=Z.NodeWithChildren=Z.ProcessingInstruction=Z.Comment=Z.Text=Z.DataNode=Z.Node=void 0;var qe=pn,mi=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(t){this.prev=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(t){this.next=t},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(t){return t===void 0&&(t=!1),vi(this,t)},e}();Z.Node=mi;var ra=function(e){Xt(t,e);function t(r){var n=e.call(this)||this;return n.data=r,n}return Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(r){this.data=r},enumerable:!1,configurable:!0}),t}(mi);Z.DataNode=ra;var zo=function(e){Xt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=qe.ElementType.Text,r}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(ra);Z.Text=zo;var Bo=function(e){Xt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=qe.ElementType.Comment,r}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(ra);Z.Comment=Bo;var Ho=function(e){Xt(t,e);function t(r,n){var a=e.call(this,n)||this;return a.name=r,a.type=qe.ElementType.Directive,a}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(ra);Z.ProcessingInstruction=Ho;var na=function(e){Xt(t,e);function t(r){var n=e.call(this)||this;return n.children=r,n}return Object.defineProperty(t.prototype,"firstChild",{get:function(){var r;return(r=this.children[0])!==null&&r!==void 0?r:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(r){this.children=r},enumerable:!1,configurable:!0}),t}(mi);Z.NodeWithChildren=na;var qo=function(e){Xt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=qe.ElementType.CDATA,r}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(na);Z.CDATA=qo;var Wo=function(e){Xt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=qe.ElementType.Root,r}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(na);Z.Document=Wo;var Go=function(e){Xt(t,e);function t(r,n,a,i){a===void 0&&(a=[]),i===void 0&&(i=r==="script"?qe.ElementType.Script:r==="style"?qe.ElementType.Style:qe.ElementType.Tag);var o=e.call(this,a)||this;return o.name=r,o.attribs=n,o.type=i,o}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(r){this.name=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var r=this;return Object.keys(this.attribs).map(function(n){var a,i;return{name:n,value:r.attribs[n],namespace:(a=r["x-attribsNamespace"])===null||a===void 0?void 0:a[n],prefix:(i=r["x-attribsPrefix"])===null||i===void 0?void 0:i[n]}})},enumerable:!1,configurable:!0}),t}(na);Z.Element=Go;function Xo(e){return(0,qe.isTag)(e)}Z.isTag=Xo;function Yo(e){return e.type===qe.ElementType.CDATA}Z.isCDATA=Yo;function Ko(e){return e.type===qe.ElementType.Text}Z.isText=Ko;function Qo(e){return e.type===qe.ElementType.Comment}Z.isComment=Qo;function Zo(e){return e.type===qe.ElementType.Directive}Z.isDirective=Zo;function Jo(e){return e.type===qe.ElementType.Root}Z.isDocument=Jo;function vf(e){return Object.prototype.hasOwnProperty.call(e,"children")}Z.hasChildren=vf;function vi(e,t){t===void 0&&(t=!1);var r;if(Ko(e))r=new zo(e.data);else if(Qo(e))r=new Bo(e.data);else if(Xo(e)){var n=t?Ca(e.children):[],a=new Go(e.name,Hr({},e.attribs),n);n.forEach(function(l){return l.parent=a}),e.namespace!=null&&(a.namespace=e.namespace),e["x-attribsNamespace"]&&(a["x-attribsNamespace"]=Hr({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(a["x-attribsPrefix"]=Hr({},e["x-attribsPrefix"])),r=a}else if(Yo(e)){var n=t?Ca(e.children):[],i=new qo(n);n.forEach(function(u){return u.parent=i}),r=i}else if(Jo(e)){var n=t?Ca(e.children):[],o=new Wo(n);n.forEach(function(u){return u.parent=o}),e["x-mode"]&&(o["x-mode"]=e["x-mode"]),r=o}else if(Zo(e)){var s=new Ho(e.name,e.data);e["x-name"]!=null&&(s["x-name"]=e["x-name"],s["x-publicId"]=e["x-publicId"],s["x-systemId"]=e["x-systemId"]),r=s}else throw new Error("Not implemented yet: ".concat(e.type));return r.startIndex=e.startIndex,r.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(r.sourceCodeLocation=e.sourceCodeLocation),r}Z.cloneNode=vi;function Ca(e){for(var t=e.map(function(n){return vi(n,!0)}),r=1;r<t.length;r++)t[r].prev=t[r-1],t[r-1].next=t[r];return t}(function(e){var t=de&&de.__createBinding||(Object.create?function(s,l,u,d){d===void 0&&(d=u);var f=Object.getOwnPropertyDescriptor(l,u);(!f||("get"in f?!l.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(s,d,f)}:function(s,l,u,d){d===void 0&&(d=u),s[d]=l[u]}),r=de&&de.__exportStar||function(s,l){for(var u in s)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&t(l,s,u)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var n=pn,a=Z;r(Z,e);var i={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},o=function(){function s(l,u,d){this.dom=[],this.root=new a.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof u=="function"&&(d=u,u=i),typeof l=="object"&&(u=l,l=void 0),this.callback=l??null,this.options=u??i,this.elementCB=d??null}return s.prototype.onparserinit=function(l){this.parser=l},s.prototype.onreset=function(){this.dom=[],this.root=new a.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},s.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},s.prototype.onerror=function(l){this.handleCallback(l)},s.prototype.onclosetag=function(){this.lastNode=null;var l=this.tagStack.pop();this.options.withEndIndices&&(l.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(l)},s.prototype.onopentag=function(l,u){var d=this.options.xmlMode?n.ElementType.Tag:void 0,f=new a.Element(l,u,void 0,d);this.addNode(f),this.tagStack.push(f)},s.prototype.ontext=function(l){var u=this.lastNode;if(u&&u.type===n.ElementType.Text)u.data+=l,this.options.withEndIndices&&(u.endIndex=this.parser.endIndex);else{var d=new a.Text(l);this.addNode(d),this.lastNode=d}},s.prototype.oncomment=function(l){if(this.lastNode&&this.lastNode.type===n.ElementType.Comment){this.lastNode.data+=l;return}var u=new a.Comment(l);this.addNode(u),this.lastNode=u},s.prototype.oncommentend=function(){this.lastNode=null},s.prototype.oncdatastart=function(){var l=new a.Text(""),u=new a.CDATA([l]);this.addNode(u),l.parent=u,this.lastNode=l},s.prototype.oncdataend=function(){this.lastNode=null},s.prototype.onprocessinginstruction=function(l,u){var d=new a.ProcessingInstruction(l,u);this.addNode(d)},s.prototype.handleCallback=function(l){if(typeof this.callback=="function")this.callback(l,this.dom);else if(l)throw l},s.prototype.addNode=function(l){var u=this.tagStack[this.tagStack.length-1],d=u.children[u.children.length-1];this.options.withStartIndices&&(l.startIndex=this.parser.startIndex),this.options.withEndIndices&&(l.endIndex=this.parser.endIndex),u.children.push(l),d&&(l.prev=d,d.next=l),l.parent=u,this.lastNode=null},s}();e.DomHandler=o,e.default=o})($o);var el={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CASE_SENSITIVE_TAG_NAMES_MAP=e.CASE_SENSITIVE_TAG_NAMES=void 0,e.CASE_SENSITIVE_TAG_NAMES=["animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","linearGradient","radialGradient","textPath"],e.CASE_SENSITIVE_TAG_NAMES_MAP=e.CASE_SENSITIVE_TAG_NAMES.reduce(function(t,r){return t[r.toLowerCase()]=r,t},{})})(el);Object.defineProperty(Tr,"__esModule",{value:!0});Tr.formatDOM=Tr.formatAttributes=void 0;var jn=$o,gf=el;function yf(e){return gf.CASE_SENSITIVE_TAG_NAMES_MAP[e]}function tl(e){for(var t={},r=0,n=e.length;r<n;r++){var a=e[r];t[a.name]=a.value}return t}Tr.formatAttributes=tl;function bf(e){e=e.toLowerCase();var t=yf(e);return t||e}function rl(e,t,r){t===void 0&&(t=null);for(var n=[],a,i=0,o=e.length;i<o;i++){var s=e[i];switch(s.nodeType){case 1:{var l=bf(s.nodeName);a=new jn.Element(l,tl(s.attributes)),a.children=rl(l==="template"?s.content.childNodes:s.childNodes,a);break}case 3:a=new jn.Text(s.nodeValue);break;case 8:a=new jn.Comment(s.nodeValue);break;default:continue}var u=n[i-1]||null;u&&(u.next=a),a.parent=t,a.prev=u,a.next=null,n.push(a)}return r&&(a=new jn.ProcessingInstruction(r.substring(0,r.indexOf(" ")).toLowerCase(),r),a.next=n[0]||null,a.parent=t,n.unshift(a),n[1]&&(n[1].prev=n[0])),n}Tr.formatDOM=rl;var xf=de&&de.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hi,"__esModule",{value:!0});var wf=xf(pi),Sf=Tr,Ef=/<(![a-zA-Z\s]+)>/;function Cf(e){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];var t=e.match(Ef),r=t?t[1]:void 0;return(0,Sf.formatDOM)((0,wf.default)(e),null,r)}hi.default=Cf;var aa={},mt={},ia={},_f=0;ia.SAME=_f;var jf=1;ia.CAMELCASE=jf;ia.possibleStandardNames={accept:0,acceptCharset:1,"accept-charset":"acceptCharset",accessKey:1,action:0,allowFullScreen:1,alt:0,as:0,async:0,autoCapitalize:1,autoComplete:1,autoCorrect:1,autoFocus:1,autoPlay:1,autoSave:1,capture:0,cellPadding:1,cellSpacing:1,challenge:0,charSet:1,checked:0,children:0,cite:0,class:"className",classID:1,className:1,cols:0,colSpan:1,content:0,contentEditable:1,contextMenu:1,controls:0,controlsList:1,coords:0,crossOrigin:1,dangerouslySetInnerHTML:1,data:0,dateTime:1,default:0,defaultChecked:1,defaultValue:1,defer:0,dir:0,disabled:0,disablePictureInPicture:1,disableRemotePlayback:1,download:0,draggable:0,encType:1,enterKeyHint:1,for:"htmlFor",form:0,formMethod:1,formAction:1,formEncType:1,formNoValidate:1,formTarget:1,frameBorder:1,headers:0,height:0,hidden:0,high:0,href:0,hrefLang:1,htmlFor:1,httpEquiv:1,"http-equiv":"httpEquiv",icon:0,id:0,innerHTML:1,inputMode:1,integrity:0,is:0,itemID:1,itemProp:1,itemRef:1,itemScope:1,itemType:1,keyParams:1,keyType:1,kind:0,label:0,lang:0,list:0,loop:0,low:0,manifest:0,marginWidth:1,marginHeight:1,max:0,maxLength:1,media:0,mediaGroup:1,method:0,min:0,minLength:1,multiple:0,muted:0,name:0,noModule:1,nonce:0,noValidate:1,open:0,optimum:0,pattern:0,placeholder:0,playsInline:1,poster:0,preload:0,profile:0,radioGroup:1,readOnly:1,referrerPolicy:1,rel:0,required:0,reversed:0,role:0,rows:0,rowSpan:1,sandbox:0,scope:0,scoped:0,scrolling:0,seamless:0,selected:0,shape:0,size:0,sizes:0,span:0,spellCheck:1,src:0,srcDoc:1,srcLang:1,srcSet:1,start:0,step:0,style:0,summary:0,tabIndex:1,target:0,title:0,type:0,useMap:1,value:0,width:0,wmode:0,wrap:0,about:0,accentHeight:1,"accent-height":"accentHeight",accumulate:0,additive:0,alignmentBaseline:1,"alignment-baseline":"alignmentBaseline",allowReorder:1,alphabetic:0,amplitude:0,arabicForm:1,"arabic-form":"arabicForm",ascent:0,attributeName:1,attributeType:1,autoReverse:1,azimuth:0,baseFrequency:1,baselineShift:1,"baseline-shift":"baselineShift",baseProfile:1,bbox:0,begin:0,bias:0,by:0,calcMode:1,capHeight:1,"cap-height":"capHeight",clip:0,clipPath:1,"clip-path":"clipPath",clipPathUnits:1,clipRule:1,"clip-rule":"clipRule",color:0,colorInterpolation:1,"color-interpolation":"colorInterpolation",colorInterpolationFilters:1,"color-interpolation-filters":"colorInterpolationFilters",colorProfile:1,"color-profile":"colorProfile",colorRendering:1,"color-rendering":"colorRendering",contentScriptType:1,contentStyleType:1,cursor:0,cx:0,cy:0,d:0,datatype:0,decelerate:0,descent:0,diffuseConstant:1,direction:0,display:0,divisor:0,dominantBaseline:1,"dominant-baseline":"dominantBaseline",dur:0,dx:0,dy:0,edgeMode:1,elevation:0,enableBackground:1,"enable-background":"enableBackground",end:0,exponent:0,externalResourcesRequired:1,fill:0,fillOpacity:1,"fill-opacity":"fillOpacity",fillRule:1,"fill-rule":"fillRule",filter:0,filterRes:1,filterUnits:1,floodOpacity:1,"flood-opacity":"floodOpacity",floodColor:1,"flood-color":"floodColor",focusable:0,fontFamily:1,"font-family":"fontFamily",fontSize:1,"font-size":"fontSize",fontSizeAdjust:1,"font-size-adjust":"fontSizeAdjust",fontStretch:1,"font-stretch":"fontStretch",fontStyle:1,"font-style":"fontStyle",fontVariant:1,"font-variant":"fontVariant",fontWeight:1,"font-weight":"fontWeight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:1,"glyph-name":"glyphName",glyphOrientationHorizontal:1,"glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphOrientationVertical:1,"glyph-orientation-vertical":"glyphOrientationVertical",glyphRef:1,gradientTransform:1,gradientUnits:1,hanging:0,horizAdvX:1,"horiz-adv-x":"horizAdvX",horizOriginX:1,"horiz-origin-x":"horizOriginX",ideographic:0,imageRendering:1,"image-rendering":"imageRendering",in2:0,in:0,inlist:0,intercept:0,k1:0,k2:0,k3:0,k4:0,k:0,kernelMatrix:1,kernelUnitLength:1,kerning:0,keyPoints:1,keySplines:1,keyTimes:1,lengthAdjust:1,letterSpacing:1,"letter-spacing":"letterSpacing",lightingColor:1,"lighting-color":"lightingColor",limitingConeAngle:1,local:0,markerEnd:1,"marker-end":"markerEnd",markerHeight:1,markerMid:1,"marker-mid":"markerMid",markerStart:1,"marker-start":"markerStart",markerUnits:1,markerWidth:1,mask:0,maskContentUnits:1,maskUnits:1,mathematical:0,mode:0,numOctaves:1,offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:1,"overline-position":"overlinePosition",overlineThickness:1,"overline-thickness":"overlineThickness",paintOrder:1,"paint-order":"paintOrder",panose1:0,"panose-1":"panose1",pathLength:1,patternContentUnits:1,patternTransform:1,patternUnits:1,pointerEvents:1,"pointer-events":"pointerEvents",points:0,pointsAtX:1,pointsAtY:1,pointsAtZ:1,prefix:0,preserveAlpha:1,preserveAspectRatio:1,primitiveUnits:1,property:0,r:0,radius:0,refX:1,refY:1,renderingIntent:1,"rendering-intent":"renderingIntent",repeatCount:1,repeatDur:1,requiredExtensions:1,requiredFeatures:1,resource:0,restart:0,result:0,results:0,rotate:0,rx:0,ry:0,scale:0,security:0,seed:0,shapeRendering:1,"shape-rendering":"shapeRendering",slope:0,spacing:0,specularConstant:1,specularExponent:1,speed:0,spreadMethod:1,startOffset:1,stdDeviation:1,stemh:0,stemv:0,stitchTiles:1,stopColor:1,"stop-color":"stopColor",stopOpacity:1,"stop-opacity":"stopOpacity",strikethroughPosition:1,"strikethrough-position":"strikethroughPosition",strikethroughThickness:1,"strikethrough-thickness":"strikethroughThickness",string:0,stroke:0,strokeDasharray:1,"stroke-dasharray":"strokeDasharray",strokeDashoffset:1,"stroke-dashoffset":"strokeDashoffset",strokeLinecap:1,"stroke-linecap":"strokeLinecap",strokeLinejoin:1,"stroke-linejoin":"strokeLinejoin",strokeMiterlimit:1,"stroke-miterlimit":"strokeMiterlimit",strokeWidth:1,"stroke-width":"strokeWidth",strokeOpacity:1,"stroke-opacity":"strokeOpacity",suppressContentEditableWarning:1,suppressHydrationWarning:1,surfaceScale:1,systemLanguage:1,tableValues:1,targetX:1,targetY:1,textAnchor:1,"text-anchor":"textAnchor",textDecoration:1,"text-decoration":"textDecoration",textLength:1,textRendering:1,"text-rendering":"textRendering",to:0,transform:0,typeof:0,u1:0,u2:0,underlinePosition:1,"underline-position":"underlinePosition",underlineThickness:1,"underline-thickness":"underlineThickness",unicode:0,unicodeBidi:1,"unicode-bidi":"unicodeBidi",unicodeRange:1,"unicode-range":"unicodeRange",unitsPerEm:1,"units-per-em":"unitsPerEm",unselectable:0,vAlphabetic:1,"v-alphabetic":"vAlphabetic",values:0,vectorEffect:1,"vector-effect":"vectorEffect",version:0,vertAdvY:1,"vert-adv-y":"vertAdvY",vertOriginX:1,"vert-origin-x":"vertOriginX",vertOriginY:1,"vert-origin-y":"vertOriginY",vHanging:1,"v-hanging":"vHanging",vIdeographic:1,"v-ideographic":"vIdeographic",viewBox:1,viewTarget:1,visibility:0,vMathematical:1,"v-mathematical":"vMathematical",vocab:0,widths:0,wordSpacing:1,"word-spacing":"wordSpacing",writingMode:1,"writing-mode":"writingMode",x1:0,x2:0,x:0,xChannelSelector:1,xHeight:1,"x-height":"xHeight",xlinkActuate:1,"xlink:actuate":"xlinkActuate",xlinkArcrole:1,"xlink:arcrole":"xlinkArcrole",xlinkHref:1,"xlink:href":"xlinkHref",xlinkRole:1,"xlink:role":"xlinkRole",xlinkShow:1,"xlink:show":"xlinkShow",xlinkTitle:1,"xlink:title":"xlinkTitle",xlinkType:1,"xlink:type":"xlinkType",xmlBase:1,"xml:base":"xmlBase",xmlLang:1,"xml:lang":"xmlLang",xmlns:0,"xml:space":"xmlSpace",xmlnsXlink:1,"xmlns:xlink":"xmlnsXlink",xmlSpace:1,y1:0,y2:0,y:0,yChannelSelector:1,z:0,zoomAndPan:1};const nl=0,Yt=1,sa=2,oa=3,gi=4,al=5,il=6;function Tf(e){return Oe.hasOwnProperty(e)?Oe[e]:null}function Ue(e,t,r,n,a,i,o){this.acceptsBooleans=t===sa||t===oa||t===gi,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}const Oe={},kf=["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"];kf.forEach(e=>{Oe[e]=new Ue(e,nl,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(([e,t])=>{Oe[e]=new Ue(e,Yt,!1,t,null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(e=>{Oe[e]=new Ue(e,sa,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(e=>{Oe[e]=new Ue(e,sa,!1,e,null,!1,!1)});["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(e=>{Oe[e]=new Ue(e,oa,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(e=>{Oe[e]=new Ue(e,oa,!0,e,null,!1,!1)});["capture","download"].forEach(e=>{Oe[e]=new Ue(e,gi,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(e=>{Oe[e]=new Ue(e,il,!1,e,null,!1,!1)});["rowSpan","start"].forEach(e=>{Oe[e]=new Ue(e,al,!1,e.toLowerCase(),null,!1,!1)});const yi=/[\-\:]([a-z])/g,bi=e=>e[1].toUpperCase();["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(e=>{const t=e.replace(yi,bi);Oe[t]=new Ue(t,Yt,!1,e,null,!1,!1)});["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(e=>{const t=e.replace(yi,bi);Oe[t]=new Ue(t,Yt,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(e=>{const t=e.replace(yi,bi);Oe[t]=new Ue(t,Yt,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(e=>{Oe[e]=new Ue(e,Yt,!1,e.toLowerCase(),null,!1,!1)});const Mf="xlinkHref";Oe[Mf]=new Ue("xlinkHref",Yt,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(e=>{Oe[e]=new Ue(e,Yt,!1,e.toLowerCase(),null,!0,!0)});const{CAMELCASE:If,SAME:Af,possibleStandardNames:fs}=ia,Of=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",Pf=Of+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",Ff=RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+Pf+"]*$")),Rf=Object.keys(fs).reduce((e,t)=>{const r=fs[t];return r===Af?e[t]=t:r===If?e[t.toLowerCase()]=t:e[t]=r,e},{});mt.BOOLEAN=oa;mt.BOOLEANISH_STRING=sa;mt.NUMERIC=al;mt.OVERLOADED_BOOLEAN=gi;mt.POSITIVE_NUMERIC=il;mt.RESERVED=nl;mt.STRING=Yt;mt.getPropertyInfo=Tf;mt.isCustomAttribute=Ff;mt.possibleStandardNames=Rf;var xi={},wi={},hs=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,Nf=/\n/g,Df=/^\s*/,Lf=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Vf=/^:\s*/,Uf=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,$f=/^[;\s]*/,zf=/^\s+|\s+$/g,Bf=`
`,ps="/",ms="*",nr="",Hf="comment",qf="declaration",Wf=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var r=1,n=1;function a(g){var v=g.match(Nf);v&&(r+=v.length);var S=g.lastIndexOf(Bf);n=~S?g.length-S:n+g.length}function i(){var g={line:r,column:n};return function(v){return v.position=new o(g),u(),v}}function o(g){this.start=g,this.end={line:r,column:n},this.source=t.source}o.prototype.content=e;function s(g){var v=new Error(t.source+":"+r+":"+n+": "+g);if(v.reason=g,v.filename=t.source,v.line=r,v.column=n,v.source=e,!t.silent)throw v}function l(g){var v=g.exec(e);if(v){var S=v[0];return a(S),e=e.slice(S.length),v}}function u(){l(Df)}function d(g){var v;for(g=g||[];v=f();)v!==!1&&g.push(v);return g}function f(){var g=i();if(!(ps!=e.charAt(0)||ms!=e.charAt(1))){for(var v=2;nr!=e.charAt(v)&&(ms!=e.charAt(v)||ps!=e.charAt(v+1));)++v;if(v+=2,nr===e.charAt(v-1))return s("End of comment missing");var S=e.slice(2,v-2);return n+=2,a(S),e=e.slice(v),n+=2,g({type:Hf,comment:S})}}function m(){var g=i(),v=l(Lf);if(v){if(f(),!l(Vf))return s("property missing ':'");var S=l(Uf),E=g({type:qf,property:vs(v[0].replace(hs,nr)),value:S?vs(S[0].replace(hs,nr)):nr});return l($f),E}}function x(){var g=[];d(g);for(var v;v=m();)v!==!1&&(g.push(v),d(g));return g}return u(),x()};function vs(e){return e?e.replace(zf,nr):nr}var Gf=de&&de.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wi,"__esModule",{value:!0});var Xf=Gf(Wf);function Yf(e,t){var r=null;if(!e||typeof e!="string")return r;var n=(0,Xf.default)(e),a=typeof t=="function";return n.forEach(function(i){if(i.type==="declaration"){var o=i.property,s=i.value;a?t(o,s,i):s&&(r=r||{},r[o]=s)}}),r}wi.default=Yf;var la={};Object.defineProperty(la,"__esModule",{value:!0});la.camelCase=void 0;var Kf=/^--[a-zA-Z0-9-]+$/,Qf=/-([a-z])/g,Zf=/^[^-]+$/,Jf=/^-(webkit|moz|ms|o|khtml)-/,eh=/^-(ms)-/,th=function(e){return!e||Zf.test(e)||Kf.test(e)},rh=function(e,t){return t.toUpperCase()},gs=function(e,t){return"".concat(t,"-")},nh=function(e,t){return t===void 0&&(t={}),th(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(eh,gs):e=e.replace(Jf,gs),e.replace(Qf,rh))};la.camelCase=nh;var ah=de&&de.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},ih=ah(wi),sh=la;function Ba(e,t){var r={};return!e||typeof e!="string"||(0,ih.default)(e,function(n,a){n&&a&&(r[(0,sh.camelCase)(n,t)]=a)}),r}Ba.default=Ba;var oh=Ba;(function(e){var t=de&&de.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0}),e.returnFirstArg=e.canTextBeChildOfNode=e.ELEMENTS_WITH_NO_TEXT_CHILDREN=e.PRESERVE_CUSTOM_ATTRIBUTES=e.setStyleProp=e.isCustomComponent=void 0;var r=w,n=t(oh),a=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);function i(d,f){return d.includes("-")?!a.has(d):!!(f&&typeof f.is=="string")}e.isCustomComponent=i;var o={reactCompat:!0};function s(d,f){if(typeof d=="string"){if(!d.trim()){f.style={};return}try{f.style=(0,n.default)(d,o)}catch{f.style={}}}}e.setStyleProp=s,e.PRESERVE_CUSTOM_ATTRIBUTES=Number(r.version.split(".")[0])>=16,e.ELEMENTS_WITH_NO_TEXT_CHILDREN=new Set(["tr","tbody","thead","tfoot","colgroup","table","head","html","frameset"]);var l=function(d){return!e.ELEMENTS_WITH_NO_TEXT_CHILDREN.has(d.name)};e.canTextBeChildOfNode=l;var u=function(d){return d};e.returnFirstArg=u})(xi);Object.defineProperty(aa,"__esModule",{value:!0});var $r=mt,ys=xi,lh=["checked","value"],ch=["input","select","textarea"],uh={reset:!0,submit:!0};function dh(e,t){e===void 0&&(e={});var r={},n=!!(e.type&&uh[e.type]);for(var a in e){var i=e[a];if((0,$r.isCustomAttribute)(a)){r[a]=i;continue}var o=a.toLowerCase(),s=bs(o);if(s){var l=(0,$r.getPropertyInfo)(s);switch(lh.includes(s)&&ch.includes(t)&&!n&&(s=bs("default"+o)),r[s]=i,l&&l.type){case $r.BOOLEAN:r[s]=!0;break;case $r.OVERLOADED_BOOLEAN:i===""&&(r[s]=!0);break}continue}ys.PRESERVE_CUSTOM_ATTRIBUTES&&(r[a]=i)}return(0,ys.setStyleProp)(e.style,r),r}aa.default=dh;function bs(e){return $r.possibleStandardNames[e]}var Si={},fh=de&&de.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Si,"__esModule",{value:!0});var _a=w,hh=fh(aa),qr=xi,ph={cloneElement:_a.cloneElement,createElement:_a.createElement,isValidElement:_a.isValidElement};function sl(e,t){t===void 0&&(t={});for(var r=[],n=typeof t.replace=="function",a=t.transform||qr.returnFirstArg,i=t.library||ph,o=i.cloneElement,s=i.createElement,l=i.isValidElement,u=e.length,d=0;d<u;d++){var f=e[d];if(n){var m=t.replace(f,d);if(l(m)){u>1&&(m=o(m,{key:m.key||d})),r.push(a(m,f,d));continue}}if(f.type==="text"){var x=!f.data.trim().length;if(x&&f.parent&&!(0,qr.canTextBeChildOfNode)(f.parent)||t.trim&&x)continue;r.push(a(f.data,f,d));continue}var g=f,v={};mh(g)?((0,qr.setStyleProp)(g.attribs.style,g.attribs),v=g.attribs):g.attribs&&(v=(0,hh.default)(g.attribs,g.name));var S=void 0;switch(f.type){case"script":case"style":f.children[0]&&(v.dangerouslySetInnerHTML={__html:f.children[0].data});break;case"tag":f.name==="textarea"&&f.children[0]?v.defaultValue=f.children[0].data:f.children&&f.children.length&&(S=sl(f.children,t));break;default:continue}u>1&&(v.key=d),r.push(a(s(f.name,v,S),f,d))}return r.length===1?r[0]:r}Si.default=sl;function mh(e){return qr.PRESERVE_CUSTOM_ATTRIBUTES&&e.type==="tag"&&(0,qr.isCustomComponent)(e.name,e.attribs)}var ol={},J={},Kt=de&&de.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wr=de&&de.__assign||function(){return Wr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Wr.apply(this,arguments)};Object.defineProperty(J,"__esModule",{value:!0});J.cloneNode=J.hasChildren=J.isDocument=J.isDirective=J.isComment=J.isText=J.isCDATA=J.isTag=J.Element=J.Document=J.CDATA=J.NodeWithChildren=J.ProcessingInstruction=J.Comment=J.Text=J.DataNode=J.Node=void 0;var We=pn,Ei=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(t){this.prev=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(t){this.next=t},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(t){return t===void 0&&(t=!1),Ci(this,t)},e}();J.Node=Ei;var ca=function(e){Kt(t,e);function t(r){var n=e.call(this)||this;return n.data=r,n}return Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(r){this.data=r},enumerable:!1,configurable:!0}),t}(Ei);J.DataNode=ca;var ll=function(e){Kt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=We.ElementType.Text,r}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(ca);J.Text=ll;var cl=function(e){Kt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=We.ElementType.Comment,r}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(ca);J.Comment=cl;var ul=function(e){Kt(t,e);function t(r,n){var a=e.call(this,n)||this;return a.name=r,a.type=We.ElementType.Directive,a}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(ca);J.ProcessingInstruction=ul;var ua=function(e){Kt(t,e);function t(r){var n=e.call(this)||this;return n.children=r,n}return Object.defineProperty(t.prototype,"firstChild",{get:function(){var r;return(r=this.children[0])!==null&&r!==void 0?r:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(r){this.children=r},enumerable:!1,configurable:!0}),t}(Ei);J.NodeWithChildren=ua;var dl=function(e){Kt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=We.ElementType.CDATA,r}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(ua);J.CDATA=dl;var fl=function(e){Kt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=We.ElementType.Root,r}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(ua);J.Document=fl;var hl=function(e){Kt(t,e);function t(r,n,a,i){a===void 0&&(a=[]),i===void 0&&(i=r==="script"?We.ElementType.Script:r==="style"?We.ElementType.Style:We.ElementType.Tag);var o=e.call(this,a)||this;return o.name=r,o.attribs=n,o.type=i,o}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(r){this.name=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var r=this;return Object.keys(this.attribs).map(function(n){var a,i;return{name:n,value:r.attribs[n],namespace:(a=r["x-attribsNamespace"])===null||a===void 0?void 0:a[n],prefix:(i=r["x-attribsPrefix"])===null||i===void 0?void 0:i[n]}})},enumerable:!1,configurable:!0}),t}(ua);J.Element=hl;function pl(e){return(0,We.isTag)(e)}J.isTag=pl;function ml(e){return e.type===We.ElementType.CDATA}J.isCDATA=ml;function vl(e){return e.type===We.ElementType.Text}J.isText=vl;function gl(e){return e.type===We.ElementType.Comment}J.isComment=gl;function yl(e){return e.type===We.ElementType.Directive}J.isDirective=yl;function bl(e){return e.type===We.ElementType.Root}J.isDocument=bl;function vh(e){return Object.prototype.hasOwnProperty.call(e,"children")}J.hasChildren=vh;function Ci(e,t){t===void 0&&(t=!1);var r;if(vl(e))r=new ll(e.data);else if(gl(e))r=new cl(e.data);else if(pl(e)){var n=t?ja(e.children):[],a=new hl(e.name,Wr({},e.attribs),n);n.forEach(function(l){return l.parent=a}),e.namespace!=null&&(a.namespace=e.namespace),e["x-attribsNamespace"]&&(a["x-attribsNamespace"]=Wr({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(a["x-attribsPrefix"]=Wr({},e["x-attribsPrefix"])),r=a}else if(ml(e)){var n=t?ja(e.children):[],i=new dl(n);n.forEach(function(u){return u.parent=i}),r=i}else if(bl(e)){var n=t?ja(e.children):[],o=new fl(n);n.forEach(function(u){return u.parent=o}),e["x-mode"]&&(o["x-mode"]=e["x-mode"]),r=o}else if(yl(e)){var s=new ul(e.name,e.data);e["x-name"]!=null&&(s["x-name"]=e["x-name"],s["x-publicId"]=e["x-publicId"],s["x-systemId"]=e["x-systemId"]),r=s}else throw new Error("Not implemented yet: ".concat(e.type));return r.startIndex=e.startIndex,r.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(r.sourceCodeLocation=e.sourceCodeLocation),r}J.cloneNode=Ci;function ja(e){for(var t=e.map(function(n){return Ci(n,!0)}),r=1;r<t.length;r++)t[r].prev=t[r-1],t[r-1].next=t[r];return t}(function(e){var t=de&&de.__createBinding||(Object.create?function(s,l,u,d){d===void 0&&(d=u);var f=Object.getOwnPropertyDescriptor(l,u);(!f||("get"in f?!l.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(s,d,f)}:function(s,l,u,d){d===void 0&&(d=u),s[d]=l[u]}),r=de&&de.__exportStar||function(s,l){for(var u in s)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&t(l,s,u)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var n=pn,a=J;r(J,e);var i={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},o=function(){function s(l,u,d){this.dom=[],this.root=new a.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof u=="function"&&(d=u,u=i),typeof l=="object"&&(u=l,l=void 0),this.callback=l??null,this.options=u??i,this.elementCB=d??null}return s.prototype.onparserinit=function(l){this.parser=l},s.prototype.onreset=function(){this.dom=[],this.root=new a.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},s.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},s.prototype.onerror=function(l){this.handleCallback(l)},s.prototype.onclosetag=function(){this.lastNode=null;var l=this.tagStack.pop();this.options.withEndIndices&&(l.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(l)},s.prototype.onopentag=function(l,u){var d=this.options.xmlMode?n.ElementType.Tag:void 0,f=new a.Element(l,u,void 0,d);this.addNode(f),this.tagStack.push(f)},s.prototype.ontext=function(l){var u=this.lastNode;if(u&&u.type===n.ElementType.Text)u.data+=l,this.options.withEndIndices&&(u.endIndex=this.parser.endIndex);else{var d=new a.Text(l);this.addNode(d),this.lastNode=d}},s.prototype.oncomment=function(l){if(this.lastNode&&this.lastNode.type===n.ElementType.Comment){this.lastNode.data+=l;return}var u=new a.Comment(l);this.addNode(u),this.lastNode=u},s.prototype.oncommentend=function(){this.lastNode=null},s.prototype.oncdatastart=function(){var l=new a.Text(""),u=new a.CDATA([l]);this.addNode(u),l.parent=u,this.lastNode=l},s.prototype.oncdataend=function(){this.lastNode=null},s.prototype.onprocessinginstruction=function(l,u){var d=new a.ProcessingInstruction(l,u);this.addNode(d)},s.prototype.handleCallback=function(l){if(typeof this.callback=="function")this.callback(l,this.dom);else if(l)throw l},s.prototype.addNode=function(l){var u=this.tagStack[this.tagStack.length-1],d=u.children[u.children.length-1];this.options.withStartIndices&&(l.startIndex=this.parser.startIndex),this.options.withEndIndices&&(l.endIndex=this.parser.endIndex),u.children.push(l),d&&(l.prev=d,d.next=l),l.parent=u,this.lastNode=null},s}();e.DomHandler=o,e.default=o})(ol);(function(e){var t=de&&de.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0}),e.htmlToDOM=e.domToReact=e.attributesToProps=e.Text=e.ProcessingInstruction=e.Element=e.Comment=void 0;var r=t(hi);e.htmlToDOM=r.default;var n=t(aa);e.attributesToProps=n.default;var a=t(Si);e.domToReact=a.default;var i=ol;Object.defineProperty(e,"Comment",{enumerable:!0,get:function(){return i.Comment}}),Object.defineProperty(e,"Element",{enumerable:!0,get:function(){return i.Element}}),Object.defineProperty(e,"ProcessingInstruction",{enumerable:!0,get:function(){return i.ProcessingInstruction}}),Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return i.Text}});var o={lowerCaseAttributeNames:!1};function s(l,u){if(typeof l!="string")throw new TypeError("First argument must be a string");return l?(0,a.default)((0,r.default)(l,(u==null?void 0:u.htmlparser2)||o),u):[]}e.default=s})(Uo);const xs=Zn(Uo),gh=xs.default||xs;function Fe(){return Fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fe.apply(this,arguments)}function _i(e,t){if(e==null)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)t.indexOf(r=i[n])>=0||(a[r]=e[r]);return a}function Nn(e){var t=w.useRef({fn:e,curr:void 0}).current;if(t.fn=e,!t.curr){var r=Object.create(null);Object.keys(e).forEach(function(n){r[n]=function(){var a;return(a=t.fn[n]).call.apply(a,[t.fn].concat([].slice.call(arguments)))}}),t.curr=r}return t.curr}function Ha(e){return w.useReducer(function(t,r){return Fe({},t,typeof r=="function"?r(t):r)},e)}w.createContext(void 0);var Pt=typeof window<"u"&&"ontouchstart"in window,qa=function(e,t,r){return Math.max(Math.min(e,r),t)},Tn=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=0),qa(e,1*(1-r),Math.max(6,t)*(1+r))},Wa=typeof window>"u"||/ServerSideRendering/.test(navigator&&navigator.userAgent)?w.useEffect:w.useLayoutEffect;function wr(e,t,r){var n=w.useRef(t);n.current=t,w.useEffect(function(){function a(i){n.current(i)}return e&&window.addEventListener(e,a,r),function(){e&&window.removeEventListener(e,a)}},[e])}var yh=["container"];function bh(e){var t=e.container,r=t===void 0?document.body:t,n=_i(e,yh);return oo.createPortal(te.createElement("div",Fe({},n)),r)}function xh(e){return te.createElement("svg",Fe({width:"44",height:"44",viewBox:"0 0 768 768"},e),te.createElement("path",{d:"M607.5 205.5l-178.5 178.5 178.5 178.5-45 45-178.5-178.5-178.5 178.5-45-45 178.5-178.5-178.5-178.5 45-45 178.5 178.5 178.5-178.5z"}))}function wh(e){return te.createElement("svg",Fe({width:"44",height:"44",viewBox:"0 0 768 768"},e),te.createElement("path",{d:"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z"}))}function Sh(e){return te.createElement("svg",Fe({width:"44",height:"44",viewBox:"0 0 768 768"},e),te.createElement("path",{d:"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z"}))}function Eh(){return w.useEffect(function(){var e=document.body.style,t=e.overflow;return e.overflow="hidden",function(){e.overflow=t}},[]),null}function ws(e){var t=e.touches[0],r=t.clientX,n=t.clientY;if(e.touches.length>=2){var a=e.touches[1],i=a.clientX,o=a.clientY;return[(r+i)/2,(n+o)/2,Math.sqrt(Math.pow(i-r,2)+Math.pow(o-n,2))]}return[r,n,0]}var zt=function(e,t,r,n){var a=r*t,i=(a-n)/2,o=void 0,s=e;return a<=n?(o=1,s=0):e>0&&i-e<=0?(o=2,s=i):e<0&&i+e<=0&&(o=3,s=-i),[o,s]};function Ta(e,t,r,n,a,i,o,s,l,u){o===void 0&&(o=innerWidth/2),s===void 0&&(s=innerHeight/2),l===void 0&&(l=0),u===void 0&&(u=0);var d=zt(e,i,r,innerWidth)[0],f=zt(t,i,n,innerHeight),m=innerWidth/2,x=innerHeight/2;return{x:o-i/a*(o-(m+e))-m+(n/r>=3&&r*i===innerWidth?0:d?l/2:l),y:s-i/a*(s-(x+t))-x+(f[0]?u/2:u),lastCX:o,lastCY:s}}function Ga(e,t,r){var n=e%180!=0;return n?[r,t,n]:[t,r,n]}function ka(e,t,r){var n=Ga(r,innerWidth,innerHeight),a=n[0],i=n[1],o=0,s=a,l=i,u=e/t*i,d=t/e*a;return e<a&&t<i?(s=e,l=t):e<a&&t>=i?s=u:e>=a&&t<i||e/t>a/i?l=d:t/e>=3&&!n[2]?o=((l=d)-i)/2:s=u,{width:s,height:l,x:0,y:o,pause:!0}}function kn(e,t){var r=t.leading,n=r!==void 0&&r,a=t.maxWait,i=t.wait,o=i===void 0?a||0:i,s=w.useRef(e);s.current=e;var l=w.useRef(0),u=w.useRef(),d=function(){return u.current&&clearTimeout(u.current)},f=w.useCallback(function(){var m=[].slice.call(arguments),x=Date.now();function g(){l.current=x,d(),s.current.apply(null,m)}var v=l.current,S=x-v;if(v===0&&(n&&g(),l.current=x),a!==void 0){if(S>a)return void g()}else S<o&&(l.current=x);d(),u.current=setTimeout(function(){g(),l.current=0},o)},[o,a,n]);return f.cancel=d,f}var Ss=function(e,t,r){return ar(e,t,r,100,function(n){return n},function(){return ar(t,e,r)})},Ch=function(e){return 1-Math.pow(1-e,4)};function ar(e,t,r,n,a,i){n===void 0&&(n=400),a===void 0&&(a=Ch);var o=t-e;if(o!==0){var s=Date.now(),l=0,u=function(){var f=Math.min(1,(Date.now()-s)/n);r(e+a(f)*o)&&f<1?d():(cancelAnimationFrame(l),f>=1&&i&&i())};d()}function d(){l=requestAnimationFrame(u)}}var _h={T:0,L:0,W:0,H:0,FIT:void 0},xl=function(){var e=w.useRef(!1);return w.useEffect(function(){return e.current=!0,function(){e.current=!1}},[]),e},jh=["className"];function Th(e){var t=e.className,r=_i(e,jh);return te.createElement("div",Fe({className:"PhotoView__Spinner "+t},r),te.createElement("svg",{viewBox:"0 0 32 32",width:"36",height:"36",fill:"white"},te.createElement("path",{opacity:".25",d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"}),te.createElement("path",{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z"})))}var kh=["src","loaded","broken","className","onPhotoLoad","loadingElement","brokenElement"];function Mh(e){var t=e.src,r=e.loaded,n=e.broken,a=e.className,i=e.onPhotoLoad,o=e.loadingElement,s=e.brokenElement,l=_i(e,kh),u=xl();return t&&!n?te.createElement(te.Fragment,null,te.createElement("img",Fe({className:"PhotoView__Photo"+(a?" "+a:""),src:t,onLoad:function(d){var f=d.target;u.current&&i({loaded:!0,naturalWidth:f.naturalWidth,naturalHeight:f.naturalHeight})},onError:function(){u.current&&i({broken:!0})},alt:""},l)),!r&&(te.createElement("span",{className:"PhotoView__icon"},o)||te.createElement(Th,{className:"PhotoView__icon"}))):s?te.createElement("span",{className:"PhotoView__icon"},typeof s=="function"?s({src:t}):s):null}var Ih={naturalWidth:void 0,naturalHeight:void 0,width:void 0,height:void 0,loaded:void 0,broken:!1,x:0,y:0,touched:!1,maskTouched:!1,rotate:0,scale:1,CX:0,CY:0,lastX:0,lastY:0,lastCX:0,lastCY:0,lastScale:1,touchTime:0,touchLength:0,pause:!0,stopRaf:!0,reach:void 0};function Ah(e){var t=e.item,r=t.src,n=t.render,a=t.width,i=a===void 0?0:a,o=t.height,s=o===void 0?0:o,l=t.originRef,u=e.visible,d=e.speed,f=e.easing,m=e.wrapClassName,x=e.className,g=e.style,v=e.loadingElement,S=e.brokenElement,E=e.onPhotoTap,h=e.onMaskTap,y=e.onReachMove,j=e.onReachUp,k=e.onPhotoResize,O=e.isActive,C=e.expose,I=Ha(Ih),M=I[0],V=I[1],B=w.useRef(0),se=xl(),le=M.naturalWidth,re=le===void 0?i:le,fe=M.naturalHeight,ge=fe===void 0?s:fe,rt=M.width,Ne=rt===void 0?i:rt,nt=M.height,b=nt===void 0?s:nt,p=M.loaded,F=p===void 0?!r:p,N=M.broken,D=M.x,U=M.y,$=M.touched,L=M.stopRaf,q=M.maskTouched,X=M.rotate,G=M.scale,ee=M.CX,ae=M.CY,ce=M.lastX,Y=M.lastY,K=M.lastCX,ke=M.lastCY,me=M.lastScale,Ce=M.touchTime,$e=M.touchLength,ve=M.pause,at=M.reach,vt=Nn({onScale:function(_){return ze(Tn(_))},onRotate:function(_){X!==_&&(C({rotate:_}),V(Fe({rotate:_},ka(re,ge,_))))}});function ze(_,H,oe){G!==_&&(C({scale:_}),V(Fe({scale:_},Ta(D,U,Ne,b,G,_,H,oe),_<=1&&{x:0,y:0})))}var it=kn(function(_,H,oe){if(oe===void 0&&(oe=0),($||q)&&O){var Qt=Ga(X,Ne,b),_t=Qt[0],st=Qt[1];if(oe===0&&B.current===0){var Ie=Math.abs(_-ee)<=20,Ge=Math.abs(H-ae)<=20;if(Ie&&Ge)return void V({lastCX:_,lastCY:H});B.current=Ie?H>ae?3:2:1}var Zt=_-K,Jt=H-ke,ot=void 0;if(oe===0){var er=zt(Zt+ce,G,_t,innerWidth)[0],hr=zt(Jt+Y,G,st,innerHeight);ot=function(Nt,Tt,kt,bt){return Tt&&Nt===1||bt==="x"?"x":kt&&Nt>1||bt==="y"?"y":void 0}(B.current,er,hr[0],at),ot!==void 0&&y(ot,_,H,G)}if(ot==="x"||q)return void V({reach:"x"});var jt=Tn(G+(oe-$e)/100/2*G,re/Ne,.2);C({scale:jt}),V(Fe({touchLength:oe,reach:ot,scale:jt},Ta(D,U,Ne,b,G,jt,_,H,Zt,Jt)))}},{maxWait:8});function R(_){return!L&&!$&&(se.current&&V(Fe({},_,{pause:u})),se.current)}var ue,xe,_e,gt,Ct,Rt,ur,De,yn=(Ct=function(_){return R({x:_})},Rt=function(_){return R({y:_})},ur=function(_){return se.current&&(C({scale:_}),V({scale:_})),!$&&se.current},De=Nn({X:function(_){return Ct(_)},Y:function(_){return Rt(_)},S:function(_){return ur(_)}}),function(_,H,oe,Qt,_t,st,Ie,Ge,Zt,Jt,ot){var er=Ga(Jt,_t,st),hr=er[0],jt=er[1],Nt=zt(_,Ge,hr,innerWidth),Tt=Nt[0],kt=Nt[1],bt=zt(H,Ge,jt,innerHeight),pr=bt[0],xn=bt[1],mr=Date.now()-ot;if(mr>=200||Ge!=Ie||Math.abs(Zt-Ie)>1){var Dt=Ta(_,H,_t,st,Ie,Ge),Mt=Dt.x,tr=Dt.y,Qe=Tt?kt:Mt!==_?Mt:null,vr=pr?xn:tr!==H?tr:null;return Qe!==null&&ar(_,Qe,De.X),vr!==null&&ar(H,vr,De.Y),void(Ge!=Ie&&ar(Ie,Ge,De.S))}var rr=(_-oe)/mr,Lt=(H-Qt)/mr,Vt=Math.sqrt(Math.pow(rr,2)+Math.pow(Lt,2)),It=!1,At=!1;(function(lt,Le){var Ve=lt,Ot=0,ct=void 0,Ze=0,gr=function(Fr){ct||(ct=Fr);var Rr=Fr-ct,Ui=Math.sign(lt),$i=-.001*Ui,zi=Math.sign(-Ve)*Math.pow(Ve,2)*2e-4,ac=Ve*Rr+($i+zi)*Math.pow(Rr,2)/2;Ot+=ac,ct=Fr,Ui*(Ve+=($i+zi)*Rr)<=0?Je():Le(Ot)?xt():Je()};function xt(){Ze=requestAnimationFrame(gr)}function Je(){cancelAnimationFrame(Ze)}xt()})(Vt,function(lt){var Le=_+lt*(rr/Vt),Ve=H+lt*(Lt/Vt),Ot=zt(Le,Ie,hr,innerWidth),ct=Ot[0],Ze=Ot[1],gr=zt(Ve,Ie,jt,innerHeight),xt=gr[0],Je=gr[1];if(ct&&!It&&(It=!0,Tt?ar(Le,Ze,De.X):Ss(Ze,Le+(Le-Ze),De.X)),xt&&!At&&(At=!0,pr?ar(Ve,Je,De.Y):Ss(Je,Ve+(Ve-Je),De.Y)),It&&At)return!1;var Fr=It||De.X(Ze),Rr=At||De.Y(Je);return Fr&&Rr})}),dr=(ue=E,xe=function(_,H){at||ze(G!==1?1:Math.max(2,re/Ne),_,H)},_e=w.useRef(0),gt=kn(function(){_e.current=0,ue.apply(void 0,[].slice.call(arguments))},{wait:300}),function(){var _=[].slice.call(arguments);_e.current+=1,gt.apply(void 0,_),_e.current>=2&&(gt.cancel(),_e.current=0,xe.apply(void 0,_))});function fr(_,H){if(B.current=0,($||q)&&O){V({touched:!1,maskTouched:!1,pause:!1,stopRaf:!1,reach:void 0});var oe=Tn(G,re/Ne);if(yn(D,U,ce,Y,Ne,b,G,oe,me,X,Ce),j(_,H),ee===_&&ae===H){if($)return void dr(_,H);q&&h(_,H)}}}function Pr(_,H,oe){oe===void 0&&(oe=0),V({touched:!0,CX:_,CY:H,lastCX:_,lastCY:H,lastX:D,lastY:U,lastScale:G,touchLength:oe,touchTime:Date.now()})}function bn(_){V({maskTouched:!0,CX:_.clientX,CY:_.clientY,lastX:D,lastY:U})}wr(Pt?void 0:"mousemove",function(_){_.preventDefault(),it(_.clientX,_.clientY)}),wr(Pt?void 0:"mouseup",function(_){fr(_.clientX,_.clientY)}),wr(Pt?"touchmove":void 0,function(_){_.preventDefault();var H=ws(_);it.apply(void 0,H)},{passive:!1}),wr(Pt?"touchend":void 0,function(_){var H=_.changedTouches[0];fr(H.clientX,H.clientY)},{passive:!1}),wr("resize",kn(function(){F&&!$&&(V(ka(re,ge,X)),k())},{maxWait:8})),Wa(function(){O&&C(Fe({scale:G,rotate:X},vt))},[O]);var yt=function(_,H,oe,Qt,_t,st,Ie,Ge,Zt,Jt){var ot=function(Mt,tr,Qe,vr,rr){var Lt=w.useRef(!1),Vt=Ha({lead:!0,scale:Qe}),It=Vt[0],At=It.lead,lt=It.scale,Le=Vt[1],Ve=kn(function(Ot){try{return rr(!0),Le({lead:!1,scale:Ot}),Promise.resolve()}catch(ct){return Promise.reject(ct)}},{wait:vr});return Wa(function(){Lt.current?(rr(!1),Le({lead:!0}),Ve(Qe)):Lt.current=!0},[Qe]),At?[Mt*lt,tr*lt,Qe/lt]:[Mt*Qe,tr*Qe,1]}(st,Ie,Ge,Zt,Jt),er=ot[0],hr=ot[1],jt=ot[2],Nt=function(Mt,tr,Qe,vr,rr){var Lt=w.useState(_h),Vt=Lt[0],It=Lt[1],At=w.useState(0),lt=At[0],Le=At[1],Ve=w.useRef(),Ot=Nn({OK:function(){return Mt&&Le(4)}});function ct(Ze){rr(!1),Le(Ze)}return w.useEffect(function(){if(Ve.current||(Ve.current=Date.now()),Qe){if(function(Ze,gr){var xt=Ze&&Ze.current;if(xt&&xt.nodeType===1){var Je=xt.getBoundingClientRect();gr({T:Je.top,L:Je.left,W:Je.width,H:Je.height,FIT:xt.tagName==="IMG"?getComputedStyle(xt).objectFit:void 0})}}(tr,It),Mt)return Date.now()-Ve.current<250?(Le(1),requestAnimationFrame(function(){Le(2),requestAnimationFrame(function(){return ct(3)})}),void setTimeout(Ot.OK,vr)):void Le(4);ct(5)}},[Mt,Qe]),[lt,Vt]}(_,H,oe,Zt,Jt),Tt=Nt[0],kt=Nt[1],bt=kt.W,pr=kt.FIT,xn=innerWidth/2,mr=innerHeight/2,Dt=Tt<3||Tt>4;return[Dt?bt?kt.L:xn:Qt+(xn-st*Ge/2),Dt?bt?kt.T:mr:_t+(mr-Ie*Ge/2),er,Dt&&pr?er*(kt.H/bt):hr,Tt===0?jt:Dt?bt/(st*Ge)||.01:jt,Dt?pr?1:0:1,Tt,pr]}(u,l,F,D,U,Ne,b,G,d,function(_){return V({pause:_})}),Q=yt[4],pe=yt[6],je="transform "+d+"ms "+f,we={className:x,onMouseDown:Pt?void 0:function(_){_.stopPropagation(),_.button===0&&Pr(_.clientX,_.clientY,0)},onTouchStart:Pt?function(_){_.stopPropagation(),Pr.apply(void 0,ws(_))}:void 0,onWheel:function(_){if(!at){var H=Tn(G-_.deltaY/100/2,re/Ne);V({stopRaf:!0}),ze(H,_.clientX,_.clientY)}},style:{width:yt[2],height:yt[3],opacity:yt[5],objectFit:pe===4?void 0:yt[7],transform:X?"rotate("+X+"deg)":void 0,transition:pe>2?je+", opacity "+d+"ms ease, height "+(pe<4?d/2:pe>4?d:0)+"ms "+f:void 0}};return te.createElement("div",{className:"PhotoView__PhotoWrap"+(m?" "+m:""),style:g,onMouseDown:!Pt&&O?bn:void 0,onTouchStart:Pt&&O?function(_){return bn(_.touches[0])}:void 0},te.createElement("div",{className:"PhotoView__PhotoBox",style:{transform:"matrix("+Q+", 0, 0, "+Q+", "+yt[0]+", "+yt[1]+")",transition:$||ve?void 0:je,willChange:O?"transform":void 0}},r?te.createElement(Mh,Fe({src:r,loaded:F,broken:N},we,{onPhotoLoad:function(_){V(Fe({},_,_.loaded&&ka(_.naturalWidth||0,_.naturalHeight||0,X)))},loadingElement:v,brokenElement:S})):n&&n({attrs:we,scale:Q,rotate:X})))}var Es={x:0,touched:!1,pause:!1,lastCX:void 0,lastCY:void 0,bg:void 0,lastBg:void 0,overlay:!0,minimal:!0,scale:1,rotate:0};function Oh(e){var t=e.loop,r=t===void 0?3:t,n=e.speed,a=e.easing,i=e.photoClosable,o=e.maskClosable,s=o===void 0||o,l=e.maskOpacity,u=l===void 0?1:l,d=e.pullClosable,f=d===void 0||d,m=e.bannerVisible,x=m===void 0||m,g=e.overlayRender,v=e.toolbarRender,S=e.className,E=e.maskClassName,h=e.photoClassName,y=e.photoWrapClassName,j=e.loadingElement,k=e.brokenElement,O=e.images,C=e.index,I=C===void 0?0:C,M=e.onIndexChange,V=e.visible,B=e.onClose,se=e.afterClose,le=e.portalContainer,re=Ha(Es),fe=re[0],ge=re[1],rt=w.useState(0),Ne=rt[0],nt=rt[1],b=fe.x,p=fe.touched,F=fe.pause,N=fe.lastCX,D=fe.lastCY,U=fe.bg,$=U===void 0?u:U,L=fe.lastBg,q=fe.overlay,X=fe.minimal,G=fe.scale,ee=fe.rotate,ae=fe.onScale,ce=fe.onRotate,Y=e.hasOwnProperty("index"),K=Y?I:Ne,ke=Y?M:nt,me=w.useRef(K),Ce=O.length,$e=O[K],ve=typeof r=="boolean"?r:Ce>r,at=function(Q,pe){var je=w.useReducer(function(oe){return!oe},!1)[1],we=w.useRef(0),_=function(oe,Qt){var _t=w.useRef(oe);function st(Ie){_t.current=Ie}return w.useMemo(function(){(function(Ie){Q?(Ie(Q),we.current=1):we.current=2})(st)},[oe]),[_t.current,st]}(Q),H=_[1];return[_[0],we.current,function(){je(),we.current===2&&(H(!1),pe&&pe()),we.current=0}]}(V,se),vt=at[0],ze=at[1],it=at[2];Wa(function(){if(vt)return ge({pause:!0,x:K*-(innerWidth+20)}),void(me.current=K);ge(Es)},[vt]);var R=Nn({close:function(Q){ce&&ce(0),ge({overlay:!0,lastBg:$}),B(Q)},changeIndex:function(Q,pe){pe===void 0&&(pe=!1);var je=ve?me.current+(Q-K):Q,we=Ce-1,_=qa(je,0,we),H=ve?je:_,oe=innerWidth+20;ge({touched:!1,lastCX:void 0,lastCY:void 0,x:-oe*H,pause:pe}),me.current=H,ke&&ke(ve?Q<0?we:Q>we?0:Q:_)}}),ue=R.close,xe=R.changeIndex;function _e(Q){return Q?ue():ge({overlay:!q})}function gt(){ge({x:-(innerWidth+20)*K,lastCX:void 0,lastCY:void 0,pause:!0}),me.current=K}function Ct(Q,pe,je,we){Q==="x"?function(_){if(N!==void 0){var H=_-N,oe=H;!ve&&(K===0&&H>0||K===Ce-1&&H<0)&&(oe=H/2),ge({touched:!0,lastCX:N,x:-(innerWidth+20)*me.current+oe,pause:!1})}else ge({touched:!0,lastCX:_,x:b,pause:!1})}(pe):Q==="y"&&function(_,H){if(D!==void 0){var oe=u===null?null:qa(u,.01,u-Math.abs(_-D)/100/4);ge({touched:!0,lastCY:D,bg:H===1?oe:u,minimal:H===1})}else ge({touched:!0,lastCY:_,bg:$,minimal:!0})}(je,we)}function Rt(Q,pe){var je=Q-(N??Q),we=pe-(D??pe),_=!1;if(je<-40)xe(K+1);else if(je>40)xe(K-1);else{var H=-(innerWidth+20)*me.current;Math.abs(we)>100&&X&&f&&(_=!0,ue()),ge({touched:!1,x:H,lastCX:void 0,lastCY:void 0,bg:u,overlay:!!_||q})}}wr("keydown",function(Q){if(V)switch(Q.key){case"ArrowLeft":xe(K-1,!0);break;case"ArrowRight":xe(K+1,!0);break;case"Escape":ue()}});var ur=function(Q,pe,je){return w.useMemo(function(){var we=Q.length;return je?Q.concat(Q).concat(Q).slice(we+pe-1,we+pe+2):Q.slice(Math.max(pe-1,0),Math.min(pe+2,we+1))},[Q,pe,je])}(O,K,ve);if(!vt)return null;var De=q&&!ze,yn=V?$:L,dr=ae&&ce&&{images:O,index:K,visible:V,onClose:ue,onIndexChange:xe,overlayVisible:De,overlay:$e&&$e.overlay,scale:G,rotate:ee,onScale:ae,onRotate:ce},fr=n?n(ze):400,Pr=a?a(ze):"cubic-bezier(0.25, 0.8, 0.25, 1)",bn=n?n(3):600,yt=a?a(3):"cubic-bezier(0.25, 0.8, 0.25, 1)";return te.createElement(bh,{className:"PhotoView-Portal"+(De?"":" PhotoView-Slider__clean")+(V?"":" PhotoView-Slider__willClose")+(S?" "+S:""),role:"dialog",onClick:function(Q){return Q.stopPropagation()},container:le},V&&te.createElement(Eh,null),te.createElement("div",{className:"PhotoView-Slider__Backdrop"+(E?" "+E:"")+(ze===1?" PhotoView-Slider__fadeIn":ze===2?" PhotoView-Slider__fadeOut":""),style:{background:yn?"rgba(0, 0, 0, "+yn+")":void 0,transitionTimingFunction:Pr,transitionDuration:(p?0:fr)+"ms",animationDuration:fr+"ms"},onAnimationEnd:it}),x&&te.createElement("div",{className:"PhotoView-Slider__BannerWrap"},te.createElement("div",{className:"PhotoView-Slider__Counter"},K+1," / ",Ce),te.createElement("div",{className:"PhotoView-Slider__BannerRight"},v&&dr&&v(dr),te.createElement(xh,{className:"PhotoView-Slider__toolbarIcon",onClick:ue}))),ur.map(function(Q,pe){var je=ve||K!==0?me.current-1+pe:K+pe;return te.createElement(Ah,{key:ve?Q.key+"/"+Q.src+"/"+je:Q.key,item:Q,speed:fr,easing:Pr,visible:V,onReachMove:Ct,onReachUp:Rt,onPhotoTap:function(){return _e(i)},onMaskTap:function(){return _e(s)},wrapClassName:y,className:h,style:{left:(innerWidth+20)*je+"px",transform:"translate3d("+b+"px, 0px, 0)",transition:p||F?void 0:"transform "+bn+"ms "+yt},loadingElement:j,brokenElement:k,onPhotoResize:gt,isActive:me.current===je,expose:ge})}),!Pt&&x&&te.createElement(te.Fragment,null,(ve||K!==0)&&te.createElement("div",{className:"PhotoView-Slider__ArrowLeft",onClick:function(){return xe(K-1,!0)}},te.createElement(wh,null)),(ve||K+1<Ce)&&te.createElement("div",{className:"PhotoView-Slider__ArrowRight",onClick:function(){return xe(K+1,!0)}},te.createElement(Sh,null))),g&&dr&&te.createElement("div",{className:"PhotoView-Slider__Overlay"},g(dr)))}const Ph=e=>{const r=new DOMParser().parseFromString(e,"text/html").querySelectorAll("img");return Array.from(r).map(n=>n.getAttribute("src"))},Fh=({info:e,handleEntryClick:t,getEntries:r})=>{const n=A(m=>m.activeContent),{handleFetchContent:a,handleToggleStarred:i,handleToggleStatus:o}=di(),{handleLeftKey:s,handleRightKey:l,handleEscapeKey:u}=Vo(e,t,r);if(!n)return null;const d=n.status==="unread",f=n.starred;return c.jsxs(Ee.Group,{className:"action-buttons",children:[c.jsx(Ee,{icon:c.jsx(Pc,{}),onClick:u,shape:"round",type:"primary"}),c.jsx(Ee,{icon:d?c.jsx(lo,{}):c.jsx(co,{}),onClick:()=>o(n),type:"primary"}),c.jsx(Ee,{onClick:()=>i(n),type:"primary",icon:f?c.jsx(oi,{style:{color:"#ffcd00"}}):c.jsx(si,{})}),c.jsx(Ee,{icon:c.jsx(Fc,{}),onClick:s,type:"primary"}),c.jsx(Ee,{icon:c.jsx(Rc,{}),onClick:l,type:"primary"}),c.jsx(Ee,{icon:c.jsx(Nc,{}),onClick:a,shape:"round",type:"primary"})]})},Rh=({url:e,text:t})=>{const[r,n]=w.useState(!1),a=()=>n(!0),i=()=>n(!1);return c.jsx(Lc,{to:e,style:{color:"inherit",textDecoration:r?"underline":"none"},onMouseEnter:a,onMouseLeave:i,children:t})},Nh=({node:e,index:t,togglePhotoSlider:r})=>{const[n,a]=w.useState(!1),{isMobileView:i}=ta();return c.jsx("div",{style:{textAlign:"center",position:"relative"},children:c.jsxs("div",{style:{display:"inline-block",position:"relative"},onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:[c.jsx("img",{...e.attribs,alt:e.attribs.alt}),c.jsx(Ee,{icon:c.jsx(Vc,{}),style:{position:"absolute",top:30,right:10,backgroundColor:"rgba(0, 0, 0, 0.5)",opacity:i||n?1:0,transition:"opacity 0.3s"},onClick:o=>{o.preventDefault(),r(t)}})]})})},Dh=(e,t)=>({replace:r=>{if(r.type==="tag"&&r.name==="img"){const n=e.findIndex(a=>a===r.attribs.src);return c.jsx(Nh,{node:r,index:n,togglePhotoSlider:t})}return r}}),Lh=w.forwardRef(({info:e,handleEntryClick:t,getEntries:r,isFilteredEntriesUpdated:n,setIsFilteredEntriesUpdated:a},i)=>{const o=un(),s=A(O=>O.activeContent),{config:l}=Pe(),{articleWidth:u,fontSize:d}=l,{setIsArticleFocused:f}=w.useContext(Et),[m,x]=w.useState(!1),[g,v]=w.useState(0),S=O=>{v(O),x(C=>!C)};if(!s)return c.jsxs("div",{ref:i,className:"content-empty",children:[c.jsx(Dc,{style:{fontSize:"64px"}}),c.jsx(z.Title,{heading:6,style:{color:"var(--color-text-3)",marginTop:"10px"},children:"ReactFlux"})]});const E=Ph(s.content),h=Dh(E,S),y=gh(s.content,h),j=s.feed.category.id,k=s.feed.category.title;return c.jsxs("div",{className:"article-content",onBlur:()=>f(!1),onFocus:()=>f(!0),ref:i,children:[c.jsxs("div",{className:"scroll-container",children:[c.jsxs("div",{className:"article-header",style:{width:`${u}%`},children:[c.jsx(z.Title,{className:"article-title",heading:5,children:c.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",children:s.title})}),c.jsxs("div",{className:"article-meta",children:[c.jsx(z.Text,{children:c.jsx(Rh,{url:`/feed/${s.feed.id}`,text:s.feed.title})}),c.jsx(z.Text,{children:` - ${s.author}`}),c.jsx(z.Text,{children:c.jsx(Zr,{size:"small",onClick:()=>{o(`/group/${j}`)},style:{marginLeft:"10px",cursor:"pointer"},children:k})})]}),c.jsx(z.Text,{className:"article-date",children:_r(s.published_at).format("dddd, MMMM D, YYYY [at] h:mm A")}),c.jsx(dt,{})]}),c.jsxs("div",{className:"article-body",style:{fontSize:`${d}rem`,width:`${u}%`},children:[y,c.jsx(Oh,{images:E.map(O=>({src:O,key:O})),visible:m,onClose:()=>{x(!1),f(!0)},index:g,onIndexChange:v})]},s.id)]}),c.jsx(Fh,{info:e,handleEntryClick:t,getEntries:r,isFilteredEntriesUpdated:n,setIsFilteredEntriesUpdated:a})]})});var Vh=Object.defineProperty,Uh=(e,t)=>{for(var r in t)Vh(e,r,{get:t[r],enumerable:!0})},pt={};Uh(pt,{assign:()=>Bh,colors:()=>Gt,createStringInterpolator:()=>Oi,skipAnimation:()=>Tl,to:()=>jl,willAdvance:()=>Pi});var ji=vn(),W=e=>mn(e,ji),Ti=vn();W.write=e=>mn(e,Ti);var da=vn();W.onStart=e=>mn(e,da);var ki=vn();W.onFrame=e=>mn(e,ki);var Mi=vn();W.onFinish=e=>mn(e,Mi);var Er=[];W.setTimeout=(e,t)=>{const r=W.now()+t,n=()=>{const i=Er.findIndex(o=>o.cancel==n);~i&&Er.splice(i,1),qt-=~i?1:0},a={time:r,handler:e,cancel:n};return Er.splice(wl(r),0,a),qt+=1,Sl(),a};var wl=e=>~(~Er.findIndex(t=>t.time>e)||~Er.length);W.cancel=e=>{da.delete(e),ki.delete(e),Mi.delete(e),ji.delete(e),Ti.delete(e)};W.sync=e=>{Xa=!0,W.batchedUpdates(e),Xa=!1};W.throttle=e=>{let t;function r(){try{e(...t)}finally{t=null}}function n(...a){t=a,W.onStart(r)}return n.handler=e,n.cancel=()=>{da.delete(r),t=null},n};var Ii=typeof window<"u"?window.requestAnimationFrame:()=>{};W.use=e=>Ii=e;W.now=typeof performance<"u"?()=>performance.now():Date.now;W.batchedUpdates=e=>e();W.catch=console.error;W.frameLoop="always";W.advance=()=>{W.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):Cl()};var Ht=-1,qt=0,Xa=!1;function mn(e,t){Xa?(t.delete(e),e(0)):(t.add(e),Sl())}function Sl(){Ht<0&&(Ht=0,W.frameLoop!=="demand"&&Ii(El))}function $h(){Ht=-1}function El(){~Ht&&(Ii(El),W.batchedUpdates(Cl))}function Cl(){const e=Ht;Ht=W.now();const t=wl(Ht);if(t&&(_l(Er.splice(0,t),r=>r.handler()),qt-=t),!qt){$h();return}da.flush(),ji.flush(e?Math.min(64,Ht-e):16.667),ki.flush(),Ti.flush(),Mi.flush()}function vn(){let e=new Set,t=e;return{add(r){qt+=t==e&&!e.has(r)?1:0,e.add(r)},delete(r){return qt-=t==e&&e.has(r)?1:0,e.delete(r)},flush(r){t.size&&(e=new Set,qt-=t.size,_l(t,n=>n(r)&&e.add(n)),qt+=e.size,t=e)}}}function _l(e,t){e.forEach(r=>{try{t(r)}catch(n){W.catch(n)}})}function Ya(){}var zh=(e,t,r)=>Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0}),T={arr:Array.isArray,obj:e=>!!e&&e.constructor.name==="Object",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",und:e=>e===void 0};function Ft(e,t){if(T.arr(e)){if(!T.arr(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return e===t}var ne=(e,t)=>e.forEach(t);function St(e,t,r){if(T.arr(e)){for(let n=0;n<e.length;n++)t.call(r,e[n],`${n}`);return}for(const n in e)e.hasOwnProperty(n)&&t.call(r,e[n],n)}var Ke=e=>T.und(e)?[]:T.arr(e)?e:[e];function Gr(e,t){if(e.size){const r=Array.from(e);e.clear(),ne(r,t)}}var zr=(e,...t)=>Gr(e,r=>r(...t)),Ai=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Oi,jl,Gt=null,Tl=!1,Pi=Ya,Bh=e=>{e.to&&(jl=e.to),e.now&&(W.now=e.now),e.colors!==void 0&&(Gt=e.colors),e.skipAnimation!=null&&(Tl=e.skipAnimation),e.createStringInterpolator&&(Oi=e.createStringInterpolator),e.requestAnimationFrame&&W.use(e.requestAnimationFrame),e.batchedUpdates&&(W.batchedUpdates=e.batchedUpdates),e.willAdvance&&(Pi=e.willAdvance),e.frameLoop&&(W.frameLoop=e.frameLoop)},Xr=new Set,tt=[],Ma=[],Gn=0,fa={get idle(){return!Xr.size&&!tt.length},start(e){Gn>e.priority?(Xr.add(e),W.onStart(Hh)):(kl(e),W(Ka))},advance:Ka,sort(e){if(Gn)W.onFrame(()=>fa.sort(e));else{const t=tt.indexOf(e);~t&&(tt.splice(t,1),Ml(e))}},clear(){tt=[],Xr.clear()}};function Hh(){Xr.forEach(kl),Xr.clear(),W(Ka)}function kl(e){tt.includes(e)||Ml(e)}function Ml(e){tt.splice(qh(tt,t=>t.priority>e.priority),0,e)}function Ka(e){const t=Ma;for(let r=0;r<tt.length;r++){const n=tt[r];Gn=n.priority,n.idle||(Pi(n),n.advance(e),n.idle||t.push(n))}return Gn=0,Ma=tt,Ma.length=0,tt=t,tt.length>0}function qh(e,t){const r=e.findIndex(t);return r<0?e.length:r}var Wh=(e,t,r)=>Math.min(Math.max(r,e),t),Gh={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},ht="[-+]?\\d*\\.?\\d+",Xn=ht+"%";function ha(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var Xh=new RegExp("rgb"+ha(ht,ht,ht)),Yh=new RegExp("rgba"+ha(ht,ht,ht,ht)),Kh=new RegExp("hsl"+ha(ht,Xn,Xn)),Qh=new RegExp("hsla"+ha(ht,Xn,Xn,ht)),Zh=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Jh=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,ep=/^#([0-9a-fA-F]{6})$/,tp=/^#([0-9a-fA-F]{8})$/;function rp(e){let t;return typeof e=="number"?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=ep.exec(e))?parseInt(t[1]+"ff",16)>>>0:Gt&&Gt[e]!==void 0?Gt[e]:(t=Xh.exec(e))?(br(t[1])<<24|br(t[2])<<16|br(t[3])<<8|255)>>>0:(t=Yh.exec(e))?(br(t[1])<<24|br(t[2])<<16|br(t[3])<<8|js(t[4]))>>>0:(t=Zh.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=tp.exec(e))?parseInt(t[1],16)>>>0:(t=Jh.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=Kh.exec(e))?(Cs(_s(t[1]),Mn(t[2]),Mn(t[3]))|255)>>>0:(t=Qh.exec(e))?(Cs(_s(t[1]),Mn(t[2]),Mn(t[3]))|js(t[4]))>>>0:null}function Ia(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function Cs(e,t,r){const n=r<.5?r*(1+t):r+t-r*t,a=2*r-n,i=Ia(a,n,e+1/3),o=Ia(a,n,e),s=Ia(a,n,e-1/3);return Math.round(i*255)<<24|Math.round(o*255)<<16|Math.round(s*255)<<8}function br(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function _s(e){return(parseFloat(e)%360+360)%360/360}function js(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(t*255)}function Mn(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function Ts(e){let t=rp(e);if(t===null)return e;t=t||0;const r=(t&4278190080)>>>24,n=(t&16711680)>>>16,a=(t&65280)>>>8,i=(t&255)/255;return`rgba(${r}, ${n}, ${a}, ${i})`}var en=(e,t,r)=>{if(T.fun(e))return e;if(T.arr(e))return en({range:e,output:t,extrapolate:r});if(T.str(e.output[0]))return Oi(e);const n=e,a=n.output,i=n.range||[0,1],o=n.extrapolateLeft||n.extrapolate||"extend",s=n.extrapolateRight||n.extrapolate||"extend",l=n.easing||(u=>u);return u=>{const d=ap(u,i);return np(u,i[d],i[d+1],a[d],a[d+1],l,o,s,n.map)}};function np(e,t,r,n,a,i,o,s,l){let u=l?l(e):e;if(u<t){if(o==="identity")return u;o==="clamp"&&(u=t)}if(u>r){if(s==="identity")return u;s==="clamp"&&(u=r)}return n===a?n:t===r?e<=t?n:a:(t===-1/0?u=-u:r===1/0?u=u-t:u=(u-t)/(r-t),u=i(u),n===-1/0?u=-u:a===1/0?u=u+n:u=u*(a-n)+n,u)}function ap(e,t){for(var r=1;r<t.length-1&&!(t[r]>=e);++r);return r-1}var ip=(e,t="end")=>r=>{r=t==="end"?Math.min(r,.999):Math.max(r,.001);const n=r*e,a=t==="end"?Math.floor(n):Math.ceil(n);return Wh(0,1,a/e)},Yn=1.70158,In=Yn*1.525,ks=Yn+1,Ms=2*Math.PI/3,Is=2*Math.PI/4.5,An=e=>e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,sp={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>1-(1-e)*(1-e),easeInOutQuad:e=>e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2,easeInCubic:e=>e*e*e,easeOutCubic:e=>1-Math.pow(1-e,3),easeInOutCubic:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1-Math.pow(1-e,4),easeInOutQuart:e=>e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1-Math.pow(1-e,5),easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInExpo:e=>e===0?0:Math.pow(2,10*e-10),easeOutExpo:e=>e===1?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2,easeInCirc:e=>1-Math.sqrt(1-Math.pow(e,2)),easeOutCirc:e=>Math.sqrt(1-Math.pow(e-1,2)),easeInOutCirc:e=>e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2,easeInBack:e=>ks*e*e*e-Yn*e*e,easeOutBack:e=>1+ks*Math.pow(e-1,3)+Yn*Math.pow(e-1,2),easeInOutBack:e=>e<.5?Math.pow(2*e,2)*((In+1)*2*e-In)/2:(Math.pow(2*e-2,2)*((In+1)*(e*2-2)+In)+2)/2,easeInElastic:e=>e===0?0:e===1?1:-Math.pow(2,10*e-10)*Math.sin((e*10-10.75)*Ms),easeOutElastic:e=>e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e*10-.75)*Ms)+1,easeInOutElastic:e=>e===0?0:e===1?1:e<.5?-(Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*Is))/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*Is)/2+1,easeInBounce:e=>1-An(1-e),easeOutBounce:An,easeInOutBounce:e=>e<.5?(1-An(1-2*e))/2:(1+An(2*e-1))/2,steps:ip},tn=Symbol.for("FluidValue.get"),kr=Symbol.for("FluidValue.observers"),et=e=>!!(e&&e[tn]),He=e=>e&&e[tn]?e[tn]():e,As=e=>e[kr]||null;function op(e,t){e.eventObserved?e.eventObserved(t):e(t)}function rn(e,t){const r=e[kr];r&&r.forEach(n=>{op(n,t)})}var Il=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");lp(this,e)}},lp=(e,t)=>Al(e,tn,t);function Ar(e,t){if(e[tn]){let r=e[kr];r||Al(e,kr,r=new Set),r.has(t)||(r.add(t),e.observerAdded&&e.observerAdded(r.size,t))}return t}function nn(e,t){const r=e[kr];if(r&&r.has(t)){const n=r.size-1;n?r.delete(t):e[kr]=null,e.observerRemoved&&e.observerRemoved(n,t)}}var Al=(e,t,r)=>Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0}),Dn=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,cp=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Os=new RegExp(`(${Dn.source})(%|[a-z]+)`,"i"),up=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,pa=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,Ol=e=>{const[t,r]=dp(e);if(!t||Ai())return e;const n=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(n)return n.trim();if(r&&r.startsWith("--")){const a=window.getComputedStyle(document.documentElement).getPropertyValue(r);return a||e}else{if(r&&pa.test(r))return Ol(r);if(r)return r}return e},dp=e=>{const t=pa.exec(e);if(!t)return[,];const[,r,n]=t;return[r,n]},Aa,fp=(e,t,r,n,a)=>`rgba(${Math.round(t)}, ${Math.round(r)}, ${Math.round(n)}, ${a})`,Pl=e=>{Aa||(Aa=Gt?new RegExp(`(${Object.keys(Gt).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map(i=>He(i).replace(pa,Ol).replace(cp,Ts).replace(Aa,Ts)),r=t.map(i=>i.match(Dn).map(Number)),a=r[0].map((i,o)=>r.map(s=>{if(!(o in s))throw Error('The arity of each "output" value must be equal');return s[o]})).map(i=>en({...e,output:i}));return i=>{var l;const o=!Os.test(t[0])&&((l=t.find(u=>Os.test(u)))==null?void 0:l.replace(Dn,""));let s=0;return t[0].replace(Dn,()=>`${a[s++](i)}${o||""}`).replace(up,fp)}},Fi="react-spring: ",Fl=e=>{const t=e;let r=!1;if(typeof t!="function")throw new TypeError(`${Fi}once requires a function parameter`);return(...n)=>{r||(t(...n),r=!0)}},hp=Fl(console.warn);function pp(){hp(`${Fi}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var mp=Fl(console.warn);function vp(){mp(`${Fi}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function ma(e){return T.str(e)&&(e[0]=="#"||/\d/.test(e)||!Ai()&&pa.test(e)||e in(Gt||{}))}var Ri=Ai()?w.useEffect:w.useLayoutEffect,gp=()=>{const e=w.useRef(!1);return Ri(()=>(e.current=!0,()=>{e.current=!1}),[]),e};function Rl(){const e=w.useState()[1],t=gp();return()=>{t.current&&e(Math.random())}}function yp(e,t){const[r]=w.useState(()=>({inputs:t,result:e()})),n=w.useRef(),a=n.current;let i=a;return i?t&&i.inputs&&bp(t,i.inputs)||(i={inputs:t,result:e()}):i=r,w.useEffect(()=>{n.current=i,a==r&&(r.inputs=r.result=void 0)},[i]),i.result}function bp(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}var Nl=e=>w.useEffect(e,xp),xp=[];function Ps(e){const t=w.useRef();return w.useEffect(()=>{t.current=e}),t.current}var an=Symbol.for("Animated:node"),wp=e=>!!e&&e[an]===e,wt=e=>e&&e[an],Ni=(e,t)=>zh(e,an,t),va=e=>e&&e[an]&&e[an].getPayload(),Dl=class{constructor(){Ni(this,this)}getPayload(){return this.payload||[]}},gn=class extends Dl{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,T.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new gn(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return T.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,T.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},sn=class extends gn{constructor(e){super(0),this._string=null,this._toString=en({output:[e,e]})}static create(e){return new sn(e)}getValue(){const e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(T.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=en({output:[this.getValue(),e]})),this._value=0,super.reset()}},Kn={dependencies:null},ga=class extends Dl{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return St(this.source,(r,n)=>{wp(r)?t[n]=r.getValue(e):et(r)?t[n]=He(r):e||(t[n]=r)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&ne(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return St(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){Kn.dependencies&&et(e)&&Kn.dependencies.add(e);const t=va(e);t&&ne(t,r=>this.add(r))}},Ll=class extends ga{constructor(e){super(e)}static create(e){return new Ll(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((r,n)=>r.setValue(e[n])).some(Boolean):(super.setValue(e.map(Sp)),!0)}};function Sp(e){return(ma(e)?sn:gn).create(e)}function Qa(e){const t=wt(e);return t?t.constructor:T.arr(e)?Ll:ma(e)?sn:gn}var Fs=(e,t)=>{const r=!T.fun(e)||e.prototype&&e.prototype.isReactComponent;return w.forwardRef((n,a)=>{const i=w.useRef(null),o=r&&w.useCallback(g=>{i.current=_p(a,g)},[a]),[s,l]=Cp(n,t),u=Rl(),d=()=>{const g=i.current;if(r&&!g)return;(g?t.applyAnimatedValues(g,s.getValue(!0)):!1)===!1&&u()},f=new Ep(d,l),m=w.useRef();Ri(()=>(m.current=f,ne(l,g=>Ar(g,f)),()=>{m.current&&(ne(m.current.deps,g=>nn(g,m.current)),W.cancel(m.current.update))})),w.useEffect(d,[]),Nl(()=>()=>{const g=m.current;ne(g.deps,v=>nn(v,g))});const x=t.getComponentProps(s.getValue());return w.createElement(e,{...x,ref:o})})},Ep=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&W.write(this.update)}};function Cp(e,t){const r=new Set;return Kn.dependencies=r,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)}),e=new ga(e),Kn.dependencies=null,[e,r]}function _p(e,t){return e&&(T.fun(e)?e(t):e.current=t),t}var Rs=Symbol.for("AnimatedComponent"),jp=(e,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:r=a=>new ga(a),getComponentProps:n=a=>a}={})=>{const a={applyAnimatedValues:t,createAnimatedStyle:r,getComponentProps:n},i=o=>{const s=Ns(o)||"Anonymous";return T.str(o)?o=i[o]||(i[o]=Fs(o,a)):o=o[Rs]||(o[Rs]=Fs(o,a)),o.displayName=`Animated(${s})`,o};return St(e,(o,s)=>{T.arr(e)&&(s=Ns(o)),i[s]=i(o)}),{animated:i}},Ns=e=>T.str(e)?e:e&&T.str(e.displayName)?e.displayName:T.fun(e)&&e.name||null;function ir(e,...t){return T.fun(e)?e(...t):e}var Yr=(e,t)=>e===!0||!!(t&&e&&(T.fun(e)?e(t):Ke(e).includes(t))),Vl=(e,t)=>T.obj(e)?t&&e[t]:e,Ul=(e,t)=>e.default===!0?e[t]:e.default?e.default[t]:void 0,Tp=e=>e,Di=(e,t=Tp)=>{let r=kp;e.default&&e.default!==!0&&(e=e.default,r=Object.keys(e));const n={};for(const a of r){const i=t(e[a],a);T.und(i)||(n[a]=i)}return n},kp=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Mp={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Ip(e){const t={};let r=0;if(St(e,(n,a)=>{Mp[a]||(t[a]=n,r++)}),r)return t}function $l(e){const t=Ip(e);if(t){const r={to:t};return St(e,(n,a)=>a in t||(r[a]=n)),r}return{...e}}function on(e){return e=He(e),T.arr(e)?e.map(on):ma(e)?pt.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function Ap(e){for(const t in e)return!0;return!1}function Za(e){return T.fun(e)||T.arr(e)&&T.obj(e[0])}function Op(e,t){var r;(r=e.ref)==null||r.delete(e),t==null||t.delete(e)}function Pp(e,t){var r;t&&e.ref!==t&&((r=e.ref)==null||r.delete(e),t.add(e),e.ref=t)}var Fp={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},Ja={...Fp.default,mass:1,damping:1,easing:sp.linear,clamp:!1},Rp=class{constructor(){this.velocity=0,Object.assign(this,Ja)}};function Np(e,t,r){r&&(r={...r},Ds(r,t),t={...r,...t}),Ds(e,t),Object.assign(e,t);for(const o in Ja)e[o]==null&&(e[o]=Ja[o]);let{frequency:n,damping:a}=e;const{mass:i}=e;return T.und(n)||(n<.01&&(n=.01),a<0&&(a=0),e.tension=Math.pow(2*Math.PI/n,2)*i,e.friction=4*Math.PI*a*i/n),e}function Ds(e,t){if(!T.und(t.decay))e.duration=void 0;else{const r=!T.und(t.tension)||!T.und(t.friction);(r||!T.und(t.frequency)||!T.und(t.damping)||!T.und(t.mass))&&(e.duration=void 0,e.decay=void 0),r&&(e.frequency=void 0)}}var Ls=[],Dp=class{constructor(){this.changed=!1,this.values=Ls,this.toValues=null,this.fromValues=Ls,this.config=new Rp,this.immediate=!1}};function zl(e,{key:t,props:r,defaultProps:n,state:a,actions:i}){return new Promise((o,s)=>{let l,u,d=Yr(r.cancel??(n==null?void 0:n.cancel),t);if(d)x();else{T.und(r.pause)||(a.paused=Yr(r.pause,t));let g=n==null?void 0:n.pause;g!==!0&&(g=a.paused||Yr(g,t)),l=ir(r.delay||0,t),g?(a.resumeQueue.add(m),i.pause()):(i.resume(),m())}function f(){a.resumeQueue.add(m),a.timeouts.delete(u),u.cancel(),l=u.time-W.now()}function m(){l>0&&!pt.skipAnimation?(a.delayed=!0,u=W.setTimeout(x,l),a.pauseQueue.add(f),a.timeouts.add(u)):x()}function x(){a.delayed&&(a.delayed=!1),a.pauseQueue.delete(f),a.timeouts.delete(u),e<=(a.cancelId||0)&&(d=!0);try{i.start({...r,callId:e,cancel:d},o)}catch(g){s(g)}}})}var Li=(e,t)=>t.length==1?t[0]:t.some(r=>r.cancelled)?Cr(e.get()):t.every(r=>r.noop)?Bl(e.get()):ut(e.get(),t.every(r=>r.finished)),Bl=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),ut=(e,t,r=!1)=>({value:e,finished:t,cancelled:r}),Cr=e=>({value:e,cancelled:!0,finished:!1});function Hl(e,t,r,n){const{callId:a,parentId:i,onRest:o}=t,{asyncTo:s,promise:l}=r;return!i&&e===s&&!t.reset?l:r.promise=(async()=>{r.asyncId=a,r.asyncTo=e;const u=Di(t,(S,E)=>E==="onRest"?void 0:S);let d,f;const m=new Promise((S,E)=>(d=S,f=E)),x=S=>{const E=a<=(r.cancelId||0)&&Cr(n)||a!==r.asyncId&&ut(n,!1);if(E)throw S.result=E,f(S),S},g=(S,E)=>{const h=new Vs,y=new Us;return(async()=>{if(pt.skipAnimation)throw ln(r),y.result=ut(n,!1),f(y),y;x(h);const j=T.obj(S)?{...S}:{...E,to:S};j.parentId=a,St(u,(O,C)=>{T.und(j[C])&&(j[C]=O)});const k=await n.start(j);return x(h),r.paused&&await new Promise(O=>{r.resumeQueue.add(O)}),k})()};let v;if(pt.skipAnimation)return ln(r),ut(n,!1);try{let S;T.arr(e)?S=(async E=>{for(const h of E)await g(h)})(e):S=Promise.resolve(e(g,n.stop.bind(n))),await Promise.all([S.then(d),m]),v=ut(n.get(),!0,!1)}catch(S){if(S instanceof Vs)v=S.result;else if(S instanceof Us)v=S.result;else throw S}finally{a==r.asyncId&&(r.asyncId=i,r.asyncTo=i?s:void 0,r.promise=i?l:void 0)}return T.fun(o)&&W.batchedUpdates(()=>{o(v,n,n.item)}),v})()}function ln(e,t){Gr(e.timeouts,r=>r.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var Vs=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},Us=class extends Error{constructor(){super("SkipAnimationSignal")}},ei=e=>e instanceof Vi,Lp=1,Vi=class extends Il{constructor(){super(...arguments),this.id=Lp++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=wt(this);return e&&e.getValue()}to(...e){return pt.to(this,e)}interpolate(...e){return pp(),pt.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){rn(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||fa.sort(this),rn(this,{type:"priority",parent:this,priority:e})}},cr=Symbol.for("SpringPhase"),ql=1,ti=2,ri=4,Oa=e=>(e[cr]&ql)>0,Ut=e=>(e[cr]&ti)>0,Dr=e=>(e[cr]&ri)>0,$s=(e,t)=>t?e[cr]|=ti|ql:e[cr]&=~ti,zs=(e,t)=>t?e[cr]|=ri:e[cr]&=~ri,Vp=class extends Vi{constructor(e,t){if(super(),this.animation=new Dp,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!T.und(e)||!T.und(t)){const r=T.obj(e)?{...e}:{...t,from:e};T.und(r.default)&&(r.default=!0),this.start(r)}}get idle(){return!(Ut(this)||this._state.asyncTo)||Dr(this)}get goal(){return He(this.animation.to)}get velocity(){const e=wt(this);return e instanceof gn?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return Oa(this)}get isAnimating(){return Ut(this)}get isPaused(){return Dr(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,r=!1;const n=this.animation;let{toValues:a}=n;const{config:i}=n,o=va(n.to);!o&&et(n.to)&&(a=Ke(He(n.to))),n.values.forEach((u,d)=>{if(u.done)return;const f=u.constructor==sn?1:o?o[d].lastPosition:a[d];let m=n.immediate,x=f;if(!m){if(x=u.lastPosition,i.tension<=0){u.done=!0;return}let g=u.elapsedTime+=e;const v=n.fromValues[d],S=u.v0!=null?u.v0:u.v0=T.arr(i.velocity)?i.velocity[d]:i.velocity;let E;const h=i.precision||(v==f?.005:Math.min(1,Math.abs(f-v)*.001));if(T.und(i.duration))if(i.decay){const y=i.decay===!0?.998:i.decay,j=Math.exp(-(1-y)*g);x=v+S/(1-y)*(1-j),m=Math.abs(u.lastPosition-x)<=h,E=S*j}else{E=u.lastVelocity==null?S:u.lastVelocity;const y=i.restVelocity||h/10,j=i.clamp?0:i.bounce,k=!T.und(j),O=v==f?u.v0>0:v<f;let C,I=!1;const M=1,V=Math.ceil(e/M);for(let B=0;B<V&&(C=Math.abs(E)>y,!(!C&&(m=Math.abs(f-x)<=h,m)));++B){k&&(I=x==f||x>f==O,I&&(E=-E*j,x=f));const se=-i.tension*1e-6*(x-f),le=-i.friction*.001*E,re=(se+le)/i.mass;E=E+re*M,x=x+E*M}}else{let y=1;i.duration>0&&(this._memoizedDuration!==i.duration&&(this._memoizedDuration=i.duration,u.durationProgress>0&&(u.elapsedTime=i.duration*u.durationProgress,g=u.elapsedTime+=e)),y=(i.progress||0)+g/this._memoizedDuration,y=y>1?1:y<0?0:y,u.durationProgress=y),x=v+i.easing(y)*(f-v),E=(x-u.lastPosition)/e,m=y==1}u.lastVelocity=E,Number.isNaN(x)&&(console.warn("Got NaN while animating:",this),m=!0)}o&&!o[d].done&&(m=!1),m?u.done=!0:t=!1,u.setValue(x,i.round)&&(r=!0)});const s=wt(this),l=s.getValue();if(t){const u=He(n.to);(l!==u||r)&&!i.decay?(s.setValue(u),this._onChange(u)):r&&i.decay&&this._onChange(l),this._stop()}else r&&this._onChange(l)}set(e){return W.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Ut(this)){const{to:e,config:t}=this.animation;W.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let r;return T.und(e)?(r=this.queue||[],this.queue=[]):r=[T.obj(e)?e:{...t,to:e}],Promise.all(r.map(n=>this._update(n))).then(n=>Li(this,n))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),ln(this._state,e&&this._lastCallId),W.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:r,from:n}=e;r=T.obj(r)?r[t]:r,(r==null||Za(r))&&(r=void 0),n=T.obj(n)?n[t]:n,n==null&&(n=void 0);const a={to:r,from:n};return Oa(this)||(e.reverse&&([r,n]=[n,r]),n=He(n),T.und(n)?wt(this)||this._set(r):this._set(n)),a}_update({...e},t){const{key:r,defaultProps:n}=this;e.default&&Object.assign(n,Di(e,(o,s)=>/^on/.test(s)?Vl(o,r):o)),Hs(this,e,"onProps"),Vr(this,"onProps",e,this);const a=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const i=this._state;return zl(++this._lastCallId,{key:r,props:e,defaultProps:n,state:i,actions:{pause:()=>{Dr(this)||(zs(this,!0),zr(i.pauseQueue),Vr(this,"onPause",ut(this,Lr(this,this.animation.to)),this))},resume:()=>{Dr(this)&&(zs(this,!1),Ut(this)&&this._resume(),zr(i.resumeQueue),Vr(this,"onResume",ut(this,Lr(this,this.animation.to)),this))},start:this._merge.bind(this,a)}}).then(o=>{if(e.loop&&o.finished&&!(t&&o.noop)){const s=Wl(e);if(s)return this._update(s,!0)}return o})}_merge(e,t,r){if(t.cancel)return this.stop(!0),r(Cr(this));const n=!T.und(e.to),a=!T.und(e.from);if(n||a)if(t.callId>this._lastToId)this._lastToId=t.callId;else return r(Cr(this));const{key:i,defaultProps:o,animation:s}=this,{to:l,from:u}=s;let{to:d=l,from:f=u}=e;a&&!n&&(!t.default||T.und(d))&&(d=f),t.reverse&&([d,f]=[f,d]);const m=!Ft(f,u);m&&(s.from=f),f=He(f);const x=!Ft(d,l);x&&this._focus(d);const g=Za(t.to),{config:v}=s,{decay:S,velocity:E}=v;(n||a)&&(v.velocity=0),t.config&&!g&&Np(v,ir(t.config,i),t.config!==o.config?ir(o.config,i):void 0);let h=wt(this);if(!h||T.und(d))return r(ut(this,!0));const y=T.und(t.reset)?a&&!t.default:!T.und(f)&&Yr(t.reset,i),j=y?f:this.get(),k=on(d),O=T.num(k)||T.arr(k)||ma(k),C=!g&&(!O||Yr(o.immediate||t.immediate,i));if(x){const B=Qa(d);if(B!==h.constructor)if(C)h=this._set(k);else throw Error(`Cannot animate between ${h.constructor.name} and ${B.name}, as the "to" prop suggests`)}const I=h.constructor;let M=et(d),V=!1;if(!M){const B=y||!Oa(this)&&m;(x||B)&&(V=Ft(on(j),k),M=!V),(!Ft(s.immediate,C)&&!C||!Ft(v.decay,S)||!Ft(v.velocity,E))&&(M=!0)}if(V&&Ut(this)&&(s.changed&&!y?M=!0:M||this._stop(l)),!g&&((M||et(l))&&(s.values=h.getPayload(),s.toValues=et(d)?null:I==sn?[1]:Ke(k)),s.immediate!=C&&(s.immediate=C,!C&&!y&&this._set(l)),M)){const{onRest:B}=s;ne($p,le=>Hs(this,t,le));const se=ut(this,Lr(this,l));zr(this._pendingCalls,se),this._pendingCalls.add(r),s.changed&&W.batchedUpdates(()=>{var le;s.changed=!y,B==null||B(se,this),y?ir(o.onRest,se):(le=s.onStart)==null||le.call(s,se,this)})}y&&this._set(j),g?r(Hl(t.to,t,this._state,this)):M?this._start():Ut(this)&&!x?this._pendingCalls.add(r):r(Bl(j))}_focus(e){const t=this.animation;e!==t.to&&(As(this)&&this._detach(),t.to=e,As(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;et(t)&&(Ar(t,this),ei(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;et(e)&&nn(e,this)}_set(e,t=!0){const r=He(e);if(!T.und(r)){const n=wt(this);if(!n||!Ft(r,n.getValue())){const a=Qa(r);!n||n.constructor!=a?Ni(this,a.create(r)):n.setValue(r),n&&W.batchedUpdates(()=>{this._onChange(r,t)})}}return wt(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,Vr(this,"onStart",ut(this,Lr(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),ir(this.animation.onChange,e,this)),ir(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;wt(this).reset(He(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),Ut(this)||($s(this,!0),Dr(this)||this._resume())}_resume(){pt.skipAnimation?this.finish():fa.start(this)}_stop(e,t){if(Ut(this)){$s(this,!1);const r=this.animation;ne(r.values,a=>{a.done=!0}),r.toValues&&(r.onChange=r.onPause=r.onResume=void 0),rn(this,{type:"idle",parent:this});const n=t?Cr(this.get()):ut(this.get(),Lr(this,e??r.to));zr(this._pendingCalls,n),r.changed&&(r.changed=!1,Vr(this,"onRest",n,this))}}};function Lr(e,t){const r=on(t),n=on(e.get());return Ft(n,r)}function Wl(e,t=e.loop,r=e.to){const n=ir(t);if(n){const a=n!==!0&&$l(n),i=(a||e).reverse,o=!a||a.reset;return cn({...e,loop:t,default:!1,pause:void 0,to:!i||Za(r)?r:void 0,from:o?e.from:void 0,reset:o,...a})}}function cn(e){const{to:t,from:r}=e=$l(e),n=new Set;return T.obj(t)&&Bs(t,n),T.obj(r)&&Bs(r,n),e.keys=n.size?Array.from(n):null,e}function Up(e){const t=cn(e);return T.und(t.default)&&(t.default=Di(t)),t}function Bs(e,t){St(e,(r,n)=>r!=null&&t.add(n))}var $p=["onStart","onRest","onChange","onPause","onResume"];function Hs(e,t,r){e.animation[r]=t[r]!==Ul(t,r)?Vl(t[r],e.key):void 0}function Vr(e,t,...r){var n,a,i,o;(a=(n=e.animation)[t])==null||a.call(n,...r),(o=(i=e.defaultProps)[t])==null||o.call(i,...r)}var zp=["onStart","onChange","onRest"],Bp=1,Hp=class{constructor(e,t){this.id=Bp++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,r)=>e[r]=t.get()),e}set(e){for(const t in e){const r=e[t];T.und(r)||this.springs[t].set(r)}}update(e){return e&&this.queue.push(cn(e)),this}start(e){let{queue:t}=this;return e?t=Ke(e).map(cn):this.queue=[],this._flush?this._flush(this,t):(Ql(this,t),ni(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const r=this.springs;ne(Ke(t),n=>r[n].stop(!!e))}else ln(this._state,this._lastAsyncId),this.each(r=>r.stop(!!e));return this}pause(e){if(T.und(e))this.start({pause:!0});else{const t=this.springs;ne(Ke(e),r=>t[r].pause())}return this}resume(e){if(T.und(e))this.start({pause:!1});else{const t=this.springs;ne(Ke(e),r=>t[r].resume())}return this}each(e){St(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:r}=this._events,n=this._active.size>0,a=this._changed.size>0;(n&&!this._started||a&&!this._started)&&(this._started=!0,Gr(e,([s,l])=>{l.value=this.get(),s(l,this,this._item)}));const i=!n&&this._started,o=a||i&&r.size?this.get():null;a&&t.size&&Gr(t,([s,l])=>{l.value=o,s(l,this,this._item)}),i&&(this._started=!1,Gr(r,([s,l])=>{l.value=o,s(l,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;W.onFrame(this._onFrame)}};function ni(e,t){return Promise.all(t.map(r=>Gl(e,r))).then(r=>Li(e,r))}async function Gl(e,t,r){const{keys:n,to:a,from:i,loop:o,onRest:s,onResolve:l}=t,u=T.obj(t.default)&&t.default;o&&(t.loop=!1),a===!1&&(t.to=null),i===!1&&(t.from=null);const d=T.arr(a)||T.fun(a)?a:void 0;d?(t.to=void 0,t.onRest=void 0,u&&(u.onRest=void 0)):ne(zp,v=>{const S=t[v];if(T.fun(S)){const E=e._events[v];t[v]=({finished:h,cancelled:y})=>{const j=E.get(S);j?(h||(j.finished=!1),y&&(j.cancelled=!0)):E.set(S,{value:null,finished:h||!1,cancelled:y||!1})},u&&(u[v]=t[v])}});const f=e._state;t.pause===!f.paused?(f.paused=t.pause,zr(t.pause?f.pauseQueue:f.resumeQueue)):f.paused&&(t.pause=!0);const m=(n||Object.keys(e.springs)).map(v=>e.springs[v].start(t)),x=t.cancel===!0||Ul(t,"cancel")===!0;(d||x&&f.asyncId)&&m.push(zl(++e._lastAsyncId,{props:t,state:f,actions:{pause:Ya,resume:Ya,start(v,S){x?(ln(f,e._lastAsyncId),S(Cr(e))):(v.onRest=s,S(Hl(d,v,f,e)))}}})),f.paused&&await new Promise(v=>{f.resumeQueue.add(v)});const g=Li(e,await Promise.all(m));if(o&&g.finished&&!(r&&g.noop)){const v=Wl(t,o,a);if(v)return Ql(e,[v]),Gl(e,v,!0)}return l&&W.batchedUpdates(()=>l(g,e,e.item)),g}function qs(e,t){const r={...e.springs};return t&&ne(Ke(t),n=>{T.und(n.keys)&&(n=cn(n)),T.obj(n.to)||(n={...n,to:void 0}),Kl(r,n,a=>Yl(a))}),Xl(e,r),r}function Xl(e,t){St(t,(r,n)=>{e.springs[n]||(e.springs[n]=r,Ar(r,e))})}function Yl(e,t){const r=new Vp;return r.key=e,t&&Ar(r,t),r}function Kl(e,t,r){t.keys&&ne(t.keys,n=>{(e[n]||(e[n]=r(n)))._prepareNode(t)})}function Ql(e,t){ne(t,r=>{Kl(e.springs,r,n=>Yl(n,e))})}var ya=({children:e,...t})=>{const r=w.useContext(Qn),n=t.pause||!!r.pause,a=t.immediate||!!r.immediate;t=yp(()=>({pause:n,immediate:a}),[n,a]);const{Provider:i}=Qn;return w.createElement(i,{value:t},e)},Qn=qp(ya,{});ya.Provider=Qn.Provider;ya.Consumer=Qn.Consumer;function qp(e,t){return Object.assign(e,w.createContext(t)),e.Provider._context=e,e.Consumer._context=e,e}var Wp=()=>{const e=[],t=function(n){vp();const a=[];return ne(e,(i,o)=>{if(T.und(n))a.push(i.start());else{const s=r(n,i,o);s&&a.push(i.start(s))}}),a};t.current=e,t.add=function(n){e.includes(n)||e.push(n)},t.delete=function(n){const a=e.indexOf(n);~a&&e.splice(a,1)},t.pause=function(){return ne(e,n=>n.pause(...arguments)),this},t.resume=function(){return ne(e,n=>n.resume(...arguments)),this},t.set=function(n){ne(e,(a,i)=>{const o=T.fun(n)?n(i,a):n;o&&a.set(o)})},t.start=function(n){const a=[];return ne(e,(i,o)=>{if(T.und(n))a.push(i.start());else{const s=this._getProps(n,i,o);s&&a.push(i.start(s))}}),a},t.stop=function(){return ne(e,n=>n.stop(...arguments)),this},t.update=function(n){return ne(e,(a,i)=>a.update(this._getProps(n,a,i))),this};const r=function(n,a,i){return T.fun(n)?n(i,a):n};return t._getProps=r,t};function Gp(e,t,r){const n=T.fun(t)&&t;n&&!r&&(r=[]);const a=w.useMemo(()=>n||arguments.length==3?Wp():void 0,[]),i=w.useRef(0),o=Rl(),s=w.useMemo(()=>({ctrls:[],queue:[],flush(E,h){const y=qs(E,h);return i.current>0&&!s.queue.length&&!Object.keys(y).some(k=>!E.springs[k])?ni(E,h):new Promise(k=>{Xl(E,y),s.queue.push(()=>{k(ni(E,h))}),o()})}}),[]),l=w.useRef([...s.ctrls]),u=[],d=Ps(e)||0;w.useMemo(()=>{ne(l.current.slice(e,d),E=>{Op(E,a),E.stop(!0)}),l.current.length=e,f(d,e)},[e]),w.useMemo(()=>{f(0,Math.min(d,e))},r);function f(E,h){for(let y=E;y<h;y++){const j=l.current[y]||(l.current[y]=new Hp(null,s.flush)),k=n?n(y,j):t[y];k&&(u[y]=Up(k))}}const m=l.current.map((E,h)=>qs(E,u[h])),x=w.useContext(ya),g=Ps(x),v=x!==g&&Ap(x);Ri(()=>{i.current++,s.ctrls=l.current;const{queue:E}=s;E.length&&(s.queue=[],ne(E,h=>h())),ne(l.current,(h,y)=>{a==null||a.add(h),v&&h.start({default:x});const j=u[y];j&&(Pp(h,j.ref),h.ref?h.queue.push(j):h.start(j))})}),Nl(()=>()=>{ne(s.ctrls,E=>E.stop(!0))});const S=m.map(E=>({...E}));return a?[S,a]:S}function Xp(e,t){const r=T.fun(e),[[n],a]=Gp(1,r?e:[e],r?t||[]:t);return r||arguments.length==2?[n,a]:n}var Yp=class extends Vi{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=en(...t);const r=this._get(),n=Qa(r);Ni(this,n.create(r))}advance(e){const t=this._get(),r=this.get();Ft(t,r)||(wt(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&Ws(this._active)&&Pa(this)}_get(){const e=T.arr(this.source)?this.source.map(He):Ke(He(this.source));return this.calc(...e)}_start(){this.idle&&!Ws(this._active)&&(this.idle=!1,ne(va(this),e=>{e.done=!1}),pt.skipAnimation?(W.batchedUpdates(()=>this.advance()),Pa(this)):fa.start(this))}_attach(){let e=1;ne(Ke(this.source),t=>{et(t)&&Ar(t,this),ei(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){ne(Ke(this.source),e=>{et(e)&&nn(e,this)}),this._active.clear(),Pa(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=Ke(this.source).reduce((t,r)=>Math.max(t,(ei(r)?r.priority:0)+1),0))}};function Kp(e){return e.idle!==!1}function Ws(e){return!e.size||Array.from(e).every(Kp)}function Pa(e){e.idle||(e.idle=!0,ne(va(e),t=>{t.done=!0}),rn(e,{type:"idle",parent:e}))}pt.assign({createStringInterpolator:Pl,to:(e,t)=>new Yp(e,t)});var Zl=/^--/;function Qp(e,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!Zl.test(e)&&!(Kr.hasOwnProperty(e)&&Kr[e])?t+"px":(""+t).trim()}var Gs={};function Zp(e,t){if(!e.nodeType||!e.setAttribute)return!1;const r=e.nodeName==="filter"||e.parentNode&&e.parentNode.nodeName==="filter",{style:n,children:a,scrollTop:i,scrollLeft:o,viewBox:s,...l}=t,u=Object.values(l),d=Object.keys(l).map(f=>r||e.hasAttribute(f)?f:Gs[f]||(Gs[f]=f.replace(/([A-Z])/g,m=>"-"+m.toLowerCase())));a!==void 0&&(e.textContent=a);for(const f in n)if(n.hasOwnProperty(f)){const m=Qp(f,n[f]);Zl.test(f)?e.style.setProperty(f,m):e.style[f]=m}d.forEach((f,m)=>{e.setAttribute(f,u[m])}),i!==void 0&&(e.scrollTop=i),o!==void 0&&(e.scrollLeft=o),s!==void 0&&e.setAttribute("viewBox",s)}var Kr={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Jp=(e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1),e0=["Webkit","Ms","Moz","O"];Kr=Object.keys(Kr).reduce((e,t)=>(e0.forEach(r=>e[Jp(r,t)]=e[t]),e),Kr);var t0=/^(matrix|translate|scale|rotate|skew)/,r0=/^(translate)/,n0=/^(rotate|skew)/,Fa=(e,t)=>T.num(e)&&e!==0?e+t:e,Ln=(e,t)=>T.arr(e)?e.every(r=>Ln(r,t)):T.num(e)?e===t:parseFloat(e)===t,a0=class extends ga{constructor({x:e,y:t,z:r,...n}){const a=[],i=[];(e||t||r)&&(a.push([e||0,t||0,r||0]),i.push(o=>[`translate3d(${o.map(s=>Fa(s,"px")).join(",")})`,Ln(o,0)])),St(n,(o,s)=>{if(s==="transform")a.push([o||""]),i.push(l=>[l,l===""]);else if(t0.test(s)){if(delete n[s],T.und(o))return;const l=r0.test(s)?"px":n0.test(s)?"deg":"";a.push(Ke(o)),i.push(s==="rotate3d"?([u,d,f,m])=>[`rotate3d(${u},${d},${f},${Fa(m,l)})`,Ln(m,0)]:u=>[`${s}(${u.map(d=>Fa(d,l)).join(",")})`,Ln(u,s.startsWith("scale")?1:0)])}}),a.length&&(n.transform=new i0(a,i)),super(n)}},i0=class extends Il{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return ne(this.inputs,(r,n)=>{const a=He(r[0]),[i,o]=this.transforms[n](T.arr(a)?a:r.map(He));e+=" "+i,t=t&&o}),t?"none":e}observerAdded(e){e==1&&ne(this.inputs,t=>ne(t,r=>et(r)&&Ar(r,this)))}observerRemoved(e){e==0&&ne(this.inputs,t=>ne(t,r=>et(r)&&nn(r,this)))}eventObserved(e){e.type=="change"&&(this._value=null),rn(this,e)}},s0=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];pt.assign({batchedUpdates:oo.unstable_batchedUpdates,createStringInterpolator:Pl,colors:Gh});var o0=jp(s0,{applyAnimatedValues:Zp,createAnimatedStyle:e=>new a0(e),getComponentProps:({scrollTop:e,scrollLeft:t,...r})=>r}),l0=o0.animated,Jl={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function r(){for(var i="",o=0;o<arguments.length;o++){var s=arguments[o];s&&(i=a(i,n(s)))}return i}function n(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return r.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var o="";for(var s in i)t.call(i,s)&&i[s]&&(o=a(o,s));return o}function a(i,o){return o?i?i+" "+o:i+o:i}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})(Jl);var c0=Jl.exports;const ec=Zn(c0);var ai=new Map,On=new WeakMap,Xs=0,u0=void 0;function d0(e){return e?(On.has(e)||(Xs+=1,On.set(e,Xs.toString())),On.get(e)):"0"}function f0(e){return Object.keys(e).sort().filter(t=>e[t]!==void 0).map(t=>`${t}_${t==="root"?d0(e.root):e[t]}`).toString()}function h0(e){const t=f0(e);let r=ai.get(t);if(!r){const n=new Map;let a;const i=new IntersectionObserver(o=>{o.forEach(s=>{var l;const u=s.isIntersecting&&a.some(d=>s.intersectionRatio>=d);e.trackVisibility&&typeof s.isVisible>"u"&&(s.isVisible=u),(l=n.get(s.target))==null||l.forEach(d=>{d(u,s)})})},e);a=i.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:t,observer:i,elements:n},ai.set(t,r)}return r}function p0(e,t,r={},n=u0){if(typeof window.IntersectionObserver>"u"&&n!==void 0){const l=e.getBoundingClientRect();return t(n,{isIntersecting:n,target:e,intersectionRatio:typeof r.threshold=="number"?r.threshold:0,time:0,boundingClientRect:l,intersectionRect:l,rootBounds:l}),()=>{}}const{id:a,observer:i,elements:o}=h0(r),s=o.get(e)||[];return o.has(e)||o.set(e,s),s.push(t),i.observe(e),function(){s.splice(s.indexOf(t),1),s.length===0&&(o.delete(e),i.unobserve(e)),o.size===0&&(i.disconnect(),ai.delete(a))}}function tc({threshold:e,delay:t,trackVisibility:r,rootMargin:n,root:a,triggerOnce:i,skip:o,initialInView:s,fallbackInView:l,onChange:u}={}){var d;const[f,m]=w.useState(null),x=w.useRef(),[g,v]=w.useState({inView:!!s,entry:void 0});x.current=u,w.useEffect(()=>{if(o||!f)return;let y;return y=p0(f,(j,k)=>{v({inView:j,entry:k}),x.current&&x.current(j,k),k.isIntersecting&&i&&y&&(y(),y=void 0)},{root:a,rootMargin:n,threshold:e,trackVisibility:r,delay:t},l),()=>{y&&y()}},[Array.isArray(e)?e.toString():e,f,a,n,i,o,r,l,t]);const S=(d=g.entry)==null?void 0:d.target,E=w.useRef();!f&&S&&!i&&!o&&E.current!==S&&(E.current=S,v({inView:!!s,entry:void 0}));const h=[m,g.inView,g.entry];return h.ref=h[0],h.inView=h[1],h.entry=h[2],h}const m0="Left",v0="Right",g0="Up",y0="Down",Sr={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},ii={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},Ys="mousemove",Ks="mouseup",b0="touchend",x0="touchmove",w0="touchstart";function S0(e,t,r,n){return e>t?r>0?v0:m0:n>0?y0:g0}function Qs(e,t){if(t===0)return e;const r=Math.PI/180*t,n=e[0]*Math.cos(r)+e[1]*Math.sin(r),a=e[1]*Math.cos(r)-e[0]*Math.sin(r);return[n,a]}function E0(e,t){const r=d=>{const f="touches"in d;f&&d.touches.length>1||e((m,x)=>{x.trackMouse&&!f&&(document.addEventListener(Ys,n),document.addEventListener(Ks,o));const{clientX:g,clientY:v}=f?d.touches[0]:d,S=Qs([g,v],x.rotationAngle);return x.onTouchStartOrOnMouseDown&&x.onTouchStartOrOnMouseDown({event:d}),Object.assign(Object.assign(Object.assign({},m),ii),{initial:S.slice(),xy:S,start:d.timeStamp||0})})},n=d=>{e((f,m)=>{const x="touches"in d;if(x&&d.touches.length>1)return f;if(d.timeStamp-f.start>m.swipeDuration)return f.swiping?Object.assign(Object.assign({},f),{swiping:!1}):f;const{clientX:g,clientY:v}=x?d.touches[0]:d,[S,E]=Qs([g,v],m.rotationAngle),h=S-f.xy[0],y=E-f.xy[1],j=Math.abs(h),k=Math.abs(y),O=(d.timeStamp||0)-f.start,C=Math.sqrt(j*j+k*k)/(O||1),I=[h/(O||1),y/(O||1)],M=S0(j,k,h,y),V=typeof m.delta=="number"?m.delta:m.delta[M.toLowerCase()]||Sr.delta;if(j<V&&k<V&&!f.swiping)return f;const B={absX:j,absY:k,deltaX:h,deltaY:y,dir:M,event:d,first:f.first,initial:f.initial,velocity:C,vxvy:I};B.first&&m.onSwipeStart&&m.onSwipeStart(B),m.onSwiping&&m.onSwiping(B);let se=!1;return(m.onSwiping||m.onSwiped||m[`onSwiped${M}`])&&(se=!0),se&&m.preventScrollOnSwipe&&m.trackTouch&&d.cancelable&&d.preventDefault(),Object.assign(Object.assign({},f),{first:!1,eventData:B,swiping:!0})})},a=d=>{e((f,m)=>{let x;if(f.swiping&&f.eventData){if(d.timeStamp-f.start<m.swipeDuration){x=Object.assign(Object.assign({},f.eventData),{event:d}),m.onSwiped&&m.onSwiped(x);const g=m[`onSwiped${x.dir}`];g&&g(x)}}else m.onTap&&m.onTap({event:d});return m.onTouchEndOrOnMouseUp&&m.onTouchEndOrOnMouseUp({event:d}),Object.assign(Object.assign(Object.assign({},f),ii),{eventData:x})})},i=()=>{document.removeEventListener(Ys,n),document.removeEventListener(Ks,o)},o=d=>{i(),a(d)},s=(d,f)=>{let m=()=>{};if(d&&d.addEventListener){const x=Object.assign(Object.assign({},Sr.touchEventOptions),f.touchEventOptions),g=[[w0,r,x],[x0,n,Object.assign(Object.assign({},x),f.preventScrollOnSwipe?{passive:!1}:{})],[b0,a,x]];g.forEach(([v,S,E])=>d.addEventListener(v,S,E)),m=()=>g.forEach(([v,S])=>d.removeEventListener(v,S))}return m},u={ref:d=>{d!==null&&e((f,m)=>{if(f.el===d)return f;const x={};return f.el&&f.el!==d&&f.cleanUpTouch&&(f.cleanUpTouch(),x.cleanUpTouch=void 0),m.trackTouch&&d&&(x.cleanUpTouch=s(d,m)),Object.assign(Object.assign(Object.assign({},f),{el:d}),x)})}};return t.trackMouse&&(u.onMouseDown=r),[u,s]}function C0(e,t,r,n){return!t.trackTouch||!e.el?(e.cleanUpTouch&&e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:void 0})):e.cleanUpTouch?t.preventScrollOnSwipe!==r.preventScrollOnSwipe||t.touchEventOptions.passive!==r.touchEventOptions.passive?(e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:n(e.el,t)})):e:Object.assign(Object.assign({},e),{cleanUpTouch:n(e.el,t)})}function _0(e){const{trackMouse:t}=e,r=w.useRef(Object.assign({},ii)),n=w.useRef(Object.assign({},Sr)),a=w.useRef(Object.assign({},n.current));a.current=Object.assign({},n.current),n.current=Object.assign(Object.assign({},Sr),e);let i;for(i in Sr)n.current[i]===void 0&&(n.current[i]=Sr[i]);const[o,s]=w.useMemo(()=>E0(l=>r.current=l(r.current,n.current),{trackMouse:t}),[t]);return r.current=C0(r.current,n.current,a.current,s),o}const j0=({alt:e,borderRadius:t,height:r,src:n,status:a,width:i})=>{const[o,s]=w.useState(!1),{ref:l,inView:u}=tc();return w.useEffect(()=>{if(u&&!o){const d=new Image;d.onload=()=>s(!0),d.onerror=()=>{var m;const f=(m=l.current)==null?void 0:m.parentElement;f&&(f.style.display="none")},d.src=n}},[u,o,n]),c.jsx("div",{className:"image-container",ref:l,children:o?c.jsx("img",{className:a==="unread"?"":"read",src:n,alt:e,style:{width:i,height:r,objectFit:"cover",borderRadius:t}}):c.jsx("div",{className:"skeleton-container",children:c.jsx(Un,{text:{rows:0},image:{style:{width:i,height:r,margin:"0",borderRadius:t}},animation:!0})})})},T0=({url:e,mini:t})=>c.jsx("img",{className:t?"feed-icon-mini":"feed-icon",src:`https://icons.duckduckgo.com/ip3/${new URL(e).hostname}.ico`,alt:"Feed icon"}),k0=({entry:e,isThumbnail:t})=>{const r=t?{width:"100px",height:"100px"}:{width:"100%",height:"160px"};return e.imgSrc?c.jsx("div",{className:t?"thumbnail":"cover-image",children:c.jsx(j0,{alt:e.id,borderRadius:t?"4px":void 0,src:e.imgSrc,status:e.status,width:r.width,height:r.height})}):null},M0=({entry:e,showFeedIcon:t,mini:r})=>{const n=ec({"article-card-mini-content":r,"article-card-mini-content-padding":r&&t});return c.jsxs("div",{className:n,style:{width:"calc(100% - 32px)"},children:[c.jsx("div",{style:{padding:r?"0 8px 0 0":"0 0 8px 0"},children:c.jsx(k0,{entry:e,isThumbnail:r})}),c.jsxs("div",{className:r?"article-card-mini-content-text":"",children:[c.jsx(z.Text,{className:e.status==="unread"?"title-unread":"title-read",children:e.title}),c.jsxs(z.Text,{className:"article-info",children:[c.jsx("br",{}),t&&c.jsx(T0,{url:e.feed.site_url,mini:r}),e.feed.title,c.jsx("br",{}),bo(e.published_at)]}),e.starred&&c.jsx(oi,{className:"icon-starred"})]})]})},I0=({entry:e,handleEntryClick:t,mini:r})=>{const n=A(M=>M.activeContent),{config:a}=Pe(),{markReadOnScroll:i,showFeedIcon:o}=a,s=n&&e.id===n.id,{handleToggleStarred:l,handleToggleStatus:u}=di(),[d,f]=w.useState(0),m=100,x=.5,g=e.starred,v=e.status==="unread",S=_0({preventScrollOnSwipe:!0,delta:m/2,onSwiping:M=>{const V=Math.min(Math.abs(M.deltaX*x),m)*Math.sign(M.deltaX);f(V)},onSwiped:M=>{M.deltaX>m?l(e).then(()=>ie.success(g?"Unmarked as starred":"Marked as starred")):M.deltaX<-m&&u(e).then(()=>ie.success(v?"Marked as read":"Marked as unread")),f(0)}}),[E,h]=w.useState(!1),[y,j]=w.useState(!1),k=()=>u(e),O=20,{ref:C}=tc({skip:y,onChange:(M,V)=>{if(!(!i||!v)){if(M)h(!0);else if(E){const{top:B}=V.boundingClientRect;B<O&&(k(),j(!0))}}}}),I=Xp({x:d});return w.createElement("div",{...S,className:"article-card",key:e.id},c.jsxs("div",{ref:C,children:[c.jsx(l0.div,{className:"swipe-card",style:I,children:c.jsx(Jr,{className:ec("swipe-content","card-custom-style","card-custom-hover-style",{"card-custom-selected-style":s}),"data-entry-id":e.id,hoverable:!0,onClick:()=>t(e),bordered:!1,children:c.jsx(Jr.Meta,{description:c.jsx(M0,{entry:e,showFeedIcon:o,mini:r})})})}),c.jsxs("div",{className:"swipe-actions",children:[c.jsx("div",{className:"swipe-action left",children:g?c.jsx(oi,{style:{color:"#ffcd00"}}):c.jsx(si,{})}),c.jsx("div",{className:"swipe-action right",children:v?c.jsx(lo,{}):c.jsx(co,{})})]})]}))},A0=({loading:e})=>{const{config:t}=Pe(),{layout:r}=t,n=r==="large"?2:4,a=i=>c.jsx(Jr,{className:"card-style",cover:r==="large"&&c.jsx("div",{className:"card-cover-style"}),children:c.jsx(Jr.Meta,{description:c.jsx(Un,{loading:e,animation:!0,text:{rows:3,width:150}})})},i);return e?Array.from({length:n},(i,o)=>a(o)):null},rc=e=>{const{config:t}=Pe(),{showAllFeeds:r}=t,n=A(m=>m.hiddenFeedIds),{entries:a,filterStatus:i,filterString:o,filterType:s,setFilteredEntries:l,setFilterStatus:u,setFilterString:d,setFilterType:f}=w.useContext(Et);return w.useEffect(()=>{l([]);const m=Ro(a,s,i,o);l(Hn(m,e,r,n))},[i,o,s]),{setFilterStatus:u,setFilterString:d,setFilterType:f}},O0=e=>{const{filterString:t,filterType:r}=w.useContext(Et),{isMobileView:n}=ta(),{setFilterString:a,setFilterType:i}=rc(e),{config:o,updateConfig:s}=Pe(),{orderDirection:l}=o;return c.jsxs("div",{className:"search-and-sort-bar",children:[c.jsx(ft.Search,{allowClear:!0,placeholder:"Search...",value:t,addBefore:c.jsxs(Me,{placeholder:"Select type",onChange:i,style:{width:100},value:r,children:[c.jsx(Me.Option,{value:"0",children:"Title"}),c.jsx(Me.Option,{value:"1",children:"Content"})]}),onChange:a,style:{width:n?"100%":278,marginLeft:8}}),c.jsx(Qr,{mini:!0,position:"left",content:l==="desc"?"Newest first":"Oldest first",children:c.jsx(Ee,{shape:"circle",size:"small",style:{margin:"0 8px",flexShrink:0},icon:l==="desc"?c.jsx(Uc,{}):c.jsx($c,{}),onClick:()=>{s({orderDirection:l==="desc"?"asc":"desc"})}})})]})},P0=w.forwardRef(({info:e,loading:t,getEntries:r,handleEntryClick:n,cardsRef:a},i)=>{const{filteredEntries:o,filterStatus:s,loadMoreUnreadVisible:l,loadMoreVisible:u}=w.useContext(Et),{loadingMore:d,handleLoadMore:f}=fi(),{config:m}=Pe(),{layout:x}=m,g=x==="small";return c.jsxs(c.Fragment,{children:[c.jsx(O0,{info:e}),c.jsxs("div",{className:"entry-list",ref:i,children:[c.jsx(A0,{loading:t}),t?null:c.jsx("div",{ref:a,children:o.map(v=>(Do(v.feed.site_url)||(v.feed.site_url=Lo(v.feed.feed_url)),c.jsx(I0,{entry:v,handleEntryClick:n,mini:g},v.id)))}),!t&&(s==="all"?u:l)&&c.jsxs(Ee,{className:"load-more-button",loading:d,long:!0,onClick:()=>f(e,r),children:[!d&&c.jsx(zc,{}),"Load more"]})]})]})}),F0=w.forwardRef(({info:e,refreshArticleList:t,markAllAsRead:r},n)=>{const{entries:a,filteredEntries:i,filterStatus:o,loading:s,setEntries:l,setFilteredEntries:u,setUnreadCount:d,setUnreadEntries:f,unreadEntries:m}=w.useContext(Et),{setFilterStatus:x}=rc(e),g=A(y=>y.initData),{config:v}=Pe(),{showStatus:S}=v,E=async()=>{r().then(()=>{ie.success("Marked all as read successfully"),g(),l(a.map(y=>({...y,status:"read"}))),f([]),u(o==="all"?i.map(y=>({...y,status:"read"})):[]),d(0)}).catch(()=>{ie.error("Failed to mark all as read")})};w.useEffect(()=>{e.from==="history"&&x("all")},[]),w.useEffect(()=>{e.from!=="history"&&x(S)},[S]);const h=y=>{n.current&&n.current.scrollTo(0,0),x(y),u(y==="all"?a:m)};return c.jsxs("div",{className:"entry-panel",children:[!["starred","history"].includes(e.from)&&c.jsx(io,{focusLock:!0,title:"Mark All As Read?",onOk:E,children:c.jsx(Ee,{icon:c.jsx(eo,{}),shape:"circle"})}),c.jsxs(ba.Group,{disabled:e.from==="history",name:"lang",onChange:y=>h(y),type:"button",value:e.from==="history"?"all":o,children:[c.jsx(ba,{value:"all",children:"ALL"}),c.jsx(ba,{value:"unread",children:"UNREAD"})]}),c.jsx(Ee,{icon:c.jsx(ao,{}),loading:s,shape:"circle",onClick:t})]})}),Or=({info:e,getEntries:t,markAllAsRead:r})=>{const n=A(R=>R.activeContent),a=A(R=>R.setActiveContent),i=A(R=>R.setReadCount),o=A(R=>R.setStarredCount),s=A(R=>R.setUnreadToday),l=A(R=>R.setUnreadTotal),u=A(R=>R.updateFeedUnreadCount),d=A(R=>R.updateGroupUnreadCount),f=A(R=>R.hiddenFeedIds),m=A(R=>R.initData),x=A(R=>R.isInitCompleted),{config:g}=Pe(),{orderBy:v,orderDirection:S,showAllFeeds:E}=g,{entries:h,entryDetailRef:y,filteredEntries:j,filterStatus:k,isArticleFocused:O,loading:C,setEntries:I,setFilteredEntries:M,setIsArticleFocused:V,setLoading:B,setLoadMoreUnreadVisible:se,setLoadMoreVisible:le,setOffset:re,setTotal:fe,setUnreadCount:ge,setUnreadEntries:rt,setUnreadOffset:Ne,total:nt,unreadCount:b,unreadEntries:p}=w.useContext(Et),{handleFetchContent:F,handleToggleStarred:N,handleToggleStatus:D,handleEntryStatusUpdate:U}=di(),{parseFirstImage:$}=fi(),[L,q]=w.useState(!1),[X,G]=w.useState(!1),ee=w.useRef(null),ae=w.useRef(null);w.useEffect(()=>{!X||e.from==="history"||setTimeout(()=>{it()},200)},[v]),w.useEffect(()=>{X&&setTimeout(()=>{it()},200)},[S]),w.useEffect(()=>{M(()=>["all","today","group"].includes(e.from)&&!E?(k==="all"?h:p).filter(ue=>!f.includes(ue.feed.id)):k==="all"?h:p),q(!0)},[k,f,E]),w.useEffect(()=>{if(!(b===0||nt===0))switch(e.from){case"all":E&&l(()=>b);break;case"today":s(()=>b);break;case"starred":o(()=>nt);break;case"history":i(()=>nt);break;case"feed":{const R=Number.parseInt(e.id);u(R,b);break}case"group":{const R=Number.parseInt(e.id);d(R,b);break}}},[nt,b]);const ce=async R=>{a(null),setTimeout(()=>{a({...R,status:"read"})},200),R.status==="unread"&&(setTimeout(()=>{U(R,"read")},200),wo(R.id,"read").catch(()=>{ie.error("Failed to mark entry as read, please try again later"),U(R,"unread")})),y.current&&(y.current.setAttribute("tabIndex","-1"),y.current.focus(),y.current.scrollTo(0,0))},{handleBKey:Y,handleDKey:K,handleEscapeKey:ke,handleLeftKey:me,handleMKey:Ce,handleRightKey:$e,handleSKey:ve}=Vo(e,ce,t);w.useEffect(()=>{const R={27:()=>ke(ee),37:()=>me(),39:()=>$e(e),66:()=>Y(),68:()=>K(F),77:()=>Ce(()=>D(n)),83:()=>ve(()=>N(n))},ue=xe=>{const _e=R[xe.keyCode];_e&&_e()};return O?document.addEventListener("keydown",ue):document.removeEventListener("keydown",ue),()=>{document.removeEventListener("keydown",ue)}},[n,j,O]);const at=(R,ue,xe,_e)=>{I(R),rt(ue),M(Hn(k==="all"?R:ue,e,E,f)),fe(xe.data.total),le(R.length<xe.data.total),ge(_e.data.total),se(ue.length<_e.data.total)},vt=(R,ue)=>{var xe,_e;if((xe=R==null?void 0:R.data)!=null&&xe.entries&&((_e=ue==null?void 0:ue.data)==null?void 0:_e.total)>=0){const gt=R.data.entries.map($),Ct=ue.data.entries.map($);at(gt,Ct,R,ue)}},ze=async()=>{B(!0);try{const R=await t();if(e.from==="history")vt(R,R);else{const ue=await t(0,"unread");vt(R,ue)}}catch(R){console.error("Error fetching articles:",R)}finally{B(!1)}},it=async()=>{if(ee.current&&ee.current.scrollTo(0,0),re(0),Ne(0),!x){await m();return}await ze()};return w.useEffect(()=>{n&&a(null)},[]),w.useEffect(()=>{x&&(ze().then(()=>G(!0)),V(!0))},[x]),c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"entry-col",children:[c.jsx(qi,{in:!C,timeout:200,nodeRef:ae,classNames:"fade",children:c.jsx(P0,{info:e,cardsRef:ae,loading:C,getEntries:t,handleEntryClick:ce,ref:ee})}),c.jsx(F0,{info:e,refreshArticleList:it,markAllAsRead:r,ref:ee})]}),c.jsx(qi,{in:n!=null,timeout:200,nodeRef:y,classNames:"fade",unmountOnExit:!0,children:c.jsx(Lh,{info:e,handleEntryClick:ce,getEntries:t,isFilteredEntriesUpdated:L,setIsFilteredEntriesUpdated:q,ref:y})})]})},R0=()=>{const e=async()=>{const t=await Ru();return he.put(`/v1/users/${t.data.id}/mark-all-as-read`)};return c.jsx(Ir,{children:c.jsx(Or,{info:{from:"all",id:""},getEntries:Wu,markAllAsRead:e})})},N0=()=>{const e=un(),t=Bc();return console.error(t),c.jsx("div",{id:"error-page",style:{top:"30%",position:"relative"},children:c.jsx("div",{children:c.jsx(Hc,{status:"404",subTitle:"Whoops, that page is gone. ",extra:[c.jsx(Ee,{type:"primary",onClick:()=>e("/"),children:"Back to Home"},"back")]})})})},D0=()=>{const{id:e}=uo(),{config:t}=Pe(),{orderBy:r,orderDirection:n,pageSize:a}=t,i=async(s=0,l=null)=>{const u={baseUrl:`/v1/feeds/${e}/entries`,orderField:r,direction:n,offset:s,limit:a,status:l},d=Mr(u);return he.get(d)},o=async()=>he.put(`/v1/feeds/${id}/mark-all-as-read`);return c.jsx(Ir,{children:c.jsx(Or,{info:{from:"feed",id:e},getEntries:i,markAllAsRead:o})})},L0=()=>{const{id:e}=uo(),{config:t}=Pe(),{orderBy:r,orderDirection:n,pageSize:a}=t,i=async(s=0,l=null)=>{const u={baseUrl:`/v1/categories/${e}/entries`,orderField:r,direction:n,offset:s,limit:a,status:l},d=Mr(u);return he.get(d)},o=async()=>he.put(`/v1/categories/${e}/mark-all-as-read`);return c.jsx(Ir,{children:c.jsx(Or,{info:{from:"group",id:e},getEntries:i,markAllAsRead:o})})},V0=()=>c.jsx(Ir,{children:c.jsx(Or,{info:{from:"history",id:""},getEntries:So})}),U0=e=>{var n;const t=e.getFieldsValue();let r=!0;for(const a of Object.keys(t))if(a!=="password"){const i=(n=t[a])==null?void 0:n.trim();e.setFieldValue(a,i),i||(r=!1)}else t[a]||(r=!1);return r},Pn=(e,t)=>{e.key==="Enter"&&t.submit()},$0=()=>{const[e]=qc(),[t,r]=w.useState(!1),[n,a]=w.useState($n()||"token"),i=un();w.useEffect(()=>{$n()&&i("/")},[i]);const o=async()=>{r(!0);try{(await Zs({url:"/v1/me",method:"get",baseURL:e.getFieldsValue().server,headers:{"X-Auth-Token":e.getFieldsValue().token},auth:{username:e.getFieldsValue().username,password:e.getFieldsValue().password},timeout:5e3})).status===200&&(ie.success("Success"),Iu(n,e.getFieldsValue()),i("/"))}catch(l){console.error(l),ie.error(l.message)}r(!1)},s=()=>{o()};return c.jsx("div",{style:{backgroundColor:"var(--color-bg-1)",height:"100%"},children:c.jsx("div",{style:{backgroundColor:"var(--color-fill-1)",height:"100%"},children:c.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",overflowY:"auto"},children:[c.jsx(so,{style:{fontSize:48,color:"rgb(var(--primary-6))",marginTop:"20px"}}),c.jsx(z.Title,{heading:3,children:"Connect to your server"}),c.jsxs(Jr,{style:{boxShadow:"0 4px 10px rgb(var(--color-bg-3))",padding:"20px",width:"380px",marginTop:"20px"},children:[c.jsxs(be,{autoComplete:"off",form:e,layout:"vertical",onSubmit:()=>{U0(e)?s():ie.error("Please fill in all required fields")},children:[c.jsx(be.Item,{field:"server",label:"Server address",rules:[{required:!0}],onKeyDown:l=>{Pn(l,e)},children:c.jsx(ft,{disabled:t,placeholder:"Please input server address",prefix:c.jsx(Wc,{})})}),n==="token"&&c.jsx(be.Item,{field:"token",label:"API Token",rules:[{required:!0}],onKeyDown:l=>{Pn(l,e)},children:c.jsx(ft,{disabled:t,placeholder:"Please input api token",prefix:c.jsx(Wi,{})})}),n==="user"&&c.jsxs(c.Fragment,{children:[c.jsx(be.Item,{field:"username",label:"Username",rules:[{required:!0}],onKeyDown:l=>{Pn(l,e)},children:c.jsx(ft,{disabled:t,prefix:c.jsx(ro,{}),placeholder:"Please input username"})}),c.jsx(be.Item,{field:"password",label:"Password",rules:[{required:!0}],onKeyDown:l=>{Pn(l,e)},children:c.jsx(ft.Password,{disabled:t,prefix:c.jsx(Wi,{}),placeholder:"Please input password"})})]})]}),c.jsx(Ee,{loading:t,type:"primary",long:!0,onClick:s,style:{marginTop:"20px"},children:"Connect"}),c.jsx(dt,{orientation:"center",children:"Or connect with"}),c.jsx(Ee,{type:"secondary",long:!0,onClick:()=>a(n==="token"?"user":"token"),style:{marginTop:"20px"},children:n==="token"?"Username and password":"API Token"})]}),c.jsxs("div",{style:{display:"flex",marginTop:"40px"},children:[c.jsx(z.Text,{disabled:!0,children:"Need more information?"}),c.jsx(Gc,{href:"https://miniflux.app/docs/api.html#authentication",style:{fontWeight:"500"},children:"Go to Miniflux official website"})]})]})})})},z0=({children:e})=>$n()?c.jsx(c.Fragment,{children:e}):c.jsx(fo,{to:"/login"}),B0=()=>c.jsx(Ir,{children:c.jsx(Or,{info:{from:"starred",id:""},getEntries:Eo})}),H0=()=>{const e=async()=>{const t=await Fn(0,"unread"),r=t.data.entries.map(n=>n.id);if(t.data.total>r.length){const n=t.data.total-r.length,a=Math.ceil(n/100)*100,i=await Fn(r.length,"unread",a);r.push(...i.data.entries.map(o=>o.id))}return xo(r,"read")};return c.jsx(Ir,{children:c.jsx(Or,{info:{from:"today",id:""},getEntries:Fn,markAllAsRead:e})})},q0=Re("homePage"),W0=[{path:"/all",element:c.jsx(R0,{})},{path:"/today",element:c.jsx(H0,{})},{path:"/starred",element:c.jsx(B0,{})},{path:"/history",element:c.jsx(V0,{})},{path:"/group/:id",element:c.jsx(L0,{})},{path:"/feed/:id",element:c.jsx(D0,{})}],nc=Xc([{path:"/",element:c.jsx(z0,{children:c.jsx(uf,{})}),errorElement:c.jsx(N0,{}),children:[...W0,{index:!0,element:c.jsx(fo,{to:`/${q0}`,replace:!0})}]},{path:"/login",element:c.jsx($0,{})}]);Yc.createRoot(document.getElementById("root")).render(c.jsx(Kc,{locale:Qc,children:c.jsx(Zc,{router:nc})}))});export default G0();
