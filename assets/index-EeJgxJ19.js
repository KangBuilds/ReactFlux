var Ti=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);import{r as g,g as An,e as W,c as ne,d as qt,a as ra,M as ae,b as _i,f as ki,u as hn,j as r,B as de,I as Ii,S as Fn,T as st,h as aa,i as Pi,D as kr,k as xt,l as ia,m as Mi,n as Ai,A as oa,o as sa,p as Fi,q as Ni,s as Oi,t as U,R as sn,v as ct,w as dn,x as Ri,F as ye,y as Be,z as la,C as Nn,E as Ke,G as fn,H as Di,J as ca,P as ua,K as Li,L as Ui,N as Yt,O as Wt,Q as Vi,U as zi,V as Bi,W as $i,X as Hi,Y as Wi,Z as Gi,_ as da,$ as Xi,a0 as qi,a1 as or,a2 as Yi,a3 as Ki,a4 as Zi,a5 as Ji,a6 as fa,a7 as ha,a8 as On,a9 as pa,aa as ma,ab as ga,ac as Qi,ad as eo,ae as to,af as no,ag as Rt,ah as ro,ai as Ir,aj as ao,ak as io,al as va,am as oo,an as so,ao as Pr,ap as lo,aq as co,ar as uo,as as fo,at as ho,au as po,av as mo}from"./vendor-Bp1Re-Po.js";var Nc=Ti((Dc,pn)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var go={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Mr=e=>{let t;const n=new Set,a=(u,h)=>{const E=typeof u=="function"?u(t):u;if(!Object.is(E,t)){const S=t;t=h??(typeof E!="object"||E===null)?E:Object.assign({},t,E),n.forEach(m=>m(t,S))}},i=()=>t,s={setState:a,getState:i,getInitialState:()=>d,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(go?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=t=e(a,i,s);return s},vo=e=>e?Mr(e):Mr;var ya={exports:{}},xa={},ba={exports:{}},wa={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kt=g;function yo(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xo=typeof Object.is=="function"?Object.is:yo,bo=Kt.useState,wo=Kt.useEffect,Co=Kt.useLayoutEffect,Eo=Kt.useDebugValue;function jo(e,t){var n=t(),a=bo({inst:{value:n,getSnapshot:t}}),i=a[0].inst,o=a[1];return Co(function(){i.value=n,i.getSnapshot=t,Xn(i)&&o({inst:i})},[e,n,t]),wo(function(){return Xn(i)&&o({inst:i}),e(function(){Xn(i)&&o({inst:i})})},[e]),Eo(n),n}function Xn(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!xo(e,n)}catch{return!0}}function So(e,t){return t()}var To=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?So:jo;wa.useSyncExternalStore=Kt.useSyncExternalStore!==void 0?Kt.useSyncExternalStore:To;ba.exports=wa;var _o=ba.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rn=g,ko=_o;function Io(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Po=typeof Object.is=="function"?Object.is:Io,Mo=ko.useSyncExternalStore,Ao=Rn.useRef,Fo=Rn.useEffect,No=Rn.useMemo,Oo=Rn.useDebugValue;xa.useSyncExternalStoreWithSelector=function(e,t,n,a,i){var o=Ao(null);if(o.current===null){var l={hasValue:!1,value:null};o.current=l}else l=o.current;o=No(function(){function s(S){if(!d){if(d=!0,u=S,S=a(S),i!==void 0&&l.hasValue){var m=l.value;if(i(m,S))return h=m}return h=S}if(m=h,Po(u,S))return m;var v=a(S);return i!==void 0&&i(m,v)?m:(u=S,h=v)}var d=!1,u,h,E=n===void 0?null:n;return[function(){return s(t())},E===null?void 0:function(){return s(E())}]},[t,n,a,i]);var c=Mo(e,o[0],o[1]);return Fo(function(){l.hasValue=!0,l.value=c},[c]),Oo(c),c};ya.exports=xa;var Ro=ya.exports;const Do=An(Ro);var Ca={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:Lo}=W,{useSyncExternalStoreWithSelector:Uo}=Do;let Ar=!1;const Vo=e=>e;function zo(e,t=Vo,n){(Ca?"production":void 0)!=="production"&&n&&!Ar&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Ar=!0);const a=Uo(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Lo(a),a}const Fr=e=>{(Ca?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?vo(e):e,n=(a,i)=>zo(t,a,i);return Object.assign(n,t),n},Bo=e=>e?Fr(e):Fr,we=e=>{const t=JSON.parse(localStorage.getItem("config"));if(!t)return console.log("No config found in localStorage"),null;const n=t[e];return typeof n>"u"?(console.log(`Config for "${e}" not found`),null):n},lt=(e,t)=>{const a={...JSON.parse(localStorage.getItem("config"))||{},[e]:t};localStorage.setItem("config",JSON.stringify(a))};var Ea={exports:{}};(function(e,t){(function(n,a){e.exports=a()})(ne,function(){return function(n,a,i){n=n||{};var o=a.prototype,l={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function c(d,u,h,E){return o.fromToBase(d,u,h,E)}i.en.relativeTime=l,o.fromToBase=function(d,u,h,E,S){for(var m,v,b,F=h.$locale().relativeTime||l,G=n.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],Y=G.length,R=0;R<Y;R+=1){var I=G[R];I.d&&(m=E?i(d).diff(h,I.d,!0):h.diff(d,I.d,!0));var y=(n.rounding||Math.round)(Math.abs(m));if(b=m>0,y<=I.r||!I.r){y<=1&&R>0&&(I=G[R-1]);var T=F[I.l];S&&(y=S(""+y)),v=typeof T=="string"?T.replace("%d",y):T(y,u,I.l,b);break}}if(u)return v;var x=b?F.future:F.past;return typeof x=="function"?x(v):x.replace("%s",v)},o.to=function(d,u){return c(d,u,this,!0)},o.from=function(d,u){return c(d,u,this)};var s=function(d){return d.$u?i.utc():i()};o.toNow=function(d){return this.to(s(this),d)},o.fromNow=function(d){return this.from(s(this),d)}}})})(Ea);var $o=Ea.exports;const Ho=An($o);qt.extend(Ho);const Wo=e=>{const t=qt(e),n=qt();return t.isAfter(n.subtract(24,"hour"))},Go=()=>qt().subtract(24,"hour").unix(),sr=e=>qt(e).fromNow(),kn=()=>{const e=JSON.parse(localStorage.getItem("auth"));return e||(console.log("No auth info found in localStorage"),null)},Xo=(e,t)=>{const n={method:e,secret:t};localStorage.setItem("auth",JSON.stringify(n))},se=ra.create({timeout:5e3});se.interceptors.request.use(e=>{const t=kn(),{server:n,token:a,username:i,password:o}=(t==null?void 0:t.secret)||{};return e.baseURL=n,a&&(e.headers["X-Auth-Token"]=a),i&&o&&(e.auth={username:i,password:o}),e},e=>Promise.reject(e));se.interceptors.response.use(e=>e,e=>{var n,a,i;console.error(e);const t=((a=(n=e.response)==null?void 0:n.data)==null?void 0:a.error_message)||e.message;return ae.error(t),((i=e.response)==null?void 0:i.status)===401&&(localStorage.removeItem("auth"),ji.navigate("/login")),Promise.reject(e)});const ja=async(e,t)=>se.put("/v1/entries",{entry_ids:e,status:t}),Sa=async(e,t)=>ja([e],t),qo=async e=>se.put(`/v1/entries/${e}/bookmark`),Yo=async e=>se.get(`/v1/entries/${e}/fetch-content`),Ko=async()=>se.get("/v1/me"),Zo=async()=>se.get("/v1/feeds/counters"),Ta=async()=>se.get("/v1/feeds"),_a=async()=>se.get("/v1/categories"),Jo=async e=>se.delete(`/v1/categories/${e}`),Qo=async e=>se.post("/v1/categories",{title:e}),es=async(e,t)=>se.put(`/v1/categories/${e}`,{title:t}),ts=async(e,t,n,a,i)=>se.put(`/v1/feeds/${e}`,{feed_url:t,title:n,category_id:a,crawler:i}),ns=async e=>se.put(`/v1/feeds/${e}/refresh`),rs=async e=>se.delete(`/v1/feeds/${e}`),as=async(e,t,n)=>se.post("/v1/feeds",{feed_url:e,category_id:t,crawler:n}),Jt=(e,t={})=>{const{baseUrl:n,orderField:a,direction:i,offset:o,limit:l,status:c}=e,s=new URLSearchParams({...t,order:a,direction:i,offset:o,limit:l});return c&&s.append("status",c),`${n}?${s.toString()}`},is=async(e=0,t=null)=>{const n=we("entriesOrder"),a=we("entriesPerPage"),o=Jt({baseUrl:"/v1/entries",orderField:"created_at",direction:n,offset:e,limit:a,status:t});return se.get(o)},ka=async(e=0)=>{const t=we("entriesOrder"),n=we("entriesPerPage"),i=Jt({baseUrl:"/v1/entries",orderField:"changed_at",direction:t,offset:e,limit:n,status:"read"});return se.get(i)},Ia=async(e=0,t=null)=>{const n=we("entriesOrder"),a=we("entriesPerPage"),l=Jt({baseUrl:"/v1/entries",orderField:"published_at",direction:n,offset:e,limit:a,status:t},{starred:"true"});return se.get(l)},Tn=async(e=0,t=null,n=null)=>{const a=we("entriesOrder"),i=n||we("entriesPerPage"),o=Go(),s=Jt({baseUrl:"/v1/entries",orderField:"published_at",direction:a,offset:e,limit:i,status:t},{published_after:o});return se.get(s)},os=(e,t)=>t==="read"?Math.max(0,e-1):e+1,Nr=(e,t,n)=>e.map(a=>{if(a.id===t){let i;return typeof n=="string"?i=os(a.unreadCount,n):i=n,{...a,unreadCount:i}}return a}),j=Bo((e,t)=>({feeds:[],groups:[],unreadTotal:0,unreadToday:0,starredCount:0,readCount:0,hiddenFeedIds:[],hiddenGroupIds:[],entriesOrder:we("entriesOrder")||"desc",entriesPerPage:we("entriesPerPage")||100,showAllFeeds:we("showAllFeeds")||!1,loading:!0,visible:{settings:!1,addFeed:!1},theme:we("theme")||"light",layout:we("layout")||"large",fontSize:we("fontSize")||1.05,showFeedIcon:we("showFeedIcon")||!0,collapsed:window.innerWidth<=992,activeContent:null,isSysDarkMode:window.matchMedia("(prefers-color-scheme: dark)").matches,color:we("themeColor")||"Blue",setUnreadTotal:n=>e(a=>({unreadTotal:n(a.unreadTotal)})),setUnreadToday:n=>e(a=>({unreadToday:n(a.unreadToday)})),setStarredCount:n=>e(a=>({starredCount:n(a.starredCount)})),setReadCount:n=>e(a=>({readCount:n(a.readCount)})),setEntriesOrder:n=>e({entriesOrder:n}),setEntriesPerPage:n=>e({entriesPerPage:n}),toggleShowAllFeeds:()=>e(n=>({showAllFeeds:!n.showAllFeeds})),setActiveContent:n=>{e({activeContent:n})},setIsSysDarkMode:n=>e({isSysDarkMode:n}),setColor:n=>{e({color:n})},setTheme:n=>{e({theme:n})},initData:async()=>{e({loading:!0});const[n,a,i,o,l,c]=await Promise.all([Ta(),_a(),Zo(),ka(),Ia(),Tn(0,"unread")]);if(n&&i&&a&&o&&l&&c){const s=n.data.filter(m=>m.hide_globally||m.category.hide_globally).map(m=>m.id),d=a.data.filter(m=>m.hide_globally).map(m=>m.id);e({hiddenFeedIds:s}),e({hiddenGroupIds:d});const u=i.data.unreads,h=Object.keys(u).reduce((m,v)=>t().showAllFeeds||!s.includes(Number.parseInt(v))?m+u[v]:m,0);e({unreadTotal:h});const E=n.data.map(m=>({...m,unreadCount:u[m.id]||0}));e({feeds:E.sort((m,v)=>m.title.localeCompare(v.title,"en"))});const S=a.data.map(m=>{let v=0,b=0;for(const F of E)F.category.id===m.id&&(v+=F.unreadCount,b+=1);return{...m,unreadCount:v,feed:b}});e({groups:S.sort((m,v)=>m.title.localeCompare(v.title,"en"))}),e({readCount:o.data.total}),e({starredCount:l.data.total}),e({unreadToday:c.data.total}),e({loading:!1})}},updateFeedUnreadCount:(n,a)=>{e(i=>({feeds:Nr(i.feeds,n,a)}))},updateGroupUnreadCount:(n,a)=>{e(i=>({groups:Nr(i.groups,n,a)}))},toggleLayout:()=>{const n=t().layout==="large"?"small":"large";e({layout:n})},setFontSize:n=>e({fontSize:n}),toggleShowFeedIcon:()=>e(n=>({showFeedIcon:!n.showFeedIcon})),setVisible:(n,a)=>{e(i=>({visible:{...i.visible,[n]:a}}))},toggleCollapsed:()=>e(n=>({collapsed:!n.collapsed}))})),Pa=[{name:"Red",valueLight:"#F53F3F",valueDark:"#F76965"},{name:"Orange",valueLight:"#F77234",valueDark:"#F9925A"},{name:"Green",valueLight:"#00B42A",valueDark:"#27C346"},{name:"Blue",valueLight:"#165DFF",valueDark:"#3C7EFF"},{name:"Purple",valueLight:"#722ED1",valueDark:"#8E51DA"}],Qn=e=>{const t=Pa.find(o=>o.name===e),n=window.matchMedia("(prefers-color-scheme: dark)").matches,a=we("theme")||"light",i=a==="system"?n:a==="dark";return t?i?t.valueDark:t.valueLight:"#165DFF"},lr=e=>{_i(Qn(e),{list:!0}).map(n=>ki(n)).forEach((n,a)=>{document.body.style.setProperty(`--primary-${a+1}`,n)})},ss=()=>{const e=hn(),t=j(c=>c.setVisible),n=j(c=>c.theme),a=j(c=>c.setTheme),i=j(c=>c.toggleCollapsed),o=()=>{localStorage.clear(),document.body.removeAttribute("arco-theme"),lr("Blue"),e("/login"),ae.success("logout")};let l;switch(n){case"dark":l=r.jsx(Oi,{});break;case"system":l=r.jsx(Ni,{});break;default:l=r.jsx(Fi,{})}return g.useEffect(()=>{lt("theme",n)},[n]),r.jsxs("div",{className:"header",children:[r.jsx("div",{className:"brand",style:{marginLeft:"10px",display:"flex",alignItems:"center"},children:r.jsx(de,{shape:"circle",size:"small",className:"trigger",style:{marginRight:"5px",display:"none"},onClick:i,children:r.jsx(Ii,{})})}),r.jsx("div",{className:"button-group",style:{marginRight:"10px"},children:r.jsxs(Fn,{size:16,children:[r.jsx(st,{content:"Add a feed",mini:!0,children:r.jsx(de,{shape:"circle",size:"small",type:"primary",icon:r.jsx(aa,{}),onClick:()=>t("addFeed",!0)})}),r.jsx(de,{shape:"circle",size:"small",icon:r.jsx(Pi,{}),onClick:()=>window.open("https://github.com/electh/ReactFlux","_blank")}),r.jsx(kr,{droplist:r.jsx(xt,{defaultSelectedKeys:[n],className:"theme-menu",children:["light","dark","system"].map(c=>r.jsxs(xt.Item,{className:n===c?"selected-menu":"",onClick:()=>a(c),style:{display:"flex",width:100,justifyContent:"space-between",alignItems:"center"},children:[c.charAt(0).toUpperCase()+c.slice(1),n===c&&r.jsx(ia,{style:{marginLeft:8}})]},c))}),trigger:"hover",position:"bottom",children:r.jsx(de,{icon:l,shape:"circle",size:"small",onClick:()=>{switch(n){case"light":a("dark");break;case"dark":a("light");break}}})}),r.jsx(kr,{droplist:r.jsxs(xt,{children:[r.jsxs(xt.Item,{onClick:()=>t("settings",!0),children:[r.jsx(Mi,{style:{marginRight:8,fontSize:16,transform:"translateY(1px)"}}),"Settings"]},"0"),r.jsxs(xt.Item,{onClick:o,children:[r.jsx(Ai,{style:{marginRight:8,fontSize:16,transform:"translateY(1px)"}}),"Logout"]},"1")]}),trigger:"click",position:"br",children:r.jsx(oa,{size:28,style:{cursor:"pointer"},children:r.jsx(sa,{})})})]})})]})},Ma="/assets/dark-E0XitTFg.png",Aa="/assets/light-CsqESGYr.png",Fa="/assets/system-BwMbv8Ny.png",ls=()=>{const e=j(u=>u.theme),t=j(u=>u.setTheme),n=j(u=>u.toggleLayout),a=j(u=>u.layout),i=j(u=>u.fontSize),o=j(u=>u.setFontSize),l=j(u=>u.showFeedIcon),c=j(u=>u.toggleShowFeedIcon),s=j(u=>u.color),d=j(u=>u.setColor);return g.useEffect(()=>{lt("fontSize",i)},[i]),g.useEffect(()=>{lt("layout",a)},[a]),g.useEffect(()=>{lt("showFeedIcon",l)},[l]),g.useEffect(()=>{lt("theme",e)},[e]),g.useEffect(()=>{lt("themeColor",s),lr(s)},[s]),r.jsxs(r.Fragment,{children:[r.jsx(U.Title,{heading:6,style:{marginTop:0},children:"Theme"}),r.jsx(U.Text,{type:"secondary",children:"Customize your UI theme"}),r.jsx("div",{children:r.jsx(sn.Group,{name:"card-radio-group",style:{marginTop:"16px"},defaultValue:e,onChange:t,children:["light","dark","system"].map(u=>r.jsx(st,{content:u.charAt(0).toUpperCase()+u.slice(1),children:r.jsx(sn,{value:u,children:({checked:h})=>{const E={light:Aa,dark:Ma,system:Fa}[u];return r.jsx("div",{className:`custom-radio-card ${h?"custom-radio-card-checked":""}`,children:r.jsx("img",{className:"theme-preview",src:E,alt:u})})}})},u))})}),r.jsx(ct,{}),r.jsxs("div",{className:"setting-row",children:[r.jsxs("div",{children:[r.jsx(U.Title,{heading:6,style:{marginTop:0},children:"Accent color"}),r.jsx(U.Text,{type:"secondary",children:"Choose your accent color"})]}),r.jsx("div",{style:{display:"flex"},children:Pa.map(u=>r.jsx(st,{content:u.name,children:r.jsx("button",{type:"button",style:{width:"18px",height:"18px",borderRadius:"50%",margin:"2px",backgroundColor:Qn(u.name),cursor:"pointer",border:"3px solid var(--color-bg-3)",outline:u.name===s?`1px solid ${Qn(u.name)}`:"none"},onClick:()=>d(u.name),onKeyDown:h=>{(h.key==="Enter"||h.key===" ")&&d(u.name)}})},u.name))})]}),r.jsx(ct,{}),r.jsxs("div",{className:"setting-row",children:[r.jsxs("div",{children:[r.jsx(U.Title,{heading:6,style:{marginTop:0},children:"Compact article list"}),r.jsx(U.Text,{type:"secondary",children:"Use small thumbnail in article list"})]}),r.jsx("div",{children:r.jsx(dn,{checked:a==="small",onChange:n})})]}),r.jsx(ct,{}),r.jsxs("div",{className:"setting-row",children:[r.jsxs("div",{children:[r.jsx(U.Title,{heading:6,style:{marginTop:0},children:"Show feed icon"}),r.jsx(U.Text,{type:"secondary",children:"Show feed icon in feed list and article list"})]}),r.jsx("div",{children:r.jsx(dn,{checked:l,onChange:c})})]}),r.jsx(ct,{}),r.jsxs("div",{className:"setting-row",children:[r.jsxs("div",{children:[r.jsx(U.Title,{heading:6,style:{marginTop:0},children:"Font size"}),r.jsx(U.Text,{type:"secondary",children:"Adjust article text size"})]}),r.jsx("div",{children:r.jsxs(Fn,{children:[r.jsx(U.Text,{style:{fontSize:"0.75rem"},children:"A"}),r.jsx(Ri,{value:i,showTicks:!0,min:.75,max:1.25,step:.05,formatTooltip:u=>`${u}rem`,onChange:o,style:{width:200}}),r.jsx(U.Text,{style:{fontSize:"1.25rem"},children:"A"})]})})]})]})},Xt=(e,t)=>e.toLowerCase().includes(t.toLowerCase()),Na=(e,t,n,a)=>t==="0"?n==="all"?e.filter(i=>Xt(i.title,a)):e.filter(i=>Xt(i.title,a)&&i.status===n):n==="all"?e.filter(i=>Xt(i.content,a)):e.filter(i=>Xt(i.content,a)&&i.status===n),Or=e=>e.slice().sort((t,n)=>t.parsing_error_count>0&&n.parsing_error_count===0?-1:t.parsing_error_count===0&&n.parsing_error_count>0?1:0),cs=({feeds:e,groups:t,loading:n,setFeeds:a,setShowFeeds:i,showFeeds:o})=>{const l=j(x=>x.initData),[c,s]=g.useState(!1),[d,u]=g.useState(!1),[h]=ye.useForm(),[E,S]=g.useState({}),[m,v]=g.useState(window.innerWidth);let b=Or(o);const F=b.map(x=>({key:x.id,title:x.title,feed_url:x.feed_url,category:x.category,checked_at:x.checked_at,parsing_error_count:x.parsing_error_count,feed:x}));g.useEffect(()=>{const x=()=>v(window.innerWidth);return window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]);const G=x=>{S(x.feed),s(!0),h.setFieldsValue({url:x.feed.feed_url,title:x.feed.title,group:x.feed.category.id,crawler:x.feed.crawler})},Y=async x=>{ns(x.feed.id).then(()=>{ae.success("Refreshed"),x.feed.parsing_error_count=0,l()}).catch(()=>{ae.error("Failed to refresh"),x.feed.parsing_error_count++}).finally(()=>{a(e),b=e.sort((_,B)=>_.title.localeCompare(B.title,"en")),b=Or(b),i(b)})},R=async x=>{rs(x.feed.id).then(()=>{ae.success("Unfollowed"),a(e.filter(_=>_.id!==x.feed.id)),i(b.filter(_=>_.id!==x.feed.id)),l()})},I=m<=700,y=[{title:"Title",dataIndex:"title",sorter:(x,_)=>x.title.localeCompare(_.title,"en"),render:(x,_)=>{const B=_.parsing_error_count,xe=B?`⚠️ ${x}`:x,Z=r.jsxs("div",{children:[x,B>0&&r.jsxs(r.Fragment,{children:[r.jsx("br",{}),"⚠️ Parsing error count: ",B]})]});return r.jsx(U.Ellipsis,{expandable:!1,children:r.jsx(st,{mini:!0,content:Z,children:xe})})}},!I&&{title:"Url",dataIndex:"feed_url",sorter:(x,_)=>x.feed_url.localeCompare(_.feed_url,"en"),render:x=>r.jsx(U.Ellipsis,{expandable:!1,showTooltip:!0,children:x})},{title:"Group",dataIndex:"category.title",sorter:(x,_)=>x.category.title.localeCompare(_.category.title,"en"),render:x=>r.jsx(U.Ellipsis,{expandable:!1,showTooltip:!0,children:r.jsx(fn,{children:x})})},!I&&{title:"Checked at",dataIndex:"checked_at",sorter:(x,_)=>x.checked_at.localeCompare(_.checked_at,"en"),render:x=>r.jsx(U.Ellipsis,{expandable:!1,children:sr(x)})},{title:"Actions",dataIndex:"op",fixed:"right",width:100,render:(x,_)=>r.jsxs(Fn,{children:[r.jsx("button",{"aria-label":"Edit this feed",className:"list-item-action",onClick:()=>G(_),type:"button",children:r.jsx(Di,{})}),r.jsx("button",{"aria-label":"Refresh this feed",className:"list-item-action",onClick:()=>Y(_),type:"button",children:r.jsx(ca,{})}),r.jsx(ua,{position:"left",focusLocka:!0,title:"Unfollow？",onOk:async()=>{await R(_)},children:r.jsx("span",{className:"list-item-action",children:r.jsx(Li,{})})})]})}].filter(Boolean),T=async(x,_,B,xe,Z)=>{u(!0),ts(x,_,B,xe,Z).then(Oe=>{a(e.map(fe=>fe.id===x?Oe.data:fe)),i(b.map(fe=>fe.id===x?Oe.data:fe)),ae.success("Feed updated successfully"),s(!1),l()}).catch(()=>{ae.error("Failed to update feed")}),u(!1),h.resetFields()};return r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{display:"flex",justifyContent:"center"},children:r.jsx(Be.Search,{searchButton:!0,placeholder:"Search feed title or url",onChange:x=>i(b.filter(_=>Xt(_.title,x)||Xt(_.feed_url,x))),style:{width:300,marginBottom:"24px"}})}),r.jsx(la,{columns:y,data:F,loading:n,pagePosition:"bottomCenter",scroll:{x:!0},size:"small",style:{width:"100%"},borderCell:!0}),E&&r.jsx(Nn,{title:"Edit Feed",visible:c,unmountOnExit:!0,onOk:h.submit,style:{width:"400px"},confirmLoading:d,onCancel:()=>{s(!1),h.resetFields()},children:r.jsxs(ye,{form:h,labelCol:{span:7},layout:"vertical",wrapperCol:{span:17},onSubmit:x=>{x.url.trim()?T(E.id,x.url,x.title,x.group,x.crawler):ae.error("Feed URL cannot be empty")},children:[r.jsx(ye.Item,{label:"Feed URL",field:"url",rules:[{required:!0}],children:r.jsx(Be,{placeholder:"Please input feed URL"})}),r.jsx(ye.Item,{label:"Title",field:"title",rules:[{required:!0}],children:r.jsx(Be,{placeholder:"Please input feed title"})}),r.jsx(ye.Item,{label:"Group",required:!0,field:"group",rules:[{required:!0}],children:r.jsx(Ke,{placeholder:"Please select",children:t.map(x=>r.jsx(Ke.Option,{value:x.id,children:x.title},x.id))})}),r.jsx(ye.Item,{label:"Fetch original content",field:"crawler",tooltip:r.jsx("div",{children:"Only affects newly retrieved articles"}),style:{marginBottom:0},triggerPropName:"checked",rules:[{type:"boolean"}],children:r.jsx(dn,{})})]})})]})},us=()=>{const e=j(l=>l.entriesOrder),t=j(l=>l.entriesPerPage),n=j(l=>l.showAllFeeds),a=j(l=>l.setEntriesOrder),i=j(l=>l.setEntriesPerPage),o=j(l=>l.toggleShowAllFeeds);return g.useEffect(()=>{lt("entriesOrder",e)},[e]),g.useEffect(()=>{lt("entriesPerPage",t)},[t]),g.useEffect(()=>{lt("showAllFeeds",n)},[n]),r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"setting-row",children:[r.jsxs("div",{children:[r.jsx(U.Title,{heading:6,style:{marginTop:0},children:"Entries order"}),r.jsx(U.Text,{type:"secondary",children:"What order to show entries:"})]}),r.jsx("div",{children:r.jsxs(Ke,{onChange:a,placeholder:"Select order",style:{width:120,marginLeft:16},value:e,children:[r.jsx(Ke.Option,{value:"asc",children:"Oldest first"}),r.jsx(Ke.Option,{value:"desc",children:"Newest first"})]})})]}),r.jsx(ct,{}),r.jsxs("div",{className:"setting-row",children:[r.jsxs("div",{children:[r.jsx(U.Title,{heading:6,style:{marginTop:0},children:"Entries per page"}),r.jsx(U.Text,{type:"secondary",children:"Show how many entries per page:"})]}),r.jsx("div",{children:r.jsx(Ui,{defaultValue:t,mode:"button",size:"small",style:{width:120,marginLeft:16},onChange:i})})]}),r.jsx(ct,{}),r.jsxs("div",{className:"setting-row",children:[r.jsxs("div",{children:[r.jsx(U.Title,{heading:6,style:{marginTop:0},children:"Show all entries"}),r.jsx(U.Text,{type:"secondary",children:"Whether to show all entries of all feeds (including hidden)"})]}),r.jsx("div",{children:r.jsx(dn,{checked:n,onChange:o})})]})]})},ds=({groups:e,loading:t,setGroups:n,setShowFeeds:a,showFeeds:i})=>{const o=j(R=>R.initData),[l,c]=g.useState(!1),[s,d]=g.useState(""),[u,h]=g.useState(!1),[E,S]=g.useState(!1),[m]=ye.useForm(),[v,b]=g.useState({}),F=async()=>{s&&Qo(s).then(R=>{n(I=>[...I,{...R.data,feedCount:0}]),d(""),ae.success("Group added successfully"),o()}).catch(()=>{ae.error("Failed to add group")}),d(""),c(!1)},G=async(R,I)=>{S(!0),es(R,I).then(y=>{a(i.map(T=>T.category.id===R?{...T,category:{...T.category,title:I}}:T)),n(e.map(T=>T.id===R?y.data:T)),ae.success("Group updated successfully"),h(!1),o()}).catch(()=>{ae.error("Failed to update group")}),S(!1),m.resetFields()},Y=async R=>{Jo(R).then(I=>{I.status===204?(n(e.filter(y=>y.id!==R)),ae.success("Group deleted successfully"),o()):ae.error("Failed to delete group")}).catch(()=>{ae.error("Failed to delete group")})};return r.jsxs(r.Fragment,{children:[r.jsx("div",{children:r.jsxs(Yt,{loading:t,animation:!0,text:{rows:3},children:[e.map(R=>r.jsx(fn,{size:"medium",closable:R.feedCount===0,onClick:()=>{b(R),h(!0),m.setFieldsValue({title:R.title})},onClose:async I=>{I.stopPropagation(),await Y(R.id)},style:{marginRight:"10px",marginBottom:"10px",cursor:"pointer"},children:R.title},R.id)),l?r.jsx(Be,{autoFocus:!0,size:"small",value:s,style:{width:84},onPressEnter:F,onBlur:F,onChange:d}):r.jsx(fn,{icon:r.jsx(aa,{}),style:{width:84,backgroundColor:"var(--color-fill-2)",border:"1px dashed var(--color-fill-3)",cursor:"pointer"},size:"medium",className:"add-group",tabIndex:0,onClick:()=>c(!0),children:"Add"})]})}),v&&r.jsx(Nn,{title:"Edit Group",visible:u,unmountOnExit:!0,style:{width:"400px"},onOk:m.submit,confirmLoading:E,onCancel:()=>{h(!1),m.resetFields()},children:r.jsx(ye,{form:m,layout:"vertical",onSubmit:R=>G(v.id,R.title),labelCol:{style:{flexBasis:90}},wrapperCol:{style:{flexBasis:"calc(100% - 90px)"}},children:r.jsx(ye.Item,{label:"Title",field:"title",rules:[{required:!0}],children:r.jsx(Be,{placeholder:"Please input group title"})})})})]})},fs=[{title:"Key",dataIndex:"keyName",render:e=>r.jsx(fn,{children:e})},{title:"Function",dataIndex:"description"}],hs=[{key:"1",keyName:"Esc",description:"Dismiss article"},{key:"2",keyName:"←",description:"Previous article"},{key:"3",keyName:"→",description:"Next article"},{key:"4",keyName:"B",description:"Open link externally"},{key:"5",keyName:"D",description:"Fetch original article"},{key:"6",keyName:"M",description:"Mark as read / unread"},{key:"7",keyName:"S",description:"Star / Unstar"}],ps=()=>r.jsx(la,{columns:fs,data:hs,pagination:!1,size:"small"}),ms=()=>{const[e,t]=g.useState([]),[n,a]=g.useState([]),[i,o]=g.useState([]),[l,c]=g.useState(!1),s=async()=>{c(!0);const u=await Ta(),h=await _a();if(u&&h){const E=u.data,S=h.data.map(v=>({...v,feedCount:E.filter(b=>b.category.id===v.id).length})),m=E.sort((v,b)=>v.title.localeCompare(b.title,"en"));t(m),a(S.sort((v,b)=>v.title.localeCompare(b.title,"en"))),o(m),c(!1)}},d=()=>{const u=[Ma,Aa,Fa];for(const h of u){const E=new Image;E.src=h}};return g.useEffect(()=>{s(),d()},[]),r.jsxs(Wt,{defaultActiveTab:"1",tabPosition:"top",children:[r.jsx(Wt.TabPane,{title:r.jsxs("span",{children:[r.jsx(Vi,{style:{marginRight:6}}),"Feeds"]}),children:r.jsx(cs,{feeds:e,groups:n,loading:l,setFeeds:t,setShowFeeds:o,showFeeds:i})},"1"),r.jsx(Wt.TabPane,{title:r.jsxs("span",{children:[r.jsx(zi,{style:{marginRight:6}}),"Groups"]}),children:r.jsx(ds,{groups:n,loading:l,setGroups:a,setShowFeeds:o,showFeeds:i})},"2"),r.jsx(Wt.TabPane,{title:r.jsxs("span",{children:[r.jsx(Bi,{style:{marginRight:6}}),"General"]}),children:r.jsx(us,{})},"3"),r.jsx(Wt.TabPane,{title:r.jsxs("span",{children:[r.jsx($i,{style:{marginRight:6}}),"Appearance"]}),children:r.jsx(ls,{})},"4"),r.jsx(Wt.TabPane,{title:r.jsxs("span",{children:[r.jsx(Hi,{style:{marginRight:6}}),"Hotkeys"]}),children:r.jsx(ps,{})},"5")]})},gs=({activeContent:e,setActiveContent:t,setVisible:n,visible:a})=>{const[i,o]=g.useState("720px"),[l,c]=g.useState("10%");return g.useEffect(()=>{const s=()=>{const d=window.innerWidth<=700?"100%":"720px",u=window.innerWidth<=700?"5%":"10%";o(d),c(u)};return window.addEventListener("resize",s),s(),()=>{window.removeEventListener("resize",s)}},[]),r.jsx(Nn,{visible:a.settings,alignCenter:!1,title:"Settings",footer:null,unmountOnExit:!0,style:{width:i,top:l},onFocus:()=>{e&&t(null)},onCancel:()=>n("settings",!1),autoFocus:!1,focusLock:!0,children:r.jsx(ms,{})})},vs=({activeContent:e,setActiveContent:t,setVisible:n,visible:a})=>{const i=j(u=>u.initData),o=j(u=>u.groups),[l,c]=g.useState(!1),[s]=ye.useForm(),d=async(u,h,E)=>{c(!0),as(u,h,E).then(()=>{i(),ae.success("Added a feed successfully"),n("addFeed",!1)}).catch(()=>{ae.error("Failed to add a feed")}),c(!1),s.resetFields()};return r.jsx(Nn,{title:"Add Feed",visible:a.addFeed,unmountOnExit:!0,style:{width:"400px"},onFocus:()=>{e&&t(null)},onOk:s.submit,confirmLoading:l,onCancel:()=>{n("addFeed",!1),s.resetFields()},children:r.jsxs(ye,{form:s,labelCol:{span:7},layout:"vertical",wrapperCol:{span:17},onSubmit:u=>{u.url.trim()?d(u.url.trim(),u.group,u.crawler):ae.error("Feed URL cannot be empty")},children:[r.jsx(ye.Item,{label:"Feed URL",field:"url",rules:[{required:!0}],children:r.jsx(Be,{placeholder:"Please input feed URL"})}),r.jsx(ye.Item,{label:"Group",required:!0,field:"group",rules:[{required:!0}],children:r.jsx(Ke,{placeholder:"Please select",children:o.map(u=>r.jsx(Ke.Option,{value:u.id,children:u.title},u.id))})}),r.jsx(ye.Item,{label:"Fetch original content",initialValue:!1,field:"crawler",style:{marginBottom:0},triggerPropName:"checked",rules:[{type:"boolean"}],children:r.jsx(dn,{})})]})})},ys=()=>{const e=j(l=>l.visible),t=j(l=>l.setVisible),n=j(l=>l.activeContent),a=j(l=>l.setActiveContent),[i,o]=g.useState(0);return g.useEffect(()=>{const l=()=>{const c=document.querySelector(".entry-panel"),s=c?c.offsetHeight:49,d=window.innerHeight;o(d-s)};return window.addEventListener("resize",l),l(),()=>window.removeEventListener("resize",l)},[]),r.jsxs("div",{className:"main",style:{height:`${i}px`},children:[r.jsx(Wi,{}),r.jsx(gs,{activeContent:n,setActiveContent:a,setVisible:t,visible:e}),r.jsx(vs,{activeContent:n,setActiveContent:a,setVisible:t,visible:e})]})};function _n(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_n=function(n){return typeof n}:_n=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_n(e)}function cr(e){var t=typeof e=="string"||e instanceof String;if(!t){var n=_n(e);throw e===null?n="null":n==="object"&&(n=e.constructor.name),new TypeError("Expected a string but received a ".concat(n))}}function Oa(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var n in t)typeof e[n]>"u"&&(e[n]=t[n]);return e}var xs={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function bs(e,t){cr(e),t=Oa(t,xs),t.allow_trailing_dot&&e[e.length-1]==="."&&(e=e.substring(0,e.length-1)),t.allow_wildcard===!0&&e.indexOf("*.")===0&&(e=e.substring(2));var n=e.split("."),a=n[n.length-1];return t.require_tld&&(n.length<2||!t.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(a)||/\s/.test(a))||!t.allow_numeric_tld&&/^\d+$/.test(a)?!1:n.every(function(i){return!(i.length>63&&!t.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(i)||/[\uff01-\uff5e]/.test(i)||/^-|-$/.test(i)||!t.allow_underscores&&/_/.test(i))})}var Rr="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",vt="(".concat(Rr,"[.]){3}").concat(Rr),ws=new RegExp("^".concat(vt,"$")),pe="(?:[0-9a-fA-F]{1,4})",Cs=new RegExp("^("+"(?:".concat(pe,":){7}(?:").concat(pe,"|:)|")+"(?:".concat(pe,":){6}(?:").concat(vt,"|:").concat(pe,"|:)|")+"(?:".concat(pe,":){5}(?::").concat(vt,"|(:").concat(pe,"){1,2}|:)|")+"(?:".concat(pe,":){4}(?:(:").concat(pe,"){0,1}:").concat(vt,"|(:").concat(pe,"){1,3}|:)|")+"(?:".concat(pe,":){3}(?:(:").concat(pe,"){0,2}:").concat(vt,"|(:").concat(pe,"){1,4}|:)|")+"(?:".concat(pe,":){2}(?:(:").concat(pe,"){0,3}:").concat(vt,"|(:").concat(pe,"){1,5}|:)|")+"(?:".concat(pe,":){1}(?:(:").concat(pe,"){0,4}:").concat(vt,"|(:").concat(pe,"){1,6}|:)|")+"(?::((?::".concat(pe,"){0,5}:").concat(vt,"|(?::").concat(pe,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");function In(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return cr(e),t=String(t),t?t==="4"?ws.test(e):t==="6"?Cs.test(e):!1:In(e,4)||In(e,6)}function Es(e,t){return _s(e)||Ts(e,t)||Ss(e,t)||js()}function js(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ss(e,t){if(e){if(typeof e=="string")return Dr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dr(e,t)}}function Dr(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Ts(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],a=!0,i=!1,o=void 0;try{for(var l=e[Symbol.iterator](),c;!(a=(c=l.next()).done)&&(n.push(c.value),!(t&&n.length===t));a=!0);}catch(s){i=!0,o=s}finally{try{!a&&l.return!=null&&l.return()}finally{if(i)throw o}}return n}}function _s(e){if(Array.isArray(e))return e}var ks={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0},Is=/^\[([^\]]+)\](?::([0-9]+))?$/;function Ps(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Lr(e,t){for(var n=0;n<t.length;n++){var a=t[n];if(e===a||Ps(a)&&a.test(e))return!0}return!1}function Ra(e,t){if(cr(e),!e||/[\s<>]/.test(e)||e.indexOf("mailto:")===0||(t=Oa(t,ks),t.validate_length&&e.length>=2083)||!t.allow_fragments&&e.includes("#")||!t.allow_query_components&&(e.includes("?")||e.includes("&")))return!1;var n,a,i,o,l,c,s,d;if(s=e.split("#"),e=s.shift(),s=e.split("?"),e=s.shift(),s=e.split("://"),s.length>1){if(n=s.shift().toLowerCase(),t.require_valid_protocol&&t.protocols.indexOf(n)===-1)return!1}else{if(t.require_protocol)return!1;if(e.slice(0,2)==="//"){if(!t.allow_protocol_relative_urls)return!1;s[0]=e.slice(2)}}if(e=s.join("://"),e==="")return!1;if(s=e.split("/"),e=s.shift(),e===""&&!t.require_host)return!0;if(s=e.split("@"),s.length>1){if(t.disallow_auth||s[0]===""||(a=s.shift(),a.indexOf(":")>=0&&a.split(":").length>2))return!1;var u=a.split(":"),h=Es(u,2),E=h[0],S=h[1];if(E===""&&S==="")return!1}o=s.join("@"),c=null,d=null;var m=o.match(Is);if(m?(i="",d=m[1],c=m[2]||null):(s=o.split(":"),i=s.shift(),s.length&&(c=s.join(":"))),c!==null&&c.length>0){if(l=parseInt(c,10),!/^[0-9]+$/.test(c)||l<=0||l>65535)return!1}else if(t.require_port)return!1;return t.host_whitelist?Lr(i,t.host_whitelist):i===""&&!t.require_host?!0:!(!In(i)&&!bs(i,t)&&(!d||!In(d,6))||(i=i||d,t.host_blacklist&&Lr(i,t.host_blacklist)))}const Da=e=>{const t=new URL(e);return`${t.protocol}//${t.hostname}`},an=xt.Item,{Sider:Ms}=Ki,As=({group:e,isOpen:t})=>r.jsxs("div",{className:"group-title",children:[r.jsxs(U.Ellipsis,{expandable:!1,showTooltip:!0,style:{width:e.unreadCount?"80%":"100%"},children:[t?r.jsx(Zi,{}):r.jsx(Ji,{}),e.title]}),e.unreadCount>0&&r.jsx(U.Ellipsis,{className:"unread-count",expandable:!1,children:e.unreadCount})]}),Fs=()=>{const e=Gi(),t=hn(),n=j(y=>y.collapsed),a=j(y=>y.feeds),i=j(y=>y.groups),o=j(y=>y.loading),l=j(y=>y.unreadTotal),c=j(y=>y.unreadToday),s=j(y=>y.starredCount),d=j(y=>y.readCount),u=j(y=>y.showFeedIcon),h=j(y=>y.toggleCollapsed),E=j(y=>y.hiddenFeedIds),S=j(y=>y.hiddenGroupIds),m=j(y=>y.showAllFeeds),[v,b]=g.useState([]),[F,G]=g.useState([]),Y=e.pathname,R=(y,T)=>{G(T)},I=a.reduce((y,T)=>{if(!m&&E.includes(T.id))return y;Ra(T.site_url)||(T.site_url=Da(T.feed_url));const{id:x}=T.category;return y[x]=y[x]||[],y[x].push(T),y},{});return g.useEffect(()=>{b([Y]),n||window.innerWidth<=992&&h(!0)},[Y]),g.useEffect(()=>{o||G([])},[o]),r.jsx(Ms,{className:"sidebar",trigger:null,width:240,collapsedWidth:0,breakpoint:"lg",onCollapse:h,collapsed:n,collapsible:!0,style:{height:"100%",borderRight:n?"none":"1px solid var(--color-border-2)",position:"fixed",top:0,zIndex:999},children:r.jsxs(xt,{autoScrollIntoView:!0,collapse:n,defaultSelectedKeys:[Y],hasCollapseButton:!0,onClickSubMenu:R,onCollapseChange:h,selectedKeys:v,style:{width:"240px",height:"100%"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"0 28px 0 10px",height:"48px",marginTop:"-4px",visibility:n?"hidden":"visible"},children:[r.jsx(oa,{size:32,style:{marginRight:"10px",backgroundColor:"var(--color-text-1)"},children:r.jsx(da,{style:{color:"var(--color-bg-1)"}})}),r.jsx(U.Title,{heading:6,style:{margin:"0"},children:"ReactFlux"})]}),r.jsx(ct,{style:{marginTop:0,marginBottom:"4px"}}),r.jsx(U.Title,{heading:6,style:{fontStyle:"italic",color:"var(--color-text-3)"},children:"Articles"}),r.jsx(Yt,{loading:o,animation:!0,text:{rows:3}}),o?null:r.jsxs("div",{children:[r.jsx(an,{onClick:()=>t("/"),children:r.jsxs("div",{className:"custom-menu-item",children:[r.jsxs("span",{children:[r.jsx(Xi,{}),"All"]}),r.jsx(U.Ellipsis,{className:"item-count",expandable:!1,children:l||""})]})},"/"),r.jsx(an,{onClick:()=>t("/today"),children:r.jsxs("div",{className:"custom-menu-item",children:[r.jsxs("span",{children:[r.jsx(qi,{}),"Today"]}),r.jsx(U.Ellipsis,{className:"item-count",expandable:!1,children:c||""})]})},"/today"),r.jsx(an,{onClick:()=>t("/starred"),children:r.jsxs("div",{className:"custom-menu-item",children:[r.jsxs("span",{children:[r.jsx(or,{}),"Starred"]}),r.jsx(U.Ellipsis,{className:"item-count",expandable:!1,children:s||""})]})},"/starred"),r.jsx(an,{onClick:()=>t("/history"),children:r.jsxs("div",{className:"custom-menu-item",children:[r.jsxs("span",{children:[r.jsx(Yi,{}),"History"]}),r.jsx(U.Ellipsis,{className:"item-count",expandable:!1,children:d||""})]})},"/history")]}),r.jsx(U.Title,{heading:6,style:{fontStyle:"italic",color:"var(--color-text-3)"},children:"Feeds"}),r.jsx(Yt,{loading:o,animation:!0,text:{rows:6}}),o?null:i.filter(y=>m||!S.includes(y.id)).map(y=>{var T;return r.jsx(xt.SubMenu,{selectable:!0,title:r.jsx(As,{group:y,isOpen:F.includes(`/group/${y.id}`)}),onClick:x=>{b([`/group/${y.id}`]),!(x.target.tagName==="svg"||x.target.tagName==="path")&&Y!==`/group/${y.id}`&&t(`/group/${y.id}`)},children:(T=I[y.id])==null?void 0:T.map(x=>r.jsx(an,{onClick:_=>{_.stopPropagation(),b([`/group/${y.id}`]),t(`/feed/${x.id}`)},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs(U.Ellipsis,{expandable:!1,showTooltip:!0,style:{width:x.unreadCount!==0?"80%":"100%"},children:[u&&r.jsx("img",{src:`https://icons.duckduckgo.com/ip3/${new URL(x.site_url).hostname}.ico`,alt:"Icon",style:{marginRight:"8px",width:"16px",height:"16px",verticalAlign:"-2px"}}),x.title]}),x.unreadCount!==0&&r.jsx(U.Ellipsis,{expandable:!1,style:{color:"var(--color-text-4)",display:"flex",justifyContent:"flex-end"},children:x.unreadCount})]})},`/feed/${x.id}`))},`/group/${y.id}`)})]})})},Ns=()=>{const e=j(o=>o.initData),t=j(o=>o.theme),n=j(o=>o.isSysDarkMode),a=j(o=>o.setIsSysDarkMode),i=j(o=>o.color);return g.useEffect(()=>{e();const o=c=>{a(c.matches)},l=window.matchMedia("(prefers-color-scheme: dark)");return l.addEventListener("change",o),()=>{l.removeEventListener("change",o)}},[]),g.useEffect(()=>{(l=>{document.body.setAttribute("arco-theme",l?"dark":"light"),document.body.style.colorScheme=l?"dark":"light"})(t==="system"?n:t==="dark")},[n,t]),g.useEffect(()=>{lr(i)},[i]),r.jsxs("div",{className:"app",style:{display:"flex",backgroundColor:"var(--color-bg-1)"},children:[r.jsx(ss,{}),r.jsx(Fs,{}),r.jsx(ys,{})]})};var pn={};(function e(t,n,a,i){var o=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),l=typeof Path2D=="function"&&typeof DOMMatrix=="function",c=function(){if(!t.OffscreenCanvas)return!1;var p=new OffscreenCanvas(1,1),f=p.getContext("2d");f.fillRect(0,0,1,1);var k=p.transferToImageBitmap();try{f.createPattern(k,"no-repeat")}catch{return!1}return!0}();function s(){}function d(p){var f=n.exports.Promise,k=f!==void 0?f:t.Promise;return typeof k=="function"?new k(p):(p(s,s),null)}var u=function(p,f){return{transform:function(k){if(p)return k;if(f.has(k))return f.get(k);var P=new OffscreenCanvas(k.width,k.height),M=P.getContext("2d");return M.drawImage(k,0,0),f.set(k,P),P},clear:function(){f.clear()}}}(c,new Map),h=function(){var p=Math.floor(16.666666666666668),f,k,P={},M=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(f=function(N){var O=Math.random();return P[O]=requestAnimationFrame(function A(L){M===L||M+p-1<L?(M=L,delete P[O],N()):P[O]=requestAnimationFrame(A)}),O},k=function(N){P[N]&&cancelAnimationFrame(P[N])}):(f=function(N){return setTimeout(N,p)},k=function(N){return clearTimeout(N)}),{frame:f,cancel:k}}(),E=function(){var p,f,k={};function P(M){function N(O,A){M.postMessage({options:O||{},callback:A})}M.init=function(A){var L=A.transferControlToOffscreen();M.postMessage({canvas:L},[L])},M.fire=function(A,L,$){if(f)return N(A,null),f;var V=Math.random().toString(36).slice(2);return f=d(function(K){function Q(re){re.data.callback===V&&(delete k[V],M.removeEventListener("message",Q),f=null,u.clear(),$(),K())}M.addEventListener("message",Q),N(A,V),k[V]=Q.bind(null,{data:{callback:V}})}),f},M.reset=function(){M.postMessage({reset:!0});for(var A in k)k[A](),delete k[A]}}return function(){if(p)return p;if(!a&&o){var M=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{p=new Worker(URL.createObjectURL(new Blob([M])))}catch(N){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",N),null}P(p)}return p}}(),S={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function m(p,f){return f?f(p):p}function v(p){return p!=null}function b(p,f,k){return m(p&&v(p[f])?p[f]:S[f],k)}function F(p){return p<0?0:Math.floor(p)}function G(p,f){return Math.floor(Math.random()*(f-p))+p}function Y(p){return parseInt(p,16)}function R(p){return p.map(I)}function I(p){var f=String(p).replace(/[^0-9a-f]/gi,"");return f.length<6&&(f=f[0]+f[0]+f[1]+f[1]+f[2]+f[2]),{r:Y(f.substring(0,2)),g:Y(f.substring(2,4)),b:Y(f.substring(4,6))}}function y(p){var f=b(p,"origin",Object);return f.x=b(f,"x",Number),f.y=b(f,"y",Number),f}function T(p){p.width=document.documentElement.clientWidth,p.height=document.documentElement.clientHeight}function x(p){var f=p.getBoundingClientRect();p.width=f.width,p.height=f.height}function _(p){var f=document.createElement("canvas");return f.style.position="fixed",f.style.top="0px",f.style.left="0px",f.style.pointerEvents="none",f.style.zIndex=p,f}function B(p,f,k,P,M,N,O,A,L){p.save(),p.translate(f,k),p.rotate(N),p.scale(P,M),p.arc(0,0,1,O,A,L),p.restore()}function xe(p){var f=p.angle*(Math.PI/180),k=p.spread*(Math.PI/180);return{x:p.x,y:p.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:p.startVelocity*.5+Math.random()*p.startVelocity,angle2D:-f+(.5*k-Math.random()*k),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:p.color,shape:p.shape,tick:0,totalTicks:p.ticks,decay:p.decay,drift:p.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:p.gravity*3,ovalScalar:.6,scalar:p.scalar,flat:p.flat}}function Z(p,f){f.x+=Math.cos(f.angle2D)*f.velocity+f.drift,f.y+=Math.sin(f.angle2D)*f.velocity+f.gravity,f.velocity*=f.decay,f.flat?(f.wobble=0,f.wobbleX=f.x+10*f.scalar,f.wobbleY=f.y+10*f.scalar,f.tiltSin=0,f.tiltCos=0,f.random=1):(f.wobble+=f.wobbleSpeed,f.wobbleX=f.x+10*f.scalar*Math.cos(f.wobble),f.wobbleY=f.y+10*f.scalar*Math.sin(f.wobble),f.tiltAngle+=.1,f.tiltSin=Math.sin(f.tiltAngle),f.tiltCos=Math.cos(f.tiltAngle),f.random=Math.random()+2);var k=f.tick++/f.totalTicks,P=f.x+f.random*f.tiltCos,M=f.y+f.random*f.tiltSin,N=f.wobbleX+f.random*f.tiltCos,O=f.wobbleY+f.random*f.tiltSin;if(p.fillStyle="rgba("+f.color.r+", "+f.color.g+", "+f.color.b+", "+(1-k)+")",p.beginPath(),l&&f.shape.type==="path"&&typeof f.shape.path=="string"&&Array.isArray(f.shape.matrix))p.fill(He(f.shape.path,f.shape.matrix,f.x,f.y,Math.abs(N-P)*.1,Math.abs(O-M)*.1,Math.PI/10*f.wobble));else if(f.shape.type==="bitmap"){var A=Math.PI/10*f.wobble,L=Math.abs(N-P)*.1,$=Math.abs(O-M)*.1,V=f.shape.bitmap.width*f.scalar,K=f.shape.bitmap.height*f.scalar,Q=new DOMMatrix([Math.cos(A)*L,Math.sin(A)*L,-Math.sin(A)*$,Math.cos(A)*$,f.x,f.y]);Q.multiplySelf(new DOMMatrix(f.shape.matrix));var re=p.createPattern(u.transform(f.shape.bitmap),"no-repeat");re.setTransform(Q),p.globalAlpha=1-k,p.fillStyle=re,p.fillRect(f.x-V/2,f.y-K/2,V,K),p.globalAlpha=1}else if(f.shape==="circle")p.ellipse?p.ellipse(f.x,f.y,Math.abs(N-P)*f.ovalScalar,Math.abs(O-M)*f.ovalScalar,Math.PI/10*f.wobble,0,2*Math.PI):B(p,f.x,f.y,Math.abs(N-P)*f.ovalScalar,Math.abs(O-M)*f.ovalScalar,Math.PI/10*f.wobble,0,2*Math.PI);else if(f.shape==="star")for(var z=Math.PI/2*3,C=4*f.scalar,J=8*f.scalar,ee=f.x,ie=f.y,Ee=5,le=Math.PI/Ee;Ee--;)ee=f.x+Math.cos(z)*J,ie=f.y+Math.sin(z)*J,p.lineTo(ee,ie),z+=le,ee=f.x+Math.cos(z)*C,ie=f.y+Math.sin(z)*C,p.lineTo(ee,ie),z+=le;else p.moveTo(Math.floor(f.x),Math.floor(f.y)),p.lineTo(Math.floor(f.wobbleX),Math.floor(M)),p.lineTo(Math.floor(N),Math.floor(O)),p.lineTo(Math.floor(P),Math.floor(f.wobbleY));return p.closePath(),p.fill(),f.tick<f.totalTicks}function Oe(p,f,k,P,M){var N=f.slice(),O=p.getContext("2d"),A,L,$=d(function(V){function K(){A=L=null,O.clearRect(0,0,P.width,P.height),u.clear(),M(),V()}function Q(){a&&!(P.width===i.width&&P.height===i.height)&&(P.width=p.width=i.width,P.height=p.height=i.height),!P.width&&!P.height&&(k(p),P.width=p.width,P.height=p.height),O.clearRect(0,0,P.width,P.height),N=N.filter(function(re){return Z(O,re)}),N.length?A=h.frame(Q):K()}A=h.frame(Q),L=K});return{addFettis:function(V){return N=N.concat(V),$},canvas:p,promise:$,reset:function(){A&&h.cancel(A),L&&L()}}}function fe(p,f){var k=!p,P=!!b(f||{},"resize"),M=!1,N=b(f,"disableForReducedMotion",Boolean),O=o&&!!b(f||{},"useWorker"),A=O?E():null,L=k?T:x,$=p&&A?!!p.__confetti_initialized:!1,V=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,K;function Q(z,C,J){for(var ee=b(z,"particleCount",F),ie=b(z,"angle",Number),Ee=b(z,"spread",Number),le=b(z,"startVelocity",Number),Ze=b(z,"decay",Number),Et=b(z,"gravity",Number),Re=b(z,"drift",Number),jt=b(z,"colors",R),St=b(z,"ticks",Number),De=b(z,"shapes"),Me=b(z,"scalar"),Ge=!!b(z,"flat"),dt=y(z),Tt=ee,ft=[],Dt=p.width*dt.x,je=p.height*dt.y;Tt--;)ft.push(xe({x:Dt,y:je,angle:ie,spread:Ee,startVelocity:le,color:jt[Tt%jt.length],shape:De[G(0,De.length)],ticks:St,decay:Ze,gravity:Et,drift:Re,scalar:Me,flat:Ge}));return K?K.addFettis(ft):(K=Oe(p,ft,L,C,J),K.promise)}function re(z){var C=N||b(z,"disableForReducedMotion",Boolean),J=b(z,"zIndex",Number);if(C&&V)return d(function(le){le()});k&&K?p=K.canvas:k&&!p&&(p=_(J),document.body.appendChild(p)),P&&!$&&L(p);var ee={width:p.width,height:p.height};A&&!$&&A.init(p),$=!0,A&&(p.__confetti_initialized=!0);function ie(){if(A){var le={getBoundingClientRect:function(){if(!k)return p.getBoundingClientRect()}};L(le),A.postMessage({resize:{width:le.width,height:le.height}});return}ee.width=ee.height=null}function Ee(){K=null,P&&(M=!1,t.removeEventListener("resize",ie)),k&&p&&(document.body.removeChild(p),p=null,$=!1)}return P&&!M&&(M=!0,t.addEventListener("resize",ie,!1)),A?A.fire(z,ee,Ee):Q(z,ee,Ee)}return re.reset=function(){A&&A.reset(),K&&K.reset()},re}var ce;function ue(){return ce||(ce=fe(null,{useWorker:!0,resize:!0})),ce}function He(p,f,k,P,M,N,O){var A=new Path2D(p),L=new Path2D;L.addPath(A,new DOMMatrix(f));var $=new Path2D;return $.addPath(L,new DOMMatrix([Math.cos(O)*M,Math.sin(O)*M,-Math.sin(O)*N,Math.cos(O)*N,k,P])),$}function me(p){if(!l)throw new Error("path confetti are not supported in this browser");var f,k;typeof p=="string"?f=p:(f=p.path,k=p.matrix);var P=new Path2D(f),M=document.createElement("canvas"),N=M.getContext("2d");if(!k){for(var O=1e3,A=O,L=O,$=0,V=0,K,Q,re=0;re<O;re+=2)for(var z=0;z<O;z+=2)N.isPointInPath(P,re,z,"nonzero")&&(A=Math.min(A,re),L=Math.min(L,z),$=Math.max($,re),V=Math.max(V,z));K=$-A,Q=V-L;var C=10,J=Math.min(C/K,C/Q);k=[J,0,0,J,-Math.round(K/2+A)*J,-Math.round(Q/2+L)*J]}return{type:"path",path:f,matrix:k}}function We(p){var f,k=1,P="#000000",M='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof p=="string"?f=p:(f=p.text,k="scalar"in p?p.scalar:k,M="fontFamily"in p?p.fontFamily:M,P="color"in p?p.color:P);var N=10*k,O=""+N+"px "+M,A=new OffscreenCanvas(N,N),L=A.getContext("2d");L.font=O;var $=L.measureText(f),V=Math.ceil($.actualBoundingBoxRight+$.actualBoundingBoxLeft),K=Math.ceil($.actualBoundingBoxAscent+$.actualBoundingBoxDescent),Q=2,re=$.actualBoundingBoxLeft+Q,z=$.actualBoundingBoxAscent+Q;V+=Q+Q,K+=Q+Q,A=new OffscreenCanvas(V,K),L=A.getContext("2d"),L.font=O,L.fillStyle=P,L.fillText(f,re,z);var C=1/k;return{type:"bitmap",bitmap:A.transferToImageBitmap(),matrix:[C,0,0,C,-V*C/2,-K*C/2]}}n.exports=function(){return ue().apply(this,arguments)},n.exports.reset=function(){ue().reset()},n.exports.create=fe,n.exports.shapeFromPath=me,n.exports.shapeFromText=We})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),pn,!1);const Os=pn.exports;pn.exports.create;const ut=g.createContext(null),Qt=({children:e})=>{const[t,n]=g.useState(0),[a,i]=g.useState(0),[o,l]=g.useState(0),[c,s]=g.useState(!1),[d,u]=g.useState(!1),[h,E]=g.useState([]),[S,m]=g.useState([]),[v,b]=g.useState("all"),[F,G]=g.useState("0"),[Y,R]=g.useState(""),[I,y]=g.useState(!0),T=g.useMemo(()=>({entries:h,filteredEntries:S,filterStatus:v,filterString:Y,filterType:F,loading:I,loadMoreUnreadVisible:d,loadMoreVisible:c,offset:o,setEntries:E,setFilteredEntries:m,setFilterStatus:b,setFilterString:R,setFilterType:G,setLoading:y,setLoadMoreUnreadVisible:u,setLoadMoreVisible:s,setOffset:l,setTotal:n,setUnreadCount:i,total:t,unreadCount:a}),[h,S,v,Y,F,I,d,c,o,t,a]);return r.jsx(ut.Provider,{value:T,children:e})},ur=()=>{const e=j(y=>y.setUnreadTotal),t=j(y=>y.setUnreadToday),n=j(y=>y.setReadCount),a=j(y=>y.setStarredCount),i=j(y=>y.activeContent),o=j(y=>y.setActiveContent),l=j(y=>y.updateFeedUnreadCount),c=j(y=>y.updateGroupUnreadCount),{entries:s,filteredEntries:d,setEntries:u,setFilteredEntries:h,setUnreadCount:E}=g.useContext(ut),S=(y,T,x)=>y.map(_=>_.id===T.id?x(_):_),m=(y,T,x)=>{o({...y,...T}),u(S(s,y,x)),h(S(d,y,x))},v=(y,T)=>{const{feed:x}=y,_=x.id,B=x.category.id,xe=Wo(y.published_at);l(_,T),c(B,T),T==="read"?(e(Z=>Math.max(0,Z-1)),E(Z=>Math.max(0,Z-1)),n(Z=>Z+1),xe&&t(Z=>Math.max(0,Z-1))):(e(Z=>Z+1),E(Z=>Z+1),n(Z=>Math.max(0,Z-1)),xe&&t(Z=>Z+1)),m(y,{status:T},Z=>({...Z,status:T}))},b=(y,T)=>{T?(a(x=>x+1),Os({particleCount:100,angle:120,spread:70,origin:{x:1,y:1}})):a(x=>Math.max(0,x-1)),m(y,{starred:T},x=>({...x,starred:T}))},F=async()=>{const y=i.status,T=y==="read"?"unread":"read";v(i,T),Sa(i.id,T).catch(()=>{ae.error(`Failed to mark entry as ${T}, please try again later`),v(i,y)})},G=async()=>{const{id:y}=i,T=!i.starred;b(i,T),qo(y).catch(()=>{ae.error(`Failed to ${T?"star":"unstar"} entry, please try again later`),b(i,!T)})};return{handleEntryStatusUpdate:v,handleFetchContent:async()=>{Yo(i.id).then(y=>{ae.success("Fetched content successfully"),o({...i,content:y.data.content})}).catch(()=>{ae.error("Failed to fetch content, please try again later")})},toggleEntryStarred:()=>{G()},toggleEntryStatus:()=>{F()}}},Ur=(e,t="start")=>{const n=document.querySelector(e);n&&n.scrollIntoView({behavior:"smooth",block:t})},dr=()=>{const e=j(F=>F.entriesPerPage),{entries:t,filterStatus:n,filterString:a,filterType:i,offset:o,setEntries:l,setFilteredEntries:c,setLoadMoreUnreadVisible:s,setLoadMoreVisible:d,setOffset:u,total:h,unreadCount:E}=g.useContext(ut),[S,m]=g.useState(!1),v=F=>{const R=new DOMParser().parseFromString(F.content,"text/html").querySelector("img");return R&&(F.imgSrc=R.getAttribute("src")),F};return{getFirstImage:v,handleLoadMore:async F=>{var G;m(!0);try{const Y=await F(o+e);if((G=Y==null?void 0:Y.data)!=null&&G.entries){u(x=>x+e);const R=Y.data.entries.map(v),I=[...new Map([...t,...R].map(x=>[x.id,x])).values()];l(I);const y=n==="all"?I:I.filter(x=>x.status==="unread"),T=a?Na(y,i,n,a):y;c(T),d(I.length<h),s(y.length<E&&n==="unread")}}catch(Y){console.error("Error fetching more articles:",Y)}m(!1)},loadingMore:S}},fr=(e,t,n)=>{const{filteredEntries:a,filterStatus:i,loadMoreUnreadVisible:o,loadMoreVisible:l}=g.useContext(ut),c=j(I=>I.activeContent),s=j(I=>I.setActiveContent),{handleLoadMore:d}=dr(),[u,h]=g.useState(!1),[E,S]=g.useState(!1);g.useEffect(()=>{E&&!u&&n&&(b(),S(!1))},[a,u,E,n]);const m=I=>{c&&(s(null),I.current&&(I.current.setAttribute("tabIndex","-1"),I.current.focus()))},v=()=>{const I=a.findIndex(y=>y.id===(c==null?void 0:c.id));if(I>0){const y=a[I-1];e(y),Ur(".card-custom-selected-style","end")}},b=()=>{if(u)return;const I=a.findIndex(T=>T.id===(c==null?void 0:c.id));if(I===a.length-1&&(i==="all"&&l||o)){h(!0),d(t).then(()=>S(!0)).finally(()=>h(!1));return}if(I<a.length-1){const T=a[I+1];e(T),S(!1),Ur(".card-custom-selected-style")}};return{handleEscapeKey:m,handleLeftKey:v,handleRightKey:b,handleBKey:()=>{c&&window.open(c.url,"_blank")},handleDKey:I=>{c&&I()},handleMKey:I=>{c&&I()},handleSKey:I=>{c&&I()}}},Rs=({handleEntryClick:e,getEntries:t,isFilteredEntriesUpdated:n})=>{const a=j(h=>h.activeContent),{handleFetchContent:i,toggleEntryStarred:o,toggleEntryStatus:l}=ur(),{handleLeftKey:c,handleRightKey:s}=fr(e,t,n);if(!a)return null;const d=a.status==="unread",u=a.starred;return r.jsx("div",{className:"action-buttons",style:{position:"fixed",bottom:"20px",right:"10px",borderRadius:"50%",boxShadow:"0 4px 10px rgba(var(--primary-6), 0.4)"},children:r.jsxs(Fn,{size:0,direction:"vertical",children:[r.jsx(st,{mini:!0,position:"left",content:d?"Mark as read":"Mark as unread",children:r.jsx(de,{type:"primary",size:"mini",style:{borderBottom:"1px solid rgb(var(--primary-5))",borderRadius:"50% 50% 0 0"},onClick:l,icon:d?r.jsx(fa,{}):r.jsx(ha,{})})}),r.jsx(st,{mini:!0,position:"left",content:u?"Unstar":"Star",children:r.jsx(de,{type:"primary",size:"mini",style:{borderRadius:"0"},onClick:o,icon:u?r.jsx(On,{style:{color:"#ffcd00"}}):r.jsx(or,{})})}),r.jsx(st,{mini:!0,position:"left",content:"Fetch original article",children:r.jsx(de,{type:"primary",size:"mini",style:{borderTop:"1px solid rgb(var(--primary-5))",borderRadius:"0"},onClick:i,icon:r.jsx(pa,{})})}),r.jsx(st,{mini:!0,position:"left",content:"Previous article",children:r.jsx(de,{type:"primary",size:"mini",style:{borderTop:"1px solid rgb(var(--primary-5))",borderRadius:"0"},onClick:()=>c(e),icon:r.jsx(ma,{})})}),r.jsx(st,{mini:!0,position:"left",content:"Next article",children:r.jsx(de,{type:"primary",size:"mini",style:{borderTop:"1px solid rgb(var(--primary-5))",borderRadius:"0 0 50% 50%"},onClick:()=>s(e),icon:r.jsx(ga,{})})})]})})},Ds=({handleEntryClick:e,getEntries:t,isFilteredEntriesUpdated:n})=>{const a=j(E=>E.activeContent),{handleFetchContent:i,toggleEntryStarred:o,toggleEntryStatus:l}=ur(),{handleLeftKey:c,handleRightKey:s,handleEscapeKey:d}=fr(e,t,n);if(!a)return null;const u=a.status==="unread",h=a.starred;return r.jsxs(de.Group,{className:"action-buttons-mobile",style:{display:"none",justifyContent:"center",position:"fixed",bottom:"40px",left:"50%",transform:"translateX(-50%)",borderRadius:"50%",boxShadow:"0 4px 10px rgba(var(--primary-6), 0.4)"},children:[r.jsx(de,{type:"primary",shape:"round",onClick:()=>d(e),icon:r.jsx(Qi,{})}),r.jsx(de,{type:"primary",onClick:()=>l(),icon:u?r.jsx(fa,{}):r.jsx(ha,{})}),r.jsx(de,{type:"primary",onClick:()=>o(),icon:h?r.jsx(On,{style:{color:"#ffcd00"}}):r.jsx(or,{})}),r.jsx(de,{type:"primary",onClick:()=>i(),icon:r.jsx(pa,{})}),r.jsx(de,{type:"primary",onClick:()=>c(e),icon:r.jsx(ma,{})}),r.jsx(de,{type:"primary",shape:"round",onClick:()=>s(e),icon:r.jsx(ga,{})})]})};var La={},hr={},pr={};Object.defineProperty(pr,"__esModule",{value:!0});var Vr="html",zr="head",xn="body",Ls=/<([a-zA-Z]+[0-9]?)/,Br=/<head[^]*>/i,$r=/<body[^]*>/i,Pn=function(e,t){throw new Error("This browser does not support `document.implementation.createHTMLDocument`")},er=function(e,t){throw new Error("This browser does not support `DOMParser.prototype.parseFromString`")},Hr=typeof window=="object"&&window.DOMParser;if(typeof Hr=="function"){var Us=new Hr,Vs="text/html";er=function(e,t){return t&&(e="<".concat(t,">").concat(e,"</").concat(t,">")),Us.parseFromString(e,Vs)},Pn=er}if(typeof document=="object"&&document.implementation){var bn=document.implementation.createHTMLDocument();Pn=function(e,t){if(t){var n=bn.documentElement.querySelector(t);return n&&(n.innerHTML=e),bn}return bn.documentElement.innerHTML=e,bn}}var wn=typeof document=="object"&&document.createElement("template"),tr;wn&&wn.content&&(tr=function(e){return wn.innerHTML=e,wn.content.childNodes});function zs(e){var t,n,a=e.match(Ls),i=a&&a[1]?a[1].toLowerCase():"";switch(i){case Vr:{var o=er(e);if(!Br.test(e)){var l=o.querySelector(zr);(t=l==null?void 0:l.parentNode)===null||t===void 0||t.removeChild(l)}if(!$r.test(e)){var l=o.querySelector(xn);(n=l==null?void 0:l.parentNode)===null||n===void 0||n.removeChild(l)}return o.querySelectorAll(Vr)}case zr:case xn:{var c=Pn(e).querySelectorAll(i);return $r.test(e)&&Br.test(e)?c[0].parentNode.childNodes:c}default:{if(tr)return tr(e);var l=Pn(e,xn).querySelector(xn);return l.childNodes}}}pr.default=zs;var Zt={},Ua={},mn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Doctype=e.CDATA=e.Tag=e.Style=e.Script=e.Comment=e.Directive=e.Text=e.Root=e.isTag=e.ElementType=void 0;var t;(function(a){a.Root="root",a.Text="text",a.Directive="directive",a.Comment="comment",a.Script="script",a.Style="style",a.Tag="tag",a.CDATA="cdata",a.Doctype="doctype"})(t=e.ElementType||(e.ElementType={}));function n(a){return a.type===t.Tag||a.type===t.Script||a.type===t.Style}e.isTag=n,e.Root=t.Root,e.Text=t.Text,e.Directive=t.Directive,e.Comment=t.Comment,e.Script=t.Script,e.Style=t.Style,e.Tag=t.Tag,e.CDATA=t.CDATA,e.Doctype=t.Doctype})(mn);var X={},bt=ne&&ne.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(a[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),ln=ne&&ne.__assign||function(){return ln=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ln.apply(this,arguments)};Object.defineProperty(X,"__esModule",{value:!0});X.cloneNode=X.hasChildren=X.isDocument=X.isDirective=X.isComment=X.isText=X.isCDATA=X.isTag=X.Element=X.Document=X.CDATA=X.NodeWithChildren=X.ProcessingInstruction=X.Comment=X.Text=X.DataNode=X.Node=void 0;var ke=mn,mr=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(t){this.prev=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(t){this.next=t},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(t){return t===void 0&&(t=!1),gr(this,t)},e}();X.Node=mr;var Dn=function(e){bt(t,e);function t(n){var a=e.call(this)||this;return a.data=n,a}return Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(n){this.data=n},enumerable:!1,configurable:!0}),t}(mr);X.DataNode=Dn;var Va=function(e){bt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=ke.ElementType.Text,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(Dn);X.Text=Va;var za=function(e){bt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=ke.ElementType.Comment,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(Dn);X.Comment=za;var Ba=function(e){bt(t,e);function t(n,a){var i=e.call(this,a)||this;return i.name=n,i.type=ke.ElementType.Directive,i}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(Dn);X.ProcessingInstruction=Ba;var Ln=function(e){bt(t,e);function t(n){var a=e.call(this)||this;return a.children=n,a}return Object.defineProperty(t.prototype,"firstChild",{get:function(){var n;return(n=this.children[0])!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(n){this.children=n},enumerable:!1,configurable:!0}),t}(mr);X.NodeWithChildren=Ln;var $a=function(e){bt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=ke.ElementType.CDATA,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(Ln);X.CDATA=$a;var Ha=function(e){bt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=ke.ElementType.Root,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(Ln);X.Document=Ha;var Wa=function(e){bt(t,e);function t(n,a,i,o){i===void 0&&(i=[]),o===void 0&&(o=n==="script"?ke.ElementType.Script:n==="style"?ke.ElementType.Style:ke.ElementType.Tag);var l=e.call(this,i)||this;return l.name=n,l.attribs=a,l.type=o,l}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(n){this.name=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var n=this;return Object.keys(this.attribs).map(function(a){var i,o;return{name:a,value:n.attribs[a],namespace:(i=n["x-attribsNamespace"])===null||i===void 0?void 0:i[a],prefix:(o=n["x-attribsPrefix"])===null||o===void 0?void 0:o[a]}})},enumerable:!1,configurable:!0}),t}(Ln);X.Element=Wa;function Ga(e){return(0,ke.isTag)(e)}X.isTag=Ga;function Xa(e){return e.type===ke.ElementType.CDATA}X.isCDATA=Xa;function qa(e){return e.type===ke.ElementType.Text}X.isText=qa;function Ya(e){return e.type===ke.ElementType.Comment}X.isComment=Ya;function Ka(e){return e.type===ke.ElementType.Directive}X.isDirective=Ka;function Za(e){return e.type===ke.ElementType.Root}X.isDocument=Za;function Bs(e){return Object.prototype.hasOwnProperty.call(e,"children")}X.hasChildren=Bs;function gr(e,t){t===void 0&&(t=!1);var n;if(qa(e))n=new Va(e.data);else if(Ya(e))n=new za(e.data);else if(Ga(e)){var a=t?qn(e.children):[],i=new Wa(e.name,ln({},e.attribs),a);a.forEach(function(s){return s.parent=i}),e.namespace!=null&&(i.namespace=e.namespace),e["x-attribsNamespace"]&&(i["x-attribsNamespace"]=ln({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(i["x-attribsPrefix"]=ln({},e["x-attribsPrefix"])),n=i}else if(Xa(e)){var a=t?qn(e.children):[],o=new $a(a);a.forEach(function(d){return d.parent=o}),n=o}else if(Za(e)){var a=t?qn(e.children):[],l=new Ha(a);a.forEach(function(d){return d.parent=l}),e["x-mode"]&&(l["x-mode"]=e["x-mode"]),n=l}else if(Ka(e)){var c=new Ba(e.name,e.data);e["x-name"]!=null&&(c["x-name"]=e["x-name"],c["x-publicId"]=e["x-publicId"],c["x-systemId"]=e["x-systemId"]),n=c}else throw new Error("Not implemented yet: ".concat(e.type));return n.startIndex=e.startIndex,n.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(n.sourceCodeLocation=e.sourceCodeLocation),n}X.cloneNode=gr;function qn(e){for(var t=e.map(function(a){return gr(a,!0)}),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}(function(e){var t=ne&&ne.__createBinding||(Object.create?function(c,s,d,u){u===void 0&&(u=d);var h=Object.getOwnPropertyDescriptor(s,d);(!h||("get"in h?!s.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return s[d]}}),Object.defineProperty(c,u,h)}:function(c,s,d,u){u===void 0&&(u=d),c[u]=s[d]}),n=ne&&ne.__exportStar||function(c,s){for(var d in c)d!=="default"&&!Object.prototype.hasOwnProperty.call(s,d)&&t(s,c,d)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var a=mn,i=X;n(X,e);var o={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},l=function(){function c(s,d,u){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof d=="function"&&(u=d,d=o),typeof s=="object"&&(d=s,s=void 0),this.callback=s??null,this.options=d??o,this.elementCB=u??null}return c.prototype.onparserinit=function(s){this.parser=s},c.prototype.onreset=function(){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},c.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},c.prototype.onerror=function(s){this.handleCallback(s)},c.prototype.onclosetag=function(){this.lastNode=null;var s=this.tagStack.pop();this.options.withEndIndices&&(s.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(s)},c.prototype.onopentag=function(s,d){var u=this.options.xmlMode?a.ElementType.Tag:void 0,h=new i.Element(s,d,void 0,u);this.addNode(h),this.tagStack.push(h)},c.prototype.ontext=function(s){var d=this.lastNode;if(d&&d.type===a.ElementType.Text)d.data+=s,this.options.withEndIndices&&(d.endIndex=this.parser.endIndex);else{var u=new i.Text(s);this.addNode(u),this.lastNode=u}},c.prototype.oncomment=function(s){if(this.lastNode&&this.lastNode.type===a.ElementType.Comment){this.lastNode.data+=s;return}var d=new i.Comment(s);this.addNode(d),this.lastNode=d},c.prototype.oncommentend=function(){this.lastNode=null},c.prototype.oncdatastart=function(){var s=new i.Text(""),d=new i.CDATA([s]);this.addNode(d),s.parent=d,this.lastNode=s},c.prototype.oncdataend=function(){this.lastNode=null},c.prototype.onprocessinginstruction=function(s,d){var u=new i.ProcessingInstruction(s,d);this.addNode(u)},c.prototype.handleCallback=function(s){if(typeof this.callback=="function")this.callback(s,this.dom);else if(s)throw s},c.prototype.addNode=function(s){var d=this.tagStack[this.tagStack.length-1],u=d.children[d.children.length-1];this.options.withStartIndices&&(s.startIndex=this.parser.startIndex),this.options.withEndIndices&&(s.endIndex=this.parser.endIndex),d.children.push(s),u&&(s.prev=u,u.next=s),s.parent=d,this.lastNode=null},c}();e.DomHandler=l,e.default=l})(Ua);var Ja={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CASE_SENSITIVE_TAG_NAMES_MAP=e.CASE_SENSITIVE_TAG_NAMES=void 0,e.CASE_SENSITIVE_TAG_NAMES=["animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","linearGradient","radialGradient","textPath"],e.CASE_SENSITIVE_TAG_NAMES_MAP=e.CASE_SENSITIVE_TAG_NAMES.reduce(function(t,n){return t[n.toLowerCase()]=n,t},{})})(Ja);Object.defineProperty(Zt,"__esModule",{value:!0});Zt.formatDOM=Zt.formatAttributes=void 0;var Cn=Ua,$s=Ja;function Hs(e){return $s.CASE_SENSITIVE_TAG_NAMES_MAP[e]}function Qa(e){for(var t={},n=0,a=e.length;n<a;n++){var i=e[n];t[i.name]=i.value}return t}Zt.formatAttributes=Qa;function Ws(e){e=e.toLowerCase();var t=Hs(e);return t||e}function ei(e,t,n){t===void 0&&(t=null);for(var a=[],i,o=0,l=e.length;o<l;o++){var c=e[o];switch(c.nodeType){case 1:{var s=Ws(c.nodeName);i=new Cn.Element(s,Qa(c.attributes)),i.children=ei(s==="template"?c.content.childNodes:c.childNodes,i);break}case 3:i=new Cn.Text(c.nodeValue);break;case 8:i=new Cn.Comment(c.nodeValue);break;default:continue}var d=a[o-1]||null;d&&(d.next=i),i.parent=t,i.prev=d,i.next=null,a.push(i)}return n&&(i=new Cn.ProcessingInstruction(n.substring(0,n.indexOf(" ")).toLowerCase(),n),i.next=a[0]||null,i.parent=t,a.unshift(i),a[1]&&(a[1].prev=a[0])),a}Zt.formatDOM=ei;var Gs=ne&&ne.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hr,"__esModule",{value:!0});var Xs=Gs(pr),qs=Zt,Ys=/<(![a-zA-Z\s]+)>/;function Ks(e){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];var t=e.match(Ys),n=t?t[1]:void 0;return(0,qs.formatDOM)((0,Xs.default)(e),null,n)}hr.default=Ks;var Un={},$e={},Vn={},Zs=0;Vn.SAME=Zs;var Js=1;Vn.CAMELCASE=Js;Vn.possibleStandardNames={accept:0,acceptCharset:1,"accept-charset":"acceptCharset",accessKey:1,action:0,allowFullScreen:1,alt:0,as:0,async:0,autoCapitalize:1,autoComplete:1,autoCorrect:1,autoFocus:1,autoPlay:1,autoSave:1,capture:0,cellPadding:1,cellSpacing:1,challenge:0,charSet:1,checked:0,children:0,cite:0,class:"className",classID:1,className:1,cols:0,colSpan:1,content:0,contentEditable:1,contextMenu:1,controls:0,controlsList:1,coords:0,crossOrigin:1,dangerouslySetInnerHTML:1,data:0,dateTime:1,default:0,defaultChecked:1,defaultValue:1,defer:0,dir:0,disabled:0,disablePictureInPicture:1,disableRemotePlayback:1,download:0,draggable:0,encType:1,enterKeyHint:1,for:"htmlFor",form:0,formMethod:1,formAction:1,formEncType:1,formNoValidate:1,formTarget:1,frameBorder:1,headers:0,height:0,hidden:0,high:0,href:0,hrefLang:1,htmlFor:1,httpEquiv:1,"http-equiv":"httpEquiv",icon:0,id:0,innerHTML:1,inputMode:1,integrity:0,is:0,itemID:1,itemProp:1,itemRef:1,itemScope:1,itemType:1,keyParams:1,keyType:1,kind:0,label:0,lang:0,list:0,loop:0,low:0,manifest:0,marginWidth:1,marginHeight:1,max:0,maxLength:1,media:0,mediaGroup:1,method:0,min:0,minLength:1,multiple:0,muted:0,name:0,noModule:1,nonce:0,noValidate:1,open:0,optimum:0,pattern:0,placeholder:0,playsInline:1,poster:0,preload:0,profile:0,radioGroup:1,readOnly:1,referrerPolicy:1,rel:0,required:0,reversed:0,role:0,rows:0,rowSpan:1,sandbox:0,scope:0,scoped:0,scrolling:0,seamless:0,selected:0,shape:0,size:0,sizes:0,span:0,spellCheck:1,src:0,srcDoc:1,srcLang:1,srcSet:1,start:0,step:0,style:0,summary:0,tabIndex:1,target:0,title:0,type:0,useMap:1,value:0,width:0,wmode:0,wrap:0,about:0,accentHeight:1,"accent-height":"accentHeight",accumulate:0,additive:0,alignmentBaseline:1,"alignment-baseline":"alignmentBaseline",allowReorder:1,alphabetic:0,amplitude:0,arabicForm:1,"arabic-form":"arabicForm",ascent:0,attributeName:1,attributeType:1,autoReverse:1,azimuth:0,baseFrequency:1,baselineShift:1,"baseline-shift":"baselineShift",baseProfile:1,bbox:0,begin:0,bias:0,by:0,calcMode:1,capHeight:1,"cap-height":"capHeight",clip:0,clipPath:1,"clip-path":"clipPath",clipPathUnits:1,clipRule:1,"clip-rule":"clipRule",color:0,colorInterpolation:1,"color-interpolation":"colorInterpolation",colorInterpolationFilters:1,"color-interpolation-filters":"colorInterpolationFilters",colorProfile:1,"color-profile":"colorProfile",colorRendering:1,"color-rendering":"colorRendering",contentScriptType:1,contentStyleType:1,cursor:0,cx:0,cy:0,d:0,datatype:0,decelerate:0,descent:0,diffuseConstant:1,direction:0,display:0,divisor:0,dominantBaseline:1,"dominant-baseline":"dominantBaseline",dur:0,dx:0,dy:0,edgeMode:1,elevation:0,enableBackground:1,"enable-background":"enableBackground",end:0,exponent:0,externalResourcesRequired:1,fill:0,fillOpacity:1,"fill-opacity":"fillOpacity",fillRule:1,"fill-rule":"fillRule",filter:0,filterRes:1,filterUnits:1,floodOpacity:1,"flood-opacity":"floodOpacity",floodColor:1,"flood-color":"floodColor",focusable:0,fontFamily:1,"font-family":"fontFamily",fontSize:1,"font-size":"fontSize",fontSizeAdjust:1,"font-size-adjust":"fontSizeAdjust",fontStretch:1,"font-stretch":"fontStretch",fontStyle:1,"font-style":"fontStyle",fontVariant:1,"font-variant":"fontVariant",fontWeight:1,"font-weight":"fontWeight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:1,"glyph-name":"glyphName",glyphOrientationHorizontal:1,"glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphOrientationVertical:1,"glyph-orientation-vertical":"glyphOrientationVertical",glyphRef:1,gradientTransform:1,gradientUnits:1,hanging:0,horizAdvX:1,"horiz-adv-x":"horizAdvX",horizOriginX:1,"horiz-origin-x":"horizOriginX",ideographic:0,imageRendering:1,"image-rendering":"imageRendering",in2:0,in:0,inlist:0,intercept:0,k1:0,k2:0,k3:0,k4:0,k:0,kernelMatrix:1,kernelUnitLength:1,kerning:0,keyPoints:1,keySplines:1,keyTimes:1,lengthAdjust:1,letterSpacing:1,"letter-spacing":"letterSpacing",lightingColor:1,"lighting-color":"lightingColor",limitingConeAngle:1,local:0,markerEnd:1,"marker-end":"markerEnd",markerHeight:1,markerMid:1,"marker-mid":"markerMid",markerStart:1,"marker-start":"markerStart",markerUnits:1,markerWidth:1,mask:0,maskContentUnits:1,maskUnits:1,mathematical:0,mode:0,numOctaves:1,offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:1,"overline-position":"overlinePosition",overlineThickness:1,"overline-thickness":"overlineThickness",paintOrder:1,"paint-order":"paintOrder",panose1:0,"panose-1":"panose1",pathLength:1,patternContentUnits:1,patternTransform:1,patternUnits:1,pointerEvents:1,"pointer-events":"pointerEvents",points:0,pointsAtX:1,pointsAtY:1,pointsAtZ:1,prefix:0,preserveAlpha:1,preserveAspectRatio:1,primitiveUnits:1,property:0,r:0,radius:0,refX:1,refY:1,renderingIntent:1,"rendering-intent":"renderingIntent",repeatCount:1,repeatDur:1,requiredExtensions:1,requiredFeatures:1,resource:0,restart:0,result:0,results:0,rotate:0,rx:0,ry:0,scale:0,security:0,seed:0,shapeRendering:1,"shape-rendering":"shapeRendering",slope:0,spacing:0,specularConstant:1,specularExponent:1,speed:0,spreadMethod:1,startOffset:1,stdDeviation:1,stemh:0,stemv:0,stitchTiles:1,stopColor:1,"stop-color":"stopColor",stopOpacity:1,"stop-opacity":"stopOpacity",strikethroughPosition:1,"strikethrough-position":"strikethroughPosition",strikethroughThickness:1,"strikethrough-thickness":"strikethroughThickness",string:0,stroke:0,strokeDasharray:1,"stroke-dasharray":"strokeDasharray",strokeDashoffset:1,"stroke-dashoffset":"strokeDashoffset",strokeLinecap:1,"stroke-linecap":"strokeLinecap",strokeLinejoin:1,"stroke-linejoin":"strokeLinejoin",strokeMiterlimit:1,"stroke-miterlimit":"strokeMiterlimit",strokeWidth:1,"stroke-width":"strokeWidth",strokeOpacity:1,"stroke-opacity":"strokeOpacity",suppressContentEditableWarning:1,suppressHydrationWarning:1,surfaceScale:1,systemLanguage:1,tableValues:1,targetX:1,targetY:1,textAnchor:1,"text-anchor":"textAnchor",textDecoration:1,"text-decoration":"textDecoration",textLength:1,textRendering:1,"text-rendering":"textRendering",to:0,transform:0,typeof:0,u1:0,u2:0,underlinePosition:1,"underline-position":"underlinePosition",underlineThickness:1,"underline-thickness":"underlineThickness",unicode:0,unicodeBidi:1,"unicode-bidi":"unicodeBidi",unicodeRange:1,"unicode-range":"unicodeRange",unitsPerEm:1,"units-per-em":"unitsPerEm",unselectable:0,vAlphabetic:1,"v-alphabetic":"vAlphabetic",values:0,vectorEffect:1,"vector-effect":"vectorEffect",version:0,vertAdvY:1,"vert-adv-y":"vertAdvY",vertOriginX:1,"vert-origin-x":"vertOriginX",vertOriginY:1,"vert-origin-y":"vertOriginY",vHanging:1,"v-hanging":"vHanging",vIdeographic:1,"v-ideographic":"vIdeographic",viewBox:1,viewTarget:1,visibility:0,vMathematical:1,"v-mathematical":"vMathematical",vocab:0,widths:0,wordSpacing:1,"word-spacing":"wordSpacing",writingMode:1,"writing-mode":"writingMode",x1:0,x2:0,x:0,xChannelSelector:1,xHeight:1,"x-height":"xHeight",xlinkActuate:1,"xlink:actuate":"xlinkActuate",xlinkArcrole:1,"xlink:arcrole":"xlinkArcrole",xlinkHref:1,"xlink:href":"xlinkHref",xlinkRole:1,"xlink:role":"xlinkRole",xlinkShow:1,"xlink:show":"xlinkShow",xlinkTitle:1,"xlink:title":"xlinkTitle",xlinkType:1,"xlink:type":"xlinkType",xmlBase:1,"xml:base":"xmlBase",xmlLang:1,"xml:lang":"xmlLang",xmlns:0,"xml:space":"xmlSpace",xmlnsXlink:1,"xmlns:xlink":"xmlnsXlink",xmlSpace:1,y1:0,y2:0,y:0,yChannelSelector:1,z:0,zoomAndPan:1};const ti=0,wt=1,zn=2,Bn=3,vr=4,ni=5,ri=6;function Qs(e){return Ce.hasOwnProperty(e)?Ce[e]:null}function _e(e,t,n,a,i,o,l){this.acceptsBooleans=t===zn||t===Bn||t===vr,this.attributeName=a,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=l}const Ce={},el=["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"];el.forEach(e=>{Ce[e]=new _e(e,ti,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(([e,t])=>{Ce[e]=new _e(e,wt,!1,t,null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(e=>{Ce[e]=new _e(e,zn,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(e=>{Ce[e]=new _e(e,zn,!1,e,null,!1,!1)});["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(e=>{Ce[e]=new _e(e,Bn,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(e=>{Ce[e]=new _e(e,Bn,!0,e,null,!1,!1)});["capture","download"].forEach(e=>{Ce[e]=new _e(e,vr,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(e=>{Ce[e]=new _e(e,ri,!1,e,null,!1,!1)});["rowSpan","start"].forEach(e=>{Ce[e]=new _e(e,ni,!1,e.toLowerCase(),null,!1,!1)});const yr=/[\-\:]([a-z])/g,xr=e=>e[1].toUpperCase();["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(e=>{const t=e.replace(yr,xr);Ce[t]=new _e(t,wt,!1,e,null,!1,!1)});["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(e=>{const t=e.replace(yr,xr);Ce[t]=new _e(t,wt,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(e=>{const t=e.replace(yr,xr);Ce[t]=new _e(t,wt,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(e=>{Ce[e]=new _e(e,wt,!1,e.toLowerCase(),null,!1,!1)});const tl="xlinkHref";Ce[tl]=new _e("xlinkHref",wt,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(e=>{Ce[e]=new _e(e,wt,!1,e.toLowerCase(),null,!0,!0)});const{CAMELCASE:nl,SAME:rl,possibleStandardNames:Wr}=Vn,al=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",il=al+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",ol=RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+il+"]*$")),sl=Object.keys(Wr).reduce((e,t)=>{const n=Wr[t];return n===rl?e[t]=t:n===nl?e[t.toLowerCase()]=t:e[t]=n,e},{});$e.BOOLEAN=Bn;$e.BOOLEANISH_STRING=zn;$e.NUMERIC=ni;$e.OVERLOADED_BOOLEAN=vr;$e.POSITIVE_NUMERIC=ri;$e.RESERVED=ti;$e.STRING=wt;$e.getPropertyInfo=Qs;$e.isCustomAttribute=ol;$e.possibleStandardNames=sl;var br={},wr={},Gr=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,ll=/\n/g,cl=/^\s*/,ul=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,dl=/^:\s*/,fl=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,hl=/^[;\s]*/,pl=/^\s+|\s+$/g,ml=`
`,Xr="/",qr="*",Ft="",gl="comment",vl="declaration",yl=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,a=1;function i(m){var v=m.match(ll);v&&(n+=v.length);var b=m.lastIndexOf(ml);a=~b?m.length-b:a+m.length}function o(){var m={line:n,column:a};return function(v){return v.position=new l(m),d(),v}}function l(m){this.start=m,this.end={line:n,column:a},this.source=t.source}l.prototype.content=e;function c(m){var v=new Error(t.source+":"+n+":"+a+": "+m);if(v.reason=m,v.filename=t.source,v.line=n,v.column=a,v.source=e,!t.silent)throw v}function s(m){var v=m.exec(e);if(v){var b=v[0];return i(b),e=e.slice(b.length),v}}function d(){s(cl)}function u(m){var v;for(m=m||[];v=h();)v!==!1&&m.push(v);return m}function h(){var m=o();if(!(Xr!=e.charAt(0)||qr!=e.charAt(1))){for(var v=2;Ft!=e.charAt(v)&&(qr!=e.charAt(v)||Xr!=e.charAt(v+1));)++v;if(v+=2,Ft===e.charAt(v-1))return c("End of comment missing");var b=e.slice(2,v-2);return a+=2,i(b),e=e.slice(v),a+=2,m({type:gl,comment:b})}}function E(){var m=o(),v=s(ul);if(v){if(h(),!s(dl))return c("property missing ':'");var b=s(fl),F=m({type:vl,property:Yr(v[0].replace(Gr,Ft)),value:b?Yr(b[0].replace(Gr,Ft)):Ft});return s(hl),F}}function S(){var m=[];u(m);for(var v;v=E();)v!==!1&&(m.push(v),u(m));return m}return d(),S()};function Yr(e){return e?e.replace(pl,Ft):Ft}var xl=ne&&ne.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wr,"__esModule",{value:!0});var bl=xl(yl);function wl(e,t){var n=null;if(!e||typeof e!="string")return n;var a=(0,bl.default)(e),i=typeof t=="function";return a.forEach(function(o){if(o.type==="declaration"){var l=o.property,c=o.value;i?t(l,c,o):c&&(n=n||{},n[l]=c)}}),n}wr.default=wl;var $n={};Object.defineProperty($n,"__esModule",{value:!0});$n.camelCase=void 0;var Cl=/^--[a-zA-Z0-9-]+$/,El=/-([a-z])/g,jl=/^[^-]+$/,Sl=/^-(webkit|moz|ms|o|khtml)-/,Tl=/^-(ms)-/,_l=function(e){return!e||jl.test(e)||Cl.test(e)},kl=function(e,t){return t.toUpperCase()},Kr=function(e,t){return"".concat(t,"-")},Il=function(e,t){return t===void 0&&(t={}),_l(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(Tl,Kr):e=e.replace(Sl,Kr),e.replace(El,kl))};$n.camelCase=Il;var Pl=ne&&ne.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Ml=Pl(wr),Al=$n;function nr(e,t){var n={};return!e||typeof e!="string"||(0,Ml.default)(e,function(a,i){a&&i&&(n[(0,Al.camelCase)(a,t)]=i)}),n}nr.default=nr;var Fl=nr;(function(e){var t=ne&&ne.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.returnFirstArg=e.canTextBeChildOfNode=e.ELEMENTS_WITH_NO_TEXT_CHILDREN=e.PRESERVE_CUSTOM_ATTRIBUTES=e.setStyleProp=e.isCustomComponent=void 0;var n=g,a=t(Fl),i=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);function o(u,h){return u.includes("-")?!i.has(u):!!(h&&typeof h.is=="string")}e.isCustomComponent=o;var l={reactCompat:!0};function c(u,h){if(typeof u=="string"){if(!u.trim()){h.style={};return}try{h.style=(0,a.default)(u,l)}catch{h.style={}}}}e.setStyleProp=c,e.PRESERVE_CUSTOM_ATTRIBUTES=Number(n.version.split(".")[0])>=16,e.ELEMENTS_WITH_NO_TEXT_CHILDREN=new Set(["tr","tbody","thead","tfoot","colgroup","table","head","html","frameset"]);var s=function(u){return!e.ELEMENTS_WITH_NO_TEXT_CHILDREN.has(u.name)};e.canTextBeChildOfNode=s;var d=function(u){return u};e.returnFirstArg=d})(br);Object.defineProperty(Un,"__esModule",{value:!0});var on=$e,Zr=br,Nl=["checked","value"],Ol=["input","select","textarea"],Rl={reset:!0,submit:!0};function Dl(e,t){e===void 0&&(e={});var n={},a=!!(e.type&&Rl[e.type]);for(var i in e){var o=e[i];if((0,on.isCustomAttribute)(i)){n[i]=o;continue}var l=i.toLowerCase(),c=Jr(l);if(c){var s=(0,on.getPropertyInfo)(c);switch(Nl.includes(c)&&Ol.includes(t)&&!a&&(c=Jr("default"+l)),n[c]=o,s&&s.type){case on.BOOLEAN:n[c]=!0;break;case on.OVERLOADED_BOOLEAN:o===""&&(n[c]=!0);break}continue}Zr.PRESERVE_CUSTOM_ATTRIBUTES&&(n[i]=o)}return(0,Zr.setStyleProp)(e.style,n),n}Un.default=Dl;function Jr(e){return on.possibleStandardNames[e]}var Cr={},Ll=ne&&ne.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Cr,"__esModule",{value:!0});var Yn=g,Ul=Ll(Un),cn=br,Vl={cloneElement:Yn.cloneElement,createElement:Yn.createElement,isValidElement:Yn.isValidElement};function ai(e,t){t===void 0&&(t={});for(var n=[],a=typeof t.replace=="function",i=t.transform||cn.returnFirstArg,o=t.library||Vl,l=o.cloneElement,c=o.createElement,s=o.isValidElement,d=e.length,u=0;u<d;u++){var h=e[u];if(a){var E=t.replace(h,u);if(s(E)){d>1&&(E=l(E,{key:E.key||u})),n.push(i(E,h,u));continue}}if(h.type==="text"){var S=!h.data.trim().length;if(S&&h.parent&&!(0,cn.canTextBeChildOfNode)(h.parent)||t.trim&&S)continue;n.push(i(h.data,h,u));continue}var m=h,v={};zl(m)?((0,cn.setStyleProp)(m.attribs.style,m.attribs),v=m.attribs):m.attribs&&(v=(0,Ul.default)(m.attribs,m.name));var b=void 0;switch(h.type){case"script":case"style":h.children[0]&&(v.dangerouslySetInnerHTML={__html:h.children[0].data});break;case"tag":h.name==="textarea"&&h.children[0]?v.defaultValue=h.children[0].data:h.children&&h.children.length&&(b=ai(h.children,t));break;default:continue}d>1&&(v.key=u),n.push(i(c(h.name,v,b),h,u))}return n.length===1?n[0]:n}Cr.default=ai;function zl(e){return cn.PRESERVE_CUSTOM_ATTRIBUTES&&e.type==="tag"&&(0,cn.isCustomComponent)(e.name,e.attribs)}var ii={},q={},Ct=ne&&ne.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(a[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),un=ne&&ne.__assign||function(){return un=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},un.apply(this,arguments)};Object.defineProperty(q,"__esModule",{value:!0});q.cloneNode=q.hasChildren=q.isDocument=q.isDirective=q.isComment=q.isText=q.isCDATA=q.isTag=q.Element=q.Document=q.CDATA=q.NodeWithChildren=q.ProcessingInstruction=q.Comment=q.Text=q.DataNode=q.Node=void 0;var Ie=mn,Er=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(t){this.prev=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(t){this.next=t},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(t){return t===void 0&&(t=!1),jr(this,t)},e}();q.Node=Er;var Hn=function(e){Ct(t,e);function t(n){var a=e.call(this)||this;return a.data=n,a}return Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(n){this.data=n},enumerable:!1,configurable:!0}),t}(Er);q.DataNode=Hn;var oi=function(e){Ct(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Ie.ElementType.Text,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(Hn);q.Text=oi;var si=function(e){Ct(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Ie.ElementType.Comment,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(Hn);q.Comment=si;var li=function(e){Ct(t,e);function t(n,a){var i=e.call(this,a)||this;return i.name=n,i.type=Ie.ElementType.Directive,i}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(Hn);q.ProcessingInstruction=li;var Wn=function(e){Ct(t,e);function t(n){var a=e.call(this)||this;return a.children=n,a}return Object.defineProperty(t.prototype,"firstChild",{get:function(){var n;return(n=this.children[0])!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(n){this.children=n},enumerable:!1,configurable:!0}),t}(Er);q.NodeWithChildren=Wn;var ci=function(e){Ct(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Ie.ElementType.CDATA,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(Wn);q.CDATA=ci;var ui=function(e){Ct(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Ie.ElementType.Root,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(Wn);q.Document=ui;var di=function(e){Ct(t,e);function t(n,a,i,o){i===void 0&&(i=[]),o===void 0&&(o=n==="script"?Ie.ElementType.Script:n==="style"?Ie.ElementType.Style:Ie.ElementType.Tag);var l=e.call(this,i)||this;return l.name=n,l.attribs=a,l.type=o,l}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(n){this.name=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var n=this;return Object.keys(this.attribs).map(function(a){var i,o;return{name:a,value:n.attribs[a],namespace:(i=n["x-attribsNamespace"])===null||i===void 0?void 0:i[a],prefix:(o=n["x-attribsPrefix"])===null||o===void 0?void 0:o[a]}})},enumerable:!1,configurable:!0}),t}(Wn);q.Element=di;function fi(e){return(0,Ie.isTag)(e)}q.isTag=fi;function hi(e){return e.type===Ie.ElementType.CDATA}q.isCDATA=hi;function pi(e){return e.type===Ie.ElementType.Text}q.isText=pi;function mi(e){return e.type===Ie.ElementType.Comment}q.isComment=mi;function gi(e){return e.type===Ie.ElementType.Directive}q.isDirective=gi;function vi(e){return e.type===Ie.ElementType.Root}q.isDocument=vi;function Bl(e){return Object.prototype.hasOwnProperty.call(e,"children")}q.hasChildren=Bl;function jr(e,t){t===void 0&&(t=!1);var n;if(pi(e))n=new oi(e.data);else if(mi(e))n=new si(e.data);else if(fi(e)){var a=t?Kn(e.children):[],i=new di(e.name,un({},e.attribs),a);a.forEach(function(s){return s.parent=i}),e.namespace!=null&&(i.namespace=e.namespace),e["x-attribsNamespace"]&&(i["x-attribsNamespace"]=un({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(i["x-attribsPrefix"]=un({},e["x-attribsPrefix"])),n=i}else if(hi(e)){var a=t?Kn(e.children):[],o=new ci(a);a.forEach(function(d){return d.parent=o}),n=o}else if(vi(e)){var a=t?Kn(e.children):[],l=new ui(a);a.forEach(function(d){return d.parent=l}),e["x-mode"]&&(l["x-mode"]=e["x-mode"]),n=l}else if(gi(e)){var c=new li(e.name,e.data);e["x-name"]!=null&&(c["x-name"]=e["x-name"],c["x-publicId"]=e["x-publicId"],c["x-systemId"]=e["x-systemId"]),n=c}else throw new Error("Not implemented yet: ".concat(e.type));return n.startIndex=e.startIndex,n.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(n.sourceCodeLocation=e.sourceCodeLocation),n}q.cloneNode=jr;function Kn(e){for(var t=e.map(function(a){return jr(a,!0)}),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}(function(e){var t=ne&&ne.__createBinding||(Object.create?function(c,s,d,u){u===void 0&&(u=d);var h=Object.getOwnPropertyDescriptor(s,d);(!h||("get"in h?!s.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return s[d]}}),Object.defineProperty(c,u,h)}:function(c,s,d,u){u===void 0&&(u=d),c[u]=s[d]}),n=ne&&ne.__exportStar||function(c,s){for(var d in c)d!=="default"&&!Object.prototype.hasOwnProperty.call(s,d)&&t(s,c,d)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var a=mn,i=q;n(q,e);var o={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},l=function(){function c(s,d,u){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof d=="function"&&(u=d,d=o),typeof s=="object"&&(d=s,s=void 0),this.callback=s??null,this.options=d??o,this.elementCB=u??null}return c.prototype.onparserinit=function(s){this.parser=s},c.prototype.onreset=function(){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},c.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},c.prototype.onerror=function(s){this.handleCallback(s)},c.prototype.onclosetag=function(){this.lastNode=null;var s=this.tagStack.pop();this.options.withEndIndices&&(s.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(s)},c.prototype.onopentag=function(s,d){var u=this.options.xmlMode?a.ElementType.Tag:void 0,h=new i.Element(s,d,void 0,u);this.addNode(h),this.tagStack.push(h)},c.prototype.ontext=function(s){var d=this.lastNode;if(d&&d.type===a.ElementType.Text)d.data+=s,this.options.withEndIndices&&(d.endIndex=this.parser.endIndex);else{var u=new i.Text(s);this.addNode(u),this.lastNode=u}},c.prototype.oncomment=function(s){if(this.lastNode&&this.lastNode.type===a.ElementType.Comment){this.lastNode.data+=s;return}var d=new i.Comment(s);this.addNode(d),this.lastNode=d},c.prototype.oncommentend=function(){this.lastNode=null},c.prototype.oncdatastart=function(){var s=new i.Text(""),d=new i.CDATA([s]);this.addNode(d),s.parent=d,this.lastNode=s},c.prototype.oncdataend=function(){this.lastNode=null},c.prototype.onprocessinginstruction=function(s,d){var u=new i.ProcessingInstruction(s,d);this.addNode(u)},c.prototype.handleCallback=function(s){if(typeof this.callback=="function")this.callback(s,this.dom);else if(s)throw s},c.prototype.addNode=function(s){var d=this.tagStack[this.tagStack.length-1],u=d.children[d.children.length-1];this.options.withStartIndices&&(s.startIndex=this.parser.startIndex),this.options.withEndIndices&&(s.endIndex=this.parser.endIndex),d.children.push(s),u&&(s.prev=u,u.next=s),s.parent=d,this.lastNode=null},c}();e.DomHandler=l,e.default=l})(ii);(function(e){var t=ne&&ne.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.htmlToDOM=e.domToReact=e.attributesToProps=e.Text=e.ProcessingInstruction=e.Element=e.Comment=void 0;var n=t(hr);e.htmlToDOM=n.default;var a=t(Un);e.attributesToProps=a.default;var i=t(Cr);e.domToReact=i.default;var o=ii;Object.defineProperty(e,"Comment",{enumerable:!0,get:function(){return o.Comment}}),Object.defineProperty(e,"Element",{enumerable:!0,get:function(){return o.Element}}),Object.defineProperty(e,"ProcessingInstruction",{enumerable:!0,get:function(){return o.ProcessingInstruction}}),Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return o.Text}});var l={lowerCaseAttributeNames:!1};function c(s,d){if(typeof s!="string")throw new TypeError("First argument must be a string");return s?(0,i.default)((0,n.default)(s,(d==null?void 0:d.htmlparser2)||l),d):[]}e.default=c})(La);const Qr=An(La),$l=Qr.default||Qr;function ve(){return ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ve.apply(this,arguments)}function Gn(e,t){if(e==null)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)t.indexOf(n=o[a])>=0||(i[n]=e[n]);return i}function Ot(e){var t=g.useRef({fn:e,curr:void 0}).current;if(t.fn=e,!t.curr){var n=Object.create(null);Object.keys(e).forEach(function(a){n[a]=function(){var i;return(i=t.fn[a]).call.apply(i,[t.fn].concat([].slice.call(arguments)))}}),t.curr=n}return t.curr}function Mn(e){return g.useReducer(function(t,n){return ve({},t,typeof n=="function"?n(t):n)},e)}var yi=g.createContext(void 0),ot=typeof window<"u"&&"ontouchstart"in window,rr=function(e,t,n){return Math.max(Math.min(e,n),t)},En=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=0),rr(e,1*(1-n),Math.max(6,t)*(1+n))},ar=typeof window>"u"||/ServerSideRendering/.test(navigator&&navigator.userAgent)?g.useEffect:g.useLayoutEffect;function Gt(e,t,n){var a=g.useRef(t);a.current=t,g.useEffect(function(){function i(o){a.current(o)}return e&&window.addEventListener(e,i,n),function(){e&&window.removeEventListener(e,i)}},[e])}var Hl=["container"];function Wl(e){var t=e.container,n=t===void 0?document.body:t,a=Gn(e,Hl);return eo.createPortal(W.createElement("div",ve({},a)),n)}function Gl(e){return W.createElement("svg",ve({width:"44",height:"44",viewBox:"0 0 768 768"},e),W.createElement("path",{d:"M607.5 205.5l-178.5 178.5 178.5 178.5-45 45-178.5-178.5-178.5 178.5-45-45 178.5-178.5-178.5-178.5 45-45 178.5 178.5 178.5-178.5z"}))}function Xl(e){return W.createElement("svg",ve({width:"44",height:"44",viewBox:"0 0 768 768"},e),W.createElement("path",{d:"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z"}))}function ql(e){return W.createElement("svg",ve({width:"44",height:"44",viewBox:"0 0 768 768"},e),W.createElement("path",{d:"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z"}))}function Yl(){return g.useEffect(function(){var e=document.body.style,t=e.overflow;return e.overflow="hidden",function(){e.overflow=t}},[]),null}function ea(e){var t=e.touches[0],n=t.clientX,a=t.clientY;if(e.touches.length>=2){var i=e.touches[1],o=i.clientX,l=i.clientY;return[(n+o)/2,(a+l)/2,Math.sqrt(Math.pow(o-n,2)+Math.pow(l-a,2))]}return[n,a,0]}var yt=function(e,t,n,a){var i=n*t,o=(i-a)/2,l=void 0,c=e;return i<=a?(l=1,c=0):e>0&&o-e<=0?(l=2,c=o):e<0&&o+e<=0&&(l=3,c=-o),[l,c]};function Zn(e,t,n,a,i,o,l,c,s,d){l===void 0&&(l=innerWidth/2),c===void 0&&(c=innerHeight/2),s===void 0&&(s=0),d===void 0&&(d=0);var u=yt(e,o,n,innerWidth)[0],h=yt(t,o,a,innerHeight),E=innerWidth/2,S=innerHeight/2;return{x:l-o/i*(l-(E+e))-E+(a/n>=3&&n*o===innerWidth?0:u?s/2:s),y:c-o/i*(c-(S+t))-S+(h[0]?d/2:d),lastCX:l,lastCY:c}}function ir(e,t,n){var a=e%180!=0;return a?[n,t,a]:[t,n,a]}function Jn(e,t,n){var a=ir(n,innerWidth,innerHeight),i=a[0],o=a[1],l=0,c=i,s=o,d=e/t*o,u=t/e*i;return e<i&&t<o?(c=e,s=t):e<i&&t>=o?c=d:e>=i&&t<o||e/t>i/o?s=u:t/e>=3&&!a[2]?l=((s=u)-o)/2:c=d,{width:c,height:s,x:0,y:l,pause:!0}}function jn(e,t){var n=t.leading,a=n!==void 0&&n,i=t.maxWait,o=t.wait,l=o===void 0?i||0:o,c=g.useRef(e);c.current=e;var s=g.useRef(0),d=g.useRef(),u=function(){return d.current&&clearTimeout(d.current)},h=g.useCallback(function(){var E=[].slice.call(arguments),S=Date.now();function m(){s.current=S,u(),c.current.apply(null,E)}var v=s.current,b=S-v;if(v===0&&(a&&m(),s.current=S),i!==void 0){if(b>i)return void m()}else b<l&&(s.current=S);u(),d.current=setTimeout(function(){m(),s.current=0},l)},[l,i,a]);return h.cancel=u,h}var ta=function(e,t,n){return Nt(e,t,n,100,function(a){return a},function(){return Nt(t,e,n)})},Kl=function(e){return 1-Math.pow(1-e,4)};function Nt(e,t,n,a,i,o){a===void 0&&(a=400),i===void 0&&(i=Kl);var l=t-e;if(l!==0){var c=Date.now(),s=0,d=function(){var h=Math.min(1,(Date.now()-c)/a);n(e+i(h)*l)&&h<1?u():(cancelAnimationFrame(s),h>=1&&o&&o())};u()}function u(){s=requestAnimationFrame(d)}}var Zl={T:0,L:0,W:0,H:0,FIT:void 0},xi=function(){var e=g.useRef(!1);return g.useEffect(function(){return e.current=!0,function(){e.current=!1}},[]),e},Jl=["className"];function Ql(e){var t=e.className,n=Gn(e,Jl);return W.createElement("div",ve({className:"PhotoView__Spinner "+t},n),W.createElement("svg",{viewBox:"0 0 32 32",width:"36",height:"36",fill:"white"},W.createElement("path",{opacity:".25",d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"}),W.createElement("path",{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z"})))}var ec=["src","loaded","broken","className","onPhotoLoad","loadingElement","brokenElement"];function tc(e){var t=e.src,n=e.loaded,a=e.broken,i=e.className,o=e.onPhotoLoad,l=e.loadingElement,c=e.brokenElement,s=Gn(e,ec),d=xi();return t&&!a?W.createElement(W.Fragment,null,W.createElement("img",ve({className:"PhotoView__Photo"+(i?" "+i:""),src:t,onLoad:function(u){var h=u.target;d.current&&o({loaded:!0,naturalWidth:h.naturalWidth,naturalHeight:h.naturalHeight})},onError:function(){d.current&&o({broken:!0})},alt:""},s)),!n&&(W.createElement("span",{className:"PhotoView__icon"},l)||W.createElement(Ql,{className:"PhotoView__icon"}))):c?W.createElement("span",{className:"PhotoView__icon"},typeof c=="function"?c({src:t}):c):null}var nc={naturalWidth:void 0,naturalHeight:void 0,width:void 0,height:void 0,loaded:void 0,broken:!1,x:0,y:0,touched:!1,maskTouched:!1,rotate:0,scale:1,CX:0,CY:0,lastX:0,lastY:0,lastCX:0,lastCY:0,lastScale:1,touchTime:0,touchLength:0,pause:!0,stopRaf:!0,reach:void 0};function rc(e){var t=e.item,n=t.src,a=t.render,i=t.width,o=i===void 0?0:i,l=t.height,c=l===void 0?0:l,s=t.originRef,d=e.visible,u=e.speed,h=e.easing,E=e.wrapClassName,S=e.className,m=e.style,v=e.loadingElement,b=e.brokenElement,F=e.onPhotoTap,G=e.onMaskTap,Y=e.onReachMove,R=e.onReachUp,I=e.onPhotoResize,y=e.isActive,T=e.expose,x=Mn(nc),_=x[0],B=x[1],xe=g.useRef(0),Z=xi(),Oe=_.naturalWidth,fe=Oe===void 0?o:Oe,ce=_.naturalHeight,ue=ce===void 0?c:ce,He=_.width,me=He===void 0?o:He,We=_.height,p=We===void 0?c:We,f=_.loaded,k=f===void 0?!n:f,P=_.broken,M=_.x,N=_.y,O=_.touched,A=_.stopRaf,L=_.maskTouched,$=_.rotate,V=_.scale,K=_.CX,Q=_.CY,re=_.lastX,z=_.lastY,C=_.lastCX,J=_.lastCY,ee=_.lastScale,ie=_.touchTime,Ee=_.touchLength,le=_.pause,Ze=_.reach,Et=Ot({onScale:function(w){return Re(En(w))},onRotate:function(w){$!==w&&(T({rotate:w}),B(ve({rotate:w},Jn(fe,ue,w))))}});function Re(w,D,te){V!==w&&(T({scale:w}),B(ve({scale:w},Zn(M,N,me,p,V,w,D,te),w<=1&&{x:0,y:0})))}var jt=jn(function(w,D,te){if(te===void 0&&(te=0),(O||L)&&y){var _t=ir($,me,p),Je=_t[0],Le=_t[1];if(te===0&&xe.current===0){var be=Math.abs(w-K)<=20,Pe=Math.abs(D-Q)<=20;if(be&&Pe)return void B({lastCX:w,lastCY:D});xe.current=be?D>Q?3:2:1}var kt=w-C,It=D-J,Ue=void 0;if(te===0){var Pt=yt(kt+re,V,Je,innerWidth)[0],Vt=yt(It+z,V,Le,innerHeight);Ue=function(ht,et,tt,qe){return et&&ht===1||qe==="x"?"x":tt&&ht>1||qe==="y"?"y":void 0}(xe.current,Pt,Vt[0],Ze),Ue!==void 0&&Y(Ue,w,D,V)}if(Ue==="x"||L)return void B({reach:"x"});var Qe=En(V+(te-Ee)/100/2*V,fe/me,.2);T({scale:Qe}),B(ve({touchLength:te,reach:Ue,scale:Qe},Zn(M,N,me,p,V,Qe,w,D,kt,It)))}},{maxWait:8});function St(w){return!A&&!O&&(Z.current&&B(ve({},w,{pause:d})),Z.current)}var De,Me,Ge,dt,Tt,ft,Dt,je,gn=(Tt=function(w){return St({x:w})},ft=function(w){return St({y:w})},Dt=function(w){return Z.current&&(T({scale:w}),B({scale:w})),!O&&Z.current},je=Ot({X:function(w){return Tt(w)},Y:function(w){return ft(w)},S:function(w){return Dt(w)}}),function(w,D,te,_t,Je,Le,be,Pe,kt,It,Ue){var Pt=ir(It,Je,Le),Vt=Pt[0],Qe=Pt[1],ht=yt(w,Pe,Vt,innerWidth),et=ht[0],tt=ht[1],qe=yt(D,Pe,Qe,innerHeight),zt=qe[0],yn=qe[1],Bt=Date.now()-Ue;if(Bt>=200||Pe!=be||Math.abs(kt-be)>1){var pt=Zn(w,D,Je,Le,be,Pe),nt=pt.x,Mt=pt.y,Ae=et?tt:nt!==w?nt:null,$t=zt?yn:Mt!==D?Mt:null;return Ae!==null&&Nt(w,Ae,je.X),$t!==null&&Nt(D,$t,je.Y),void(Pe!=be&&Nt(be,Pe,je.S))}var At=(w-te)/Bt,mt=(D-_t)/Bt,gt=Math.sqrt(Math.pow(At,2)+Math.pow(mt,2)),rt=!1,at=!1;(function(Ve,Se){var Te=Ve,it=0,ze=void 0,Fe=0,Ht=function(nn){ze||(ze=nn);var rn=nn-ze,Sr=Math.sign(Ve),Tr=-.001*Sr,_r=Math.sign(-Te)*Math.pow(Te,2)*2e-4,Si=Te*rn+(Tr+_r)*Math.pow(rn,2)/2;it+=Si,ze=nn,Sr*(Te+=(Tr+_r)*rn)<=0?Ne():Se(it)?Ye():Ne()};function Ye(){Fe=requestAnimationFrame(Ht)}function Ne(){cancelAnimationFrame(Fe)}Ye()})(gt,function(Ve){var Se=w+Ve*(At/gt),Te=D+Ve*(mt/gt),it=yt(Se,be,Vt,innerWidth),ze=it[0],Fe=it[1],Ht=yt(Te,be,Qe,innerHeight),Ye=Ht[0],Ne=Ht[1];if(ze&&!rt&&(rt=!0,et?Nt(Se,Fe,je.X):ta(Fe,Se+(Se-Fe),je.X)),Ye&&!at&&(at=!0,zt?Nt(Te,Ne,je.Y):ta(Ne,Te+(Te-Ne),je.Y)),rt&&at)return!1;var nn=rt||je.X(Fe),rn=at||je.Y(Ne);return nn&&rn})}),Lt=(De=F,Me=function(w,D){Ze||Re(V!==1?1:Math.max(2,fe/me),w,D)},Ge=g.useRef(0),dt=jn(function(){Ge.current=0,De.apply(void 0,[].slice.call(arguments))},{wait:300}),function(){var w=[].slice.call(arguments);Ge.current+=1,dt.apply(void 0,w),Ge.current>=2&&(dt.cancel(),Ge.current=0,Me.apply(void 0,w))});function Ut(w,D){if(xe.current=0,(O||L)&&y){B({touched:!1,maskTouched:!1,pause:!1,stopRaf:!1,reach:void 0});var te=En(V,fe/me);if(gn(M,N,re,z,me,p,V,te,ee,$,ie),R(w,D),K===w&&Q===D){if(O)return void Lt(w,D);L&&G(w,D)}}}function tn(w,D,te){te===void 0&&(te=0),B({touched:!0,CX:w,CY:D,lastCX:w,lastCY:D,lastX:M,lastY:N,lastScale:V,touchLength:te,touchTime:Date.now()})}function vn(w){B({maskTouched:!0,CX:w.clientX,CY:w.clientY,lastX:M,lastY:N})}Gt(ot?void 0:"mousemove",function(w){w.preventDefault(),jt(w.clientX,w.clientY)}),Gt(ot?void 0:"mouseup",function(w){Ut(w.clientX,w.clientY)}),Gt(ot?"touchmove":void 0,function(w){w.preventDefault();var D=ea(w);jt.apply(void 0,D)},{passive:!1}),Gt(ot?"touchend":void 0,function(w){var D=w.changedTouches[0];Ut(D.clientX,D.clientY)},{passive:!1}),Gt("resize",jn(function(){k&&!O&&(B(Jn(fe,ue,$)),I())},{maxWait:8})),ar(function(){y&&T(ve({scale:V,rotate:$},Et))},[y]);var Xe=function(w,D,te,_t,Je,Le,be,Pe,kt,It){var Ue=function(nt,Mt,Ae,$t,At){var mt=g.useRef(!1),gt=Mn({lead:!0,scale:Ae}),rt=gt[0],at=rt.lead,Ve=rt.scale,Se=gt[1],Te=jn(function(it){try{return At(!0),Se({lead:!1,scale:it}),Promise.resolve()}catch(ze){return Promise.reject(ze)}},{wait:$t});return ar(function(){mt.current?(At(!1),Se({lead:!0}),Te(Ae)):mt.current=!0},[Ae]),at?[nt*Ve,Mt*Ve,Ae/Ve]:[nt*Ae,Mt*Ae,1]}(Le,be,Pe,kt,It),Pt=Ue[0],Vt=Ue[1],Qe=Ue[2],ht=function(nt,Mt,Ae,$t,At){var mt=g.useState(Zl),gt=mt[0],rt=mt[1],at=g.useState(0),Ve=at[0],Se=at[1],Te=g.useRef(),it=Ot({OK:function(){return nt&&Se(4)}});function ze(Fe){At(!1),Se(Fe)}return g.useEffect(function(){if(Te.current||(Te.current=Date.now()),Ae){if(function(Fe,Ht){var Ye=Fe&&Fe.current;if(Ye&&Ye.nodeType===1){var Ne=Ye.getBoundingClientRect();Ht({T:Ne.top,L:Ne.left,W:Ne.width,H:Ne.height,FIT:Ye.tagName==="IMG"?getComputedStyle(Ye).objectFit:void 0})}}(Mt,rt),nt)return Date.now()-Te.current<250?(Se(1),requestAnimationFrame(function(){Se(2),requestAnimationFrame(function(){return ze(3)})}),void setTimeout(it.OK,$t)):void Se(4);ze(5)}},[nt,Ae]),[Ve,gt]}(w,D,te,kt,It),et=ht[0],tt=ht[1],qe=tt.W,zt=tt.FIT,yn=innerWidth/2,Bt=innerHeight/2,pt=et<3||et>4;return[pt?qe?tt.L:yn:_t+(yn-Le*Pe/2),pt?qe?tt.T:Bt:Je+(Bt-be*Pe/2),Pt,pt&&zt?Pt*(tt.H/qe):Vt,et===0?Qe:pt?qe/(Le*Pe)||.01:Qe,pt?zt?1:0:1,et,zt]}(d,s,k,M,N,me,p,V,u,function(w){return B({pause:w})}),H=Xe[4],oe=Xe[6],ge="transform "+u+"ms "+h,he={className:S,onMouseDown:ot?void 0:function(w){w.stopPropagation(),w.button===0&&tn(w.clientX,w.clientY,0)},onTouchStart:ot?function(w){w.stopPropagation(),tn.apply(void 0,ea(w))}:void 0,onWheel:function(w){if(!Ze){var D=En(V-w.deltaY/100/2,fe/me);B({stopRaf:!0}),Re(D,w.clientX,w.clientY)}},style:{width:Xe[2],height:Xe[3],opacity:Xe[5],objectFit:oe===4?void 0:Xe[7],transform:$?"rotate("+$+"deg)":void 0,transition:oe>2?ge+", opacity "+u+"ms ease, height "+(oe<4?u/2:oe>4?u:0)+"ms "+h:void 0}};return W.createElement("div",{className:"PhotoView__PhotoWrap"+(E?" "+E:""),style:m,onMouseDown:!ot&&y?vn:void 0,onTouchStart:ot&&y?function(w){return vn(w.touches[0])}:void 0},W.createElement("div",{className:"PhotoView__PhotoBox",style:{transform:"matrix("+H+", 0, 0, "+H+", "+Xe[0]+", "+Xe[1]+")",transition:O||le?void 0:ge,willChange:y?"transform":void 0}},n?W.createElement(tc,ve({src:n,loaded:k,broken:P},he,{onPhotoLoad:function(w){B(ve({},w,w.loaded&&Jn(w.naturalWidth||0,w.naturalHeight||0,$)))},loadingElement:v,brokenElement:b})):a&&a({attrs:he,scale:H,rotate:$})))}var na={x:0,touched:!1,pause:!1,lastCX:void 0,lastCY:void 0,bg:void 0,lastBg:void 0,overlay:!0,minimal:!0,scale:1,rotate:0};function ac(e){var t=e.loop,n=t===void 0?3:t,a=e.speed,i=e.easing,o=e.photoClosable,l=e.maskClosable,c=l===void 0||l,s=e.maskOpacity,d=s===void 0?1:s,u=e.pullClosable,h=u===void 0||u,E=e.bannerVisible,S=E===void 0||E,m=e.overlayRender,v=e.toolbarRender,b=e.className,F=e.maskClassName,G=e.photoClassName,Y=e.photoWrapClassName,R=e.loadingElement,I=e.brokenElement,y=e.images,T=e.index,x=T===void 0?0:T,_=e.onIndexChange,B=e.visible,xe=e.onClose,Z=e.afterClose,Oe=e.portalContainer,fe=Mn(na),ce=fe[0],ue=fe[1],He=g.useState(0),me=He[0],We=He[1],p=ce.x,f=ce.touched,k=ce.pause,P=ce.lastCX,M=ce.lastCY,N=ce.bg,O=N===void 0?d:N,A=ce.lastBg,L=ce.overlay,$=ce.minimal,V=ce.scale,K=ce.rotate,Q=ce.onScale,re=ce.onRotate,z=e.hasOwnProperty("index"),C=z?x:me,J=z?_:We,ee=g.useRef(C),ie=y.length,Ee=y[C],le=typeof n=="boolean"?n:ie>n,Ze=function(H,oe){var ge=g.useReducer(function(te){return!te},!1)[1],he=g.useRef(0),w=function(te,_t){var Je=g.useRef(te);function Le(be){Je.current=be}return g.useMemo(function(){(function(be){H?(be(H),he.current=1):he.current=2})(Le)},[te]),[Je.current,Le]}(H),D=w[1];return[w[0],he.current,function(){ge(),he.current===2&&(D(!1),oe&&oe()),he.current=0}]}(B,Z),Et=Ze[0],Re=Ze[1],jt=Ze[2];ar(function(){if(Et)return ue({pause:!0,x:C*-(innerWidth+20)}),void(ee.current=C);ue(na)},[Et]);var St=Ot({close:function(H){re&&re(0),ue({overlay:!0,lastBg:O}),xe(H)},changeIndex:function(H,oe){oe===void 0&&(oe=!1);var ge=le?ee.current+(H-C):H,he=ie-1,w=rr(ge,0,he),D=le?ge:w,te=innerWidth+20;ue({touched:!1,lastCX:void 0,lastCY:void 0,x:-te*D,pause:oe}),ee.current=D,J&&J(le?H<0?he:H>he?0:H:w)}}),De=St.close,Me=St.changeIndex;function Ge(H){return H?De():ue({overlay:!L})}function dt(){ue({x:-(innerWidth+20)*C,lastCX:void 0,lastCY:void 0,pause:!0}),ee.current=C}function Tt(H,oe,ge,he){H==="x"?function(w){if(P!==void 0){var D=w-P,te=D;!le&&(C===0&&D>0||C===ie-1&&D<0)&&(te=D/2),ue({touched:!0,lastCX:P,x:-(innerWidth+20)*ee.current+te,pause:!1})}else ue({touched:!0,lastCX:w,x:p,pause:!1})}(oe):H==="y"&&function(w,D){if(M!==void 0){var te=d===null?null:rr(d,.01,d-Math.abs(w-M)/100/4);ue({touched:!0,lastCY:M,bg:D===1?te:d,minimal:D===1})}else ue({touched:!0,lastCY:w,bg:O,minimal:!0})}(ge,he)}function ft(H,oe){var ge=H-(P??H),he=oe-(M??oe),w=!1;if(ge<-40)Me(C+1);else if(ge>40)Me(C-1);else{var D=-(innerWidth+20)*ee.current;Math.abs(he)>100&&$&&h&&(w=!0,De()),ue({touched:!1,x:D,lastCX:void 0,lastCY:void 0,bg:d,overlay:!!w||L})}}Gt("keydown",function(H){if(B)switch(H.key){case"ArrowLeft":Me(C-1,!0);break;case"ArrowRight":Me(C+1,!0);break;case"Escape":De()}});var Dt=function(H,oe,ge){return g.useMemo(function(){var he=H.length;return ge?H.concat(H).concat(H).slice(he+oe-1,he+oe+2):H.slice(Math.max(oe-1,0),Math.min(oe+2,he+1))},[H,oe,ge])}(y,C,le);if(!Et)return null;var je=L&&!Re,gn=B?O:A,Lt=Q&&re&&{images:y,index:C,visible:B,onClose:De,onIndexChange:Me,overlayVisible:je,overlay:Ee&&Ee.overlay,scale:V,rotate:K,onScale:Q,onRotate:re},Ut=a?a(Re):400,tn=i?i(Re):"cubic-bezier(0.25, 0.8, 0.25, 1)",vn=a?a(3):600,Xe=i?i(3):"cubic-bezier(0.25, 0.8, 0.25, 1)";return W.createElement(Wl,{className:"PhotoView-Portal"+(je?"":" PhotoView-Slider__clean")+(B?"":" PhotoView-Slider__willClose")+(b?" "+b:""),role:"dialog",onClick:function(H){return H.stopPropagation()},container:Oe},B&&W.createElement(Yl,null),W.createElement("div",{className:"PhotoView-Slider__Backdrop"+(F?" "+F:"")+(Re===1?" PhotoView-Slider__fadeIn":Re===2?" PhotoView-Slider__fadeOut":""),style:{background:gn?"rgba(0, 0, 0, "+gn+")":void 0,transitionTimingFunction:tn,transitionDuration:(f?0:Ut)+"ms",animationDuration:Ut+"ms"},onAnimationEnd:jt}),S&&W.createElement("div",{className:"PhotoView-Slider__BannerWrap"},W.createElement("div",{className:"PhotoView-Slider__Counter"},C+1," / ",ie),W.createElement("div",{className:"PhotoView-Slider__BannerRight"},v&&Lt&&v(Lt),W.createElement(Gl,{className:"PhotoView-Slider__toolbarIcon",onClick:De}))),Dt.map(function(H,oe){var ge=le||C!==0?ee.current-1+oe:C+oe;return W.createElement(rc,{key:le?H.key+"/"+H.src+"/"+ge:H.key,item:H,speed:Ut,easing:tn,visible:B,onReachMove:Tt,onReachUp:ft,onPhotoTap:function(){return Ge(o)},onMaskTap:function(){return Ge(c)},wrapClassName:Y,className:G,style:{left:(innerWidth+20)*ge+"px",transform:"translate3d("+p+"px, 0px, 0)",transition:f||k?void 0:"transform "+vn+"ms "+Xe},loadingElement:R,brokenElement:I,onPhotoResize:dt,isActive:ee.current===ge,expose:ue})}),!ot&&S&&W.createElement(W.Fragment,null,(le||C!==0)&&W.createElement("div",{className:"PhotoView-Slider__ArrowLeft",onClick:function(){return Me(C-1,!0)}},W.createElement(Xl,null)),(le||C+1<ie)&&W.createElement("div",{className:"PhotoView-Slider__ArrowRight",onClick:function(){return Me(C+1,!0)}},W.createElement(ql,null))),m&&Lt&&W.createElement("div",{className:"PhotoView-Slider__Overlay"},m(Lt)))}var ic=["children","onIndexChange","onVisibleChange"],oc={images:[],visible:!1,index:0};function sc(e){var t=e.children,n=e.onIndexChange,a=e.onVisibleChange,i=Gn(e,ic),o=Mn(oc),l=o[0],c=o[1],s=g.useRef(0),d=l.images,u=l.visible,h=l.index,E=Ot({nextId:function(){return s.current+=1},update:function(v){var b=d.findIndex(function(G){return G.key===v.key});if(b>-1){var F=d.slice();return F.splice(b,1,v),void c({images:F})}c(function(G){return{images:G.images.concat(v)}})},remove:function(v){c(function(b){var F=b.images.filter(function(G){return G.key!==v});return{images:F,index:Math.min(F.length-1,h)}})},show:function(v){var b=d.findIndex(function(F){return F.key===v});c({visible:!0,index:b}),a&&a(!0,b,l)}}),S=Ot({close:function(){c({visible:!1}),a&&a(!1,h,l)},changeIndex:function(v){c({index:v}),n&&n(v,l)}}),m=g.useMemo(function(){return ve({},l,E)},[l,E]);return W.createElement(yi.Provider,{value:m},t,W.createElement(ac,ve({images:d,visible:u,index:h,onIndexChange:S.changeIndex,onClose:S.close},i)))}var lc=function(e){var t,n,a=e.src,i=e.render,o=e.overlay,l=e.width,c=e.height,s=e.triggers,d=s===void 0?["onClick"]:s,u=e.children,h=g.useContext(yi),E=(t=function(){return h.nextId()},(n=g.useRef({sign:!1,fn:void 0}).current).sign||(n.sign=!0,n.fn=t()),n.fn),S=g.useRef(null);g.useImperativeHandle(u==null?void 0:u.ref,function(){return S.current}),g.useEffect(function(){return function(){h.remove(E)}},[]);var m=Ot({render:function(b){return i&&i(b)},show:function(b,F){h.show(E),function(G,Y){if(u){var R=u.props[G];R&&R(Y)}}(b,F)}}),v=g.useMemo(function(){var b={};return d.forEach(function(F){b[F]=m.show.bind(null,F)}),b},[]);return g.useEffect(function(){h.update({key:E,src:a,originRef:S,render:m.render,overlay:o,width:l,height:c})},[a]),u?g.Children.only(g.cloneElement(u,ve({},v,{ref:S}))):null};const cc=({url:e,text:t})=>{const[n,a]=g.useState(!1);return r.jsx(no,{to:e,style:{color:"inherit",textDecoration:n?"underline":"none"},onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:t})},uc={replace:e=>{var a,i;const t=e.name==="a"&&((i=(a=e.children)==null?void 0:a[0])==null?void 0:i.name)==="img",n=e.name==="img";if(t||n){const o=t?e.children[0]:e,{src:l,alt:c}=o.attribs;return r.jsx(lc,{src:l,children:r.jsx("img",{src:l,alt:c})})}}},dc=g.forwardRef((e,t)=>{const n=hn(),a=j(s=>s.activeContent),i=j(s=>s.fontSize);if(!a)return r.jsxs("div",{ref:t,className:"content-empty",style:{display:"flex",flexDirection:"column",backgroundColor:"var(--color-fill-1)",color:"var(--color-text-3)",alignItems:"center",justifyContent:"center",flex:"1",padding:"40px 16px"},children:[r.jsx(to,{style:{fontSize:"64px"}}),r.jsx(U.Title,{heading:6,style:{color:"var(--color-text-3)",marginTop:"10px"},children:"ReactFlux"})]});const o=$l(a.content,uc),l=a.feed.category.id,c=a.feed.category.title;return r.jsxs("div",{ref:t,className:"article-content",style:{padding:"40px 5%",flex:"1",overflowY:"auto",overflowX:"hidden"},children:[r.jsxs("div",{className:"article-title",style:{maxWidth:"600px",margin:"0 auto"},children:[r.jsx(U.Title,{heading:3,style:{margin:0},children:r.jsx("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",children:a.title})}),r.jsx(U.Text,{style:{color:"var(--color-text-3)",fontSize:"0.75 rem"},children:r.jsx(cc,{url:`/feed/${a.feed.id}`,text:a.feed.title})}),r.jsx(U.Text,{style:{color:"var(--color-text-3)",fontSize:"0.75 rem"},children:` - ${a.author}`}),r.jsx(U.Text,{children:r.jsx(fn,{size:"small",onClick:()=>{n(`/group/${l}`)},style:{marginLeft:"10px",cursor:"pointer"},children:c})}),r.jsx("br",{}),r.jsx(U.Text,{style:{color:"var(--color-text-3)",fontSize:"0.75 rem"},children:qt(a.published_at).format("dddd, MMMM D, YYYY [at] h:mm A")}),r.jsx(ct,{})]}),r.jsx("div",{className:"article-body",style:{fontSize:`${i}rem`,maxWidth:"600px",margin:"0 auto",overflowWrap:"break-word"},children:r.jsx(sc,{maskOpacity:.7,children:o})},a.id)]})});var bi={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var o="",l=0;l<arguments.length;l++){var c=arguments[l];c&&(o=i(o,a(c)))}return o}function a(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var l="";for(var c in o)t.call(o,c)&&o[c]&&(l=i(l,c));return l}function i(o,l){return l?o?o+" "+l:o+l:o}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(bi);var fc=bi.exports;const wi=An(fc),Ci=({src:e,alt:t,width:n,height:a,status:i,borderRadius:o})=>{const[l,c]=g.useState(!1),s=g.useRef(null);return g.useEffect(()=>{const d=new IntersectionObserver(h=>{for(const E of h)if(E.isIntersecting){const S=new Image;S.onload=()=>c(!0),S.src=e,s.current&&d.unobserve(s.current)}}),u=s.current;return u&&d.observe(u),()=>d.disconnect()},[e]),r.jsxs("div",{className:"image-container",ref:s,children:[!l&&r.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:r.jsx(Yt,{text:{rows:0},image:{style:{width:n,height:a,margin:"0",borderRadius:o}},animation:!0})}),l&&r.jsx("img",{className:i!=="unread"?"read":"",src:e,alt:t,style:{width:n,height:a,objectFit:"cover",borderRadius:o}})]})},hc=({url:e})=>r.jsx("img",{className:"feed-icon",src:`https://icons.duckduckgo.com/ip3/${new URL(e).hostname}.ico`,alt:"Icon"}),pc=({entry:e,showFeedIcon:t})=>r.jsxs("div",{children:[r.jsx(U.Text,{className:e.status==="unread"?"title-unread":"title-read",children:e.title}),r.jsxs(U.Text,{className:"article-info",children:[r.jsx("br",{}),t&&r.jsx(hc,{url:e.feed.site_url}),e.feed.title,r.jsx("br",{}),sr(e.published_at)]}),e.starred&&r.jsx(On,{className:"icon-starred"})]}),mc=({entry:e,handleEntryClick:t})=>{const n=j(c=>c.activeContent),a=j(c=>c.showFeedIcon),i=n&&e.id===n.id,o=()=>t(e),l=e.imgSrc?r.jsx("div",{className:"cover-image",children:r.jsx(Ci,{width:"100%",height:"160px",alt:e.id,src:e.imgSrc,status:e.status})}):null;return r.jsx("div",{className:"article-card",children:r.jsx(Rt,{className:wi("card-custom-hover-style",{"card-custom-selected-style":i}),hoverable:!0,"data-entry-id":e.id,style:{width:"100%",cursor:"pointer"},onClick:o,cover:l,children:r.jsx(Rt.Meta,{description:r.jsx(pc,{entry:e,showFeedIcon:a})})})},e.id)},gc=({url:e})=>r.jsx("img",{className:"feed-icon-mini",src:`https://icons.duckduckgo.com/ip3/${new URL(e).hostname}.ico`,alt:"Icon"}),vc=({entry:e,showFeedIcon:t})=>r.jsxs("div",{style:{display:"flex",paddingLeft:t?"22px":"0"},children:[r.jsxs("div",{style:{marginRight:"10px",flex:1},children:[r.jsx(U.Text,{className:e.status==="unread"?"title-unread":"title-read",children:e.title}),r.jsxs(U.Text,{className:"article-info",children:[r.jsx("br",{}),t&&r.jsx(gc,{url:e.feed.site_url}),e.feed.title,r.jsx("br",{}),sr(e.published_at)]}),e.starred&&r.jsx(On,{className:"icon-starred"})]}),e.imgSrc&&r.jsx("div",{className:"thumbnail",children:r.jsx(Ci,{width:"100px",height:"100px",alt:e.id,src:e.imgSrc,status:e.status,borderRadius:"4px"})})]}),yc=({entry:e,handleEntryClick:t})=>{const n=j(l=>l.activeContent),a=j(l=>l.showFeedIcon),i=n&&e.id===n.id,o=()=>t(e);return r.jsx("div",{className:"article-card",children:r.jsx(Rt,{className:wi("card-custom-hover-style",{"card-custom-selected-style":i}),hoverable:!0,"data-entry-id":e.id,style:{width:"100%",cursor:"pointer"},onClick:o,cover:null,children:r.jsx(Rt.Meta,{description:r.jsx(vc,{entry:e,showFeedIcon:a})})})},e.id)},xc=({loading:e})=>{const t=j(i=>i.layout),n=t==="large"?2:4,a=i=>r.jsx(Rt,{style:{width:"100%",marginBottom:"10px"},cover:t==="large"&&r.jsx(Yt,{loading:e,animation:!0,text:{rows:0},image:{style:{width:"100%",height:160}}}),children:r.jsx(Rt.Meta,{description:r.jsx(Yt,{loading:e,animation:!0,text:{rows:3,width:150}})})},i);return e?Array.from({length:n},(i,o)=>a(o)):null},Ei=()=>{const{entries:e,filteredEntries:t,filterStatus:n,filterString:a,filterType:i,loadMoreUnreadVisible:o,setFilteredEntries:l,setFilterStatus:c,setFilterString:s,setFilterType:d,setLoadMoreUnreadVisible:u,unreadCount:h}=g.useContext(ut);return g.useEffect(()=>{l([]);const S=Na(e,i,n,a);if(l(S),n==="unread"){const m=e.filter(v=>v.status==="unread");u(m.length<h)}},[n,a,i,o]),{filteredEntries:t,handleFilter:(S,m,v)=>{d(S),c(m),s(v)},loadMoreUnreadVisible:o}},bc=()=>{const{filterStatus:e,filterString:t,filterType:n}=g.useContext(ut),a=j(l=>l.activeContent),i=j(l=>l.setActiveContent),{handleFilter:o}=Ei();return r.jsx(Be.Search,{allowClear:!0,placeholder:"Search...",value:t,addBefore:r.jsxs(Ke,{placeholder:"Select type",onChange:l=>{o(l,e,t)},style:{width:100},value:n,children:[r.jsx(Ke.Option,{value:"0",children:"Title"}),r.jsx(Ke.Option,{value:"1",children:"Content"})]}),onFocus:()=>a&&i(null),onChange:l=>o(n,e,l),style:{marginBottom:"10px",width:"100%"}})},wc=g.forwardRef(({loading:e,getEntries:t,handleEntryClick:n,cardsRef:a},i)=>{const{filteredEntries:o,filterStatus:l,loadMoreUnreadVisible:c,loadMoreVisible:s}=g.useContext(ut),{loadingMore:d,handleLoadMore:u}=dr(),h=j(m=>m.layout),E=j(m=>m.hiddenFeedIds),S=j(m=>m.showAllFeeds);return r.jsxs("div",{className:"entry-list",ref:i,style:{overflowY:"auto",padding:"10px 10px 0 10px",width:"302px",backgroundColor:"var(--color-fill-1)",flex:"1"},children:[r.jsx(bc,{}),r.jsx(xc,{loading:e}),e?null:r.jsx("div",{ref:a,children:o.filter(m=>S||!E.includes(m.feed.id)).map(m=>{Ra(m.feed.site_url)||(m.feed.site_url=Da(m.feed.feed_url));const v=h==="small"?yc:mc;return r.jsx(v,{entry:m,handleEntryClick:n},m.id)})}),!e&&(l==="all"?s:c)&&r.jsxs(de,{onClick:()=>u(t),loading:d,long:!0,style:{margin:"10px auto",display:"block"},children:[!d&&r.jsx(ro,{}),"Load more"]})]})}),Cc=g.forwardRef(({info:e,getArticleList:t,markAllAsRead:n},a)=>{const{entries:i,filteredEntries:o,filterStatus:l,filterString:c,filterType:s,loading:d,setEntries:u,setFilteredEntries:h,setUnreadCount:E}=g.useContext(ut),{handleFilter:S}=Ei(),m=j(b=>b.initData),v=g.useCallback(async()=>{n().then(()=>{ae.success("Marked all as read successfully"),m(),u(i.map(b=>({...b,status:"read"}))),h(o.map(b=>({...b,status:"read"}))),E(0)}).catch(()=>{ae.error("Failed to mark all as read")})},[i,o,m,n,u,h,E]);return e.from!=="history"?r.jsxs("div",{className:"entry-panel",style:{backgroundColor:"var(--color-bg-2)",bottom:"0",display:"flex",flexDirection:"row",padding:"8px 10px",zIndex:"2",justifyContent:"space-between",borderTop:"1px solid var(--color-border-2)"},children:[r.jsxs(sn.Group,{type:"button",name:"lang",value:l,onChange:b=>{a.current&&a.current.scrollTo(0,0),S(s,b,c)},children:[r.jsx(sn,{value:"all",children:"ALL"}),r.jsx(sn,{value:"unread",children:"UNREAD"})]}),e.from!=="starred"&&r.jsx(ua,{focusLock:!0,title:"Mark All As Read?",onOk:v,children:r.jsx(de,{icon:r.jsx(ia,{}),shape:"circle"})}),r.jsx(de,{icon:r.jsx(ca,{}),loading:d,shape:"circle",onClick:t})]}):null}),en=({info:e,getEntries:t,markAllAsRead:n})=>{const a=j(C=>C.activeContent),i=j(C=>C.setActiveContent),o=j(C=>C.setReadCount),l=j(C=>C.setStarredCount),c=j(C=>C.setUnreadToday),s=j(C=>C.setUnreadTotal),d=j(C=>C.updateFeedUnreadCount),u=j(C=>C.updateGroupUnreadCount),h=j(C=>C.showAllFeeds),E=j(C=>C.hiddenFeedIds),{entries:S,filteredEntries:m,filterStatus:v,loading:b,setEntries:F,setFilteredEntries:G,setLoading:Y,setLoadMoreUnreadVisible:R,setLoadMoreVisible:I,setOffset:y,setTotal:T,setUnreadCount:x,total:_,unreadCount:B}=g.useContext(ut),{handleFetchContent:xe,toggleEntryStarred:Z,toggleEntryStatus:Oe,handleEntryStatusUpdate:fe}=ur(),{getFirstImage:ce}=dr(),[ue,He]=g.useState(!1),[me,We]=g.useState(!1),p=g.useRef(null),f=g.useRef(null),k=g.useRef(null);g.useEffect(()=>{He(a!==null)},[a]),g.useEffect(()=>{h?(G(()=>K(S)),We(!0)):E&&(G(()=>K(S).filter(C=>!E.includes(C.feed.id))),We(!0))},[S,E,h]),g.useEffect(()=>{me&&We(!1)},[me]),g.useEffect(()=>{if(!(B===0||_===0))switch(e.from){case"all":h&&s(()=>B);break;case"today":c(()=>B);break;case"starred":l(()=>_);break;case"history":o(()=>_);break;case"feed":{const C=Number.parseInt(e.id);d(C,B);break}case"group":{const C=Number.parseInt(e.id);u(C,B);break}}},[_,B]);const P=async C=>{He(!1),setTimeout(()=>{i({...C,status:"read"})},200),C.status==="unread"&&(setTimeout(()=>{fe(C,"read")},200),Sa(C.id,"read").catch(()=>{ae.error("Failed to mark entry as read, please try again later"),fe(C,"unread")})),f.current&&(f.current.setAttribute("tabIndex","-1"),f.current.focus(),f.current.scrollTo(0,0))},{handleBKey:M,handleDKey:N,handleEscapeKey:O,handleLeftKey:A,handleMKey:L,handleRightKey:$,handleSKey:V}=fr(P,t,me);g.useEffect(()=>{const C={27:()=>O(p),37:()=>A(),39:()=>$(),66:()=>M(),68:()=>N(xe),77:()=>L(Oe),83:()=>V(Z)},J=ee=>{const ie=C[ee.keyCode];ie&&ie()};return ue?document.addEventListener("keydown",J):document.removeEventListener("keydown",J),()=>{document.removeEventListener("keydown",J)}},[a,m,ue]);const K=C=>v==="all"?C:C.filter(J=>J.status==="unread"),Q=(C,J,ee,ie)=>{F(C),G(J),T(ee.data.total),I(C.length<ee.data.total),x(ie.data.total),R(J.length<ie.data.total)},re=(C,J)=>{var ee,ie;if((ee=C==null?void 0:C.data)!=null&&ee.entries&&((ie=J==null?void 0:J.data)==null?void 0:ie.total)>=0){const Ee=C.data.entries.map(ce),le=K(Ee);Q(Ee,le,C,J)}},z=async()=>{Y(!0);try{const C=await t();if(e.from==="history")re(C,C);else{const J=await t(0,"unread");re(C,J)}}catch(C){console.error("Error fetching articles:",C)}finally{Y(!1)}};return g.useEffect(()=>{z(),i(null),p.current&&p.current.scrollTo(0,0),f.current&&f.current.scrollTo(0,0),y(0)},[e]),r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",flexDirection:"column",borderRight:"1px solid var(--color-border-2)"},className:"entry-col",children:[r.jsx(Ir,{in:!b,timeout:200,nodeRef:k,classNames:"fade",children:r.jsx(wc,{cardsRef:k,loading:b,getEntries:t,handleEntryClick:P,ref:p})}),r.jsx(Cc,{info:e,getArticleList:z,markAllAsRead:n,ref:p})]}),r.jsx(Ir,{in:ue,timeout:200,nodeRef:f,classNames:"fade",unmountOnExit:!0,children:r.jsx(dc,{ref:f})}),r.jsx(Rs,{handleEntryClick:P,getEntries:t,isFilteredEntriesUpdated:me}),r.jsx(Ds,{handleEntryClick:P,getEntries:t,isFilteredEntriesUpdated:me})]})},Ec=()=>{const e=async()=>{const t=await Ko();return se.put(`/v1/users/${t.data.id}/mark-all-as-read`)};return r.jsx(Qt,{children:r.jsx(en,{info:{from:"all",id:""},getEntries:is,markAllAsRead:e})})},jc=()=>{const e=hn(),t=ao();return console.error(t),r.jsx("div",{id:"error-page",style:{top:"30%",position:"relative"},children:r.jsx("div",{children:r.jsx(io,{status:"404",subTitle:"Whoops, that page is gone. ",extra:[r.jsx(de,{type:"primary",onClick:()=>e("/"),children:"Back to Home"},"back")]})})})},Sc=()=>{const{id:e}=va(),t=j(o=>o.entriesOrder),n=j(o=>o.entriesPerPage),a=async(o=0,l=null)=>{const c={baseUrl:`/v1/feeds/${e}/entries`,orderField:"published_at",direction:t,offset:o,limit:n,status:l},s=Jt(c);return se.get(s)},i=async()=>se.put(`/v1/feeds/${id}/mark-all-as-read`);return r.jsx(Qt,{children:r.jsx(en,{info:{from:"feed",id:e},getEntries:a,markAllAsRead:i})})},Tc=()=>{const{id:e}=va(),t=j(o=>o.entriesOrder),n=j(o=>o.entriesPerPage),a=async(o=0,l=null)=>{const c={baseUrl:`/v1/categories/${e}/entries`,orderField:"published_at",direction:t,offset:o,limit:n,status:l},s=Jt(c);return se.get(s)},i=async()=>se.put(`/v1/categories/${e}/mark-all-as-read`);return r.jsx(Qt,{children:r.jsx(en,{info:{from:"group",id:e},getEntries:a,markAllAsRead:i})})},_c=()=>r.jsx(Qt,{children:r.jsx(en,{info:{from:"history",id:""},getEntries:ka})}),kc=e=>{var a;const t=e.getFieldsValue();let n=!0;for(const i of Object.keys(t))if(i!=="password"){const o=(a=t[i])==null?void 0:a.trim();e.setFieldValue(i,o),o||(n=!1)}else t[i]||(n=!1);return n},Sn=(e,t)=>{e.key==="Enter"&&t.submit()},Ic=()=>{const[e]=oo(),[t,n]=g.useState(!1),[a,i]=g.useState(kn()||"token"),o=hn();g.useEffect(()=>{kn()&&o("/")},[]);const l=async()=>{n(!0);try{(await ra({url:"/v1/me",method:"get",baseURL:e.getFieldsValue().server,headers:{"X-Auth-Token":e.getFieldsValue().token},auth:{username:e.getFieldsValue().username,password:e.getFieldsValue().password},timeout:5e3})).status===200&&(ae.success("Success"),Xo(a,e.getFieldsValue()),o("/"))}catch(s){console.error(s),ae.error(s.message)}n(!1)},c=()=>{l()};return r.jsx("div",{style:{backgroundColor:"var(--color-bg-1)",height:"100%"},children:r.jsx("div",{style:{backgroundColor:"var(--color-fill-1)",height:"100%"},children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",overflowY:"auto"},children:[r.jsx(da,{style:{fontSize:48,color:"rgb(var(--primary-6))",marginTop:"20px"}}),r.jsx(U.Title,{heading:3,children:"Connect to your server"}),r.jsxs(Rt,{style:{boxShadow:"0 4px 10px rgb(var(--color-bg-3))",padding:"20px",width:"380px",marginTop:"20px"},children:[r.jsxs(ye,{autoComplete:"off",form:e,layout:"vertical",onSubmit:()=>{kc(e)?c():ae.error("Please fill in all required fields")},children:[r.jsx(ye.Item,{field:"server",label:"Server address",rules:[{required:!0}],onKeyDown:s=>{Sn(s,e)},children:r.jsx(Be,{disabled:t,placeholder:"Please input server address",prefix:r.jsx(so,{})})}),a==="token"&&r.jsx(ye.Item,{field:"token",label:"API Token",rules:[{required:!0}],onKeyDown:s=>{Sn(s,e)},children:r.jsx(Be,{disabled:t,placeholder:"Please input api token",prefix:r.jsx(Pr,{})})}),a==="user"&&r.jsxs(r.Fragment,{children:[r.jsx(ye.Item,{field:"username",label:"Username",rules:[{required:!0}],onKeyDown:s=>{Sn(s,e)},children:r.jsx(Be,{disabled:t,prefix:r.jsx(sa,{}),placeholder:"Please input username"})}),r.jsx(ye.Item,{field:"password",label:"Password",rules:[{required:!0}],onKeyDown:s=>{Sn(s,e)},children:r.jsx(Be.Password,{disabled:t,prefix:r.jsx(Pr,{}),placeholder:"Please input password"})})]})]}),r.jsx(de,{loading:t,type:"primary",long:!0,onClick:()=>e.submit(),style:{marginTop:"20px"},children:"Connect"}),r.jsx(ct,{orientation:"center",children:"Or connect with"}),r.jsx(de,{type:"secondary",long:!0,onClick:()=>i(a==="token"?"user":"token"),style:{marginTop:"20px"},children:a==="token"?"Username and password":"API Token"})]}),r.jsxs("div",{style:{display:"flex",marginTop:"40px"},children:[r.jsx(U.Text,{disabled:!0,children:"Need more information?"}),r.jsx(lo,{href:"https://miniflux.app/docs/api.html#authentication",style:{fontWeight:"500"},children:"Go to Miniflux official website"})]})]})})})},Pc=({children:e})=>kn()?r.jsx(r.Fragment,{children:e}):r.jsx(co,{to:"/login"}),Mc=()=>r.jsx(Qt,{children:r.jsx(en,{info:{from:"starred",id:""},getEntries:Ia})}),Ac=()=>{const e=async()=>{const t=await Tn(0,"unread"),n=t.data.entries.map(a=>a.id);if(t.data.total>n.length){const a=t.data.total-n.length,i=Math.ceil(a/100)*100,o=await Tn(n.length,"unread",i);n.push(...o.data.entries.map(l=>l.id))}return ja(n,"read")};return r.jsx(Qt,{children:r.jsx(en,{info:{from:"today",id:""},getEntries:Tn,markAllAsRead:e})})},Fc=uo([{path:"/",element:r.jsx(Pc,{children:r.jsx(Ns,{})}),errorElement:r.jsx(jc,{}),children:[{index:!0,element:r.jsx(Ec,{})},{path:"/today",element:r.jsx(Ac,{})},{path:"/starred",element:r.jsx(Mc,{})},{path:"/history",element:r.jsx(_c,{})},{path:"/group/:id",element:r.jsx(Tc,{})},{path:"/feed/:id",element:r.jsx(Sc,{})}]},{path:"/login",element:r.jsx(Ic,{})}]),ji=Fc;fo.createRoot(document.getElementById("root")).render(r.jsx(ho,{locale:po,children:r.jsx(mo,{router:ji})}))});export default Nc();
