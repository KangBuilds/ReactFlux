var hc=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);import{c as mc,a as Ce,g as pc,b as gc,u as bt,d as cr,e as ur,j as a,B as Ee,I as vc,S as Dr,T as Kn,f as ro,h as yc,i as bc,k as xc,D as ra,M as $t,l as so,m as wc,n as Ec,A as io,o as ao,p as ue,q as Sc,r as Cc,s as Tc,t as oo,v as ve,w as di,x as _n,y as lo,z as ae,C as v,E as co,F as he,G as Q,H as lt,J as ln,K as sa,L as Se,N as Qn,O as ct,P as Yr,Q as Ls,R as Vs,U as uo,V as ke,W as _c,X as jc,Y as Ac,Z as bn,_ as Ic,$ as Rc,a0 as kc,a1 as Oc,a2 as Mc,a3 as Pc,a4 as Nc,a5 as Fc,a6 as fo,a7 as Lr,a8 as Dc,a9 as Lc,aa as fi,ab as Vc,ac as Uc,ad as ho,ae as Bc,af as mo,ag as po,ah as hi,ai as $c,aj as zc,ak as Hc,al as Wc,am as qc,an as Xc,ao as Zn,ap as Gc,aq as Yc,ar as Kc,as as xs,at as ia,au as go,av as Qc,aw as Zc,ax as Jc,ay as aa,az as eu,aA as vo,aB as tu,aC as nu,aD as ru,aE as su,aF as iu}from"./vendor-BgJ-Wljn.js";var Cp=hc((jp,fr)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const Ae=mc(e=>({visible:{settings:!1,addFeed:!1},collapsed:window.innerWidth<=992,activeContent:null,isSysDarkMode:window.matchMedia("(prefers-color-scheme: dark)").matches,setActiveContent:t=>{e({activeContent:t})},setIsSysDarkMode:t=>e({isSysDarkMode:t}),setVisible:(t,n)=>{e(r=>({visible:{...r.visible,[t]:n}}))},toggleCollapsed:()=>e(t=>({collapsed:!t.collapsed}))})),yo=(e,t)=>{const r=Ce((()=>{const s=localStorage.getItem(e);return s!==null?JSON.parse(s):t})());return Ce(s=>s(r),(s,i,o)=>{const l=typeof o=="function"?o(s(r)):o;i(r,l),localStorage.setItem(e,JSON.stringify(l))})},Kr=(e,t)=>{const n=Ce({refresh:null,value:null});return Ce(r=>{const{refresh:s,value:i}=r(n),o=r(e);return i!==null&&s===o?i:t(r)},(r,s,i)=>{let o;const{refresh:l,value:c}=r(n),u=r(e);typeof i=="function"?o=i(c!==null&&l===u?c:t(r)):o=i,s(n,{refresh:u,value:o})})},Vr={articleWidth:90,fontSize:1.05,homePage:"all",layout:"large",markReadOnScroll:!1,orderBy:"created_at",orderDirection:"desc",pageSize:100,showAllFeeds:!1,showFeedIcon:!0,showStatus:"all",theme:"light",themeColor:"Blue"},xt=e=>{const t=JSON.parse(localStorage.getItem("config"))??{};return Object.hasOwn(t,e)?t[e]:Object.hasOwn(Vr,e)?Vr[e]:null},Oe=yo("config",Vr),Us={Red:{light:"#F53F3F",dark:"#F76965"},Orange:{light:"#F77234",dark:"#F9925A"},Green:{light:"#00B42A",dark:"#27C346"},Blue:{light:"#165DFF",dark:"#3C7EFF"},Purple:{light:"#722ED1",dark:"#8E51DA"}},Bs=e=>{const t=Us[e]||Us.Blue,n=window.matchMedia("(prefers-color-scheme: dark)").matches,r=xt("theme");return(r==="system"?n:r==="dark")?t.dark:t.light},bo=e=>{pc(Bs(e),{list:!0}).map(gc).forEach((n,r)=>{document.body.style.setProperty(`--primary-${r+1}`,n)})},mi=yo("auth",{server:"",token:"",username:"",password:""}),Qr=()=>{const e=bt(Oe);return{updateConfig:n=>{e(r=>({...r,...n}))}}},au=()=>{const e=cr(),t=Ae(x=>x.setVisible),n=Ae(x=>x.toggleCollapsed),[r,s]=ur(Oe),i=bt(mi),{showAllFeeds:o,theme:l}=r,{updateConfig:c}=Qr(),u=()=>{c({showAllFeeds:!o})},d=()=>{c({theme:l==="light"?"dark":"light"})},f=()=>{i({}),s(Vr),document.body.removeAttribute("arco-theme"),bo("Blue"),e("/login"),ue.success("Logout successful")},E=(x=>{switch(x){case"dark":return a.jsx(Tc,{});case"system":return a.jsx(Cc,{});default:return a.jsx(Sc,{})}})(l);return a.jsxs("div",{className:"header",children:[a.jsx("div",{className:"brand",children:a.jsx(Ee,{className:"trigger",onClick:n,shape:"circle",size:"small",children:a.jsx(vc,{})})}),a.jsx("div",{className:"button-group",children:a.jsxs(Dr,{size:16,children:[a.jsx(Kn,{content:"Add a feed",mini:!0,children:a.jsx(Ee,{shape:"circle",size:"small",type:"primary",icon:a.jsx(ro,{}),onClick:()=>t("addFeed",!0)})}),a.jsx(Kn,{content:o?"Hide some feeds":"Show all feeds",mini:!0,children:a.jsx(Ee,{shape:"circle",size:"small",icon:o?a.jsx(yc,{}):a.jsx(bc,{}),onClick:u})}),a.jsx(Ee,{shape:"circle",size:"small",icon:a.jsx(xc,{}),onClick:()=>window.open("https://github.com/electh/ReactFlux","_blank")}),a.jsx(ra,{droplist:a.jsx($t,{defaultSelectedKeys:[l],className:"theme-menu",children:["light","dark","system"].map(x=>a.jsxs($t.Item,{className:"theme-menu-item",onClick:()=>c({theme:x}),children:[x.charAt(0).toUpperCase()+x.slice(1),l===x&&a.jsx(so,{style:{marginLeft:8}})]},x))}),trigger:"hover",position:"bottom",children:a.jsx(Ee,{icon:E,shape:"circle",size:"small",onClick:d})}),a.jsx(ra,{droplist:a.jsxs($t,{children:[a.jsxs($t.Item,{onClick:()=>t("settings",!0),children:[a.jsx(wc,{className:"icon-right"}),"Settings"]},"0"),a.jsxs($t.Item,{onClick:f,children:[a.jsx(Ec,{className:"icon-right"}),"Logout"]},"1")]}),trigger:"click",position:"br",children:a.jsx(io,{size:28,style:{cursor:"pointer"},children:a.jsx(ao,{})})})]})})]})},ou=()=>JSON.parse(localStorage.getItem("auth"))??{},pi=e=>{const{server:t,token:n,username:r,password:s}=e;return t&&(n||r&&s)},be=oo.create({timeout:3e3,retry:3,retryDelay:1e3});be.interceptors.request.use(e=>{const t=ou(),{server:n,token:r,username:s,password:i}=t;return pi(t)?(e.baseURL=n,r?e.headers["X-Auth-Token"]=r:e.auth={username:s,password:i},e):Promise.reject(new Error("Invalid auth"))},e=>Promise.reject(e));const lu=async e=>{const{config:t}=e;return!(t!=null&&t.retry)||(t.__retryCount=t.__retryCount??0,t.__retryCount>=t.retry)?Promise.reject(e):(t.__retryCount+=1,await new Promise(r=>{setTimeout(()=>{r()},t.retryDelay??1e3)}),be(t))},cu=async e=>{var n,r,s;const t=((r=(n=e.response)==null?void 0:n.data)==null?void 0:r.error_message)??e.message;return console.log(t),((s=e.response)==null?void 0:s.status)===401&&(localStorage.removeItem("auth"),await dc.navigate("/login")),Promise.reject(e)};be.interceptors.response.use(e=>e,async e=>{try{return await lu(e)}catch(t){return cu(t)}});const uu=async()=>be.get("/v1/categories"),du=async e=>be.post("/v1/categories",{title:e}),fu=async e=>be.delete(`/v1/categories/${e}`),hu=async(e,t,n=!1)=>{const r={title:t,hide_globally:n?"on":void 0};return be.put(`/v1/categories/${e}`,r)};var xo={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(ve,function(){return function(n,r,s){n=n||{};var i=r.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function l(u,d,f,p){return i.fromToBase(u,d,f,p)}s.en.relativeTime=o,i.fromToBase=function(u,d,f,p,E){for(var x,m,b,g=f.$locale().relativeTime||o,y=n.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],S=y.length,T=0;T<S;T+=1){var C=y[T];C.d&&(x=p?s(u).diff(f,C.d,!0):f.diff(u,C.d,!0));var j=(n.rounding||Math.round)(Math.abs(x));if(b=x>0,j<=C.r||!C.r){j<=1&&T>0&&(C=y[T-1]);var O=g[C.l];E&&(j=E(""+j)),m=typeof O=="string"?O.replace("%d",j):O(j,d,C.l,b);break}}if(d)return m;var R=b?g.future:g.past;return typeof R=="function"?R(m):R.replace("%s",m)},i.to=function(u,d){return l(u,d,this,!0)},i.from=function(u,d){return l(u,d,this)};var c=function(u){return u.$u?s.utc():s()};i.toNow=function(u){return this.to(c(this),u)},i.fromNow=function(u){return this.from(c(this),u)}}})})(xo);var mu=xo.exports;const pu=di(mu);_n.extend(pu);const gu=e=>{const t=_n(e),n=_n();return t.isAfter(n.subtract(24,"hour"))},vu=()=>_n().subtract(24,"hour").unix(),wo=e=>_n(e).fromNow(),gi=async(e,t)=>be.put("/v1/entries",{entry_ids:e,status:t}),yu=async e=>be.put(`/v1/entries/${e}/bookmark`),bu=async e=>be.get(`/v1/entries/${e}/fetch-content`),In=(e,t={})=>{const{baseUrl:n,orderField:r,offset:s,limit:i,status:o}=e,l=xt("orderDirection"),c=new URLSearchParams({order:r,direction:l,offset:s,limit:i,...t});return o&&c.append("status",o),`${n}?${c.toString()}`},xu=async(e=0,t=null)=>{const n=xt("orderBy"),r=xt("pageSize"),i=In({baseUrl:"/v1/entries",orderField:n,offset:e,limit:r,status:t});return be.get(i)},Mr=async(e=0,t=null,n=null)=>{const r=xt("orderBy"),s=n??xt("pageSize"),i=vu(),c=In({baseUrl:"/v1/entries",orderField:r,offset:e,limit:s,status:t},{published_after:i});return be.get(c)},Eo=async(e=0,t=null)=>{const n=xt("pageSize"),i=In({baseUrl:"/v1/entries",orderField:"changed_at",offset:e,limit:n,status:t},{starred:"true"});return be.get(i)},So=async(e=0)=>{const t=xt("pageSize"),r=In({baseUrl:"/v1/entries",orderField:"changed_at",offset:e,limit:t,status:"read"});return be.get(r)},wu=async()=>be.get("/v1/feeds"),Eu=async()=>be.get("/v1/feeds/counters"),Su=async e=>be.get(`/v1/feeds/${e}/icon`),Cu=async e=>be.put(`/v1/feeds/${e}/refresh`),Tu=async()=>be.put("/v1/feeds/refresh"),_u=async(e,t,n)=>be.post("/v1/feeds",{feed_url:e,category_id:t,crawler:n}),ju=async e=>be.delete(`/v1/feeds/${e}`),Au=async(e,t)=>{const{url:n,title:r,categoryId:s,isFullText:i,hidden:o=!1}=t;return be.put(`/v1/feeds/${e}`,{feed_url:n,title:r,category_id:s,crawler:i,hide_globally:o})},Iu=async()=>be.get("/v1/me"),Co=e=>{const t=new URL(e);return`${t.protocol}//${t.hostname}`},vi=Ce(!1),Ru=Ce({}),To=Ce(0),_o=Ce({}),yi=Kr(To,e=>e(_o).unreads??{}),bi=()=>{const e=Ce(0),t=Ce({}),n=Kr(e,r=>r(t).total??0);return[e,t,n]},[ku,Ou,jo]=bi(),[Mu,Pu,Ao]=bi(),[Nu,Fu,Io]=bi(),Ro=Ce(0),ko=Ce([]),Zr=Kr(Ro,e=>{const t=e(yi);return e(ko).map(r=>({...r,unreadCount:t[r.id]??0}))}),xi=Ce(e=>e(Zr).sort((n,r)=>n.title.localeCompare(r.title,"en"))),Oo=Ce(0),Mo=Ce([]),Du=Kr(Oo,e=>{const t=e(Zr);return e(Mo).map(r=>{const s=t.filter(i=>i.category.id===r.id);return{...r,unreadCount:s.reduce((i,o)=>i+o.unreadCount,0),feedCount:s.length}})}),dr=Ce(e=>e(Du).sort((n,r)=>n.title.localeCompare(r.title,"en"))),Po=Ce(e=>e(dr).filter(n=>n.hide_globally).map(n=>n.id)),Jr=Ce(e=>{const t=e(Po);return e(xi).filter(r=>r.hide_globally||t.includes(r.category.id)).map(r=>r.id)}),No=Ce(e=>{const{showAllFeeds:t}=e(Oe),n=e(Jr);return e(xi).filter(s=>t||!n.includes(s.id))}),Fo=Ce(e=>e(No).reduce((n,r)=>{lo(r.site_url)||(r.site_url=Co(r.feed_url));const{id:s}=r.category;return n[s]||(n[s]=[]),n[s].push(r),n},{})),Lu=Ce(e=>{const t=e(yi),n=e(No);return Object.entries(t).reduce((r,[s,i])=>n.some(o=>o.id===Number(s))?r+i:r,0)}),zt=()=>{},Ve=zt(),ws=Object,X=e=>e===Ve,tt=e=>typeof e=="function",Mt=(e,t)=>({...e,...t}),Vu=e=>tt(e.then),xr=new WeakMap;let Uu=0;const Jn=e=>{const t=typeof e,n=e&&e.constructor,r=n==Date;let s,i;if(ws(e)===e&&!r&&n!=RegExp){if(s=xr.get(e),s)return s;if(s=++Uu+"~",xr.set(e,s),n==Array){for(s="@",i=0;i<e.length;i++)s+=Jn(e[i])+",";xr.set(e,s)}if(n==ws){s="#";const o=ws.keys(e).sort();for(;!X(i=o.pop());)X(e[i])||(s+=i+":"+Jn(e[i])+",");xr.set(e,s)}}else s=r?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return s},vt=new WeakMap,Es={},wr={},wi="undefined",es=typeof window!=wi,$s=typeof document!=wi,Bu=()=>es&&typeof window.requestAnimationFrame!=wi,Ei=(e,t)=>{const n=vt.get(e);return[()=>!X(t)&&e.get(t)||Es,r=>{if(!X(t)){const s=e.get(t);t in wr||(wr[t]=s),n[5](t,Mt(s,r),s||Es)}},n[6],()=>!X(t)&&t in wr?wr[t]:!X(t)&&e.get(t)||Es]};let zs=!0;const $u=()=>zs,[Hs,Ws]=es&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[zt,zt],zu=()=>{const e=$s&&document.visibilityState;return X(e)||e!=="hidden"},Hu=e=>($s&&document.addEventListener("visibilitychange",e),Hs("focus",e),()=>{$s&&document.removeEventListener("visibilitychange",e),Ws("focus",e)}),Wu=e=>{const t=()=>{zs=!0,e()},n=()=>{zs=!1};return Hs("online",t),Hs("offline",n),()=>{Ws("online",t),Ws("offline",n)}},qu={isOnline:$u,isVisible:zu},Xu={initFocus:Hu,initReconnect:Wu},Ur=!ae.useId,cn=!es||"Deno"in window,Do=e=>Bu()?window.requestAnimationFrame(e):setTimeout(e,1),Sn=cn?v.useEffect:v.useLayoutEffect,Ss=typeof navigator<"u"&&navigator.connection,oa=!cn&&Ss&&(["slow-2g","2g"].includes(Ss.effectiveType)||Ss.saveData),ts=e=>{if(tt(e))try{e=e()}catch{e=""}const t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?Jn(e):"",[e,t]};let Gu=0;const Br=()=>++Gu,Lo=0,Vo=1,Uo=2,Yu=3;var yt={__proto__:null,ERROR_REVALIDATE_EVENT:Yu,FOCUS_EVENT:Lo,MUTATE_EVENT:Uo,RECONNECT_EVENT:Vo};async function Si(...e){const[t,n,r,s]=e,i=Mt({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const l=i.rollbackOnError;let c=i.optimisticData;const u=p=>typeof l=="function"?l(p):l!==!1,d=i.throwOnError;if(tt(n)){const p=n,E=[],x=t.keys();for(const m of x)!/^\$(inf|sub)\$/.test(m)&&p(t.get(m)._k)&&E.push(m);return Promise.all(E.map(f))}return f(n);async function f(p){const[E]=ts(p);if(!E)return;const[x,m]=Ei(t,E),[b,g,y,S]=vt.get(t),T=()=>{const ee=b[E];return(tt(i.revalidate)?i.revalidate(x().data,p):i.revalidate!==!1)&&(delete y[E],delete S[E],ee&&ee[0])?ee[0](Uo).then(()=>x().data):x().data};if(e.length<3)return T();let C=r,j;const O=Br();g[E]=[O,0];const R=!X(c),P=x(),L=P.data,H=P._c,se=X(H)?L:H;if(R&&(c=tt(c)?c(se,L):c,m({data:c,_c:se})),tt(C))try{C=C(se)}catch(ee){j=ee}if(C&&Vu(C))if(C=await C.catch(ee=>{j=ee}),O!==g[E][0]){if(j)throw j;return C}else j&&R&&u(j)&&(o=!0,m({data:se,_c:Ve}));if(o&&!j)if(tt(o)){const ee=o(C,se);m({data:ee,error:Ve,_c:Ve})}else m({data:C,error:Ve,_c:Ve});if(g[E][1]=Br(),Promise.resolve(T()).then(()=>{m({_c:Ve})}),j){if(d)throw j;return}return C}}const la=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},Ku=(e,t)=>{if(!vt.has(e)){const n=Mt(Xu,t),r={},s=Si.bind(Ve,e);let i=zt;const o={},l=(d,f)=>{const p=o[d]||[];return o[d]=p,p.push(f),()=>p.splice(p.indexOf(f),1)},c=(d,f,p)=>{e.set(d,f);const E=o[d];if(E)for(const x of E)x(f,p)},u=()=>{if(!vt.has(e)&&(vt.set(e,[r,{},{},{},s,c,l]),!cn)){const d=n.initFocus(setTimeout.bind(Ve,la.bind(Ve,r,Lo))),f=n.initReconnect(setTimeout.bind(Ve,la.bind(Ve,r,Vo)));i=()=>{d&&d(),f&&f(),vt.delete(e)}}};return u(),[e,s,u,i]}return[e,vt.get(e)[4]]},Qu=(e,t,n,r,s)=>{const i=n.errorRetryCount,o=s.retryCount,l=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!X(i)&&o>i||setTimeout(r,l,s)},Zu=(e,t)=>Jn(e)==Jn(t),[Bo,Ju]=Ku(new Map),ed=Mt({onLoadingSlow:zt,onSuccess:zt,onError:zt,onErrorRetry:Qu,onDiscarded:zt,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:oa?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:oa?5e3:3e3,compare:Zu,isPaused:()=>!1,cache:Bo,mutate:Ju,fallback:{}},qu),td=(e,t)=>{const n=Mt(e,t);if(t){const{use:r,fallback:s}=e,{use:i,fallback:o}=t;r&&i&&(n.use=r.concat(i)),s&&o&&(n.fallback=Mt(s,o))}return n},nd=v.createContext({}),rd="$inf$",$o=es&&window.__SWR_DEVTOOLS_USE__,sd=$o?window.__SWR_DEVTOOLS_USE__:[],id=()=>{$o&&(window.__SWR_DEVTOOLS_REACT__=ae)},zo=e=>tt(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],ad=()=>Mt(ed,v.useContext(nd)),od=e=>(t,n,r)=>e(t,n&&((...i)=>{const[o]=ts(t),[,,,l]=vt.get(Bo);if(o.startsWith(rd))return n(...i);const c=l[o];return X(c)?n(...i):(delete l[o],c)}),r),ld=sd.concat(od),Ho=e=>function(...n){const r=ad(),[s,i,o]=zo(n),l=td(r,o);let c=e;const{use:u}=l,d=(u||[]).concat(ld);for(let f=d.length;f--;)c=d[f](c);return c(s,i||l.fetcher||null,l)},Wo=(e,t,n)=>{const r=t[e]||(t[e]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}},cd=(e,t)=>(...n)=>{const[r,s,i]=zo(n),o=(i.use||[]).concat(t);return e(r,s,{...i,use:o})};id();const ca=ae.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e)}),Cs={dedupe:!0},ud=(e,t,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:l,revalidateIfStale:c,refreshInterval:u,refreshWhenHidden:d,refreshWhenOffline:f,keepPreviousData:p}=n,[E,x,m,b]=vt.get(r),[g,y]=ts(e),S=v.useRef(!1),T=v.useRef(!1),C=v.useRef(g),j=v.useRef(t),O=v.useRef(n),R=()=>O.current,P=()=>R().isVisible()&&R().isOnline(),[L,H,se,ee]=Ei(r,g),J=v.useRef({}).current,me=X(o)?n.fallback[g]:o,ye=(k,M)=>{for(const N in J){const A=N;if(A==="data"){if(!s(k[A],M[A])&&(!X(k[A])||!s(B,M[A])))return!1}else if(M[A]!==k[A])return!1}return!0},Ie=v.useMemo(()=>{const k=!g||!t?!1:X(l)?R().isPaused()||i?!1:X(c)?!0:c:l,M=G=>{const K=Mt(G);return delete K._k,k?{isValidating:!0,isLoading:!0,...K}:K},N=L(),A=ee(),re=M(N),U=N===A?re:M(A);let D=re;return[()=>{const G=M(L());return ye(G,D)?(D.data=G.data,D.isLoading=G.isLoading,D.isValidating=G.isValidating,D.error=G.error,D):(D=G,G)},()=>U]},[r,g]),pe=co.useSyncExternalStore(v.useCallback(k=>se(g,(M,N)=>{ye(N,M)||k()}),[r,g]),Ie[0],Ie[1]),We=!S.current,w=E[g]&&E[g].length>0,h=pe.data,F=X(h)?me:h,V=pe.error,$=v.useRef(F),B=p?X(h)?$.current:h:F,W=w&&!X(V)?!1:We&&!X(l)?l:R().isPaused()?!1:i?X(F)?!1:c:X(F)||c,z=!!(g&&t&&We&&W),Y=X(pe.isValidating)?z:pe.isValidating,te=X(pe.isLoading)?z:pe.isLoading,q=v.useCallback(async k=>{const M=j.current;if(!g||!M||T.current||R().isPaused())return!1;let N,A,re=!0;const U=k||{},D=!m[g]||!U.dedupe,G=()=>Ur?!T.current&&g===C.current&&S.current:g===C.current,K={isValidating:!1,isLoading:!1},Me=()=>{H(K)},Ue=()=>{const fe=m[g];fe&&fe[1]===A&&delete m[g]},Pe={isValidating:!0};X(L().data)&&(Pe.isLoading=!0);try{if(D&&(H(Pe),n.loadingTimeout&&X(L().data)&&setTimeout(()=>{re&&G()&&R().onLoadingSlow(g,n)},n.loadingTimeout),m[g]=[M(y),Br()]),[N,A]=m[g],N=await N,D&&setTimeout(Ue,n.dedupingInterval),!m[g]||m[g][1]!==A)return D&&G()&&R().onDiscarded(g),!1;K.error=Ve;const fe=x[g];if(!X(fe)&&(A<=fe[0]||A<=fe[1]||fe[1]===0))return Me(),D&&G()&&R().onDiscarded(g),!1;const xe=L().data;K.data=s(xe,N)?xe:N,D&&G()&&R().onSuccess(N,g,n)}catch(fe){Ue();const xe=R(),{shouldRetryOnError:_e}=xe;xe.isPaused()||(K.error=fe,D&&G()&&(xe.onError(fe,g,xe),(_e===!0||tt(_e)&&_e(fe))&&(!R().revalidateOnFocus||!R().revalidateOnReconnect||P())&&xe.onErrorRetry(fe,g,xe,De=>{const Re=E[g];Re&&Re[0]&&Re[0](yt.ERROR_REVALIDATE_EVENT,De)},{retryCount:(U.retryCount||0)+1,dedupe:!0})))}return re=!1,Me(),!0},[g,r]),oe=v.useCallback((...k)=>Si(r,C.current,...k),[]);if(Sn(()=>{j.current=t,O.current=n,X(h)||($.current=h)}),Sn(()=>{if(!g)return;const k=q.bind(Ve,Cs);let M=0;const A=Wo(g,E,(re,U={})=>{if(re==yt.FOCUS_EVENT){const D=Date.now();R().revalidateOnFocus&&D>M&&P()&&(M=D+R().focusThrottleInterval,k())}else if(re==yt.RECONNECT_EVENT)R().revalidateOnReconnect&&P()&&k();else{if(re==yt.MUTATE_EVENT)return q();if(re==yt.ERROR_REVALIDATE_EVENT)return q(U)}});return T.current=!1,C.current=g,S.current=!0,H({_k:y}),W&&(X(F)||cn?k():Do(k)),()=>{T.current=!0,A()}},[g]),Sn(()=>{let k;function M(){const A=tt(u)?u(L().data):u;A&&k!==-1&&(k=setTimeout(N,A))}function N(){!L().error&&(d||R().isVisible())&&(f||R().isOnline())?q(Cs).then(M):M()}return M(),()=>{k&&(clearTimeout(k),k=-1)}},[u,d,f,g]),v.useDebugValue(B),i&&X(F)&&g){if(!Ur&&cn)throw new Error("Fallback data is required when using suspense in SSR.");j.current=t,O.current=n,T.current=!1;const k=b[g];if(!X(k)){const M=oe(k);ca(M)}if(X(V)){const M=q(Cs);X(B)||(M.status="fulfilled",M.value=!0),ca(M)}else throw V}return{mutate:oe,get data(){return J.data=!0,B},get error(){return J.error=!0,V},get isValidating(){return J.isValidating=!0,Y},get isLoading(){return J.isLoading=!0,te}}},dd=Ho(ud),ua=ae.use||(e=>{if(e.status==="pending")throw e;if(e.status==="fulfilled")return e.value;throw e.status==="rejected"?e.reason:(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e)}),Ts={dedupe:!0},fd=(e,t,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:l,revalidateIfStale:c,refreshInterval:u,refreshWhenHidden:d,refreshWhenOffline:f,keepPreviousData:p}=n,[E,x,m,b]=vt.get(r),[g,y]=ts(e),S=v.useRef(!1),T=v.useRef(!1),C=v.useRef(g),j=v.useRef(t),O=v.useRef(n),R=()=>O.current,P=()=>R().isVisible()&&R().isOnline(),[L,H,se,ee]=Ei(r,g),J=v.useRef({}).current,me=X(o)?n.fallback[g]:o,ye=(k,M)=>{for(const N in J){const A=N;if(A==="data"){if(!s(k[A],M[A])&&(!X(k[A])||!s(B,M[A])))return!1}else if(M[A]!==k[A])return!1}return!0},Ie=v.useMemo(()=>{const k=!g||!t?!1:X(l)?R().isPaused()||i?!1:X(c)?!0:c:l,M=G=>{const K=Mt(G);return delete K._k,k?{isValidating:!0,isLoading:!0,...K}:K},N=L(),A=ee(),re=M(N),U=N===A?re:M(A);let D=re;return[()=>{const G=M(L());return ye(G,D)?(D.data=G.data,D.isLoading=G.isLoading,D.isValidating=G.isValidating,D.error=G.error,D):(D=G,G)},()=>U]},[r,g]),pe=co.useSyncExternalStore(v.useCallback(k=>se(g,(M,N)=>{ye(N,M)||k()}),[r,g]),Ie[0],Ie[1]),We=!S.current,w=E[g]&&E[g].length>0,h=pe.data,F=X(h)?me:h,V=pe.error,$=v.useRef(F),B=p?X(h)?$.current:h:F,W=w&&!X(V)?!1:We&&!X(l)?l:R().isPaused()?!1:i?X(F)?!1:c:X(F)||c,z=!!(g&&t&&We&&W),Y=X(pe.isValidating)?z:pe.isValidating,te=X(pe.isLoading)?z:pe.isLoading,q=v.useCallback(async k=>{const M=j.current;if(!g||!M||T.current||R().isPaused())return!1;let N,A,re=!0;const U=k||{},D=!m[g]||!U.dedupe,G=()=>Ur?!T.current&&g===C.current&&S.current:g===C.current,K={isValidating:!1,isLoading:!1},Me=()=>{H(K)},Ue=()=>{const fe=m[g];fe&&fe[1]===A&&delete m[g]},Pe={isValidating:!0};X(L().data)&&(Pe.isLoading=!0);try{if(D&&(H(Pe),n.loadingTimeout&&X(L().data)&&setTimeout(()=>{re&&G()&&R().onLoadingSlow(g,n)},n.loadingTimeout),m[g]=[M(y),Br()]),[N,A]=m[g],N=await N,D&&setTimeout(Ue,n.dedupingInterval),!m[g]||m[g][1]!==A)return D&&G()&&R().onDiscarded(g),!1;K.error=Ve;const fe=x[g];if(!X(fe)&&(A<=fe[0]||A<=fe[1]||fe[1]===0))return Me(),D&&G()&&R().onDiscarded(g),!1;const xe=L().data;K.data=s(xe,N)?xe:N,D&&G()&&R().onSuccess(N,g,n)}catch(fe){Ue();const xe=R(),{shouldRetryOnError:_e}=xe;xe.isPaused()||(K.error=fe,D&&G()&&(xe.onError(fe,g,xe),(_e===!0||tt(_e)&&_e(fe))&&(!R().revalidateOnFocus||!R().revalidateOnReconnect||P())&&xe.onErrorRetry(fe,g,xe,De=>{const Re=E[g];Re&&Re[0]&&Re[0](yt.ERROR_REVALIDATE_EVENT,De)},{retryCount:(U.retryCount||0)+1,dedupe:!0})))}return re=!1,Me(),!0},[g,r]),oe=v.useCallback((...k)=>Si(r,C.current,...k),[]);if(Sn(()=>{j.current=t,O.current=n,X(h)||($.current=h)}),Sn(()=>{if(!g)return;const k=q.bind(Ve,Ts);let M=0;const A=Wo(g,E,(re,U={})=>{if(re==yt.FOCUS_EVENT){const D=Date.now();R().revalidateOnFocus&&D>M&&P()&&(M=D+R().focusThrottleInterval,k())}else if(re==yt.RECONNECT_EVENT)R().revalidateOnReconnect&&P()&&k();else{if(re==yt.MUTATE_EVENT)return q();if(re==yt.ERROR_REVALIDATE_EVENT)return q(U)}});return T.current=!1,C.current=g,S.current=!0,H({_k:y}),W&&(X(F)||cn?k():Do(k)),()=>{T.current=!0,A()}},[g]),Sn(()=>{let k;function M(){const A=tt(u)?u(L().data):u;A&&k!==-1&&(k=setTimeout(N,A))}function N(){!L().error&&(d||R().isVisible())&&(f||R().isOnline())?q(Ts).then(M):M()}return M(),()=>{k&&(clearTimeout(k),k=-1)}},[u,d,f,g]),v.useDebugValue(B),i&&X(F)&&g){if(!Ur&&cn)throw new Error("Fallback data is required when using suspense in SSR.");j.current=t,O.current=n,T.current=!1;const k=b[g];if(!X(k)){const M=oe(k);ua(M)}if(X(V)){const M=q(Ts);X(B)||(M.status="fulfilled",M.value=!0),ua(M)}else throw V}return{mutate:oe,get data(){return J.data=!0,B},get error(){return J.error=!0,V},get isValidating(){return J.isValidating=!0,Y},get isLoading(){return J.isLoading=!0,te}}},hd=Ho(fd),md=e=>(t,n,r)=>(r.revalidateOnFocus=!1,r.revalidateIfStale=!1,r.revalidateOnReconnect=!1,e(t,n,r)),pd=cd(hd,md),Rn=(e,t,n)=>r=>{const s=bt(e),i=bt(t),{data:o}=dd(r,n);return v.useEffect(()=>{o&&(s(o.data),i(l=>l+1))},[o,s,i]),o},gd=Rn(_o,To,()=>Eu()),vd=Rn(Ou,ku,()=>Mr(0,"unread")),yd=Rn(Pu,Mu,()=>Eo()),bd=Rn(Fu,Nu,()=>So()),xd=Rn(ko,Ro,()=>wu()),wd=Rn(Mo,Oo,()=>uu()),Ed=e=>pd(`/v1/feeds/${e}/icon`,()=>Su(e)),Ci=()=>{const[e,t]=ur(vi),n=gd("/v1/feeds/counters"),r=vd("/v1/entries?status=unread"),s=yd("/v1/entries?starred=true"),i=bd("/v1/entries?status=read"),o=xd("/v1/feeds"),l=wd("/v1/categories"),c=()=>{t(!1)};return v.useEffect(()=>{!e&&[n,r,s,i,o,l].every(Boolean)&&t(!0)},[e,t,n,r,s,i,o,l]),{loadData:c}},on=(e,t)=>e.toLowerCase().includes(t.toLowerCase()),qo=(e,t,n,r)=>r?t==="0"?n==="all"?e.filter(s=>on(s.title,r)):e.filter(s=>on(s.title,r)&&s.status===n):n==="all"?e.filter(s=>on(s.content,r)):e.filter(s=>on(s.content,r)&&s.status===n):e,$r=(e,t,n,r)=>{const s=i=>n||!r.includes(i.feed.id);return["all","today","category"].includes(t.from)?e.filter(s):e},Sd=()=>{const{updateConfig:e}=Qr(),t=he(Oe),{articleWidth:n,fontSize:r,layout:s,showFeedIcon:i,themeColor:o}=t,l=p=>{e({themeColor:p}),bo(p)},c=p=>{e({layout:p?"small":"large"})},u=p=>{e({showFeedIcon:p})},d=p=>{e({fontSize:p})},f=p=>{e({articleWidth:p})};return a.jsxs(a.Fragment,{children:[a.jsx(Q.Title,{heading:6,style:{marginTop:0},children:"Theme"}),a.jsx(Q.Text,{type:"secondary",children:"Customize your UI theme"}),a.jsxs("div",{className:"setting-row",children:[a.jsxs("div",{children:[a.jsx(Q.Title,{heading:6,style:{marginTop:0},children:"Accent color"}),a.jsx(Q.Text,{type:"secondary",children:"Choose your accent color"})]}),a.jsx("div",{style:{display:"flex"},children:Object.keys(Us).map(p=>a.jsx(Kn,{content:p,children:a.jsx("button",{type:"button",className:"accent-color-button",style:{backgroundColor:Bs(p),outline:p===o?`1px solid ${Bs(p)}`:"none"},onClick:()=>l(p),onKeyDown:E=>{(E.key==="Enter"||E.key===" ")&&l(p)}})},p))})]}),a.jsx(lt,{}),a.jsxs("div",{className:"setting-row",children:[a.jsxs("div",{children:[a.jsx(Q.Title,{heading:6,style:{marginTop:0},children:"Compact article list"}),a.jsx(Q.Text,{type:"secondary",children:"Use small thumbnail in article list"})]}),a.jsx("div",{children:a.jsx(ln,{checked:s==="small",onChange:p=>c(p)})})]}),a.jsx(lt,{}),a.jsxs("div",{className:"setting-row",children:[a.jsxs("div",{children:[a.jsx(Q.Title,{heading:6,style:{marginTop:0},children:"Show feed icon"}),a.jsx(Q.Text,{type:"secondary",children:"Show feed icon in feed list and article list"})]}),a.jsx("div",{children:a.jsx(ln,{checked:i,onChange:p=>u(p)})})]}),a.jsx(lt,{}),a.jsxs("div",{className:"setting-row",children:[a.jsxs("div",{children:[a.jsx(Q.Title,{heading:6,style:{marginTop:0},children:"Font size"}),a.jsx(Q.Text,{type:"secondary",children:"Adjust article text size"})]}),a.jsx("div",{children:a.jsxs(Dr,{children:[a.jsx(Q.Text,{style:{fontSize:"0.75rem"},children:"A"}),a.jsx(sa,{formatTooltip:p=>`${p}rem`,max:1.25,min:.75,showTicks:!0,step:.05,style:{width:200},value:r,onChange:p=>d(p)}),a.jsx(Q.Text,{style:{fontSize:"1.25rem"},children:"A"})]})})]}),a.jsx(lt,{}),a.jsxs("div",{className:"setting-row",children:[a.jsxs("div",{children:[a.jsx(Q.Title,{heading:6,style:{marginTop:0},children:"Article width"}),a.jsx(Q.Text,{type:"secondary",children:"Adjust article width"})]}),a.jsx("div",{children:a.jsxs(Dr,{children:[a.jsx(Q.Text,{children:"60%"}),a.jsx(sa,{formatTooltip:p=>`${p}%`,max:90,min:60,showTicks:!0,step:10,style:{width:200},value:n,onChange:p=>f(p)}),a.jsx(Q.Text,{children:"90%"})]})})]})]})},Cd=()=>{const e=bt(Zr),[t,n]=ur(dr),[r,s]=v.useState(!1),[i,o]=v.useState(""),[l,c]=v.useState(!1),[u]=Se.useForm(),[d,f]=v.useState({}),p=async()=>{if(i){try{const{data:m}=await du(i);n(b=>[...b,{...m,feedCount:0}]),ue.success("Category added successfully")}catch{ue.error("Failed to add category")}o(""),s(!1)}},E=async(m,b,g)=>{try{const{data:y}=await hu(m,b,g);e(S=>S.map(T=>T.category.id===m?{...T,category:{...T.category,title:b}}:T)),n(S=>S.map(T=>T.id===m?{...T,...y}:T)),ue.success("Category updated successfully")}catch{ue.error("Failed to update category")}c(!1),u.resetFields()},x=async m=>{try{(await fu(m)).status===204?(n(g=>g.filter(y=>y.id!==m)),ue.success("Category deleted successfully")):ue.error("Failed to delete category")}catch{ue.error("Failed to delete category")}};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[t.map(m=>a.jsx(Qn,{className:"tag-style",closable:m.feedCount===0,size:"medium",onClick:()=>{f(m),c(!0),u.setFieldsValue({title:m.title})},onClose:async b=>{b.stopPropagation(),await x(m.id)},children:m.title},m.id)),r?a.jsx(ct,{autoFocus:!0,className:"input-style",onBlur:p,onChange:o,onPressEnter:p,size:"small",value:i}):a.jsx(Qn,{className:"add-category-tag",icon:a.jsx(ro,{}),onClick:()=>s(!0),size:"medium",tabIndex:0,children:"Add"})]}),d&&a.jsx(Yr,{className:"modal-style",onOk:u.submit,title:"Edit Category",unmountOnExit:!0,visible:l,onCancel:()=>{c(!1),u.resetFields()},children:a.jsxs(Se,{form:u,layout:"vertical",onSubmit:m=>E(d.id,m.title,m.hidden),labelCol:{style:{flexBasis:90}},wrapperCol:{style:{flexBasis:"calc(100% - 90px)"}},children:[a.jsx(Se.Item,{label:"Title",field:"title",rules:[{required:!0}],children:a.jsx(ct,{placeholder:"Please input category title"})}),a.jsx(Se.Item,{label:"Hidden",field:"hidden",initialValue:d.hide_globally,triggerPropName:"checked",rules:[{type:"boolean"}],children:a.jsx(ln,{})})]})})]})},ns=()=>{const[e,t]=v.useState(window.innerWidth),n=e<=768;return v.useEffect(()=>{const r=()=>t(window.innerWidth);return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),{screenWidth:e,isMobileView:n}},_s=e=>e.slice().sort((t,n)=>n.parsing_error_count-t.parsing_error_count),Td=()=>{const[e,t]=v.useState(!1),[n,r]=v.useState({}),[s]=Se.useForm(),i=he(xi),o=bt(Zr),[l,c]=v.useState(_s(i)),u=he(dr),{isMobileView:d}=ns(),f=l.map(y=>({category:y.category,checked_at:y.checked_at,crawler:y.crawler,feed_url:y.feed_url,key:y.id,parsing_error_count:y.parsing_error_count,title:y.title,hidden:y.hide_globally}));v.useEffect(()=>{c(_s(i))},[i]);const p=y=>{r(y),t(!0),s.setFieldsValue({category:y.category.id,crawler:y.crawler,title:y.title,url:y.feed_url,hidden:y.hidden})},E=async y=>{try{(await Cu(y.key)).status===204?(ue.success("Refreshed"),o(T=>T.map(C=>C.id===y.key?{...C,parsing_error_count:0}:C))):(ue.error("Failed to refresh"),o(T=>T.map(C=>C.id===y.key?{...C,parsing_error_count:C.parsing_error_count+1}:C)))}catch{ue.error("Failed to refresh"),o(T=>T.map(C=>C.id===y.key?{...C,parsing_error_count:C.parsing_error_count+1}:C))}},x=async()=>{try{(await Tu()).status===204?(ue.success("Refreshed"),o(S=>S.map(T=>({...T,parsing_error_count:0})))):(ue.error("Failed to refresh"),o(S=>S.map(T=>({...T,parsing_error_count:T.parsing_error_count+1}))))}catch{ue.error("Failed to refresh"),o(S=>S.map(T=>({...T,parsing_error_count:T.parsing_error_count+1})))}},m=async y=>{try{await ju(y.key),ue.success("Unfollowed"),o(S=>S.filter(T=>T.id!==y.key))}catch{ue.error("Failed to unfollow")}},b=[{title:"Title",dataIndex:"title",sorter:(y,S)=>y.title.localeCompare(S.title,"en"),render:(y,S)=>{const T=S.parsing_error_count,C=T?`⚠️ ${y}`:y,j=a.jsxs("div",{children:[y,T>0&&a.jsxs(a.Fragment,{children:[a.jsx("br",{}),"⚠️ Parsing error count: ",T]})]});return a.jsx(Q.Ellipsis,{expandable:!1,children:a.jsx(Kn,{mini:!0,content:j,children:C})})}},!d&&{title:"Url",dataIndex:"feed_url",sorter:(y,S)=>y.feed_url.localeCompare(S.feed_url,"en"),render:y=>a.jsx(Q.Ellipsis,{expandable:!1,showTooltip:!0,children:y})},{title:"Category",dataIndex:"category.title",sorter:(y,S)=>y.category.title.localeCompare(S.category.title,"en"),render:y=>a.jsx(Q.Ellipsis,{expandable:!1,showTooltip:!0,children:a.jsx(Qn,{children:y})})},!d&&{title:"Checked at",dataIndex:"checked_at",sorter:(y,S)=>y.checked_at.localeCompare(S.checked_at,"en"),render:y=>a.jsx(Q.Ellipsis,{expandable:!1,children:wo(y)})},{title:"Actions",dataIndex:"op",fixed:"right",width:100,render:(y,S)=>a.jsxs(Dr,{children:[a.jsx("button",{"aria-label":"Edit this feed",className:"list-item-action",onClick:()=>p(S),type:"button",children:a.jsx(_c,{})}),a.jsx("button",{"aria-label":"Refresh this feed",className:"list-item-action",onClick:()=>E(S),type:"button",children:a.jsx(Vs,{})}),a.jsx(Ls,{position:"left",focusLock:!0,title:"Unfollow？",onOk:async()=>{await m(S)},children:a.jsx("span",{className:"list-item-action",children:a.jsx(jc,{})})})]})}].filter(Boolean),g=async(y,S)=>{try{const T=await Au(y,S);o(C=>C.map(j=>j.id===y?{...j,...T.data}:j)),ue.success("Feed updated successfully"),t(!1),s.resetFields()}catch{ue.error("Failed to update feed")}};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[a.jsx("div",{style:{display:"flex",flex:1,justifyContent:"center"},children:a.jsx(ct.Search,{className:"search-input",placeholder:"Search feed title or url",searchButton:!0,onChange:y=>c(_s(i).filter(S=>on(S.title,y)||on(S.feed_url,y)))})}),a.jsx("div",{style:{display:"flex",justifyContent:"flex-end",paddingBottom:16},children:a.jsx(Ls,{focusLock:!0,title:"Refresh all feeds?",onOk:x,children:a.jsx(Ee,{icon:a.jsx(Vs,{}),shape:"circle"})})})]}),a.jsx(uo,{borderCell:!0,className:"feed-table",columns:b,data:f,pagePosition:"bottomCenter",scroll:{x:!0},size:"small"}),n&&a.jsx(Yr,{className:"edit-modal",onOk:s.submit,title:"Edit Feed",unmountOnExit:!0,visible:e,onCancel:()=>{t(!1),s.resetFields()},children:a.jsxs(Se,{form:s,labelCol:{span:7},layout:"vertical",wrapperCol:{span:17},onSubmit:async y=>{const S=y.url.trim(),T={url:y.url,title:y.title,categoryId:y.category,isFullText:y.crawler,hidden:y.hidden};S?await g(n.key,T):ue.error("Feed URL cannot be empty")},children:[a.jsx(Se.Item,{label:"Feed URL",field:"url",rules:[{required:!0}],children:a.jsx(ct,{placeholder:"Please input feed URL"})}),a.jsx(Se.Item,{label:"Title",field:"title",rules:[{required:!0}],children:a.jsx(ct,{placeholder:"Please input feed title"})}),a.jsx(Se.Item,{label:"Category",required:!0,field:"category",rules:[{required:!0}],children:a.jsx(ke,{placeholder:"Please select",children:u.map(y=>a.jsx(ke.Option,{value:y.id,children:y.title},y.id))})}),a.jsx(Se.Item,{label:"Hidden",field:"hidden",initialValue:n.hide_globally,triggerPropName:"checked",rules:[{type:"boolean"}],children:a.jsx(ln,{})}),a.jsx(Se.Item,{label:"Fetch original content",field:"crawler",tooltip:a.jsx("div",{children:"Only affects newly retrieved articles"}),style:{marginBottom:0},triggerPropName:"checked",rules:[{type:"boolean"}],children:a.jsx(ln,{})})]})})]})},_d=()=>{const{updateConfig:e}=Qr(),t=he(Oe),{homePage:n,markReadOnScroll:r,orderBy:s,pageSize:i,showStatus:o}=t;return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"setting-row",children:[a.jsxs("div",{children:[a.jsx(Q.Title,{heading:6,style:{marginTop:0},children:"Default show status"}),a.jsx(Q.Text,{type:"secondary",children:"Which status to show by default:"})]}),a.jsx("div",{children:a.jsxs(ke,{className:"select-style",placeholder:"Select status",value:o,onChange:l=>e({showStatus:l}),children:[a.jsx(ke.Option,{value:"all",children:"All"}),a.jsx(ke.Option,{value:"unread",children:"Unread"})]})})]}),a.jsx(lt,{}),a.jsxs("div",{className:"setting-row",children:[a.jsxs("div",{children:[a.jsx(Q.Title,{heading:6,style:{marginTop:0},children:"Default home page"}),a.jsx(Q.Text,{type:"secondary",children:"Which page to show by default:"})]}),a.jsx("div",{children:a.jsxs(ke,{onChange:l=>e({homePage:l}),placeholder:"Select page",style:{width:128,marginLeft:16},value:n,children:[a.jsx(ke.Option,{value:"all",children:"All"}),a.jsx(ke.Option,{value:"today",children:"Today"}),a.jsx(ke.Option,{value:"starred",children:"Starred"}),a.jsx(ke.Option,{value:"history",children:"History"})]})})]}),a.jsx(lt,{}),a.jsxs("div",{className:"setting-row",children:[a.jsxs("div",{children:[a.jsx(Q.Title,{heading:6,style:{marginTop:0},children:"Entries order"}),a.jsx(Q.Text,{type:"secondary",children:"What order to show entries:"})]}),a.jsx("div",{children:a.jsxs(ke,{onChange:l=>e({orderBy:l}),placeholder:"Select order",style:{width:128,marginLeft:16},value:s,children:[a.jsx(ke.Option,{value:"published_at",children:"Published at"}),a.jsx(ke.Option,{value:"created_at",children:"Created at"})]})})]}),a.jsx(lt,{}),a.jsxs("div",{className:"setting-row",children:[a.jsxs("div",{children:[a.jsx(Q.Title,{heading:6,style:{marginTop:0},children:"Entries per page"}),a.jsx(Q.Text,{type:"secondary",children:"Show how many entries per page:"})]}),a.jsx("div",{children:a.jsx(Ac,{defaultValue:i,min:1,mode:"button",onChange:l=>e({pageSize:l}),size:"small",style:{width:128,marginLeft:16}})})]}),a.jsx(lt,{}),a.jsxs("div",{className:"setting-row",children:[a.jsxs("div",{children:[a.jsx(Q.Title,{heading:6,style:{marginTop:0},children:"Mark articles as read when scrolled off screen"}),a.jsx(Q.Text,{type:"secondary",children:"Automatically mark articles as read when they are scrolled out of the visible screen area"})]}),a.jsx("div",{children:a.jsx(ln,{checked:r,onChange:l=>e({markReadOnScroll:l})})})]})]})},jd=[{title:"Key",dataIndex:"keyName",render:e=>a.jsx(Qn,{children:e})},{title:"Function",dataIndex:"description"}],Ad=[{key:"1",keyName:"Esc",description:"Dismiss article"},{key:"2",keyName:"←",description:"Previous article"},{key:"3",keyName:"→",description:"Next article"},{key:"4",keyName:"B",description:"Open link externally"},{key:"5",keyName:"D",description:"Fetch original article"},{key:"6",keyName:"M",description:"Mark as read / unread"},{key:"7",keyName:"S",description:"Star / Unstar"}],Id=()=>a.jsx(uo,{borderCell:!0,columns:jd,data:Ad,pagination:!1,size:"small",style:{margin:"0 auto",width:"80%"}}),Rd=()=>a.jsxs(bn,{className:"custom-tabs",defaultActiveTab:"1",tabPosition:"top",children:[a.jsx(bn.TabPane,{title:a.jsxs("span",{children:[a.jsx(Ic,{style:{marginRight:6}}),"Feeds"]}),children:a.jsx(Td,{})},"1"),a.jsx(bn.TabPane,{title:a.jsxs("span",{children:[a.jsx(Rc,{style:{marginRight:6}}),"Categories"]}),children:a.jsx(Cd,{})},"2"),a.jsx(bn.TabPane,{title:a.jsxs("span",{children:[a.jsx(kc,{style:{marginRight:6}}),"General"]}),children:a.jsx(_d,{})},"3"),a.jsx(bn.TabPane,{title:a.jsxs("span",{children:[a.jsx(Oc,{style:{marginRight:6}}),"Appearance"]}),children:a.jsx(Sd,{})},"4"),a.jsx(bn.TabPane,{title:a.jsxs("span",{children:[a.jsx(Mc,{style:{marginRight:6}}),"Hotkeys"]}),children:a.jsx(Id,{})},"5")]}),kd=[{required:!0}],Od=[{required:!0}],Md=[{type:"boolean"}],Pd=()=>{const e=Ae(n=>n.setVisible),t=Ae(n=>n.visible);return a.jsx(Yr,{className:"settings-modal",visible:t.settings,alignCenter:!1,title:"Settings",footer:null,unmountOnExit:!0,onCancel:()=>e("settings",!1),autoFocus:!1,focusLock:!0,children:a.jsx(Rd,{})})},Nd=()=>{const e=he(dr),t=Ae(c=>c.setVisible),n=Ae(c=>c.visible),[r,s]=v.useState(!1),[i]=Se.useForm(),{loadData:o}=Ci(),l=async(c,u,d)=>{s(!0);try{await _u(c,u,d),o(),ue.success("Added a feed successfully"),t("addFeed",!1),i.resetFields()}catch{ue.error("Failed to add a feed")}s(!1)};return a.jsx(Yr,{title:"Add Feed",visible:n.addFeed,unmountOnExit:!0,style:{width:"400px"},onOk:i.submit,confirmLoading:r,onCancel:()=>{t("addFeed",!1),i.resetFields()},children:a.jsxs(Se,{form:i,labelCol:{span:7},layout:"vertical",wrapperCol:{span:17},onSubmit:async c=>{c.url.trim()?await l(c.url.trim(),c.category,c.crawler):ue.error("Feed URL cannot be empty")},children:[a.jsx(Se.Item,{label:"Feed URL",field:"url",rules:kd,children:a.jsx(ct,{placeholder:"Please input a feed URL"})}),a.jsx(Se.Item,{label:"Category",required:!0,field:"category",rules:Od,children:a.jsx(ke,{placeholder:"Please select a category",showSearch:!0,filterOption:(c,u)=>on(u.props.children,c),children:e.map(c=>a.jsx(ke.Option,{value:c.id,children:c.title},c.id))})}),a.jsx(Se.Item,{label:"Fetch original content",initialValue:!1,field:"crawler",style:{marginBottom:0},triggerPropName:"checked",rules:Md,children:a.jsx(ln,{})})]})})},Fd=()=>a.jsxs("div",{className:"main",children:[a.jsx(Pc,{}),a.jsx(Pd,{}),a.jsx(Nd,{})]}),Dn=$t.Item,{Sider:Dd}=Uc,Ld=v.memo(({category:e,isOpen:t})=>{var s;const r=(s=he(Fo)[e.id])==null?void 0:s.reduce((i,o)=>i+o.unreadCount,0);return a.jsxs("div",{className:"category-title",children:[a.jsxs(Q.Ellipsis,{expandable:!1,showTooltip:!0,style:{width:r?"80%":"100%"},children:[a.jsx(Nc,{className:t?"icon-open":"icon-closed"}),e.title]}),r>0&&a.jsx(Q.Ellipsis,{className:"unread-count",expandable:!1,children:r})]})}),Vd=()=>{const e=Fc(),t=cr(),n=Ae(j=>j.collapsed),r=he(dr),s=he(vi),i=he(Lu),o=he(jo),l=he(Ao),c=he(Io),u=he(Fo),d=he(Po),f=Ae(j=>j.toggleCollapsed),[p,E]=v.useState([]),[x,m]=v.useState([]),b=he(Oe),{showAllFeeds:g,showFeedIcon:y}=b,S=e.pathname,T=j=>{E([j]),t(j)},C=(j,O)=>{m(O)};return v.useEffect(()=>{n||window.innerWidth<=992&&f(!0)},[p]),v.useEffect(()=>{s||m([])},[s]),a.jsx(Dd,{breakpoint:"lg",className:"sidebar",collapsed:n,collapsedWidth:0,collapsible:!0,onCollapse:f,trigger:null,width:240,style:{borderRight:n?"none":"1px solid var(--color-border-2)",display:n?"none":"block"},children:a.jsxs($t,{autoScrollIntoView:!0,collapse:n,defaultSelectedKeys:[S],hasCollapseButton:!0,onClickSubMenu:C,onCollapseChange:f,selectedKeys:p,style:{width:"240px",height:"100%"},children:[a.jsxs("div",{className:"menu-header",style:{visibility:n?"hidden":"visible"},children:[a.jsx(io,{className:"avatar",size:32,children:a.jsx(fo,{style:{color:"var(--color-bg-1)"}})}),a.jsx(Q.Title,{heading:6,style:{margin:"0"},children:"ReactFlux"})]}),a.jsx(lt,{className:"divider"}),a.jsx(Q.Title,{className:"section-title",heading:6,children:"Articles"}),a.jsx(Lr,{loading:!s,animation:!0,text:{rows:3}}),s?a.jsxs("div",{children:[a.jsx(Dn,{onClick:()=>T("/all"),children:a.jsxs("div",{className:"custom-menu-item",children:[a.jsxs("span",{children:[a.jsx(Dc,{}),"All"]}),a.jsx(Q.Ellipsis,{className:"item-count",expandable:!1,children:i||""})]})},"/all"),a.jsx(Dn,{onClick:()=>T("/today"),children:a.jsxs("div",{className:"custom-menu-item",children:[a.jsxs("span",{children:[a.jsx(Lc,{}),"Today"]}),a.jsx(Q.Ellipsis,{className:"item-count",expandable:!1,children:o||""})]})},"/today"),a.jsx(Dn,{onClick:()=>T("/starred"),children:a.jsxs("div",{className:"custom-menu-item",children:[a.jsxs("span",{children:[a.jsx(fi,{}),"Starred"]}),a.jsx(Q.Ellipsis,{className:"item-count",expandable:!1,children:l||""})]})},"/starred"),a.jsx(Dn,{onClick:()=>T("/history"),children:a.jsxs("div",{className:"custom-menu-item",children:[a.jsxs("span",{children:[a.jsx(Vc,{}),"History"]}),a.jsx(Q.Ellipsis,{className:"item-count",expandable:!1,children:c||""})]})},"/history")]}):null,a.jsx(Q.Title,{className:"section-title",heading:6,children:"Feeds"}),a.jsx(Lr,{loading:!s,animation:!0,text:{rows:6}}),s?r.filter(j=>g||!d.includes(j.id)).map(j=>{var O;return a.jsx($t.SubMenu,{selectable:!0,title:a.jsx(Ld,{category:j,isOpen:x.includes(`/category/${j.id}`)}),onClick:R=>{!(R.target.tagName==="svg"||R.target.tagName==="path")&&S!==`/category/${j.id}`&&(E([`/category/${j.id}`]),t(`/category/${j.id}`))},children:(O=u[j.id])==null?void 0:O.map(R=>a.jsx(Dn,{onClick:P=>{P.stopPropagation(),E([`/feed/${R.id}`]),t(`/feed/${R.id}`)},children:a.jsxs("div",{className:"custom-menu-item",children:[a.jsxs(Q.Ellipsis,{expandable:!1,showTooltip:!0,style:{width:R.unreadCount!==0?"80%":"100%"},children:[y&&a.jsx("img",{src:`https://icons.duckduckgo.com/ip3/${new URL(R.site_url).hostname}.ico`,alt:"Icon",style:{marginRight:"8px",width:"16px",height:"16px",verticalAlign:"-2px"}}),R.title]}),R.unreadCount!==0&&a.jsx(Q.Ellipsis,{className:"item-count",expandable:!1,children:R.unreadCount})]})},`/feed/${R.id}`))},`/category/${j.id}`)}):null]})})},Ud=()=>{const e=he(Oe),{theme:t}=e,n=Ae(s=>s.isSysDarkMode),r=Ae(s=>s.setIsSysDarkMode);return v.useEffect(()=>{const s=o=>{r(o.matches)},i=window.matchMedia("(prefers-color-scheme: dark)");return i.addEventListener("change",s),()=>{i.removeEventListener("change",s)}},[]),v.useEffect(()=>{(i=>{document.body.setAttribute("arco-theme",i?"dark":"light"),document.body.style.colorScheme=i?"dark":"light"})(t==="system"?n:t==="dark")},[n,t]),a.jsxs("div",{className:"app",children:[a.jsx(Vd,{}),a.jsx(au,{}),a.jsx(Fd,{})]})};var fr={};(function e(t,n,r,s){var i=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",l=function(){if(!t.OffscreenCanvas)return!1;var w=new OffscreenCanvas(1,1),h=w.getContext("2d");h.fillRect(0,0,1,1);var F=w.transferToImageBitmap();try{h.createPattern(F,"no-repeat")}catch{return!1}return!0}();function c(){}function u(w){var h=n.exports.Promise,F=h!==void 0?h:t.Promise;return typeof F=="function"?new F(w):(w(c,c),null)}var d=function(w,h){return{transform:function(F){if(w)return F;if(h.has(F))return h.get(F);var V=new OffscreenCanvas(F.width,F.height),$=V.getContext("2d");return $.drawImage(F,0,0),h.set(F,V),V},clear:function(){h.clear()}}}(l,new Map),f=function(){var w=Math.floor(16.666666666666668),h,F,V={},$=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(h=function(B){var W=Math.random();return V[W]=requestAnimationFrame(function z(Y){$===Y||$+w-1<Y?($=Y,delete V[W],B()):V[W]=requestAnimationFrame(z)}),W},F=function(B){V[B]&&cancelAnimationFrame(V[B])}):(h=function(B){return setTimeout(B,w)},F=function(B){return clearTimeout(B)}),{frame:h,cancel:F}}(),p=function(){var w,h,F={};function V($){function B(W,z){$.postMessage({options:W||{},callback:z})}$.init=function(z){var Y=z.transferControlToOffscreen();$.postMessage({canvas:Y},[Y])},$.fire=function(z,Y,te){if(h)return B(z,null),h;var q=Math.random().toString(36).slice(2);return h=u(function(oe){function k(M){M.data.callback===q&&(delete F[q],$.removeEventListener("message",k),h=null,d.clear(),te(),oe())}$.addEventListener("message",k),B(z,q),F[q]=k.bind(null,{data:{callback:q}})}),h},$.reset=function(){$.postMessage({reset:!0});for(var z in F)F[z](),delete F[z]}}return function(){if(w)return w;if(!r&&i){var $=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{w=new Worker(URL.createObjectURL(new Blob([$])))}catch(B){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",B),null}V(w)}return w}}(),E={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function x(w,h){return h?h(w):w}function m(w){return w!=null}function b(w,h,F){return x(w&&m(w[h])?w[h]:E[h],F)}function g(w){return w<0?0:Math.floor(w)}function y(w,h){return Math.floor(Math.random()*(h-w))+w}function S(w){return parseInt(w,16)}function T(w){return w.map(C)}function C(w){var h=String(w).replace(/[^0-9a-f]/gi,"");return h.length<6&&(h=h[0]+h[0]+h[1]+h[1]+h[2]+h[2]),{r:S(h.substring(0,2)),g:S(h.substring(2,4)),b:S(h.substring(4,6))}}function j(w){var h=b(w,"origin",Object);return h.x=b(h,"x",Number),h.y=b(h,"y",Number),h}function O(w){w.width=document.documentElement.clientWidth,w.height=document.documentElement.clientHeight}function R(w){var h=w.getBoundingClientRect();w.width=h.width,w.height=h.height}function P(w){var h=document.createElement("canvas");return h.style.position="fixed",h.style.top="0px",h.style.left="0px",h.style.pointerEvents="none",h.style.zIndex=w,h}function L(w,h,F,V,$,B,W,z,Y){w.save(),w.translate(h,F),w.rotate(B),w.scale(V,$),w.arc(0,0,1,W,z,Y),w.restore()}function H(w){var h=w.angle*(Math.PI/180),F=w.spread*(Math.PI/180);return{x:w.x,y:w.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:w.startVelocity*.5+Math.random()*w.startVelocity,angle2D:-h+(.5*F-Math.random()*F),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:w.color,shape:w.shape,tick:0,totalTicks:w.ticks,decay:w.decay,drift:w.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:w.gravity*3,ovalScalar:.6,scalar:w.scalar,flat:w.flat}}function se(w,h){h.x+=Math.cos(h.angle2D)*h.velocity+h.drift,h.y+=Math.sin(h.angle2D)*h.velocity+h.gravity,h.velocity*=h.decay,h.flat?(h.wobble=0,h.wobbleX=h.x+10*h.scalar,h.wobbleY=h.y+10*h.scalar,h.tiltSin=0,h.tiltCos=0,h.random=1):(h.wobble+=h.wobbleSpeed,h.wobbleX=h.x+10*h.scalar*Math.cos(h.wobble),h.wobbleY=h.y+10*h.scalar*Math.sin(h.wobble),h.tiltAngle+=.1,h.tiltSin=Math.sin(h.tiltAngle),h.tiltCos=Math.cos(h.tiltAngle),h.random=Math.random()+2);var F=h.tick++/h.totalTicks,V=h.x+h.random*h.tiltCos,$=h.y+h.random*h.tiltSin,B=h.wobbleX+h.random*h.tiltCos,W=h.wobbleY+h.random*h.tiltSin;if(w.fillStyle="rgba("+h.color.r+", "+h.color.g+", "+h.color.b+", "+(1-F)+")",w.beginPath(),o&&h.shape.type==="path"&&typeof h.shape.path=="string"&&Array.isArray(h.shape.matrix))w.fill(Ie(h.shape.path,h.shape.matrix,h.x,h.y,Math.abs(B-V)*.1,Math.abs(W-$)*.1,Math.PI/10*h.wobble));else if(h.shape.type==="bitmap"){var z=Math.PI/10*h.wobble,Y=Math.abs(B-V)*.1,te=Math.abs(W-$)*.1,q=h.shape.bitmap.width*h.scalar,oe=h.shape.bitmap.height*h.scalar,k=new DOMMatrix([Math.cos(z)*Y,Math.sin(z)*Y,-Math.sin(z)*te,Math.cos(z)*te,h.x,h.y]);k.multiplySelf(new DOMMatrix(h.shape.matrix));var M=w.createPattern(d.transform(h.shape.bitmap),"no-repeat");M.setTransform(k),w.globalAlpha=1-F,w.fillStyle=M,w.fillRect(h.x-q/2,h.y-oe/2,q,oe),w.globalAlpha=1}else if(h.shape==="circle")w.ellipse?w.ellipse(h.x,h.y,Math.abs(B-V)*h.ovalScalar,Math.abs(W-$)*h.ovalScalar,Math.PI/10*h.wobble,0,2*Math.PI):L(w,h.x,h.y,Math.abs(B-V)*h.ovalScalar,Math.abs(W-$)*h.ovalScalar,Math.PI/10*h.wobble,0,2*Math.PI);else if(h.shape==="star")for(var N=Math.PI/2*3,A=4*h.scalar,re=8*h.scalar,U=h.x,D=h.y,G=5,K=Math.PI/G;G--;)U=h.x+Math.cos(N)*re,D=h.y+Math.sin(N)*re,w.lineTo(U,D),N+=K,U=h.x+Math.cos(N)*A,D=h.y+Math.sin(N)*A,w.lineTo(U,D),N+=K;else w.moveTo(Math.floor(h.x),Math.floor(h.y)),w.lineTo(Math.floor(h.wobbleX),Math.floor($)),w.lineTo(Math.floor(B),Math.floor(W)),w.lineTo(Math.floor(V),Math.floor(h.wobbleY));return w.closePath(),w.fill(),h.tick<h.totalTicks}function ee(w,h,F,V,$){var B=h.slice(),W=w.getContext("2d"),z,Y,te=u(function(q){function oe(){z=Y=null,W.clearRect(0,0,V.width,V.height),d.clear(),$(),q()}function k(){r&&!(V.width===s.width&&V.height===s.height)&&(V.width=w.width=s.width,V.height=w.height=s.height),!V.width&&!V.height&&(F(w),V.width=w.width,V.height=w.height),W.clearRect(0,0,V.width,V.height),B=B.filter(function(M){return se(W,M)}),B.length?z=f.frame(k):oe()}z=f.frame(k),Y=oe});return{addFettis:function(q){return B=B.concat(q),te},canvas:w,promise:te,reset:function(){z&&f.cancel(z),Y&&Y()}}}function J(w,h){var F=!w,V=!!b(h||{},"resize"),$=!1,B=b(h,"disableForReducedMotion",Boolean),W=i&&!!b(h||{},"useWorker"),z=W?p():null,Y=F?O:R,te=w&&z?!!w.__confetti_initialized:!1,q=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,oe;function k(N,A,re){for(var U=b(N,"particleCount",g),D=b(N,"angle",Number),G=b(N,"spread",Number),K=b(N,"startVelocity",Number),Me=b(N,"decay",Number),Ue=b(N,"gravity",Number),Pe=b(N,"drift",Number),fe=b(N,"colors",T),xe=b(N,"ticks",Number),_e=b(N,"shapes"),De=b(N,"scalar"),Re=!!b(N,"flat"),Pt=j(N),Kt=U,Nt=[],dn=w.width*Pt.x,Be=w.height*Pt.y;Kt--;)Nt.push(H({x:dn,y:Be,angle:D,spread:G,startVelocity:K,color:fe[Kt%fe.length],shape:_e[y(0,_e.length)],ticks:xe,decay:Me,gravity:Ue,drift:Pe,scalar:De,flat:Re}));return oe?oe.addFettis(Nt):(oe=ee(w,Nt,Y,A,re),oe.promise)}function M(N){var A=B||b(N,"disableForReducedMotion",Boolean),re=b(N,"zIndex",Number);if(A&&q)return u(function(K){K()});F&&oe?w=oe.canvas:F&&!w&&(w=P(re),document.body.appendChild(w)),V&&!te&&Y(w);var U={width:w.width,height:w.height};z&&!te&&z.init(w),te=!0,z&&(w.__confetti_initialized=!0);function D(){if(z){var K={getBoundingClientRect:function(){if(!F)return w.getBoundingClientRect()}};Y(K),z.postMessage({resize:{width:K.width,height:K.height}});return}U.width=U.height=null}function G(){oe=null,V&&($=!1,t.removeEventListener("resize",D)),F&&w&&(document.body.removeChild(w),w=null,te=!1)}return V&&!$&&($=!0,t.addEventListener("resize",D,!1)),z?z.fire(N,U,G):k(N,U,G)}return M.reset=function(){z&&z.reset(),oe&&oe.reset()},M}var me;function ye(){return me||(me=J(null,{useWorker:!0,resize:!0})),me}function Ie(w,h,F,V,$,B,W){var z=new Path2D(w),Y=new Path2D;Y.addPath(z,new DOMMatrix(h));var te=new Path2D;return te.addPath(Y,new DOMMatrix([Math.cos(W)*$,Math.sin(W)*$,-Math.sin(W)*B,Math.cos(W)*B,F,V])),te}function pe(w){if(!o)throw new Error("path confetti are not supported in this browser");var h,F;typeof w=="string"?h=w:(h=w.path,F=w.matrix);var V=new Path2D(h),$=document.createElement("canvas"),B=$.getContext("2d");if(!F){for(var W=1e3,z=W,Y=W,te=0,q=0,oe,k,M=0;M<W;M+=2)for(var N=0;N<W;N+=2)B.isPointInPath(V,M,N,"nonzero")&&(z=Math.min(z,M),Y=Math.min(Y,N),te=Math.max(te,M),q=Math.max(q,N));oe=te-z,k=q-Y;var A=10,re=Math.min(A/oe,A/k);F=[re,0,0,re,-Math.round(oe/2+z)*re,-Math.round(k/2+Y)*re]}return{type:"path",path:h,matrix:F}}function We(w){var h,F=1,V="#000000",$='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof w=="string"?h=w:(h=w.text,F="scalar"in w?w.scalar:F,$="fontFamily"in w?w.fontFamily:$,V="color"in w?w.color:V);var B=10*F,W=""+B+"px "+$,z=new OffscreenCanvas(B,B),Y=z.getContext("2d");Y.font=W;var te=Y.measureText(h),q=Math.ceil(te.actualBoundingBoxRight+te.actualBoundingBoxLeft),oe=Math.ceil(te.actualBoundingBoxAscent+te.actualBoundingBoxDescent),k=2,M=te.actualBoundingBoxLeft+k,N=te.actualBoundingBoxAscent+k;q+=k+k,oe+=k+k,z=new OffscreenCanvas(q,oe),Y=z.getContext("2d"),Y.font=W,Y.fillStyle=V,Y.fillText(h,M,N);var A=1/F;return{type:"bitmap",bitmap:z.transferToImageBitmap(),matrix:[A,0,0,A,-q*A/2,-oe*A/2]}}n.exports=function(){return ye().apply(this,arguments)},n.exports.reset=function(){ye().reset()},n.exports.create=J,n.exports.shapeFromPath=pe,n.exports.shapeFromText=We})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),fr,!1);const Bd=fr.exports;fr.exports.create;const Et=v.createContext(null),kn=({children:e})=>{const[t,n]=v.useState(0),[r,s]=v.useState(0),[i,o]=v.useState(0),[l,c]=v.useState(0),[u,d]=v.useState(!1),[f,p]=v.useState(!1),[E,x]=v.useState([]),[m,b]=v.useState([]),[g,y]=v.useState([]),[S,T]=v.useState(xt("showStatus")),[C,j]=v.useState("0"),[O,R]=v.useState(""),[P,L]=v.useState(!0),[H,se]=v.useState(!1),ee=v.useRef(null),J=v.useMemo(()=>({entries:E,entryDetailRef:ee,filteredEntries:g,filterStatus:S,filterString:O,filterType:C,isArticleFocused:H,loading:P,loadMoreUnreadVisible:f,loadMoreVisible:u,offset:i,setEntries:x,setFilteredEntries:y,setFilterStatus:T,setFilterString:R,setFilterType:j,setIsArticleFocused:se,setLoading:L,setLoadMoreUnreadVisible:p,setLoadMoreVisible:d,setOffset:o,setTotal:n,setUnreadCount:s,setUnreadEntries:b,setUnreadOffset:c,total:t,unreadCount:r,unreadEntries:m,unreadOffset:l}),[E,g,S,O,C,H,P,f,u,i,t,r,m,l]);return a.jsx(Et.Provider,{value:J,children:e})},Ti=()=>{const e=bt(yi),t=bt(jo),n=bt(Io),r=bt(Ao),s=Ae(b=>b.activeContent),i=Ae(b=>b.setActiveContent),{setEntries:o,setFilteredEntries:l,setUnreadCount:c,setUnreadEntries:u}=v.useContext(Et),d=(b,g)=>b.map(y=>y.id===g.id?g:y),f=(b,g)=>{const y=b.feed.id,S=gu(b.published_at);g==="read"?(e(C=>({...C,[y]:Math.max(0,C[y]-1)})),c(C=>Math.max(0,C-1)),n(C=>C+1),S&&t(C=>Math.max(0,C-1))):(e(C=>({...C,[y]:C[y]+1})),c(C=>C+1),n(C=>Math.max(0,C-1)),S&&t(C=>C+1));const T={...b,status:g};s&&i(T),o(C=>d(C,T)),u(C=>d(C,T)),l(C=>d(C,T))},p=(b,g)=>{g?(r(S=>S+1),Bd({particleCount:100,angle:120,spread:70,origin:{x:1,y:1}})):r(S=>Math.max(0,S-1));const y={...b,starred:g};s&&i(y),o(S=>d(S,y)),u(S=>d(S,y)),l(S=>d(S,y))};return{handleEntryStatusUpdate:f,handleFetchContent:async()=>{try{const b=await bu(s.id);ue.success("Fetched content successfully"),i({...s,content:b.data.content})}catch{ue.error("Failed to fetch content, please try again later")}},handleToggleStarred:async b=>{const g=!b.starred;p(b,g),yu(b.id).catch(()=>{ue.error(`Failed to ${g?"star":"unstar"} entry, please try again later`),p(b,!g)})},handleToggleStatus:async b=>{const g=b.status,y=g==="read"?"unread":"read";f(b,y),gi([b.id],y).catch(()=>{ue.error(`Failed to mark entry as ${y}, please try again later`),f(b,g)})}}},da=(e,t="start")=>{const n=document.querySelector(e);n&&n.scrollIntoView({behavior:"smooth",block:t})},_i=()=>{const e=he(Oe),{pageSize:t,showAllFeeds:n}=e,r=he(Jr),{entries:s,filterStatus:i,filterString:o,filterType:l,offset:c,setEntries:u,setFilteredEntries:d,setLoadMoreUnreadVisible:f,setLoadMoreVisible:p,setOffset:E,setUnreadEntries:x,setUnreadOffset:m,total:b,unreadCount:g,unreadEntries:y,unreadOffset:S}=v.useContext(Et),[T,C]=v.useState(!1),j=H=>{var me;const J=(me=new DOMParser().parseFromString(H.content,"text/html").querySelector("img"))==null?void 0:me.getAttribute("src");return{...H,imgSrc:J}},O=()=>{i==="all"?E(H=>H+t):m(H=>H+t)},R=H=>{const se=new Map([...(i==="all"?s:y).map(J=>[J.id,J]),...H.map(J=>[J.id,J])]),ee=Array.from(se.values());return i==="all"?(u(ee),p(ee.length<b)):(x(ee),f(ee.length<g)),ee},P=(H,se)=>{const ee=o?qo(H,l,i,o):H;return $r(ee,se,n,r)};return{parseFirstImage:j,handleLoadMore:async(H,se)=>{var ee;C(!0);try{let J;if(i==="all"?J=await se(c+t):J=await se(S+t,i),(ee=J==null?void 0:J.data)!=null&&ee.entries){O();const me=J.data.entries.map(j),ye=R(me),Ie=P(ye,H);d(Ie)}}catch(J){console.error("Error fetching more articles:",J)}C(!1)},loadingMore:T}},Xo=(e,t,n)=>{const{entryDetailRef:r,filteredEntries:s,filterStatus:i,loadMoreUnreadVisible:o,loadMoreVisible:l}=v.useContext(Et),c=Ae(O=>O.activeContent),u=Ae(O=>O.setActiveContent),{handleLoadMore:d}=_i(),[f,p]=v.useState(!1),[E,x]=v.useState(!1),{isMobileView:m}=ns();v.useEffect(()=>{const O=document.querySelector(".entry-list");!O||!m||(c?O.style.visibility="hidden":O.style.visibility="visible")},[c,m]),v.useEffect(()=>{E&&!f&&(y(e),x(!1))},[f,E]);const b=O=>{c&&(u(null),O.current&&(O.current.setAttribute("tabIndex","-1"),O.current.focus()),r.current&&r.current.scrollTo(0,0))},g=()=>{const O=s.findIndex(R=>R.id===(c==null?void 0:c.id));if(O>0){const R=s[O-1];t(R),da(".card-custom-selected-style","end")}},y=async O=>{if(f)return;const R=s.findIndex(L=>L.id===(c==null?void 0:c.id));if(R===s.length-1&&(i==="all"&&l||o)){try{p(!0),await d(O,n),x(!0)}catch{ue.error("Failed to load more articles, please try again later")}finally{p(!1)}return}if(R===-1){const L=document.querySelector(".entry-list");L&&L.scrollTo(0,0)}if(R<s.length-1){const L=s[R+1];t(L),x(!1),da(".card-custom-selected-style")}};return{handleEscapeKey:b,handleLeftKey:g,handleRightKey:y,handleBKey:()=>{c&&window.open(c.url,"_blank")},handleDKey:O=>{c&&O()},handleMKey:O=>{c&&O()},handleSKey:O=>{c&&O()}}};var Go={},ji={},Ai={};Object.defineProperty(Ai,"__esModule",{value:!0});var fa="html",ha="head",Er="body",$d=/<([a-zA-Z]+[0-9]?)/,ma=/<head[^]*>/i,pa=/<body[^]*>/i,zr=function(e,t){throw new Error("This browser does not support `document.implementation.createHTMLDocument`")},qs=function(e,t){throw new Error("This browser does not support `DOMParser.prototype.parseFromString`")},ga=typeof window=="object"&&window.DOMParser;if(typeof ga=="function"){var zd=new ga,Hd="text/html";qs=function(e,t){return t&&(e="<".concat(t,">").concat(e,"</").concat(t,">")),zd.parseFromString(e,Hd)},zr=qs}if(typeof document=="object"&&document.implementation){var Sr=document.implementation.createHTMLDocument();zr=function(e,t){if(t){var n=Sr.documentElement.querySelector(t);return n&&(n.innerHTML=e),Sr}return Sr.documentElement.innerHTML=e,Sr}}var Cr=typeof document=="object"&&document.createElement("template"),Xs;Cr&&Cr.content&&(Xs=function(e){return Cr.innerHTML=e,Cr.content.childNodes});function Wd(e){var t,n,r=e.match($d),s=r&&r[1]?r[1].toLowerCase():"";switch(s){case fa:{var i=qs(e);if(!ma.test(e)){var o=i.querySelector(ha);(t=o==null?void 0:o.parentNode)===null||t===void 0||t.removeChild(o)}if(!pa.test(e)){var o=i.querySelector(Er);(n=o==null?void 0:o.parentNode)===null||n===void 0||n.removeChild(o)}return i.querySelectorAll(fa)}case ha:case Er:{var l=zr(e).querySelectorAll(s);return pa.test(e)&&ma.test(e)?l[0].parentNode.childNodes:l}default:{if(Xs)return Xs(e);var o=zr(e,Er).querySelector(Er);return o.childNodes}}}Ai.default=Wd;var jn={},Yo={},hr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Doctype=e.CDATA=e.Tag=e.Style=e.Script=e.Comment=e.Directive=e.Text=e.Root=e.isTag=e.ElementType=void 0;var t;(function(r){r.Root="root",r.Text="text",r.Directive="directive",r.Comment="comment",r.Script="script",r.Style="style",r.Tag="tag",r.CDATA="cdata",r.Doctype="doctype"})(t=e.ElementType||(e.ElementType={}));function n(r){return r.type===t.Tag||r.type===t.Script||r.type===t.Style}e.isTag=n,e.Root=t.Root,e.Text=t.Text,e.Directive=t.Directive,e.Comment=t.Comment,e.Script=t.Script,e.Style=t.Style,e.Tag=t.Tag,e.CDATA=t.CDATA,e.Doctype=t.Doctype})(hr);var le={},Xt=ve&&ve.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),zn=ve&&ve.__assign||function(){return zn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},zn.apply(this,arguments)};Object.defineProperty(le,"__esModule",{value:!0});le.cloneNode=le.hasChildren=le.isDocument=le.isDirective=le.isComment=le.isText=le.isCDATA=le.isTag=le.Element=le.Document=le.CDATA=le.NodeWithChildren=le.ProcessingInstruction=le.Comment=le.Text=le.DataNode=le.Node=void 0;var Xe=hr,Ii=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(t){this.prev=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(t){this.next=t},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(t){return t===void 0&&(t=!1),Ri(this,t)},e}();le.Node=Ii;var rs=function(e){Xt(t,e);function t(n){var r=e.call(this)||this;return r.data=n,r}return Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(n){this.data=n},enumerable:!1,configurable:!0}),t}(Ii);le.DataNode=rs;var Ko=function(e){Xt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Xe.ElementType.Text,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(rs);le.Text=Ko;var Qo=function(e){Xt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Xe.ElementType.Comment,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(rs);le.Comment=Qo;var Zo=function(e){Xt(t,e);function t(n,r){var s=e.call(this,r)||this;return s.name=n,s.type=Xe.ElementType.Directive,s}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(rs);le.ProcessingInstruction=Zo;var ss=function(e){Xt(t,e);function t(n){var r=e.call(this)||this;return r.children=n,r}return Object.defineProperty(t.prototype,"firstChild",{get:function(){var n;return(n=this.children[0])!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(n){this.children=n},enumerable:!1,configurable:!0}),t}(Ii);le.NodeWithChildren=ss;var Jo=function(e){Xt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Xe.ElementType.CDATA,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(ss);le.CDATA=Jo;var el=function(e){Xt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Xe.ElementType.Root,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(ss);le.Document=el;var tl=function(e){Xt(t,e);function t(n,r,s,i){s===void 0&&(s=[]),i===void 0&&(i=n==="script"?Xe.ElementType.Script:n==="style"?Xe.ElementType.Style:Xe.ElementType.Tag);var o=e.call(this,s)||this;return o.name=n,o.attribs=r,o.type=i,o}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(n){this.name=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var n=this;return Object.keys(this.attribs).map(function(r){var s,i;return{name:r,value:n.attribs[r],namespace:(s=n["x-attribsNamespace"])===null||s===void 0?void 0:s[r],prefix:(i=n["x-attribsPrefix"])===null||i===void 0?void 0:i[r]}})},enumerable:!1,configurable:!0}),t}(ss);le.Element=tl;function nl(e){return(0,Xe.isTag)(e)}le.isTag=nl;function rl(e){return e.type===Xe.ElementType.CDATA}le.isCDATA=rl;function sl(e){return e.type===Xe.ElementType.Text}le.isText=sl;function il(e){return e.type===Xe.ElementType.Comment}le.isComment=il;function al(e){return e.type===Xe.ElementType.Directive}le.isDirective=al;function ol(e){return e.type===Xe.ElementType.Root}le.isDocument=ol;function qd(e){return Object.prototype.hasOwnProperty.call(e,"children")}le.hasChildren=qd;function Ri(e,t){t===void 0&&(t=!1);var n;if(sl(e))n=new Ko(e.data);else if(il(e))n=new Qo(e.data);else if(nl(e)){var r=t?js(e.children):[],s=new tl(e.name,zn({},e.attribs),r);r.forEach(function(c){return c.parent=s}),e.namespace!=null&&(s.namespace=e.namespace),e["x-attribsNamespace"]&&(s["x-attribsNamespace"]=zn({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(s["x-attribsPrefix"]=zn({},e["x-attribsPrefix"])),n=s}else if(rl(e)){var r=t?js(e.children):[],i=new Jo(r);r.forEach(function(u){return u.parent=i}),n=i}else if(ol(e)){var r=t?js(e.children):[],o=new el(r);r.forEach(function(u){return u.parent=o}),e["x-mode"]&&(o["x-mode"]=e["x-mode"]),n=o}else if(al(e)){var l=new Zo(e.name,e.data);e["x-name"]!=null&&(l["x-name"]=e["x-name"],l["x-publicId"]=e["x-publicId"],l["x-systemId"]=e["x-systemId"]),n=l}else throw new Error("Not implemented yet: ".concat(e.type));return n.startIndex=e.startIndex,n.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(n.sourceCodeLocation=e.sourceCodeLocation),n}le.cloneNode=Ri;function js(e){for(var t=e.map(function(r){return Ri(r,!0)}),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}(function(e){var t=ve&&ve.__createBinding||(Object.create?function(l,c,u,d){d===void 0&&(d=u);var f=Object.getOwnPropertyDescriptor(c,u);(!f||("get"in f?!c.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(l,d,f)}:function(l,c,u,d){d===void 0&&(d=u),l[d]=c[u]}),n=ve&&ve.__exportStar||function(l,c){for(var u in l)u!=="default"&&!Object.prototype.hasOwnProperty.call(c,u)&&t(c,l,u)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var r=hr,s=le;n(le,e);var i={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},o=function(){function l(c,u,d){this.dom=[],this.root=new s.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof u=="function"&&(d=u,u=i),typeof c=="object"&&(u=c,c=void 0),this.callback=c??null,this.options=u??i,this.elementCB=d??null}return l.prototype.onparserinit=function(c){this.parser=c},l.prototype.onreset=function(){this.dom=[],this.root=new s.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},l.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},l.prototype.onerror=function(c){this.handleCallback(c)},l.prototype.onclosetag=function(){this.lastNode=null;var c=this.tagStack.pop();this.options.withEndIndices&&(c.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(c)},l.prototype.onopentag=function(c,u){var d=this.options.xmlMode?r.ElementType.Tag:void 0,f=new s.Element(c,u,void 0,d);this.addNode(f),this.tagStack.push(f)},l.prototype.ontext=function(c){var u=this.lastNode;if(u&&u.type===r.ElementType.Text)u.data+=c,this.options.withEndIndices&&(u.endIndex=this.parser.endIndex);else{var d=new s.Text(c);this.addNode(d),this.lastNode=d}},l.prototype.oncomment=function(c){if(this.lastNode&&this.lastNode.type===r.ElementType.Comment){this.lastNode.data+=c;return}var u=new s.Comment(c);this.addNode(u),this.lastNode=u},l.prototype.oncommentend=function(){this.lastNode=null},l.prototype.oncdatastart=function(){var c=new s.Text(""),u=new s.CDATA([c]);this.addNode(u),c.parent=u,this.lastNode=c},l.prototype.oncdataend=function(){this.lastNode=null},l.prototype.onprocessinginstruction=function(c,u){var d=new s.ProcessingInstruction(c,u);this.addNode(d)},l.prototype.handleCallback=function(c){if(typeof this.callback=="function")this.callback(c,this.dom);else if(c)throw c},l.prototype.addNode=function(c){var u=this.tagStack[this.tagStack.length-1],d=u.children[u.children.length-1];this.options.withStartIndices&&(c.startIndex=this.parser.startIndex),this.options.withEndIndices&&(c.endIndex=this.parser.endIndex),u.children.push(c),d&&(c.prev=d,d.next=c),c.parent=u,this.lastNode=null},l}();e.DomHandler=o,e.default=o})(Yo);var ll={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CASE_SENSITIVE_TAG_NAMES_MAP=e.CASE_SENSITIVE_TAG_NAMES=void 0,e.CASE_SENSITIVE_TAG_NAMES=["animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","linearGradient","radialGradient","textPath"],e.CASE_SENSITIVE_TAG_NAMES_MAP=e.CASE_SENSITIVE_TAG_NAMES.reduce(function(t,n){return t[n.toLowerCase()]=n,t},{})})(ll);Object.defineProperty(jn,"__esModule",{value:!0});jn.formatDOM=jn.formatAttributes=void 0;var Tr=Yo,Xd=ll;function Gd(e){return Xd.CASE_SENSITIVE_TAG_NAMES_MAP[e]}function cl(e){for(var t={},n=0,r=e.length;n<r;n++){var s=e[n];t[s.name]=s.value}return t}jn.formatAttributes=cl;function Yd(e){e=e.toLowerCase();var t=Gd(e);return t||e}function ul(e,t,n){t===void 0&&(t=null);for(var r=[],s,i=0,o=e.length;i<o;i++){var l=e[i];switch(l.nodeType){case 1:{var c=Yd(l.nodeName);s=new Tr.Element(c,cl(l.attributes)),s.children=ul(c==="template"?l.content.childNodes:l.childNodes,s);break}case 3:s=new Tr.Text(l.nodeValue);break;case 8:s=new Tr.Comment(l.nodeValue);break;default:continue}var u=r[i-1]||null;u&&(u.next=s),s.parent=t,s.prev=u,s.next=null,r.push(s)}return n&&(s=new Tr.ProcessingInstruction(n.substring(0,n.indexOf(" ")).toLowerCase(),n),s.next=r[0]||null,s.parent=t,r.unshift(s),r[1]&&(r[1].prev=r[0])),r}jn.formatDOM=ul;var Kd=ve&&ve.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ji,"__esModule",{value:!0});var Qd=Kd(Ai),Zd=jn,Jd=/<(![a-zA-Z\s]+)>/;function ef(e){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];var t=e.match(Jd),n=t?t[1]:void 0;return(0,Zd.formatDOM)((0,Qd.default)(e),null,n)}ji.default=ef;var is={},ft={},as={},tf=0;as.SAME=tf;var nf=1;as.CAMELCASE=nf;as.possibleStandardNames={accept:0,acceptCharset:1,"accept-charset":"acceptCharset",accessKey:1,action:0,allowFullScreen:1,alt:0,as:0,async:0,autoCapitalize:1,autoComplete:1,autoCorrect:1,autoFocus:1,autoPlay:1,autoSave:1,capture:0,cellPadding:1,cellSpacing:1,challenge:0,charSet:1,checked:0,children:0,cite:0,class:"className",classID:1,className:1,cols:0,colSpan:1,content:0,contentEditable:1,contextMenu:1,controls:0,controlsList:1,coords:0,crossOrigin:1,dangerouslySetInnerHTML:1,data:0,dateTime:1,default:0,defaultChecked:1,defaultValue:1,defer:0,dir:0,disabled:0,disablePictureInPicture:1,disableRemotePlayback:1,download:0,draggable:0,encType:1,enterKeyHint:1,for:"htmlFor",form:0,formMethod:1,formAction:1,formEncType:1,formNoValidate:1,formTarget:1,frameBorder:1,headers:0,height:0,hidden:0,high:0,href:0,hrefLang:1,htmlFor:1,httpEquiv:1,"http-equiv":"httpEquiv",icon:0,id:0,innerHTML:1,inputMode:1,integrity:0,is:0,itemID:1,itemProp:1,itemRef:1,itemScope:1,itemType:1,keyParams:1,keyType:1,kind:0,label:0,lang:0,list:0,loop:0,low:0,manifest:0,marginWidth:1,marginHeight:1,max:0,maxLength:1,media:0,mediaGroup:1,method:0,min:0,minLength:1,multiple:0,muted:0,name:0,noModule:1,nonce:0,noValidate:1,open:0,optimum:0,pattern:0,placeholder:0,playsInline:1,poster:0,preload:0,profile:0,radioGroup:1,readOnly:1,referrerPolicy:1,rel:0,required:0,reversed:0,role:0,rows:0,rowSpan:1,sandbox:0,scope:0,scoped:0,scrolling:0,seamless:0,selected:0,shape:0,size:0,sizes:0,span:0,spellCheck:1,src:0,srcDoc:1,srcLang:1,srcSet:1,start:0,step:0,style:0,summary:0,tabIndex:1,target:0,title:0,type:0,useMap:1,value:0,width:0,wmode:0,wrap:0,about:0,accentHeight:1,"accent-height":"accentHeight",accumulate:0,additive:0,alignmentBaseline:1,"alignment-baseline":"alignmentBaseline",allowReorder:1,alphabetic:0,amplitude:0,arabicForm:1,"arabic-form":"arabicForm",ascent:0,attributeName:1,attributeType:1,autoReverse:1,azimuth:0,baseFrequency:1,baselineShift:1,"baseline-shift":"baselineShift",baseProfile:1,bbox:0,begin:0,bias:0,by:0,calcMode:1,capHeight:1,"cap-height":"capHeight",clip:0,clipPath:1,"clip-path":"clipPath",clipPathUnits:1,clipRule:1,"clip-rule":"clipRule",color:0,colorInterpolation:1,"color-interpolation":"colorInterpolation",colorInterpolationFilters:1,"color-interpolation-filters":"colorInterpolationFilters",colorProfile:1,"color-profile":"colorProfile",colorRendering:1,"color-rendering":"colorRendering",contentScriptType:1,contentStyleType:1,cursor:0,cx:0,cy:0,d:0,datatype:0,decelerate:0,descent:0,diffuseConstant:1,direction:0,display:0,divisor:0,dominantBaseline:1,"dominant-baseline":"dominantBaseline",dur:0,dx:0,dy:0,edgeMode:1,elevation:0,enableBackground:1,"enable-background":"enableBackground",end:0,exponent:0,externalResourcesRequired:1,fill:0,fillOpacity:1,"fill-opacity":"fillOpacity",fillRule:1,"fill-rule":"fillRule",filter:0,filterRes:1,filterUnits:1,floodOpacity:1,"flood-opacity":"floodOpacity",floodColor:1,"flood-color":"floodColor",focusable:0,fontFamily:1,"font-family":"fontFamily",fontSize:1,"font-size":"fontSize",fontSizeAdjust:1,"font-size-adjust":"fontSizeAdjust",fontStretch:1,"font-stretch":"fontStretch",fontStyle:1,"font-style":"fontStyle",fontVariant:1,"font-variant":"fontVariant",fontWeight:1,"font-weight":"fontWeight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:1,"glyph-name":"glyphName",glyphOrientationHorizontal:1,"glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphOrientationVertical:1,"glyph-orientation-vertical":"glyphOrientationVertical",glyphRef:1,gradientTransform:1,gradientUnits:1,hanging:0,horizAdvX:1,"horiz-adv-x":"horizAdvX",horizOriginX:1,"horiz-origin-x":"horizOriginX",ideographic:0,imageRendering:1,"image-rendering":"imageRendering",in2:0,in:0,inlist:0,intercept:0,k1:0,k2:0,k3:0,k4:0,k:0,kernelMatrix:1,kernelUnitLength:1,kerning:0,keyPoints:1,keySplines:1,keyTimes:1,lengthAdjust:1,letterSpacing:1,"letter-spacing":"letterSpacing",lightingColor:1,"lighting-color":"lightingColor",limitingConeAngle:1,local:0,markerEnd:1,"marker-end":"markerEnd",markerHeight:1,markerMid:1,"marker-mid":"markerMid",markerStart:1,"marker-start":"markerStart",markerUnits:1,markerWidth:1,mask:0,maskContentUnits:1,maskUnits:1,mathematical:0,mode:0,numOctaves:1,offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:1,"overline-position":"overlinePosition",overlineThickness:1,"overline-thickness":"overlineThickness",paintOrder:1,"paint-order":"paintOrder",panose1:0,"panose-1":"panose1",pathLength:1,patternContentUnits:1,patternTransform:1,patternUnits:1,pointerEvents:1,"pointer-events":"pointerEvents",points:0,pointsAtX:1,pointsAtY:1,pointsAtZ:1,prefix:0,preserveAlpha:1,preserveAspectRatio:1,primitiveUnits:1,property:0,r:0,radius:0,refX:1,refY:1,renderingIntent:1,"rendering-intent":"renderingIntent",repeatCount:1,repeatDur:1,requiredExtensions:1,requiredFeatures:1,resource:0,restart:0,result:0,results:0,rotate:0,rx:0,ry:0,scale:0,security:0,seed:0,shapeRendering:1,"shape-rendering":"shapeRendering",slope:0,spacing:0,specularConstant:1,specularExponent:1,speed:0,spreadMethod:1,startOffset:1,stdDeviation:1,stemh:0,stemv:0,stitchTiles:1,stopColor:1,"stop-color":"stopColor",stopOpacity:1,"stop-opacity":"stopOpacity",strikethroughPosition:1,"strikethrough-position":"strikethroughPosition",strikethroughThickness:1,"strikethrough-thickness":"strikethroughThickness",string:0,stroke:0,strokeDasharray:1,"stroke-dasharray":"strokeDasharray",strokeDashoffset:1,"stroke-dashoffset":"strokeDashoffset",strokeLinecap:1,"stroke-linecap":"strokeLinecap",strokeLinejoin:1,"stroke-linejoin":"strokeLinejoin",strokeMiterlimit:1,"stroke-miterlimit":"strokeMiterlimit",strokeWidth:1,"stroke-width":"strokeWidth",strokeOpacity:1,"stroke-opacity":"strokeOpacity",suppressContentEditableWarning:1,suppressHydrationWarning:1,surfaceScale:1,systemLanguage:1,tableValues:1,targetX:1,targetY:1,textAnchor:1,"text-anchor":"textAnchor",textDecoration:1,"text-decoration":"textDecoration",textLength:1,textRendering:1,"text-rendering":"textRendering",to:0,transform:0,typeof:0,u1:0,u2:0,underlinePosition:1,"underline-position":"underlinePosition",underlineThickness:1,"underline-thickness":"underlineThickness",unicode:0,unicodeBidi:1,"unicode-bidi":"unicodeBidi",unicodeRange:1,"unicode-range":"unicodeRange",unitsPerEm:1,"units-per-em":"unitsPerEm",unselectable:0,vAlphabetic:1,"v-alphabetic":"vAlphabetic",values:0,vectorEffect:1,"vector-effect":"vectorEffect",version:0,vertAdvY:1,"vert-adv-y":"vertAdvY",vertOriginX:1,"vert-origin-x":"vertOriginX",vertOriginY:1,"vert-origin-y":"vertOriginY",vHanging:1,"v-hanging":"vHanging",vIdeographic:1,"v-ideographic":"vIdeographic",viewBox:1,viewTarget:1,visibility:0,vMathematical:1,"v-mathematical":"vMathematical",vocab:0,widths:0,wordSpacing:1,"word-spacing":"wordSpacing",writingMode:1,"writing-mode":"writingMode",x1:0,x2:0,x:0,xChannelSelector:1,xHeight:1,"x-height":"xHeight",xlinkActuate:1,"xlink:actuate":"xlinkActuate",xlinkArcrole:1,"xlink:arcrole":"xlinkArcrole",xlinkHref:1,"xlink:href":"xlinkHref",xlinkRole:1,"xlink:role":"xlinkRole",xlinkShow:1,"xlink:show":"xlinkShow",xlinkTitle:1,"xlink:title":"xlinkTitle",xlinkType:1,"xlink:type":"xlinkType",xmlBase:1,"xml:base":"xmlBase",xmlLang:1,"xml:lang":"xmlLang",xmlns:0,"xml:space":"xmlSpace",xmlnsXlink:1,"xmlns:xlink":"xmlnsXlink",xmlSpace:1,y1:0,y2:0,y:0,yChannelSelector:1,z:0,zoomAndPan:1};const dl=0,Gt=1,os=2,ls=3,ki=4,fl=5,hl=6;function rf(e){return Fe.hasOwnProperty(e)?Fe[e]:null}function He(e,t,n,r,s,i,o){this.acceptsBooleans=t===os||t===ls||t===ki,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}const Fe={},sf=["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"];sf.forEach(e=>{Fe[e]=new He(e,dl,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(([e,t])=>{Fe[e]=new He(e,Gt,!1,t,null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(e=>{Fe[e]=new He(e,os,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(e=>{Fe[e]=new He(e,os,!1,e,null,!1,!1)});["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(e=>{Fe[e]=new He(e,ls,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(e=>{Fe[e]=new He(e,ls,!0,e,null,!1,!1)});["capture","download"].forEach(e=>{Fe[e]=new He(e,ki,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(e=>{Fe[e]=new He(e,hl,!1,e,null,!1,!1)});["rowSpan","start"].forEach(e=>{Fe[e]=new He(e,fl,!1,e.toLowerCase(),null,!1,!1)});const Oi=/[\-\:]([a-z])/g,Mi=e=>e[1].toUpperCase();["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(e=>{const t=e.replace(Oi,Mi);Fe[t]=new He(t,Gt,!1,e,null,!1,!1)});["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(e=>{const t=e.replace(Oi,Mi);Fe[t]=new He(t,Gt,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(e=>{const t=e.replace(Oi,Mi);Fe[t]=new He(t,Gt,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(e=>{Fe[e]=new He(e,Gt,!1,e.toLowerCase(),null,!1,!1)});const af="xlinkHref";Fe[af]=new He("xlinkHref",Gt,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(e=>{Fe[e]=new He(e,Gt,!1,e.toLowerCase(),null,!0,!0)});const{CAMELCASE:of,SAME:lf,possibleStandardNames:va}=as,cf=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",uf=cf+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",df=RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+uf+"]*$")),ff=Object.keys(va).reduce((e,t)=>{const n=va[t];return n===lf?e[t]=t:n===of?e[t.toLowerCase()]=t:e[t]=n,e},{});ft.BOOLEAN=ls;ft.BOOLEANISH_STRING=os;ft.NUMERIC=fl;ft.OVERLOADED_BOOLEAN=ki;ft.POSITIVE_NUMERIC=hl;ft.RESERVED=dl;ft.STRING=Gt;ft.getPropertyInfo=rf;ft.isCustomAttribute=df;ft.possibleStandardNames=ff;var Pi={},Ni={},ya=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,hf=/\n/g,mf=/^\s*/,pf=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,gf=/^:\s*/,vf=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,yf=/^[;\s]*/,bf=/^\s+|\s+$/g,xf=`
`,ba="/",xa="*",rn="",wf="comment",Ef="declaration",Sf=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function s(x){var m=x.match(hf);m&&(n+=m.length);var b=x.lastIndexOf(xf);r=~b?x.length-b:r+x.length}function i(){var x={line:n,column:r};return function(m){return m.position=new o(x),u(),m}}function o(x){this.start=x,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function l(x){var m=new Error(t.source+":"+n+":"+r+": "+x);if(m.reason=x,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function c(x){var m=x.exec(e);if(m){var b=m[0];return s(b),e=e.slice(b.length),m}}function u(){c(mf)}function d(x){var m;for(x=x||[];m=f();)m!==!1&&x.push(m);return x}function f(){var x=i();if(!(ba!=e.charAt(0)||xa!=e.charAt(1))){for(var m=2;rn!=e.charAt(m)&&(xa!=e.charAt(m)||ba!=e.charAt(m+1));)++m;if(m+=2,rn===e.charAt(m-1))return l("End of comment missing");var b=e.slice(2,m-2);return r+=2,s(b),e=e.slice(m),r+=2,x({type:wf,comment:b})}}function p(){var x=i(),m=c(pf);if(m){if(f(),!c(gf))return l("property missing ':'");var b=c(vf),g=x({type:Ef,property:wa(m[0].replace(ya,rn)),value:b?wa(b[0].replace(ya,rn)):rn});return c(yf),g}}function E(){var x=[];d(x);for(var m;m=p();)m!==!1&&(x.push(m),d(x));return x}return u(),E()};function wa(e){return e?e.replace(bf,rn):rn}var Cf=ve&&ve.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ni,"__esModule",{value:!0});var Tf=Cf(Sf);function _f(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,Tf.default)(e),s=typeof t=="function";return r.forEach(function(i){if(i.type==="declaration"){var o=i.property,l=i.value;s?t(o,l,i):l&&(n=n||{},n[o]=l)}}),n}Ni.default=_f;var cs={};Object.defineProperty(cs,"__esModule",{value:!0});cs.camelCase=void 0;var jf=/^--[a-zA-Z0-9-]+$/,Af=/-([a-z])/g,If=/^[^-]+$/,Rf=/^-(webkit|moz|ms|o|khtml)-/,kf=/^-(ms)-/,Of=function(e){return!e||If.test(e)||jf.test(e)},Mf=function(e,t){return t.toUpperCase()},Ea=function(e,t){return"".concat(t,"-")},Pf=function(e,t){return t===void 0&&(t={}),Of(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(kf,Ea):e=e.replace(Rf,Ea),e.replace(Af,Mf))};cs.camelCase=Pf;var Nf=ve&&ve.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Ff=Nf(Ni),Df=cs;function Gs(e,t){var n={};return!e||typeof e!="string"||(0,Ff.default)(e,function(r,s){r&&s&&(n[(0,Df.camelCase)(r,t)]=s)}),n}Gs.default=Gs;var Lf=Gs;(function(e){var t=ve&&ve.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0}),e.returnFirstArg=e.canTextBeChildOfNode=e.ELEMENTS_WITH_NO_TEXT_CHILDREN=e.PRESERVE_CUSTOM_ATTRIBUTES=e.setStyleProp=e.isCustomComponent=void 0;var n=v,r=t(Lf),s=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);function i(d,f){return d.includes("-")?!s.has(d):!!(f&&typeof f.is=="string")}e.isCustomComponent=i;var o={reactCompat:!0};function l(d,f){if(typeof d=="string"){if(!d.trim()){f.style={};return}try{f.style=(0,r.default)(d,o)}catch{f.style={}}}}e.setStyleProp=l,e.PRESERVE_CUSTOM_ATTRIBUTES=Number(n.version.split(".")[0])>=16,e.ELEMENTS_WITH_NO_TEXT_CHILDREN=new Set(["tr","tbody","thead","tfoot","colgroup","table","head","html","frameset"]);var c=function(d){return!e.ELEMENTS_WITH_NO_TEXT_CHILDREN.has(d.name)};e.canTextBeChildOfNode=c;var u=function(d){return d};e.returnFirstArg=u})(Pi);Object.defineProperty(is,"__esModule",{value:!0});var Bn=ft,Sa=Pi,Vf=["checked","value"],Uf=["input","select","textarea"],Bf={reset:!0,submit:!0};function $f(e,t){e===void 0&&(e={});var n={},r=!!(e.type&&Bf[e.type]);for(var s in e){var i=e[s];if((0,Bn.isCustomAttribute)(s)){n[s]=i;continue}var o=s.toLowerCase(),l=Ca(o);if(l){var c=(0,Bn.getPropertyInfo)(l);switch(Vf.includes(l)&&Uf.includes(t)&&!r&&(l=Ca("default"+o)),n[l]=i,c&&c.type){case Bn.BOOLEAN:n[l]=!0;break;case Bn.OVERLOADED_BOOLEAN:i===""&&(n[l]=!0);break}continue}Sa.PRESERVE_CUSTOM_ATTRIBUTES&&(n[s]=i)}return(0,Sa.setStyleProp)(e.style,n),n}is.default=$f;function Ca(e){return Bn.possibleStandardNames[e]}var Fi={},zf=ve&&ve.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fi,"__esModule",{value:!0});var As=v,Hf=zf(is),Hn=Pi,Wf={cloneElement:As.cloneElement,createElement:As.createElement,isValidElement:As.isValidElement};function ml(e,t){t===void 0&&(t={});for(var n=[],r=typeof t.replace=="function",s=t.transform||Hn.returnFirstArg,i=t.library||Wf,o=i.cloneElement,l=i.createElement,c=i.isValidElement,u=e.length,d=0;d<u;d++){var f=e[d];if(r){var p=t.replace(f,d);if(c(p)){u>1&&(p=o(p,{key:p.key||d})),n.push(s(p,f,d));continue}}if(f.type==="text"){var E=!f.data.trim().length;if(E&&f.parent&&!(0,Hn.canTextBeChildOfNode)(f.parent)||t.trim&&E)continue;n.push(s(f.data,f,d));continue}var x=f,m={};qf(x)?((0,Hn.setStyleProp)(x.attribs.style,x.attribs),m=x.attribs):x.attribs&&(m=(0,Hf.default)(x.attribs,x.name));var b=void 0;switch(f.type){case"script":case"style":f.children[0]&&(m.dangerouslySetInnerHTML={__html:f.children[0].data});break;case"tag":f.name==="textarea"&&f.children[0]?m.defaultValue=f.children[0].data:f.children&&f.children.length&&(b=ml(f.children,t));break;default:continue}u>1&&(m.key=d),n.push(s(l(f.name,m,b),f,d))}return n.length===1?n[0]:n}Fi.default=ml;function qf(e){return Hn.PRESERVE_CUSTOM_ATTRIBUTES&&e.type==="tag"&&(0,Hn.isCustomComponent)(e.name,e.attribs)}var pl={},ce={},Yt=ve&&ve.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wn=ve&&ve.__assign||function(){return Wn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Wn.apply(this,arguments)};Object.defineProperty(ce,"__esModule",{value:!0});ce.cloneNode=ce.hasChildren=ce.isDocument=ce.isDirective=ce.isComment=ce.isText=ce.isCDATA=ce.isTag=ce.Element=ce.Document=ce.CDATA=ce.NodeWithChildren=ce.ProcessingInstruction=ce.Comment=ce.Text=ce.DataNode=ce.Node=void 0;var Ge=hr,Di=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(t){this.prev=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(t){this.next=t},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(t){return t===void 0&&(t=!1),Li(this,t)},e}();ce.Node=Di;var us=function(e){Yt(t,e);function t(n){var r=e.call(this)||this;return r.data=n,r}return Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(n){this.data=n},enumerable:!1,configurable:!0}),t}(Di);ce.DataNode=us;var gl=function(e){Yt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Ge.ElementType.Text,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(us);ce.Text=gl;var vl=function(e){Yt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Ge.ElementType.Comment,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(us);ce.Comment=vl;var yl=function(e){Yt(t,e);function t(n,r){var s=e.call(this,r)||this;return s.name=n,s.type=Ge.ElementType.Directive,s}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(us);ce.ProcessingInstruction=yl;var ds=function(e){Yt(t,e);function t(n){var r=e.call(this)||this;return r.children=n,r}return Object.defineProperty(t.prototype,"firstChild",{get:function(){var n;return(n=this.children[0])!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(n){this.children=n},enumerable:!1,configurable:!0}),t}(Di);ce.NodeWithChildren=ds;var bl=function(e){Yt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Ge.ElementType.CDATA,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(ds);ce.CDATA=bl;var xl=function(e){Yt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Ge.ElementType.Root,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(ds);ce.Document=xl;var wl=function(e){Yt(t,e);function t(n,r,s,i){s===void 0&&(s=[]),i===void 0&&(i=n==="script"?Ge.ElementType.Script:n==="style"?Ge.ElementType.Style:Ge.ElementType.Tag);var o=e.call(this,s)||this;return o.name=n,o.attribs=r,o.type=i,o}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(n){this.name=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var n=this;return Object.keys(this.attribs).map(function(r){var s,i;return{name:r,value:n.attribs[r],namespace:(s=n["x-attribsNamespace"])===null||s===void 0?void 0:s[r],prefix:(i=n["x-attribsPrefix"])===null||i===void 0?void 0:i[r]}})},enumerable:!1,configurable:!0}),t}(ds);ce.Element=wl;function El(e){return(0,Ge.isTag)(e)}ce.isTag=El;function Sl(e){return e.type===Ge.ElementType.CDATA}ce.isCDATA=Sl;function Cl(e){return e.type===Ge.ElementType.Text}ce.isText=Cl;function Tl(e){return e.type===Ge.ElementType.Comment}ce.isComment=Tl;function _l(e){return e.type===Ge.ElementType.Directive}ce.isDirective=_l;function jl(e){return e.type===Ge.ElementType.Root}ce.isDocument=jl;function Xf(e){return Object.prototype.hasOwnProperty.call(e,"children")}ce.hasChildren=Xf;function Li(e,t){t===void 0&&(t=!1);var n;if(Cl(e))n=new gl(e.data);else if(Tl(e))n=new vl(e.data);else if(El(e)){var r=t?Is(e.children):[],s=new wl(e.name,Wn({},e.attribs),r);r.forEach(function(c){return c.parent=s}),e.namespace!=null&&(s.namespace=e.namespace),e["x-attribsNamespace"]&&(s["x-attribsNamespace"]=Wn({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(s["x-attribsPrefix"]=Wn({},e["x-attribsPrefix"])),n=s}else if(Sl(e)){var r=t?Is(e.children):[],i=new bl(r);r.forEach(function(u){return u.parent=i}),n=i}else if(jl(e)){var r=t?Is(e.children):[],o=new xl(r);r.forEach(function(u){return u.parent=o}),e["x-mode"]&&(o["x-mode"]=e["x-mode"]),n=o}else if(_l(e)){var l=new yl(e.name,e.data);e["x-name"]!=null&&(l["x-name"]=e["x-name"],l["x-publicId"]=e["x-publicId"],l["x-systemId"]=e["x-systemId"]),n=l}else throw new Error("Not implemented yet: ".concat(e.type));return n.startIndex=e.startIndex,n.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(n.sourceCodeLocation=e.sourceCodeLocation),n}ce.cloneNode=Li;function Is(e){for(var t=e.map(function(r){return Li(r,!0)}),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}(function(e){var t=ve&&ve.__createBinding||(Object.create?function(l,c,u,d){d===void 0&&(d=u);var f=Object.getOwnPropertyDescriptor(c,u);(!f||("get"in f?!c.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(l,d,f)}:function(l,c,u,d){d===void 0&&(d=u),l[d]=c[u]}),n=ve&&ve.__exportStar||function(l,c){for(var u in l)u!=="default"&&!Object.prototype.hasOwnProperty.call(c,u)&&t(c,l,u)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var r=hr,s=ce;n(ce,e);var i={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},o=function(){function l(c,u,d){this.dom=[],this.root=new s.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof u=="function"&&(d=u,u=i),typeof c=="object"&&(u=c,c=void 0),this.callback=c??null,this.options=u??i,this.elementCB=d??null}return l.prototype.onparserinit=function(c){this.parser=c},l.prototype.onreset=function(){this.dom=[],this.root=new s.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},l.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},l.prototype.onerror=function(c){this.handleCallback(c)},l.prototype.onclosetag=function(){this.lastNode=null;var c=this.tagStack.pop();this.options.withEndIndices&&(c.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(c)},l.prototype.onopentag=function(c,u){var d=this.options.xmlMode?r.ElementType.Tag:void 0,f=new s.Element(c,u,void 0,d);this.addNode(f),this.tagStack.push(f)},l.prototype.ontext=function(c){var u=this.lastNode;if(u&&u.type===r.ElementType.Text)u.data+=c,this.options.withEndIndices&&(u.endIndex=this.parser.endIndex);else{var d=new s.Text(c);this.addNode(d),this.lastNode=d}},l.prototype.oncomment=function(c){if(this.lastNode&&this.lastNode.type===r.ElementType.Comment){this.lastNode.data+=c;return}var u=new s.Comment(c);this.addNode(u),this.lastNode=u},l.prototype.oncommentend=function(){this.lastNode=null},l.prototype.oncdatastart=function(){var c=new s.Text(""),u=new s.CDATA([c]);this.addNode(u),c.parent=u,this.lastNode=c},l.prototype.oncdataend=function(){this.lastNode=null},l.prototype.onprocessinginstruction=function(c,u){var d=new s.ProcessingInstruction(c,u);this.addNode(d)},l.prototype.handleCallback=function(c){if(typeof this.callback=="function")this.callback(c,this.dom);else if(c)throw c},l.prototype.addNode=function(c){var u=this.tagStack[this.tagStack.length-1],d=u.children[u.children.length-1];this.options.withStartIndices&&(c.startIndex=this.parser.startIndex),this.options.withEndIndices&&(c.endIndex=this.parser.endIndex),u.children.push(c),d&&(c.prev=d,d.next=c),c.parent=u,this.lastNode=null},l}();e.DomHandler=o,e.default=o})(pl);(function(e){var t=ve&&ve.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0}),e.htmlToDOM=e.domToReact=e.attributesToProps=e.Text=e.ProcessingInstruction=e.Element=e.Comment=void 0;var n=t(ji);e.htmlToDOM=n.default;var r=t(is);e.attributesToProps=r.default;var s=t(Fi);e.domToReact=s.default;var i=pl;Object.defineProperty(e,"Comment",{enumerable:!0,get:function(){return i.Comment}}),Object.defineProperty(e,"Element",{enumerable:!0,get:function(){return i.Element}}),Object.defineProperty(e,"ProcessingInstruction",{enumerable:!0,get:function(){return i.ProcessingInstruction}}),Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return i.Text}});var o={lowerCaseAttributeNames:!1};function l(c,u){if(typeof c!="string")throw new TypeError("First argument must be a string");return c?(0,s.default)((0,n.default)(c,(u==null?void 0:u.htmlparser2)||o),u):[]}e.default=l})(Go);const Ta=di(Go),Gf=Ta.default||Ta;function Le(){return Le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Le.apply(this,arguments)}function Vi(e,t){if(e==null)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(s[n]=e[n]);return s}function Pr(e){var t=v.useRef({fn:e,curr:void 0}).current;if(t.fn=e,!t.curr){var n=Object.create(null);Object.keys(e).forEach(function(r){n[r]=function(){var s;return(s=t.fn[r]).call.apply(s,[t.fn].concat([].slice.call(arguments)))}}),t.curr=n}return t.curr}function Ys(e){return v.useReducer(function(t,n){return Le({},t,typeof n=="function"?n(t):n)},e)}v.createContext(void 0);var kt=typeof window<"u"&&"ontouchstart"in window,Ks=function(e,t,n){return Math.max(Math.min(e,n),t)},_r=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=0),Ks(e,1*(1-n),Math.max(6,t)*(1+n))},Qs=typeof window>"u"||/ServerSideRendering/.test(navigator&&navigator.userAgent)?v.useEffect:v.useLayoutEffect;function wn(e,t,n){var r=v.useRef(t);r.current=t,v.useEffect(function(){function s(i){r.current(i)}return e&&window.addEventListener(e,s,n),function(){e&&window.removeEventListener(e,s)}},[e])}var Yf=["container"];function Kf(e){var t=e.container,n=t===void 0?document.body:t,r=Vi(e,Yf);return ho.createPortal(ae.createElement("div",Le({},r)),n)}function Qf(e){return ae.createElement("svg",Le({width:"44",height:"44",viewBox:"0 0 768 768"},e),ae.createElement("path",{d:"M607.5 205.5l-178.5 178.5 178.5 178.5-45 45-178.5-178.5-178.5 178.5-45-45 178.5-178.5-178.5-178.5 45-45 178.5 178.5 178.5-178.5z"}))}function Zf(e){return ae.createElement("svg",Le({width:"44",height:"44",viewBox:"0 0 768 768"},e),ae.createElement("path",{d:"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z"}))}function Jf(e){return ae.createElement("svg",Le({width:"44",height:"44",viewBox:"0 0 768 768"},e),ae.createElement("path",{d:"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z"}))}function eh(){return v.useEffect(function(){var e=document.body.style,t=e.overflow;return e.overflow="hidden",function(){e.overflow=t}},[]),null}function _a(e){var t=e.touches[0],n=t.clientX,r=t.clientY;if(e.touches.length>=2){var s=e.touches[1],i=s.clientX,o=s.clientY;return[(n+i)/2,(r+o)/2,Math.sqrt(Math.pow(i-n,2)+Math.pow(o-r,2))]}return[n,r,0]}var Bt=function(e,t,n,r){var s=n*t,i=(s-r)/2,o=void 0,l=e;return s<=r?(o=1,l=0):e>0&&i-e<=0?(o=2,l=i):e<0&&i+e<=0&&(o=3,l=-i),[o,l]};function Rs(e,t,n,r,s,i,o,l,c,u){o===void 0&&(o=innerWidth/2),l===void 0&&(l=innerHeight/2),c===void 0&&(c=0),u===void 0&&(u=0);var d=Bt(e,i,n,innerWidth)[0],f=Bt(t,i,r,innerHeight),p=innerWidth/2,E=innerHeight/2;return{x:o-i/s*(o-(p+e))-p+(r/n>=3&&n*i===innerWidth?0:d?c/2:c),y:l-i/s*(l-(E+t))-E+(f[0]?u/2:u),lastCX:o,lastCY:l}}function Zs(e,t,n){var r=e%180!=0;return r?[n,t,r]:[t,n,r]}function ks(e,t,n){var r=Zs(n,innerWidth,innerHeight),s=r[0],i=r[1],o=0,l=s,c=i,u=e/t*i,d=t/e*s;return e<s&&t<i?(l=e,c=t):e<s&&t>=i?l=u:e>=s&&t<i||e/t>s/i?c=d:t/e>=3&&!r[2]?o=((c=d)-i)/2:l=u,{width:l,height:c,x:0,y:o,pause:!0}}function jr(e,t){var n=t.leading,r=n!==void 0&&n,s=t.maxWait,i=t.wait,o=i===void 0?s||0:i,l=v.useRef(e);l.current=e;var c=v.useRef(0),u=v.useRef(),d=function(){return u.current&&clearTimeout(u.current)},f=v.useCallback(function(){var p=[].slice.call(arguments),E=Date.now();function x(){c.current=E,d(),l.current.apply(null,p)}var m=c.current,b=E-m;if(m===0&&(r&&x(),c.current=E),s!==void 0){if(b>s)return void x()}else b<o&&(c.current=E);d(),u.current=setTimeout(function(){x(),c.current=0},o)},[o,s,r]);return f.cancel=d,f}var ja=function(e,t,n){return sn(e,t,n,100,function(r){return r},function(){return sn(t,e,n)})},th=function(e){return 1-Math.pow(1-e,4)};function sn(e,t,n,r,s,i){r===void 0&&(r=400),s===void 0&&(s=th);var o=t-e;if(o!==0){var l=Date.now(),c=0,u=function(){var f=Math.min(1,(Date.now()-l)/r);n(e+s(f)*o)&&f<1?d():(cancelAnimationFrame(c),f>=1&&i&&i())};d()}function d(){c=requestAnimationFrame(u)}}var nh={T:0,L:0,W:0,H:0,FIT:void 0},Al=function(){var e=v.useRef(!1);return v.useEffect(function(){return e.current=!0,function(){e.current=!1}},[]),e},rh=["className"];function sh(e){var t=e.className,n=Vi(e,rh);return ae.createElement("div",Le({className:"PhotoView__Spinner "+t},n),ae.createElement("svg",{viewBox:"0 0 32 32",width:"36",height:"36",fill:"white"},ae.createElement("path",{opacity:".25",d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"}),ae.createElement("path",{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z"})))}var ih=["src","loaded","broken","className","onPhotoLoad","loadingElement","brokenElement"];function ah(e){var t=e.src,n=e.loaded,r=e.broken,s=e.className,i=e.onPhotoLoad,o=e.loadingElement,l=e.brokenElement,c=Vi(e,ih),u=Al();return t&&!r?ae.createElement(ae.Fragment,null,ae.createElement("img",Le({className:"PhotoView__Photo"+(s?" "+s:""),src:t,onLoad:function(d){var f=d.target;u.current&&i({loaded:!0,naturalWidth:f.naturalWidth,naturalHeight:f.naturalHeight})},onError:function(){u.current&&i({broken:!0})},alt:""},c)),!n&&(ae.createElement("span",{className:"PhotoView__icon"},o)||ae.createElement(sh,{className:"PhotoView__icon"}))):l?ae.createElement("span",{className:"PhotoView__icon"},typeof l=="function"?l({src:t}):l):null}var oh={naturalWidth:void 0,naturalHeight:void 0,width:void 0,height:void 0,loaded:void 0,broken:!1,x:0,y:0,touched:!1,maskTouched:!1,rotate:0,scale:1,CX:0,CY:0,lastX:0,lastY:0,lastCX:0,lastCY:0,lastScale:1,touchTime:0,touchLength:0,pause:!0,stopRaf:!0,reach:void 0};function lh(e){var t=e.item,n=t.src,r=t.render,s=t.width,i=s===void 0?0:s,o=t.height,l=o===void 0?0:o,c=t.originRef,u=e.visible,d=e.speed,f=e.easing,p=e.wrapClassName,E=e.className,x=e.style,m=e.loadingElement,b=e.brokenElement,g=e.onPhotoTap,y=e.onMaskTap,S=e.onReachMove,T=e.onReachUp,C=e.onPhotoResize,j=e.isActive,O=e.expose,R=Ys(oh),P=R[0],L=R[1],H=v.useRef(0),se=Al(),ee=P.naturalWidth,J=ee===void 0?i:ee,me=P.naturalHeight,ye=me===void 0?l:me,Ie=P.width,pe=Ie===void 0?i:Ie,We=P.height,w=We===void 0?l:We,h=P.loaded,F=h===void 0?!n:h,V=P.broken,$=P.x,B=P.y,W=P.touched,z=P.stopRaf,Y=P.maskTouched,te=P.rotate,q=P.scale,oe=P.CX,k=P.CY,M=P.lastX,N=P.lastY,A=P.lastCX,re=P.lastCY,U=P.lastScale,D=P.touchTime,G=P.touchLength,K=P.pause,Me=P.reach,Ue=Pr({onScale:function(_){return Pe(_r(_))},onRotate:function(_){te!==_&&(O({rotate:_}),L(Le({rotate:_},ks(J,ye,_))))}});function Pe(_,Z,ge){q!==_&&(O({scale:_}),L(Le({scale:_},Rs($,B,pe,w,q,_,Z,ge),_<=1&&{x:0,y:0})))}var fe=jr(function(_,Z,ge){if(ge===void 0&&(ge=0),(W||Y)&&j){var Qt=Zs(te,pe,w),St=Qt[0],rt=Qt[1];if(ge===0&&H.current===0){var Ne=Math.abs(_-oe)<=20,Ye=Math.abs(Z-k)<=20;if(Ne&&Ye)return void L({lastCX:_,lastCY:Z});H.current=Ne?Z>k?3:2:1}var Zt=_-A,Jt=Z-re,st=void 0;if(ge===0){var en=Bt(Zt+M,q,St,innerWidth)[0],mn=Bt(Jt+N,q,rt,innerHeight);st=function(Ft,Tt,_t,mt){return Tt&&Ft===1||mt==="x"?"x":_t&&Ft>1||mt==="y"?"y":void 0}(H.current,en,mn[0],Me),st!==void 0&&S(st,_,Z,q)}if(st==="x"||Y)return void L({reach:"x"});var Ct=_r(q+(ge-G)/100/2*q,J/pe,.2);O({scale:Ct}),L(Le({touchLength:ge,reach:st,scale:Ct},Rs($,B,pe,w,q,Ct,_,Z,Zt,Jt)))}},{maxWait:8});function xe(_){return!z&&!W&&(se.current&&L(Le({},_,{pause:u})),se.current)}var _e,De,Re,Pt,Kt,Nt,dn,Be,vr=(Kt=function(_){return xe({x:_})},Nt=function(_){return xe({y:_})},dn=function(_){return se.current&&(O({scale:_}),L({scale:_})),!W&&se.current},Be=Pr({X:function(_){return Kt(_)},Y:function(_){return Nt(_)},S:function(_){return dn(_)}}),function(_,Z,ge,Qt,St,rt,Ne,Ye,Zt,Jt,st){var en=Zs(Jt,St,rt),mn=en[0],Ct=en[1],Ft=Bt(_,Ye,mn,innerWidth),Tt=Ft[0],_t=Ft[1],mt=Bt(Z,Ye,Ct,innerHeight),pn=mt[0],br=mt[1],gn=Date.now()-st;if(gn>=200||Ye!=Ne||Math.abs(Zt-Ne)>1){var Dt=Rs(_,Z,St,rt,Ne,Ye),jt=Dt.x,tn=Dt.y,Qe=Tt?_t:jt!==_?jt:null,vn=pn?br:tn!==Z?tn:null;return Qe!==null&&sn(_,Qe,Be.X),vn!==null&&sn(Z,vn,Be.Y),void(Ye!=Ne&&sn(Ne,Ye,Be.S))}var nn=(_-ge)/gn,Lt=(Z-Qt)/gn,Vt=Math.sqrt(Math.pow(nn,2)+Math.pow(Lt,2)),At=!1,It=!1;(function(it,$e){var ze=it,Rt=0,at=void 0,Ze=0,yn=function(Nn){at||(at=Nn);var Fn=Nn-at,ea=Math.sign(it),ta=-.001*ea,na=Math.sign(-ze)*Math.pow(ze,2)*2e-4,fc=ze*Fn+(ta+na)*Math.pow(Fn,2)/2;Rt+=fc,at=Nn,ea*(ze+=(ta+na)*Fn)<=0?Je():$e(Rt)?pt():Je()};function pt(){Ze=requestAnimationFrame(yn)}function Je(){cancelAnimationFrame(Ze)}pt()})(Vt,function(it){var $e=_+it*(nn/Vt),ze=Z+it*(Lt/Vt),Rt=Bt($e,Ne,mn,innerWidth),at=Rt[0],Ze=Rt[1],yn=Bt(ze,Ne,Ct,innerHeight),pt=yn[0],Je=yn[1];if(at&&!At&&(At=!0,Tt?sn($e,Ze,Be.X):ja(Ze,$e+($e-Ze),Be.X)),pt&&!It&&(It=!0,pn?sn(ze,Je,Be.Y):ja(Je,ze+(ze-Je),Be.Y)),At&&It)return!1;var Nn=At||Be.X(Ze),Fn=It||Be.Y(Je);return Nn&&Fn})}),fn=(_e=g,De=function(_,Z){Me||Pe(q!==1?1:Math.max(2,J/pe),_,Z)},Re=v.useRef(0),Pt=jr(function(){Re.current=0,_e.apply(void 0,[].slice.call(arguments))},{wait:300}),function(){var _=[].slice.call(arguments);Re.current+=1,Pt.apply(void 0,_),Re.current>=2&&(Pt.cancel(),Re.current=0,De.apply(void 0,_))});function hn(_,Z){if(H.current=0,(W||Y)&&j){L({touched:!1,maskTouched:!1,pause:!1,stopRaf:!1,reach:void 0});var ge=_r(q,J/pe);if(vr($,B,M,N,pe,w,q,ge,U,te,D),T(_,Z),oe===_&&k===Z){if(W)return void fn(_,Z);Y&&y(_,Z)}}}function Pn(_,Z,ge){ge===void 0&&(ge=0),L({touched:!0,CX:_,CY:Z,lastCX:_,lastCY:Z,lastX:$,lastY:B,lastScale:q,touchLength:ge,touchTime:Date.now()})}function yr(_){L({maskTouched:!0,CX:_.clientX,CY:_.clientY,lastX:$,lastY:B})}wn(kt?void 0:"mousemove",function(_){_.preventDefault(),fe(_.clientX,_.clientY)}),wn(kt?void 0:"mouseup",function(_){hn(_.clientX,_.clientY)}),wn(kt?"touchmove":void 0,function(_){_.preventDefault();var Z=_a(_);fe.apply(void 0,Z)},{passive:!1}),wn(kt?"touchend":void 0,function(_){var Z=_.changedTouches[0];hn(Z.clientX,Z.clientY)},{passive:!1}),wn("resize",jr(function(){F&&!W&&(L(ks(J,ye,te)),C())},{maxWait:8})),Qs(function(){j&&O(Le({scale:q,rotate:te},Ue))},[j]);var ht=function(_,Z,ge,Qt,St,rt,Ne,Ye,Zt,Jt){var st=function(jt,tn,Qe,vn,nn){var Lt=v.useRef(!1),Vt=Ys({lead:!0,scale:Qe}),At=Vt[0],It=At.lead,it=At.scale,$e=Vt[1],ze=jr(function(Rt){try{return nn(!0),$e({lead:!1,scale:Rt}),Promise.resolve()}catch(at){return Promise.reject(at)}},{wait:vn});return Qs(function(){Lt.current?(nn(!1),$e({lead:!0}),ze(Qe)):Lt.current=!0},[Qe]),It?[jt*it,tn*it,Qe/it]:[jt*Qe,tn*Qe,1]}(rt,Ne,Ye,Zt,Jt),en=st[0],mn=st[1],Ct=st[2],Ft=function(jt,tn,Qe,vn,nn){var Lt=v.useState(nh),Vt=Lt[0],At=Lt[1],It=v.useState(0),it=It[0],$e=It[1],ze=v.useRef(),Rt=Pr({OK:function(){return jt&&$e(4)}});function at(Ze){nn(!1),$e(Ze)}return v.useEffect(function(){if(ze.current||(ze.current=Date.now()),Qe){if(function(Ze,yn){var pt=Ze&&Ze.current;if(pt&&pt.nodeType===1){var Je=pt.getBoundingClientRect();yn({T:Je.top,L:Je.left,W:Je.width,H:Je.height,FIT:pt.tagName==="IMG"?getComputedStyle(pt).objectFit:void 0})}}(tn,At),jt)return Date.now()-ze.current<250?($e(1),requestAnimationFrame(function(){$e(2),requestAnimationFrame(function(){return at(3)})}),void setTimeout(Rt.OK,vn)):void $e(4);at(5)}},[jt,Qe]),[it,Vt]}(_,Z,ge,Zt,Jt),Tt=Ft[0],_t=Ft[1],mt=_t.W,pn=_t.FIT,br=innerWidth/2,gn=innerHeight/2,Dt=Tt<3||Tt>4;return[Dt?mt?_t.L:br:Qt+(br-rt*Ye/2),Dt?mt?_t.T:gn:St+(gn-Ne*Ye/2),en,Dt&&pn?en*(_t.H/mt):mn,Tt===0?Ct:Dt?mt/(rt*Ye)||.01:Ct,Dt?pn?1:0:1,Tt,pn]}(u,c,F,$,B,pe,w,q,d,function(_){return L({pause:_})}),ie=ht[4],we=ht[6],je="transform "+d+"ms "+f,Te={className:E,onMouseDown:kt?void 0:function(_){_.stopPropagation(),_.button===0&&Pn(_.clientX,_.clientY,0)},onTouchStart:kt?function(_){_.stopPropagation(),Pn.apply(void 0,_a(_))}:void 0,onWheel:function(_){if(!Me){var Z=_r(q-_.deltaY/100/2,J/pe);L({stopRaf:!0}),Pe(Z,_.clientX,_.clientY)}},style:{width:ht[2],height:ht[3],opacity:ht[5],objectFit:we===4?void 0:ht[7],transform:te?"rotate("+te+"deg)":void 0,transition:we>2?je+", opacity "+d+"ms ease, height "+(we<4?d/2:we>4?d:0)+"ms "+f:void 0}};return ae.createElement("div",{className:"PhotoView__PhotoWrap"+(p?" "+p:""),style:x,onMouseDown:!kt&&j?yr:void 0,onTouchStart:kt&&j?function(_){return yr(_.touches[0])}:void 0},ae.createElement("div",{className:"PhotoView__PhotoBox",style:{transform:"matrix("+ie+", 0, 0, "+ie+", "+ht[0]+", "+ht[1]+")",transition:W||K?void 0:je,willChange:j?"transform":void 0}},n?ae.createElement(ah,Le({src:n,loaded:F,broken:V},Te,{onPhotoLoad:function(_){L(Le({},_,_.loaded&&ks(_.naturalWidth||0,_.naturalHeight||0,te)))},loadingElement:m,brokenElement:b})):r&&r({attrs:Te,scale:ie,rotate:te})))}var Aa={x:0,touched:!1,pause:!1,lastCX:void 0,lastCY:void 0,bg:void 0,lastBg:void 0,overlay:!0,minimal:!0,scale:1,rotate:0};function ch(e){var t=e.loop,n=t===void 0?3:t,r=e.speed,s=e.easing,i=e.photoClosable,o=e.maskClosable,l=o===void 0||o,c=e.maskOpacity,u=c===void 0?1:c,d=e.pullClosable,f=d===void 0||d,p=e.bannerVisible,E=p===void 0||p,x=e.overlayRender,m=e.toolbarRender,b=e.className,g=e.maskClassName,y=e.photoClassName,S=e.photoWrapClassName,T=e.loadingElement,C=e.brokenElement,j=e.images,O=e.index,R=O===void 0?0:O,P=e.onIndexChange,L=e.visible,H=e.onClose,se=e.afterClose,ee=e.portalContainer,J=Ys(Aa),me=J[0],ye=J[1],Ie=v.useState(0),pe=Ie[0],We=Ie[1],w=me.x,h=me.touched,F=me.pause,V=me.lastCX,$=me.lastCY,B=me.bg,W=B===void 0?u:B,z=me.lastBg,Y=me.overlay,te=me.minimal,q=me.scale,oe=me.rotate,k=me.onScale,M=me.onRotate,N=e.hasOwnProperty("index"),A=N?R:pe,re=N?P:We,U=v.useRef(A),D=j.length,G=j[A],K=typeof n=="boolean"?n:D>n,Me=function(ie,we){var je=v.useReducer(function(ge){return!ge},!1)[1],Te=v.useRef(0),_=function(ge,Qt){var St=v.useRef(ge);function rt(Ne){St.current=Ne}return v.useMemo(function(){(function(Ne){ie?(Ne(ie),Te.current=1):Te.current=2})(rt)},[ge]),[St.current,rt]}(ie),Z=_[1];return[_[0],Te.current,function(){je(),Te.current===2&&(Z(!1),we&&we()),Te.current=0}]}(L,se),Ue=Me[0],Pe=Me[1],fe=Me[2];Qs(function(){if(Ue)return ye({pause:!0,x:A*-(innerWidth+20)}),void(U.current=A);ye(Aa)},[Ue]);var xe=Pr({close:function(ie){M&&M(0),ye({overlay:!0,lastBg:W}),H(ie)},changeIndex:function(ie,we){we===void 0&&(we=!1);var je=K?U.current+(ie-A):ie,Te=D-1,_=Ks(je,0,Te),Z=K?je:_,ge=innerWidth+20;ye({touched:!1,lastCX:void 0,lastCY:void 0,x:-ge*Z,pause:we}),U.current=Z,re&&re(K?ie<0?Te:ie>Te?0:ie:_)}}),_e=xe.close,De=xe.changeIndex;function Re(ie){return ie?_e():ye({overlay:!Y})}function Pt(){ye({x:-(innerWidth+20)*A,lastCX:void 0,lastCY:void 0,pause:!0}),U.current=A}function Kt(ie,we,je,Te){ie==="x"?function(_){if(V!==void 0){var Z=_-V,ge=Z;!K&&(A===0&&Z>0||A===D-1&&Z<0)&&(ge=Z/2),ye({touched:!0,lastCX:V,x:-(innerWidth+20)*U.current+ge,pause:!1})}else ye({touched:!0,lastCX:_,x:w,pause:!1})}(we):ie==="y"&&function(_,Z){if($!==void 0){var ge=u===null?null:Ks(u,.01,u-Math.abs(_-$)/100/4);ye({touched:!0,lastCY:$,bg:Z===1?ge:u,minimal:Z===1})}else ye({touched:!0,lastCY:_,bg:W,minimal:!0})}(je,Te)}function Nt(ie,we){var je=ie-(V??ie),Te=we-($??we),_=!1;if(je<-40)De(A+1);else if(je>40)De(A-1);else{var Z=-(innerWidth+20)*U.current;Math.abs(Te)>100&&te&&f&&(_=!0,_e()),ye({touched:!1,x:Z,lastCX:void 0,lastCY:void 0,bg:u,overlay:!!_||Y})}}wn("keydown",function(ie){if(L)switch(ie.key){case"ArrowLeft":De(A-1,!0);break;case"ArrowRight":De(A+1,!0);break;case"Escape":_e()}});var dn=function(ie,we,je){return v.useMemo(function(){var Te=ie.length;return je?ie.concat(ie).concat(ie).slice(Te+we-1,Te+we+2):ie.slice(Math.max(we-1,0),Math.min(we+2,Te+1))},[ie,we,je])}(j,A,K);if(!Ue)return null;var Be=Y&&!Pe,vr=L?W:z,fn=k&&M&&{images:j,index:A,visible:L,onClose:_e,onIndexChange:De,overlayVisible:Be,overlay:G&&G.overlay,scale:q,rotate:oe,onScale:k,onRotate:M},hn=r?r(Pe):400,Pn=s?s(Pe):"cubic-bezier(0.25, 0.8, 0.25, 1)",yr=r?r(3):600,ht=s?s(3):"cubic-bezier(0.25, 0.8, 0.25, 1)";return ae.createElement(Kf,{className:"PhotoView-Portal"+(Be?"":" PhotoView-Slider__clean")+(L?"":" PhotoView-Slider__willClose")+(b?" "+b:""),role:"dialog",onClick:function(ie){return ie.stopPropagation()},container:ee},L&&ae.createElement(eh,null),ae.createElement("div",{className:"PhotoView-Slider__Backdrop"+(g?" "+g:"")+(Pe===1?" PhotoView-Slider__fadeIn":Pe===2?" PhotoView-Slider__fadeOut":""),style:{background:vr?"rgba(0, 0, 0, "+vr+")":void 0,transitionTimingFunction:Pn,transitionDuration:(h?0:hn)+"ms",animationDuration:hn+"ms"},onAnimationEnd:fe}),E&&ae.createElement("div",{className:"PhotoView-Slider__BannerWrap"},ae.createElement("div",{className:"PhotoView-Slider__Counter"},A+1," / ",D),ae.createElement("div",{className:"PhotoView-Slider__BannerRight"},m&&fn&&m(fn),ae.createElement(Qf,{className:"PhotoView-Slider__toolbarIcon",onClick:_e}))),dn.map(function(ie,we){var je=K||A!==0?U.current-1+we:A+we;return ae.createElement(lh,{key:K?ie.key+"/"+ie.src+"/"+je:ie.key,item:ie,speed:hn,easing:Pn,visible:L,onReachMove:Kt,onReachUp:Nt,onPhotoTap:function(){return Re(i)},onMaskTap:function(){return Re(l)},wrapClassName:S,className:y,style:{left:(innerWidth+20)*je+"px",transform:"translate3d("+w+"px, 0px, 0)",transition:h||F?void 0:"transform "+yr+"ms "+ht},loadingElement:T,brokenElement:C,onPhotoResize:Pt,isActive:U.current===je,expose:ye})}),!kt&&E&&ae.createElement(ae.Fragment,null,(K||A!==0)&&ae.createElement("div",{className:"PhotoView-Slider__ArrowLeft",onClick:function(){return De(A-1,!0)}},ae.createElement(Zf,null)),(K||A+1<D)&&ae.createElement("div",{className:"PhotoView-Slider__ArrowRight",onClick:function(){return De(A+1,!0)}},ae.createElement(Jf,null))),x&&fn&&ae.createElement("div",{className:"PhotoView-Slider__Overlay"},x(fn)))}const uh=e=>{const n=new DOMParser().parseFromString(e,"text/html").querySelectorAll("img");return Array.from(n).map(r=>r.getAttribute("src"))},dh=({info:e,handleEntryClick:t,getEntries:n})=>{const r=Ae(p=>p.activeContent),{handleFetchContent:s,handleToggleStarred:i,handleToggleStatus:o}=Ti(),{handleLeftKey:l,handleRightKey:c,handleEscapeKey:u}=Xo(e,t,n);if(!r)return null;const d=r.status==="unread",f=r.starred;return a.jsxs(Ee.Group,{className:"action-buttons",children:[a.jsx(Ee,{icon:a.jsx(Bc,{}),onClick:u,shape:"round",type:"primary"}),a.jsx(Ee,{icon:d?a.jsx(mo,{}):a.jsx(po,{}),onClick:()=>o(r),type:"primary"}),a.jsx(Ee,{onClick:()=>i(r),type:"primary",icon:f?a.jsx(hi,{style:{color:"#ffcd00"}}):a.jsx(fi,{})}),a.jsx(Ee,{icon:a.jsx($c,{}),onClick:l,type:"primary"}),a.jsx(Ee,{icon:a.jsx(zc,{}),onClick:c,type:"primary"}),a.jsx(Ee,{icon:a.jsx(Hc,{}),onClick:s,shape:"round",type:"primary"})]})},fh=({url:e,text:t})=>{const[n,r]=v.useState(!1),s=()=>r(!0),i=()=>r(!1);return a.jsx(qc,{to:e,style:{color:"inherit",textDecoration:n?"underline":"none"},onMouseEnter:s,onMouseLeave:i,children:t})},hh=({node:e,index:t,togglePhotoSlider:n})=>{const[r,s]=v.useState(!1),{isMobileView:i}=ns();return a.jsx("div",{style:{textAlign:"center",position:"relative"},children:a.jsxs("div",{style:{display:"inline-block",position:"relative"},onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:[a.jsx("img",{...e.attribs,alt:e.attribs.alt}),a.jsx(Ee,{icon:a.jsx(Xc,{}),style:{position:"absolute",top:30,right:10,backgroundColor:"rgba(0, 0, 0, 0.5)",opacity:i||r?1:0,transition:"opacity 0.3s"},onClick:o=>{o.preventDefault(),n(t)}})]})})},mh=(e,t)=>({replace:n=>{if(n.type==="tag"&&n.name==="img"){const r=e.findIndex(s=>s===n.attribs.src);return a.jsx(hh,{node:n,index:r,togglePhotoSlider:t})}return n}}),ph=v.forwardRef(({info:e,handleEntryClick:t,getEntries:n,isFilteredEntriesUpdated:r,setIsFilteredEntriesUpdated:s},i)=>{const o=cr(),l=Ae(j=>j.activeContent),c=he(Oe),{articleWidth:u,fontSize:d}=c,{setIsArticleFocused:f}=v.useContext(Et),[p,E]=v.useState(!1),[x,m]=v.useState(0),b=j=>{m(j),E(O=>!O)};if(!l)return a.jsxs("div",{ref:i,className:"content-empty",children:[a.jsx(Wc,{style:{fontSize:"64px"}}),a.jsx(Q.Title,{heading:6,style:{color:"var(--color-text-3)",marginTop:"10px"},children:"ReactFlux"})]});const g=uh(l.content),y=mh(g,b),S=Gf(l.content,y),T=l.feed.category.id,C=l.feed.category.title;return a.jsxs("div",{className:"article-content",onBlur:()=>f(!1),onFocus:()=>f(!0),ref:i,children:[a.jsxs("div",{className:"scroll-container",children:[a.jsxs("div",{className:"article-header",style:{width:`${u}%`},children:[a.jsx(Q.Title,{className:"article-title",heading:5,children:a.jsx("a",{href:l.url,target:"_blank",rel:"noopener noreferrer",children:l.title})}),a.jsxs("div",{className:"article-meta",children:[a.jsx(Q.Text,{children:a.jsx(fh,{url:`/feed/${l.feed.id}`,text:l.feed.title})}),a.jsx(Q.Text,{children:` - ${l.author}`}),a.jsx(Q.Text,{children:a.jsx(Qn,{size:"small",onClick:()=>{o(`/category/${T}`)},style:{marginLeft:"10px",cursor:"pointer"},children:C})})]}),a.jsx(Q.Text,{className:"article-date",children:_n(l.published_at).format("dddd, MMMM D, YYYY [at] h:mm A")}),a.jsx(lt,{})]}),a.jsxs("div",{className:"article-body",style:{fontSize:`${d}rem`,width:`${u}%`},children:[S,a.jsx(ch,{images:g.map(j=>({src:j,key:j})),visible:p,onClose:()=>{E(!1),f(!0)},index:x,onIndexChange:m})]},l.id)]}),a.jsx(dh,{info:e,handleEntryClick:t,getEntries:n,isFilteredEntriesUpdated:r,setIsFilteredEntriesUpdated:s})]})});var gh=Object.defineProperty,vh=(e,t)=>{for(var n in t)gh(e,n,{get:t[n],enumerable:!0})},dt={};vh(dt,{assign:()=>xh,colors:()=>qt,createStringInterpolator:()=>qi,skipAnimation:()=>Nl,to:()=>Pl,willAdvance:()=>Xi});var Ui=pr(),ne=e=>mr(e,Ui),Bi=pr();ne.write=e=>mr(e,Bi);var fs=pr();ne.onStart=e=>mr(e,fs);var $i=pr();ne.onFrame=e=>mr(e,$i);var zi=pr();ne.onFinish=e=>mr(e,zi);var Cn=[];ne.setTimeout=(e,t)=>{const n=ne.now()+t,r=()=>{const i=Cn.findIndex(o=>o.cancel==r);~i&&Cn.splice(i,1),Wt-=~i?1:0},s={time:n,handler:e,cancel:r};return Cn.splice(Il(n),0,s),Wt+=1,Rl(),s};var Il=e=>~(~Cn.findIndex(t=>t.time>e)||~Cn.length);ne.cancel=e=>{fs.delete(e),$i.delete(e),zi.delete(e),Ui.delete(e),Bi.delete(e)};ne.sync=e=>{Js=!0,ne.batchedUpdates(e),Js=!1};ne.throttle=e=>{let t;function n(){try{e(...t)}finally{t=null}}function r(...s){t=s,ne.onStart(n)}return r.handler=e,r.cancel=()=>{fs.delete(n),t=null},r};var Hi=typeof window<"u"?window.requestAnimationFrame:()=>{};ne.use=e=>Hi=e;ne.now=typeof performance<"u"?()=>performance.now():Date.now;ne.batchedUpdates=e=>e();ne.catch=console.error;ne.frameLoop="always";ne.advance=()=>{ne.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):Ol()};var Ht=-1,Wt=0,Js=!1;function mr(e,t){Js?(t.delete(e),e(0)):(t.add(e),Rl())}function Rl(){Ht<0&&(Ht=0,ne.frameLoop!=="demand"&&Hi(kl))}function yh(){Ht=-1}function kl(){~Ht&&(Hi(kl),ne.batchedUpdates(Ol))}function Ol(){const e=Ht;Ht=ne.now();const t=Il(Ht);if(t&&(Ml(Cn.splice(0,t),n=>n.handler()),Wt-=t),!Wt){yh();return}fs.flush(),Ui.flush(e?Math.min(64,Ht-e):16.667),$i.flush(),Bi.flush(),zi.flush()}function pr(){let e=new Set,t=e;return{add(n){Wt+=t==e&&!e.has(n)?1:0,e.add(n)},delete(n){return Wt-=t==e&&e.has(n)?1:0,e.delete(n)},flush(n){t.size&&(e=new Set,Wt-=t.size,Ml(t,r=>r(n)&&e.add(r)),Wt+=e.size,t=e)}}}function Ml(e,t){e.forEach(n=>{try{t(n)}catch(r){ne.catch(r)}})}function ei(){}var bh=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),I={arr:Array.isArray,obj:e=>!!e&&e.constructor.name==="Object",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",und:e=>e===void 0};function Ot(e,t){if(I.arr(e)){if(!I.arr(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}var de=(e,t)=>e.forEach(t);function wt(e,t,n){if(I.arr(e)){for(let r=0;r<e.length;r++)t.call(n,e[r],`${r}`);return}for(const r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r)}var Ke=e=>I.und(e)?[]:I.arr(e)?e:[e];function qn(e,t){if(e.size){const n=Array.from(e);e.clear(),de(n,t)}}var $n=(e,...t)=>qn(e,n=>n(...t)),Wi=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),qi,Pl,qt=null,Nl=!1,Xi=ei,xh=e=>{e.to&&(Pl=e.to),e.now&&(ne.now=e.now),e.colors!==void 0&&(qt=e.colors),e.skipAnimation!=null&&(Nl=e.skipAnimation),e.createStringInterpolator&&(qi=e.createStringInterpolator),e.requestAnimationFrame&&ne.use(e.requestAnimationFrame),e.batchedUpdates&&(ne.batchedUpdates=e.batchedUpdates),e.willAdvance&&(Xi=e.willAdvance),e.frameLoop&&(ne.frameLoop=e.frameLoop)},Xn=new Set,nt=[],Os=[],Hr=0,hs={get idle(){return!Xn.size&&!nt.length},start(e){Hr>e.priority?(Xn.add(e),ne.onStart(wh)):(Fl(e),ne(ti))},advance:ti,sort(e){if(Hr)ne.onFrame(()=>hs.sort(e));else{const t=nt.indexOf(e);~t&&(nt.splice(t,1),Dl(e))}},clear(){nt=[],Xn.clear()}};function wh(){Xn.forEach(Fl),Xn.clear(),ne(ti)}function Fl(e){nt.includes(e)||Dl(e)}function Dl(e){nt.splice(Eh(nt,t=>t.priority>e.priority),0,e)}function ti(e){const t=Os;for(let n=0;n<nt.length;n++){const r=nt[n];Hr=r.priority,r.idle||(Xi(r),r.advance(e),r.idle||t.push(r))}return Hr=0,Os=nt,Os.length=0,nt=t,nt.length>0}function Eh(e,t){const n=e.findIndex(t);return n<0?e.length:n}var Sh=(e,t,n)=>Math.min(Math.max(n,e),t),Ch={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},ut="[-+]?\\d*\\.?\\d+",Wr=ut+"%";function ms(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var Th=new RegExp("rgb"+ms(ut,ut,ut)),_h=new RegExp("rgba"+ms(ut,ut,ut,ut)),jh=new RegExp("hsl"+ms(ut,Wr,Wr)),Ah=new RegExp("hsla"+ms(ut,Wr,Wr,ut)),Ih=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Rh=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,kh=/^#([0-9a-fA-F]{6})$/,Oh=/^#([0-9a-fA-F]{8})$/;function Mh(e){let t;return typeof e=="number"?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=kh.exec(e))?parseInt(t[1]+"ff",16)>>>0:qt&&qt[e]!==void 0?qt[e]:(t=Th.exec(e))?(xn(t[1])<<24|xn(t[2])<<16|xn(t[3])<<8|255)>>>0:(t=_h.exec(e))?(xn(t[1])<<24|xn(t[2])<<16|xn(t[3])<<8|ka(t[4]))>>>0:(t=Ih.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=Oh.exec(e))?parseInt(t[1],16)>>>0:(t=Rh.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=jh.exec(e))?(Ia(Ra(t[1]),Ar(t[2]),Ar(t[3]))|255)>>>0:(t=Ah.exec(e))?(Ia(Ra(t[1]),Ar(t[2]),Ar(t[3]))|ka(t[4]))>>>0:null}function Ms(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Ia(e,t,n){const r=n<.5?n*(1+t):n+t-n*t,s=2*n-r,i=Ms(s,r,e+1/3),o=Ms(s,r,e),l=Ms(s,r,e-1/3);return Math.round(i*255)<<24|Math.round(o*255)<<16|Math.round(l*255)<<8}function xn(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function Ra(e){return(parseFloat(e)%360+360)%360/360}function ka(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(t*255)}function Ar(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function Oa(e){let t=Mh(e);if(t===null)return e;t=t||0;const n=(t&4278190080)>>>24,r=(t&16711680)>>>16,s=(t&65280)>>>8,i=(t&255)/255;return`rgba(${n}, ${r}, ${s}, ${i})`}var er=(e,t,n)=>{if(I.fun(e))return e;if(I.arr(e))return er({range:e,output:t,extrapolate:n});if(I.str(e.output[0]))return qi(e);const r=e,s=r.output,i=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",l=r.extrapolateRight||r.extrapolate||"extend",c=r.easing||(u=>u);return u=>{const d=Nh(u,i);return Ph(u,i[d],i[d+1],s[d],s[d+1],c,o,l,r.map)}};function Ph(e,t,n,r,s,i,o,l,c){let u=c?c(e):e;if(u<t){if(o==="identity")return u;o==="clamp"&&(u=t)}if(u>n){if(l==="identity")return u;l==="clamp"&&(u=n)}return r===s?r:t===n?e<=t?r:s:(t===-1/0?u=-u:n===1/0?u=u-t:u=(u-t)/(n-t),u=i(u),r===-1/0?u=-u:s===1/0?u=u+r:u=u*(s-r)+r,u)}function Nh(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}var Fh=(e,t="end")=>n=>{n=t==="end"?Math.min(n,.999):Math.max(n,.001);const r=n*e,s=t==="end"?Math.floor(r):Math.ceil(r);return Sh(0,1,s/e)},qr=1.70158,Ir=qr*1.525,Ma=qr+1,Pa=2*Math.PI/3,Na=2*Math.PI/4.5,Rr=e=>e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,Dh={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>1-(1-e)*(1-e),easeInOutQuad:e=>e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2,easeInCubic:e=>e*e*e,easeOutCubic:e=>1-Math.pow(1-e,3),easeInOutCubic:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1-Math.pow(1-e,4),easeInOutQuart:e=>e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1-Math.pow(1-e,5),easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInExpo:e=>e===0?0:Math.pow(2,10*e-10),easeOutExpo:e=>e===1?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2,easeInCirc:e=>1-Math.sqrt(1-Math.pow(e,2)),easeOutCirc:e=>Math.sqrt(1-Math.pow(e-1,2)),easeInOutCirc:e=>e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2,easeInBack:e=>Ma*e*e*e-qr*e*e,easeOutBack:e=>1+Ma*Math.pow(e-1,3)+qr*Math.pow(e-1,2),easeInOutBack:e=>e<.5?Math.pow(2*e,2)*((Ir+1)*2*e-Ir)/2:(Math.pow(2*e-2,2)*((Ir+1)*(e*2-2)+Ir)+2)/2,easeInElastic:e=>e===0?0:e===1?1:-Math.pow(2,10*e-10)*Math.sin((e*10-10.75)*Pa),easeOutElastic:e=>e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e*10-.75)*Pa)+1,easeInOutElastic:e=>e===0?0:e===1?1:e<.5?-(Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*Na))/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*Na)/2+1,easeInBounce:e=>1-Rr(1-e),easeOutBounce:Rr,easeInOutBounce:e=>e<.5?(1-Rr(1-2*e))/2:(1+Rr(2*e-1))/2,steps:Fh},tr=Symbol.for("FluidValue.get"),An=Symbol.for("FluidValue.observers"),et=e=>!!(e&&e[tr]),qe=e=>e&&e[tr]?e[tr]():e,Fa=e=>e[An]||null;function Lh(e,t){e.eventObserved?e.eventObserved(t):e(t)}function nr(e,t){const n=e[An];n&&n.forEach(r=>{Lh(r,t)})}var Ll=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");Vh(this,e)}},Vh=(e,t)=>Vl(e,tr,t);function On(e,t){if(e[tr]){let n=e[An];n||Vl(e,An,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function rr(e,t){const n=e[An];if(n&&n.has(t)){const r=n.size-1;r?n.delete(t):e[An]=null,e.observerRemoved&&e.observerRemoved(r,t)}}var Vl=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),Nr=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Uh=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Da=new RegExp(`(${Nr.source})(%|[a-z]+)`,"i"),Bh=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,ps=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,Ul=e=>{const[t,n]=$h(e);if(!t||Wi())return e;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(n&&n.startsWith("--")){const s=window.getComputedStyle(document.documentElement).getPropertyValue(n);return s||e}else{if(n&&ps.test(n))return Ul(n);if(n)return n}return e},$h=e=>{const t=ps.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]},Ps,zh=(e,t,n,r,s)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${s})`,Bl=e=>{Ps||(Ps=qt?new RegExp(`(${Object.keys(qt).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map(i=>qe(i).replace(ps,Ul).replace(Uh,Oa).replace(Ps,Oa)),n=t.map(i=>i.match(Nr).map(Number)),s=n[0].map((i,o)=>n.map(l=>{if(!(o in l))throw Error('The arity of each "output" value must be equal');return l[o]})).map(i=>er({...e,output:i}));return i=>{var c;const o=!Da.test(t[0])&&((c=t.find(u=>Da.test(u)))==null?void 0:c.replace(Nr,""));let l=0;return t[0].replace(Nr,()=>`${s[l++](i)}${o||""}`).replace(Bh,zh)}},Gi="react-spring: ",$l=e=>{const t=e;let n=!1;if(typeof t!="function")throw new TypeError(`${Gi}once requires a function parameter`);return(...r)=>{n||(t(...r),n=!0)}},Hh=$l(console.warn);function Wh(){Hh(`${Gi}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var qh=$l(console.warn);function Xh(){qh(`${Gi}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function gs(e){return I.str(e)&&(e[0]=="#"||/\d/.test(e)||!Wi()&&ps.test(e)||e in(qt||{}))}var Yi=Wi()?v.useEffect:v.useLayoutEffect,Gh=()=>{const e=v.useRef(!1);return Yi(()=>(e.current=!0,()=>{e.current=!1}),[]),e};function zl(){const e=v.useState()[1],t=Gh();return()=>{t.current&&e(Math.random())}}function Yh(e,t){const[n]=v.useState(()=>({inputs:t,result:e()})),r=v.useRef(),s=r.current;let i=s;return i?t&&i.inputs&&Kh(t,i.inputs)||(i={inputs:t,result:e()}):i=n,v.useEffect(()=>{r.current=i,s==n&&(n.inputs=n.result=void 0)},[i]),i.result}function Kh(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var Hl=e=>v.useEffect(e,Qh),Qh=[];function La(e){const t=v.useRef();return v.useEffect(()=>{t.current=e}),t.current}var sr=Symbol.for("Animated:node"),Zh=e=>!!e&&e[sr]===e,gt=e=>e&&e[sr],Ki=(e,t)=>bh(e,sr,t),vs=e=>e&&e[sr]&&e[sr].getPayload(),Wl=class{constructor(){Ki(this,this)}getPayload(){return this.payload||[]}},gr=class extends Wl{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,I.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new gr(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return I.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,I.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},ir=class extends gr{constructor(e){super(0),this._string=null,this._toString=er({output:[e,e]})}static create(e){return new ir(e)}getValue(){const e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(I.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=er({output:[this.getValue(),e]})),this._value=0,super.reset()}},Xr={dependencies:null},ys=class extends Wl{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return wt(this.source,(n,r)=>{Zh(n)?t[r]=n.getValue(e):et(n)?t[r]=qe(n):e||(t[r]=n)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&de(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return wt(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){Xr.dependencies&&et(e)&&Xr.dependencies.add(e);const t=vs(e);t&&de(t,n=>this.add(n))}},ql=class extends ys{constructor(e){super(e)}static create(e){return new ql(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((n,r)=>n.setValue(e[r])).some(Boolean):(super.setValue(e.map(Jh)),!0)}};function Jh(e){return(gs(e)?ir:gr).create(e)}function ni(e){const t=gt(e);return t?t.constructor:I.arr(e)?ql:gs(e)?ir:gr}var Va=(e,t)=>{const n=!I.fun(e)||e.prototype&&e.prototype.isReactComponent;return v.forwardRef((r,s)=>{const i=v.useRef(null),o=n&&v.useCallback(x=>{i.current=nm(s,x)},[s]),[l,c]=tm(r,t),u=zl(),d=()=>{const x=i.current;if(n&&!x)return;(x?t.applyAnimatedValues(x,l.getValue(!0)):!1)===!1&&u()},f=new em(d,c),p=v.useRef();Yi(()=>(p.current=f,de(c,x=>On(x,f)),()=>{p.current&&(de(p.current.deps,x=>rr(x,p.current)),ne.cancel(p.current.update))})),v.useEffect(d,[]),Hl(()=>()=>{const x=p.current;de(x.deps,m=>rr(m,x))});const E=t.getComponentProps(l.getValue());return v.createElement(e,{...E,ref:o})})},em=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&ne.write(this.update)}};function tm(e,t){const n=new Set;return Xr.dependencies=n,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)}),e=new ys(e),Xr.dependencies=null,[e,n]}function nm(e,t){return e&&(I.fun(e)?e(t):e.current=t),t}var Ua=Symbol.for("AnimatedComponent"),rm=(e,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:n=s=>new ys(s),getComponentProps:r=s=>s}={})=>{const s={applyAnimatedValues:t,createAnimatedStyle:n,getComponentProps:r},i=o=>{const l=Ba(o)||"Anonymous";return I.str(o)?o=i[o]||(i[o]=Va(o,s)):o=o[Ua]||(o[Ua]=Va(o,s)),o.displayName=`Animated(${l})`,o};return wt(e,(o,l)=>{I.arr(e)&&(l=Ba(o)),i[l]=i(o)}),{animated:i}},Ba=e=>I.str(e)?e:e&&I.str(e.displayName)?e.displayName:I.fun(e)&&e.name||null;function an(e,...t){return I.fun(e)?e(...t):e}var Gn=(e,t)=>e===!0||!!(t&&e&&(I.fun(e)?e(t):Ke(e).includes(t))),Xl=(e,t)=>I.obj(e)?t&&e[t]:e,Gl=(e,t)=>e.default===!0?e[t]:e.default?e.default[t]:void 0,sm=e=>e,Qi=(e,t=sm)=>{let n=im;e.default&&e.default!==!0&&(e=e.default,n=Object.keys(e));const r={};for(const s of n){const i=t(e[s],s);I.und(i)||(r[s]=i)}return r},im=["config","onProps","onStart","onChange","onPause","onResume","onRest"],am={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function om(e){const t={};let n=0;if(wt(e,(r,s)=>{am[s]||(t[s]=r,n++)}),n)return t}function Yl(e){const t=om(e);if(t){const n={to:t};return wt(e,(r,s)=>s in t||(n[s]=r)),n}return{...e}}function ar(e){return e=qe(e),I.arr(e)?e.map(ar):gs(e)?dt.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function lm(e){for(const t in e)return!0;return!1}function ri(e){return I.fun(e)||I.arr(e)&&I.obj(e[0])}function cm(e,t){var n;(n=e.ref)==null||n.delete(e),t==null||t.delete(e)}function um(e,t){var n;t&&e.ref!==t&&((n=e.ref)==null||n.delete(e),t.add(e),e.ref=t)}var dm={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},si={...dm.default,mass:1,damping:1,easing:Dh.linear,clamp:!1},fm=class{constructor(){this.velocity=0,Object.assign(this,si)}};function hm(e,t,n){n&&(n={...n},$a(n,t),t={...n,...t}),$a(e,t),Object.assign(e,t);for(const o in si)e[o]==null&&(e[o]=si[o]);let{frequency:r,damping:s}=e;const{mass:i}=e;return I.und(r)||(r<.01&&(r=.01),s<0&&(s=0),e.tension=Math.pow(2*Math.PI/r,2)*i,e.friction=4*Math.PI*s*i/r),e}function $a(e,t){if(!I.und(t.decay))e.duration=void 0;else{const n=!I.und(t.tension)||!I.und(t.friction);(n||!I.und(t.frequency)||!I.und(t.damping)||!I.und(t.mass))&&(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}}var za=[],mm=class{constructor(){this.changed=!1,this.values=za,this.toValues=null,this.fromValues=za,this.config=new fm,this.immediate=!1}};function Kl(e,{key:t,props:n,defaultProps:r,state:s,actions:i}){return new Promise((o,l)=>{let c,u,d=Gn(n.cancel??(r==null?void 0:r.cancel),t);if(d)E();else{I.und(n.pause)||(s.paused=Gn(n.pause,t));let x=r==null?void 0:r.pause;x!==!0&&(x=s.paused||Gn(x,t)),c=an(n.delay||0,t),x?(s.resumeQueue.add(p),i.pause()):(i.resume(),p())}function f(){s.resumeQueue.add(p),s.timeouts.delete(u),u.cancel(),c=u.time-ne.now()}function p(){c>0&&!dt.skipAnimation?(s.delayed=!0,u=ne.setTimeout(E,c),s.pauseQueue.add(f),s.timeouts.add(u)):E()}function E(){s.delayed&&(s.delayed=!1),s.pauseQueue.delete(f),s.timeouts.delete(u),e<=(s.cancelId||0)&&(d=!0);try{i.start({...n,callId:e,cancel:d},o)}catch(x){l(x)}}})}var Zi=(e,t)=>t.length==1?t[0]:t.some(n=>n.cancelled)?Tn(e.get()):t.every(n=>n.noop)?Ql(e.get()):ot(e.get(),t.every(n=>n.finished)),Ql=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),ot=(e,t,n=!1)=>({value:e,finished:t,cancelled:n}),Tn=e=>({value:e,cancelled:!0,finished:!1});function Zl(e,t,n,r){const{callId:s,parentId:i,onRest:o}=t,{asyncTo:l,promise:c}=n;return!i&&e===l&&!t.reset?c:n.promise=(async()=>{n.asyncId=s,n.asyncTo=e;const u=Qi(t,(b,g)=>g==="onRest"?void 0:b);let d,f;const p=new Promise((b,g)=>(d=b,f=g)),E=b=>{const g=s<=(n.cancelId||0)&&Tn(r)||s!==n.asyncId&&ot(r,!1);if(g)throw b.result=g,f(b),b},x=(b,g)=>{const y=new Ha,S=new Wa;return(async()=>{if(dt.skipAnimation)throw or(n),S.result=ot(r,!1),f(S),S;E(y);const T=I.obj(b)?{...b}:{...g,to:b};T.parentId=s,wt(u,(j,O)=>{I.und(T[O])&&(T[O]=j)});const C=await r.start(T);return E(y),n.paused&&await new Promise(j=>{n.resumeQueue.add(j)}),C})()};let m;if(dt.skipAnimation)return or(n),ot(r,!1);try{let b;I.arr(e)?b=(async g=>{for(const y of g)await x(y)})(e):b=Promise.resolve(e(x,r.stop.bind(r))),await Promise.all([b.then(d),p]),m=ot(r.get(),!0,!1)}catch(b){if(b instanceof Ha)m=b.result;else if(b instanceof Wa)m=b.result;else throw b}finally{s==n.asyncId&&(n.asyncId=i,n.asyncTo=i?l:void 0,n.promise=i?c:void 0)}return I.fun(o)&&ne.batchedUpdates(()=>{o(m,r,r.item)}),m})()}function or(e,t){qn(e.timeouts,n=>n.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var Ha=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},Wa=class extends Error{constructor(){super("SkipAnimationSignal")}},ii=e=>e instanceof Ji,pm=1,Ji=class extends Ll{constructor(){super(...arguments),this.id=pm++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=gt(this);return e&&e.getValue()}to(...e){return dt.to(this,e)}interpolate(...e){return Wh(),dt.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){nr(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||hs.sort(this),nr(this,{type:"priority",parent:this,priority:e})}},un=Symbol.for("SpringPhase"),Jl=1,ai=2,oi=4,Ns=e=>(e[un]&Jl)>0,Ut=e=>(e[un]&ai)>0,Ln=e=>(e[un]&oi)>0,qa=(e,t)=>t?e[un]|=ai|Jl:e[un]&=~ai,Xa=(e,t)=>t?e[un]|=oi:e[un]&=~oi,gm=class extends Ji{constructor(e,t){if(super(),this.animation=new mm,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!I.und(e)||!I.und(t)){const n=I.obj(e)?{...e}:{...t,from:e};I.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Ut(this)||this._state.asyncTo)||Ln(this)}get goal(){return qe(this.animation.to)}get velocity(){const e=gt(this);return e instanceof gr?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return Ns(this)}get isAnimating(){return Ut(this)}get isPaused(){return Ln(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,n=!1;const r=this.animation;let{toValues:s}=r;const{config:i}=r,o=vs(r.to);!o&&et(r.to)&&(s=Ke(qe(r.to))),r.values.forEach((u,d)=>{if(u.done)return;const f=u.constructor==ir?1:o?o[d].lastPosition:s[d];let p=r.immediate,E=f;if(!p){if(E=u.lastPosition,i.tension<=0){u.done=!0;return}let x=u.elapsedTime+=e;const m=r.fromValues[d],b=u.v0!=null?u.v0:u.v0=I.arr(i.velocity)?i.velocity[d]:i.velocity;let g;const y=i.precision||(m==f?.005:Math.min(1,Math.abs(f-m)*.001));if(I.und(i.duration))if(i.decay){const S=i.decay===!0?.998:i.decay,T=Math.exp(-(1-S)*x);E=m+b/(1-S)*(1-T),p=Math.abs(u.lastPosition-E)<=y,g=b*T}else{g=u.lastVelocity==null?b:u.lastVelocity;const S=i.restVelocity||y/10,T=i.clamp?0:i.bounce,C=!I.und(T),j=m==f?u.v0>0:m<f;let O,R=!1;const P=1,L=Math.ceil(e/P);for(let H=0;H<L&&(O=Math.abs(g)>S,!(!O&&(p=Math.abs(f-E)<=y,p)));++H){C&&(R=E==f||E>f==j,R&&(g=-g*T,E=f));const se=-i.tension*1e-6*(E-f),ee=-i.friction*.001*g,J=(se+ee)/i.mass;g=g+J*P,E=E+g*P}}else{let S=1;i.duration>0&&(this._memoizedDuration!==i.duration&&(this._memoizedDuration=i.duration,u.durationProgress>0&&(u.elapsedTime=i.duration*u.durationProgress,x=u.elapsedTime+=e)),S=(i.progress||0)+x/this._memoizedDuration,S=S>1?1:S<0?0:S,u.durationProgress=S),E=m+i.easing(S)*(f-m),g=(E-u.lastPosition)/e,p=S==1}u.lastVelocity=g,Number.isNaN(E)&&(console.warn("Got NaN while animating:",this),p=!0)}o&&!o[d].done&&(p=!1),p?u.done=!0:t=!1,u.setValue(E,i.round)&&(n=!0)});const l=gt(this),c=l.getValue();if(t){const u=qe(r.to);(c!==u||n)&&!i.decay?(l.setValue(u),this._onChange(u)):n&&i.decay&&this._onChange(c),this._stop()}else n&&this._onChange(c)}set(e){return ne.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Ut(this)){const{to:e,config:t}=this.animation;ne.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let n;return I.und(e)?(n=this.queue||[],this.queue=[]):n=[I.obj(e)?e:{...t,to:e}],Promise.all(n.map(r=>this._update(r))).then(r=>Zi(this,r))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),or(this._state,e&&this._lastCallId),ne.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:n,from:r}=e;n=I.obj(n)?n[t]:n,(n==null||ri(n))&&(n=void 0),r=I.obj(r)?r[t]:r,r==null&&(r=void 0);const s={to:n,from:r};return Ns(this)||(e.reverse&&([n,r]=[r,n]),r=qe(r),I.und(r)?gt(this)||this._set(n):this._set(r)),s}_update({...e},t){const{key:n,defaultProps:r}=this;e.default&&Object.assign(r,Qi(e,(o,l)=>/^on/.test(l)?Xl(o,n):o)),Ya(this,e,"onProps"),Un(this,"onProps",e,this);const s=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const i=this._state;return Kl(++this._lastCallId,{key:n,props:e,defaultProps:r,state:i,actions:{pause:()=>{Ln(this)||(Xa(this,!0),$n(i.pauseQueue),Un(this,"onPause",ot(this,Vn(this,this.animation.to)),this))},resume:()=>{Ln(this)&&(Xa(this,!1),Ut(this)&&this._resume(),$n(i.resumeQueue),Un(this,"onResume",ot(this,Vn(this,this.animation.to)),this))},start:this._merge.bind(this,s)}}).then(o=>{if(e.loop&&o.finished&&!(t&&o.noop)){const l=ec(e);if(l)return this._update(l,!0)}return o})}_merge(e,t,n){if(t.cancel)return this.stop(!0),n(Tn(this));const r=!I.und(e.to),s=!I.und(e.from);if(r||s)if(t.callId>this._lastToId)this._lastToId=t.callId;else return n(Tn(this));const{key:i,defaultProps:o,animation:l}=this,{to:c,from:u}=l;let{to:d=c,from:f=u}=e;s&&!r&&(!t.default||I.und(d))&&(d=f),t.reverse&&([d,f]=[f,d]);const p=!Ot(f,u);p&&(l.from=f),f=qe(f);const E=!Ot(d,c);E&&this._focus(d);const x=ri(t.to),{config:m}=l,{decay:b,velocity:g}=m;(r||s)&&(m.velocity=0),t.config&&!x&&hm(m,an(t.config,i),t.config!==o.config?an(o.config,i):void 0);let y=gt(this);if(!y||I.und(d))return n(ot(this,!0));const S=I.und(t.reset)?s&&!t.default:!I.und(f)&&Gn(t.reset,i),T=S?f:this.get(),C=ar(d),j=I.num(C)||I.arr(C)||gs(C),O=!x&&(!j||Gn(o.immediate||t.immediate,i));if(E){const H=ni(d);if(H!==y.constructor)if(O)y=this._set(C);else throw Error(`Cannot animate between ${y.constructor.name} and ${H.name}, as the "to" prop suggests`)}const R=y.constructor;let P=et(d),L=!1;if(!P){const H=S||!Ns(this)&&p;(E||H)&&(L=Ot(ar(T),C),P=!L),(!Ot(l.immediate,O)&&!O||!Ot(m.decay,b)||!Ot(m.velocity,g))&&(P=!0)}if(L&&Ut(this)&&(l.changed&&!S?P=!0:P||this._stop(c)),!x&&((P||et(c))&&(l.values=y.getPayload(),l.toValues=et(d)?null:R==ir?[1]:Ke(C)),l.immediate!=O&&(l.immediate=O,!O&&!S&&this._set(c)),P)){const{onRest:H}=l;de(ym,ee=>Ya(this,t,ee));const se=ot(this,Vn(this,c));$n(this._pendingCalls,se),this._pendingCalls.add(n),l.changed&&ne.batchedUpdates(()=>{var ee;l.changed=!S,H==null||H(se,this),S?an(o.onRest,se):(ee=l.onStart)==null||ee.call(l,se,this)})}S&&this._set(T),x?n(Zl(t.to,t,this._state,this)):P?this._start():Ut(this)&&!E?this._pendingCalls.add(n):n(Ql(T))}_focus(e){const t=this.animation;e!==t.to&&(Fa(this)&&this._detach(),t.to=e,Fa(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;et(t)&&(On(t,this),ii(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;et(e)&&rr(e,this)}_set(e,t=!0){const n=qe(e);if(!I.und(n)){const r=gt(this);if(!r||!Ot(n,r.getValue())){const s=ni(n);!r||r.constructor!=s?Ki(this,s.create(n)):r.setValue(n),r&&ne.batchedUpdates(()=>{this._onChange(n,t)})}}return gt(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,Un(this,"onStart",ot(this,Vn(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),an(this.animation.onChange,e,this)),an(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;gt(this).reset(qe(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),Ut(this)||(qa(this,!0),Ln(this)||this._resume())}_resume(){dt.skipAnimation?this.finish():hs.start(this)}_stop(e,t){if(Ut(this)){qa(this,!1);const n=this.animation;de(n.values,s=>{s.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),nr(this,{type:"idle",parent:this});const r=t?Tn(this.get()):ot(this.get(),Vn(this,e??n.to));$n(this._pendingCalls,r),n.changed&&(n.changed=!1,Un(this,"onRest",r,this))}}};function Vn(e,t){const n=ar(t),r=ar(e.get());return Ot(r,n)}function ec(e,t=e.loop,n=e.to){const r=an(t);if(r){const s=r!==!0&&Yl(r),i=(s||e).reverse,o=!s||s.reset;return lr({...e,loop:t,default:!1,pause:void 0,to:!i||ri(n)?n:void 0,from:o?e.from:void 0,reset:o,...s})}}function lr(e){const{to:t,from:n}=e=Yl(e),r=new Set;return I.obj(t)&&Ga(t,r),I.obj(n)&&Ga(n,r),e.keys=r.size?Array.from(r):null,e}function vm(e){const t=lr(e);return I.und(t.default)&&(t.default=Qi(t)),t}function Ga(e,t){wt(e,(n,r)=>n!=null&&t.add(r))}var ym=["onStart","onRest","onChange","onPause","onResume"];function Ya(e,t,n){e.animation[n]=t[n]!==Gl(t,n)?Xl(t[n],e.key):void 0}function Un(e,t,...n){var r,s,i,o;(s=(r=e.animation)[t])==null||s.call(r,...n),(o=(i=e.defaultProps)[t])==null||o.call(i,...n)}var bm=["onStart","onChange","onRest"],xm=1,wm=class{constructor(e,t){this.id=xm++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,n)=>e[n]=t.get()),e}set(e){for(const t in e){const n=e[t];I.und(n)||this.springs[t].set(n)}}update(e){return e&&this.queue.push(lr(e)),this}start(e){let{queue:t}=this;return e?t=Ke(e).map(lr):this.queue=[],this._flush?this._flush(this,t):(ic(this,t),li(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const n=this.springs;de(Ke(t),r=>n[r].stop(!!e))}else or(this._state,this._lastAsyncId),this.each(n=>n.stop(!!e));return this}pause(e){if(I.und(e))this.start({pause:!0});else{const t=this.springs;de(Ke(e),n=>t[n].pause())}return this}resume(e){if(I.und(e))this.start({pause:!1});else{const t=this.springs;de(Ke(e),n=>t[n].resume())}return this}each(e){wt(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:n}=this._events,r=this._active.size>0,s=this._changed.size>0;(r&&!this._started||s&&!this._started)&&(this._started=!0,qn(e,([l,c])=>{c.value=this.get(),l(c,this,this._item)}));const i=!r&&this._started,o=s||i&&n.size?this.get():null;s&&t.size&&qn(t,([l,c])=>{c.value=o,l(c,this,this._item)}),i&&(this._started=!1,qn(n,([l,c])=>{c.value=o,l(c,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;ne.onFrame(this._onFrame)}};function li(e,t){return Promise.all(t.map(n=>tc(e,n))).then(n=>Zi(e,n))}async function tc(e,t,n){const{keys:r,to:s,from:i,loop:o,onRest:l,onResolve:c}=t,u=I.obj(t.default)&&t.default;o&&(t.loop=!1),s===!1&&(t.to=null),i===!1&&(t.from=null);const d=I.arr(s)||I.fun(s)?s:void 0;d?(t.to=void 0,t.onRest=void 0,u&&(u.onRest=void 0)):de(bm,m=>{const b=t[m];if(I.fun(b)){const g=e._events[m];t[m]=({finished:y,cancelled:S})=>{const T=g.get(b);T?(y||(T.finished=!1),S&&(T.cancelled=!0)):g.set(b,{value:null,finished:y||!1,cancelled:S||!1})},u&&(u[m]=t[m])}});const f=e._state;t.pause===!f.paused?(f.paused=t.pause,$n(t.pause?f.pauseQueue:f.resumeQueue)):f.paused&&(t.pause=!0);const p=(r||Object.keys(e.springs)).map(m=>e.springs[m].start(t)),E=t.cancel===!0||Gl(t,"cancel")===!0;(d||E&&f.asyncId)&&p.push(Kl(++e._lastAsyncId,{props:t,state:f,actions:{pause:ei,resume:ei,start(m,b){E?(or(f,e._lastAsyncId),b(Tn(e))):(m.onRest=l,b(Zl(d,m,f,e)))}}})),f.paused&&await new Promise(m=>{f.resumeQueue.add(m)});const x=Zi(e,await Promise.all(p));if(o&&x.finished&&!(n&&x.noop)){const m=ec(t,o,s);if(m)return ic(e,[m]),tc(e,m,!0)}return c&&ne.batchedUpdates(()=>c(x,e,e.item)),x}function Ka(e,t){const n={...e.springs};return t&&de(Ke(t),r=>{I.und(r.keys)&&(r=lr(r)),I.obj(r.to)||(r={...r,to:void 0}),sc(n,r,s=>rc(s))}),nc(e,n),n}function nc(e,t){wt(t,(n,r)=>{e.springs[r]||(e.springs[r]=n,On(n,e))})}function rc(e,t){const n=new gm;return n.key=e,t&&On(n,t),n}function sc(e,t,n){t.keys&&de(t.keys,r=>{(e[r]||(e[r]=n(r)))._prepareNode(t)})}function ic(e,t){de(t,n=>{sc(e.springs,n,r=>rc(r,e))})}var bs=({children:e,...t})=>{const n=v.useContext(Gr),r=t.pause||!!n.pause,s=t.immediate||!!n.immediate;t=Yh(()=>({pause:r,immediate:s}),[r,s]);const{Provider:i}=Gr;return v.createElement(i,{value:t},e)},Gr=Em(bs,{});bs.Provider=Gr.Provider;bs.Consumer=Gr.Consumer;function Em(e,t){return Object.assign(e,v.createContext(t)),e.Provider._context=e,e.Consumer._context=e,e}var Sm=()=>{const e=[],t=function(r){Xh();const s=[];return de(e,(i,o)=>{if(I.und(r))s.push(i.start());else{const l=n(r,i,o);l&&s.push(i.start(l))}}),s};t.current=e,t.add=function(r){e.includes(r)||e.push(r)},t.delete=function(r){const s=e.indexOf(r);~s&&e.splice(s,1)},t.pause=function(){return de(e,r=>r.pause(...arguments)),this},t.resume=function(){return de(e,r=>r.resume(...arguments)),this},t.set=function(r){de(e,(s,i)=>{const o=I.fun(r)?r(i,s):r;o&&s.set(o)})},t.start=function(r){const s=[];return de(e,(i,o)=>{if(I.und(r))s.push(i.start());else{const l=this._getProps(r,i,o);l&&s.push(i.start(l))}}),s},t.stop=function(){return de(e,r=>r.stop(...arguments)),this},t.update=function(r){return de(e,(s,i)=>s.update(this._getProps(r,s,i))),this};const n=function(r,s,i){return I.fun(r)?r(i,s):r};return t._getProps=n,t};function Cm(e,t,n){const r=I.fun(t)&&t;r&&!n&&(n=[]);const s=v.useMemo(()=>r||arguments.length==3?Sm():void 0,[]),i=v.useRef(0),o=zl(),l=v.useMemo(()=>({ctrls:[],queue:[],flush(g,y){const S=Ka(g,y);return i.current>0&&!l.queue.length&&!Object.keys(S).some(C=>!g.springs[C])?li(g,y):new Promise(C=>{nc(g,S),l.queue.push(()=>{C(li(g,y))}),o()})}}),[]),c=v.useRef([...l.ctrls]),u=[],d=La(e)||0;v.useMemo(()=>{de(c.current.slice(e,d),g=>{cm(g,s),g.stop(!0)}),c.current.length=e,f(d,e)},[e]),v.useMemo(()=>{f(0,Math.min(d,e))},n);function f(g,y){for(let S=g;S<y;S++){const T=c.current[S]||(c.current[S]=new wm(null,l.flush)),C=r?r(S,T):t[S];C&&(u[S]=vm(C))}}const p=c.current.map((g,y)=>Ka(g,u[y])),E=v.useContext(bs),x=La(E),m=E!==x&&lm(E);Yi(()=>{i.current++,l.ctrls=c.current;const{queue:g}=l;g.length&&(l.queue=[],de(g,y=>y())),de(c.current,(y,S)=>{s==null||s.add(y),m&&y.start({default:E});const T=u[S];T&&(um(y,T.ref),y.ref?y.queue.push(T):y.start(T))})}),Hl(()=>()=>{de(l.ctrls,g=>g.stop(!0))});const b=p.map(g=>({...g}));return s?[b,s]:b}function Tm(e,t){const n=I.fun(e),[[r],s]=Cm(1,n?e:[e],n?t||[]:t);return n||arguments.length==2?[r,s]:r}var _m=class extends Ji{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=er(...t);const n=this._get(),r=ni(n);Ki(this,r.create(n))}advance(e){const t=this._get(),n=this.get();Ot(t,n)||(gt(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&Qa(this._active)&&Fs(this)}_get(){const e=I.arr(this.source)?this.source.map(qe):Ke(qe(this.source));return this.calc(...e)}_start(){this.idle&&!Qa(this._active)&&(this.idle=!1,de(vs(this),e=>{e.done=!1}),dt.skipAnimation?(ne.batchedUpdates(()=>this.advance()),Fs(this)):hs.start(this))}_attach(){let e=1;de(Ke(this.source),t=>{et(t)&&On(t,this),ii(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){de(Ke(this.source),e=>{et(e)&&rr(e,this)}),this._active.clear(),Fs(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=Ke(this.source).reduce((t,n)=>Math.max(t,(ii(n)?n.priority:0)+1),0))}};function jm(e){return e.idle!==!1}function Qa(e){return!e.size||Array.from(e).every(jm)}function Fs(e){e.idle||(e.idle=!0,de(vs(e),t=>{t.done=!0}),nr(e,{type:"idle",parent:e}))}dt.assign({createStringInterpolator:Bl,to:(e,t)=>new _m(e,t)});var ac=/^--/;function Am(e,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!ac.test(e)&&!(Yn.hasOwnProperty(e)&&Yn[e])?t+"px":(""+t).trim()}var Za={};function Im(e,t){if(!e.nodeType||!e.setAttribute)return!1;const n=e.nodeName==="filter"||e.parentNode&&e.parentNode.nodeName==="filter",{style:r,children:s,scrollTop:i,scrollLeft:o,viewBox:l,...c}=t,u=Object.values(c),d=Object.keys(c).map(f=>n||e.hasAttribute(f)?f:Za[f]||(Za[f]=f.replace(/([A-Z])/g,p=>"-"+p.toLowerCase())));s!==void 0&&(e.textContent=s);for(const f in r)if(r.hasOwnProperty(f)){const p=Am(f,r[f]);ac.test(f)?e.style.setProperty(f,p):e.style[f]=p}d.forEach((f,p)=>{e.setAttribute(f,u[p])}),i!==void 0&&(e.scrollTop=i),o!==void 0&&(e.scrollLeft=o),l!==void 0&&e.setAttribute("viewBox",l)}var Yn={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rm=(e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1),km=["Webkit","Ms","Moz","O"];Yn=Object.keys(Yn).reduce((e,t)=>(km.forEach(n=>e[Rm(n,t)]=e[t]),e),Yn);var Om=/^(matrix|translate|scale|rotate|skew)/,Mm=/^(translate)/,Pm=/^(rotate|skew)/,Ds=(e,t)=>I.num(e)&&e!==0?e+t:e,Fr=(e,t)=>I.arr(e)?e.every(n=>Fr(n,t)):I.num(e)?e===t:parseFloat(e)===t,Nm=class extends ys{constructor({x:e,y:t,z:n,...r}){const s=[],i=[];(e||t||n)&&(s.push([e||0,t||0,n||0]),i.push(o=>[`translate3d(${o.map(l=>Ds(l,"px")).join(",")})`,Fr(o,0)])),wt(r,(o,l)=>{if(l==="transform")s.push([o||""]),i.push(c=>[c,c===""]);else if(Om.test(l)){if(delete r[l],I.und(o))return;const c=Mm.test(l)?"px":Pm.test(l)?"deg":"";s.push(Ke(o)),i.push(l==="rotate3d"?([u,d,f,p])=>[`rotate3d(${u},${d},${f},${Ds(p,c)})`,Fr(p,0)]:u=>[`${l}(${u.map(d=>Ds(d,c)).join(",")})`,Fr(u,l.startsWith("scale")?1:0)])}}),s.length&&(r.transform=new Fm(s,i)),super(r)}},Fm=class extends Ll{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return de(this.inputs,(n,r)=>{const s=qe(n[0]),[i,o]=this.transforms[r](I.arr(s)?s:n.map(qe));e+=" "+i,t=t&&o}),t?"none":e}observerAdded(e){e==1&&de(this.inputs,t=>de(t,n=>et(n)&&On(n,this)))}observerRemoved(e){e==0&&de(this.inputs,t=>de(t,n=>et(n)&&rr(n,this)))}eventObserved(e){e.type=="change"&&(this._value=null),nr(this,e)}},Dm=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];dt.assign({batchedUpdates:ho.unstable_batchedUpdates,createStringInterpolator:Bl,colors:Ch});var Lm=rm(Dm,{applyAnimatedValues:Im,createAnimatedStyle:e=>new Nm(e),getComponentProps:({scrollTop:e,scrollLeft:t,...n})=>n}),Vm=Lm.animated,oc={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var i="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(i=s(i,r(l)))}return i}function r(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return n.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var o="";for(var l in i)t.call(i,l)&&i[l]&&(o=s(o,l));return o}function s(i,o){return o?i?i+" "+o:i+o:i}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(oc);var Um=oc.exports;const lc=di(Um);var ci=new Map,kr=new WeakMap,Ja=0,Bm=void 0;function $m(e){return e?(kr.has(e)||(Ja+=1,kr.set(e,Ja.toString())),kr.get(e)):"0"}function zm(e){return Object.keys(e).sort().filter(t=>e[t]!==void 0).map(t=>`${t}_${t==="root"?$m(e.root):e[t]}`).toString()}function Hm(e){const t=zm(e);let n=ci.get(t);if(!n){const r=new Map;let s;const i=new IntersectionObserver(o=>{o.forEach(l=>{var c;const u=l.isIntersecting&&s.some(d=>l.intersectionRatio>=d);e.trackVisibility&&typeof l.isVisible>"u"&&(l.isVisible=u),(c=r.get(l.target))==null||c.forEach(d=>{d(u,l)})})},e);s=i.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:t,observer:i,elements:r},ci.set(t,n)}return n}function Wm(e,t,n={},r=Bm){if(typeof window.IntersectionObserver>"u"&&r!==void 0){const c=e.getBoundingClientRect();return t(r,{isIntersecting:r,target:e,intersectionRatio:typeof n.threshold=="number"?n.threshold:0,time:0,boundingClientRect:c,intersectionRect:c,rootBounds:c}),()=>{}}const{id:s,observer:i,elements:o}=Hm(n),l=o.get(e)||[];return o.has(e)||o.set(e,l),l.push(t),i.observe(e),function(){l.splice(l.indexOf(t),1),l.length===0&&(o.delete(e),i.unobserve(e)),o.size===0&&(i.disconnect(),ci.delete(s))}}function cc({threshold:e,delay:t,trackVisibility:n,rootMargin:r,root:s,triggerOnce:i,skip:o,initialInView:l,fallbackInView:c,onChange:u}={}){var d;const[f,p]=v.useState(null),E=v.useRef(),[x,m]=v.useState({inView:!!l,entry:void 0});E.current=u,v.useEffect(()=>{if(o||!f)return;let S;return S=Wm(f,(T,C)=>{m({inView:T,entry:C}),E.current&&E.current(T,C),C.isIntersecting&&i&&S&&(S(),S=void 0)},{root:s,rootMargin:r,threshold:e,trackVisibility:n,delay:t},c),()=>{S&&S()}},[Array.isArray(e)?e.toString():e,f,s,r,i,o,n,c,t]);const b=(d=x.entry)==null?void 0:d.target,g=v.useRef();!f&&b&&!i&&!o&&g.current!==b&&(g.current=b,m({inView:!!l,entry:void 0}));const y=[p,x.inView,x.entry];return y.ref=y[0],y.inView=y[1],y.entry=y[2],y}const qm="Left",Xm="Right",Gm="Up",Ym="Down",En={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},ui={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},eo="mousemove",to="mouseup",Km="touchend",Qm="touchmove",Zm="touchstart";function Jm(e,t,n,r){return e>t?n>0?Xm:qm:r>0?Ym:Gm}function no(e,t){if(t===0)return e;const n=Math.PI/180*t,r=e[0]*Math.cos(n)+e[1]*Math.sin(n),s=e[1]*Math.cos(n)-e[0]*Math.sin(n);return[r,s]}function ep(e,t){const n=d=>{const f="touches"in d;f&&d.touches.length>1||e((p,E)=>{E.trackMouse&&!f&&(document.addEventListener(eo,r),document.addEventListener(to,o));const{clientX:x,clientY:m}=f?d.touches[0]:d,b=no([x,m],E.rotationAngle);return E.onTouchStartOrOnMouseDown&&E.onTouchStartOrOnMouseDown({event:d}),Object.assign(Object.assign(Object.assign({},p),ui),{initial:b.slice(),xy:b,start:d.timeStamp||0})})},r=d=>{e((f,p)=>{const E="touches"in d;if(E&&d.touches.length>1)return f;if(d.timeStamp-f.start>p.swipeDuration)return f.swiping?Object.assign(Object.assign({},f),{swiping:!1}):f;const{clientX:x,clientY:m}=E?d.touches[0]:d,[b,g]=no([x,m],p.rotationAngle),y=b-f.xy[0],S=g-f.xy[1],T=Math.abs(y),C=Math.abs(S),j=(d.timeStamp||0)-f.start,O=Math.sqrt(T*T+C*C)/(j||1),R=[y/(j||1),S/(j||1)],P=Jm(T,C,y,S),L=typeof p.delta=="number"?p.delta:p.delta[P.toLowerCase()]||En.delta;if(T<L&&C<L&&!f.swiping)return f;const H={absX:T,absY:C,deltaX:y,deltaY:S,dir:P,event:d,first:f.first,initial:f.initial,velocity:O,vxvy:R};H.first&&p.onSwipeStart&&p.onSwipeStart(H),p.onSwiping&&p.onSwiping(H);let se=!1;return(p.onSwiping||p.onSwiped||p[`onSwiped${P}`])&&(se=!0),se&&p.preventScrollOnSwipe&&p.trackTouch&&d.cancelable&&d.preventDefault(),Object.assign(Object.assign({},f),{first:!1,eventData:H,swiping:!0})})},s=d=>{e((f,p)=>{let E;if(f.swiping&&f.eventData){if(d.timeStamp-f.start<p.swipeDuration){E=Object.assign(Object.assign({},f.eventData),{event:d}),p.onSwiped&&p.onSwiped(E);const x=p[`onSwiped${E.dir}`];x&&x(E)}}else p.onTap&&p.onTap({event:d});return p.onTouchEndOrOnMouseUp&&p.onTouchEndOrOnMouseUp({event:d}),Object.assign(Object.assign(Object.assign({},f),ui),{eventData:E})})},i=()=>{document.removeEventListener(eo,r),document.removeEventListener(to,o)},o=d=>{i(),s(d)},l=(d,f)=>{let p=()=>{};if(d&&d.addEventListener){const E=Object.assign(Object.assign({},En.touchEventOptions),f.touchEventOptions),x=[[Zm,n,E],[Qm,r,Object.assign(Object.assign({},E),f.preventScrollOnSwipe?{passive:!1}:{})],[Km,s,E]];x.forEach(([m,b,g])=>d.addEventListener(m,b,g)),p=()=>x.forEach(([m,b])=>d.removeEventListener(m,b))}return p},u={ref:d=>{d!==null&&e((f,p)=>{if(f.el===d)return f;const E={};return f.el&&f.el!==d&&f.cleanUpTouch&&(f.cleanUpTouch(),E.cleanUpTouch=void 0),p.trackTouch&&d&&(E.cleanUpTouch=l(d,p)),Object.assign(Object.assign(Object.assign({},f),{el:d}),E)})}};return t.trackMouse&&(u.onMouseDown=n),[u,l]}function tp(e,t,n,r){return!t.trackTouch||!e.el?(e.cleanUpTouch&&e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:void 0})):e.cleanUpTouch?t.preventScrollOnSwipe!==n.preventScrollOnSwipe||t.touchEventOptions.passive!==n.touchEventOptions.passive?(e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:r(e.el,t)})):e:Object.assign(Object.assign({},e),{cleanUpTouch:r(e.el,t)})}function np(e){const{trackMouse:t}=e,n=v.useRef(Object.assign({},ui)),r=v.useRef(Object.assign({},En)),s=v.useRef(Object.assign({},r.current));s.current=Object.assign({},r.current),r.current=Object.assign(Object.assign({},En),e);let i;for(i in En)r.current[i]===void 0&&(r.current[i]=En[i]);const[o,l]=v.useMemo(()=>ep(c=>n.current=c(n.current,r.current),{trackMouse:t}),[t]);return n.current=tp(n.current,r.current,s.current,l),o}const rp=({alt:e,borderRadius:t,height:n,src:r,status:s,width:i})=>{const[o,l]=v.useState(!1),{ref:c,inView:u}=cc();return v.useEffect(()=>{if(u&&!o){const d=new Image;d.onload=()=>l(!0),d.onerror=()=>{var p;const f=(p=c.current)==null?void 0:p.parentElement;f&&(f.style.display="none")},d.src=r}},[u,o,r]),a.jsx("div",{className:"image-container",ref:c,children:o?a.jsx("img",{className:s==="unread"?"":"read",src:r,alt:e,style:{width:i,height:n,objectFit:"cover",borderRadius:t}}):a.jsx("div",{className:"skeleton-container",children:a.jsx(Lr,{text:{rows:0},image:{style:{width:i,height:n,margin:"0",borderRadius:t}},animation:!0})})})},sp=({feed:e,mini:t})=>{const n=e.id,[r,s]=ur(Ru),{data:i}=Ed(n);v.useEffect(()=>{if(i&&!r[n]){const l=`data:${i.data.data}`;s(c=>({...c,[n]:l}))}},[i,n,r,s]);const o=r[n]??`https://icons.duckduckgo.com/ip3/${new URL(e.site_url).hostname}.ico`;return a.jsx("img",{className:t?"feed-icon-mini":"feed-icon",src:o,alt:"Feed icon"})},ip=({entry:e,isThumbnail:t})=>{const n={width:t?"100px":"100%",height:t?"100px":"160px"};return e.imgSrc?a.jsx("div",{className:t?"thumbnail":"cover-image",children:a.jsx(rp,{alt:e.id,borderRadius:t?"4px":void 0,src:e.imgSrc,status:e.status,width:n.width,height:n.height})}):null},ap=({entry:e,showFeedIcon:t,mini:n})=>{const r=lc({"article-card-mini-content":n,"article-card-mini-content-padding":n&&t});return a.jsxs("div",{className:r,style:{width:"calc(100% - 32px)"},children:[a.jsx("div",{style:{padding:n?"0 8px 0 0":"0 0 8px 0"},children:a.jsx(ip,{entry:e,isThumbnail:n})}),a.jsxs("div",{className:n?"article-card-mini-content-text":"",children:[a.jsx(Q.Text,{className:e.status==="unread"?"title-unread":"title-read",children:e.title}),a.jsxs(Q.Text,{className:"article-info",children:[a.jsx("br",{}),t&&a.jsx(sp,{feed:e.feed,mini:n}),e.feed.title,a.jsx("br",{}),wo(e.published_at)]}),e.starred&&a.jsx(hi,{className:"icon-starred"})]})]})},op=({entry:e,handleEntryClick:t,mini:n})=>{const r=Ae(P=>P.activeContent),s=he(Oe),{markReadOnScroll:i,showFeedIcon:o}=s,l=r&&e.id===r.id,{handleToggleStarred:c,handleToggleStatus:u}=Ti(),[d,f]=v.useState(0),p=100,E=.5,x=e.starred,m=e.status==="unread",b=np({preventScrollOnSwipe:!0,delta:p/2,onSwiping:P=>{const L=Math.min(Math.abs(P.deltaX*E),p)*Math.sign(P.deltaX);f(L)},onSwiped:async P=>{try{P.deltaX>p?(await c(e),ue.success(x?"Unmarked as starred":"Marked as starred")):P.deltaX<-p&&(await u(e),ue.success(m?"Marked as read":"Marked as unread"))}catch{ue.error("Failed to update, please try again")}f(0)}}),[g,y]=v.useState(!1),[S,T]=v.useState(!1),C=()=>u(e),j=20,{ref:O}=cc({skip:S,onChange:async(P,L)=>{if(!(!i||!m)){if(P)y(!0);else if(g){const{top:H}=L.boundingClientRect;H<j&&(await C(),T(!0))}}}}),R=Tm({x:d});return v.createElement("div",{...b,className:"article-card",key:e.id},a.jsxs("div",{ref:O,children:[a.jsx(Vm.div,{className:"swipe-card",style:R,children:a.jsx(Zn,{className:lc("swipe-content","card-custom-style","card-custom-hover-style",{"card-custom-selected-style":l}),"data-entry-id":e.id,hoverable:!0,onClick:()=>t(e),bordered:!1,children:a.jsx(Zn.Meta,{description:a.jsx(ap,{entry:e,showFeedIcon:o,mini:n})})})}),a.jsxs("div",{className:"swipe-actions",children:[a.jsx("div",{className:"swipe-action left",children:x?a.jsx(hi,{style:{color:"#ffcd00"}}):a.jsx(fi,{})}),a.jsx("div",{className:"swipe-action right",children:m?a.jsx(mo,{}):a.jsx(po,{})})]})]}))},lp=({loading:e})=>{const t=he(Oe),{layout:n}=t,r=n==="large"?2:4,s=i=>a.jsx(Zn,{className:"card-style",cover:n==="large"&&a.jsx("div",{className:"card-cover-style"}),children:a.jsx(Zn.Meta,{description:a.jsx(Lr,{loading:e,animation:!0,text:{rows:3,width:150}})})},i);return e?Array.from({length:r},(i,o)=>s(o)):null},uc=e=>{const t=he(Oe),{showAllFeeds:n}=t,r=he(Jr),{entries:s,filterStatus:i,filterString:o,filterType:l,setFilteredEntries:c,setFilterStatus:u,setFilterString:d,setFilterType:f}=v.useContext(Et);return v.useEffect(()=>{c([]);const p=qo(s,l,i,o);c($r(p,e,n,r))},[i,o,l]),{setFilterStatus:u,setFilterString:d,setFilterType:f}},cp=e=>{const{filterString:t,filterType:n}=v.useContext(Et),{isMobileView:r}=ns(),{setFilterString:s,setFilterType:i}=uc(e),o=he(Oe),{updateConfig:l}=Qr(),{orderDirection:c}=o,u=()=>{l({orderDirection:c==="desc"?"asc":"desc"})};return a.jsxs("div",{className:"search-and-sort-bar",children:[a.jsx(ct.Search,{allowClear:!0,placeholder:"Search...",value:t,addBefore:a.jsxs(ke,{placeholder:"Select type",onChange:i,style:{width:100},value:n,children:[a.jsx(ke.Option,{value:"0",children:"Title"}),a.jsx(ke.Option,{value:"1",children:"Content"})]}),onChange:s,style:{width:r?"100%":278,marginLeft:8}}),a.jsx(Kn,{mini:!0,position:"left",content:c==="desc"?"Newest first":"Oldest first",children:a.jsx(Ee,{shape:"circle",size:"small",style:{margin:"0 8px",flexShrink:0},icon:c==="desc"?a.jsx(Gc,{}):a.jsx(Yc,{}),onClick:u})})]})},up=v.forwardRef(({info:e,loading:t,getEntries:n,handleEntryClick:r,cardsRef:s},i)=>{const{filteredEntries:o,filterStatus:l,loadMoreUnreadVisible:c,loadMoreVisible:u}=v.useContext(Et),{loadingMore:d,handleLoadMore:f}=_i(),p=he(Oe),{layout:E}=p,x=E==="small";return a.jsxs(a.Fragment,{children:[a.jsx(cp,{info:e}),a.jsxs("div",{className:"entry-list",ref:i,children:[a.jsx(lp,{loading:t}),t?null:a.jsx("div",{ref:s,children:o.map(m=>(lo(m.feed.site_url)||(m.feed.site_url=Co(m.feed.feed_url)),a.jsx(op,{entry:m,handleEntryClick:r,mini:x},m.id)))}),!t&&(l==="all"?u:c)&&a.jsxs(Ee,{className:"load-more-button",loading:d,long:!0,onClick:()=>f(e,n),children:[!d&&a.jsx(Kc,{}),"Load more"]})]})]})}),dp=v.forwardRef(({info:e,refreshArticleList:t,markAllAsRead:n},r)=>{const{entries:s,filteredEntries:i,filterStatus:o,loading:l,setEntries:c,setFilteredEntries:u,setUnreadCount:d,setUnreadEntries:f,unreadEntries:p}=v.useContext(Et),{setFilterStatus:E}=uc(e),x=he(Oe),{loadData:m}=Ci(),{showStatus:b}=x,g=async()=>{try{await n(),ue.success("Marked all as read successfully"),m(),c(s.map(S=>({...S,status:"read"}))),f([]),u(o==="all"?i.map(S=>({...S,status:"read"})):[]),d(0)}catch{ue.error("Failed to mark all as read")}};v.useEffect(()=>{e.from==="history"&&E("all")},[]),v.useEffect(()=>{e.from!=="history"&&E(b)},[b]);const y=S=>{r.current&&r.current.scrollTo(0,0),E(S),u(S==="all"?s:p)};return a.jsxs("div",{className:"entry-panel",children:[!["starred","history"].includes(e.from)&&a.jsx(Ls,{focusLock:!0,title:"Mark All As Read?",onOk:g,children:a.jsx(Ee,{icon:a.jsx(so,{}),shape:"circle"})}),a.jsxs(xs.Group,{disabled:e.from==="history",name:"lang",onChange:S=>y(S),type:"button",value:e.from==="history"?"all":o,children:[a.jsx(xs,{value:"all",children:"ALL"}),a.jsx(xs,{value:"unread",children:"UNREAD"})]}),a.jsx(Ee,{icon:a.jsx(Vs,{}),loading:l,shape:"circle",onClick:t})]})}),Mn=({info:e,getEntries:t,markAllAsRead:n})=>{const r=Ae(U=>U.activeContent),s=Ae(U=>U.setActiveContent),i=he(Jr),o=he(vi),{loadData:l}=Ci(),c=he(Oe),{orderBy:u,orderDirection:d,showAllFeeds:f}=c,{entries:p,entryDetailRef:E,filteredEntries:x,filterStatus:m,isArticleFocused:b,loading:g,setEntries:y,setFilteredEntries:S,setIsArticleFocused:T,setLoading:C,setLoadMoreUnreadVisible:j,setLoadMoreVisible:O,setOffset:R,setTotal:P,setUnreadCount:L,setUnreadEntries:H,setUnreadOffset:se,unreadEntries:ee}=v.useContext(Et),{handleFetchContent:J,handleToggleStarred:me,handleToggleStatus:ye,handleEntryStatusUpdate:Ie}=Ti(),{parseFirstImage:pe}=_i(),[We,w]=v.useState(!1),[h,F]=v.useState(!1),V=v.useRef(null),$=v.useRef(null);v.useEffect(()=>{!h||e.from==="history"||re()},[u]),v.useEffect(()=>{re()},[e,d]),v.useEffect(()=>{S(()=>["all","today","category"].includes(e.from)&&!f?(m==="all"?p:ee).filter(D=>!i.includes(D.feed.id)):m==="all"?p:ee),w(!0)},[m,i,f]);const B=async U=>{s(null),setTimeout(()=>{s({...U,status:"read"})},200),U.status==="unread"&&(setTimeout(()=>{Ie(U,"read")},200),gi([U.id],"read").catch(()=>{ue.error("Failed to mark entry as read, please try again later"),Ie(U,"unread")})),E.current&&(E.current.setAttribute("tabIndex","-1"),E.current.focus(),E.current.scrollTo(0,0))},{handleBKey:W,handleDKey:z,handleEscapeKey:Y,handleLeftKey:te,handleMKey:q,handleRightKey:oe,handleSKey:k}=Xo(e,B,t);v.useEffect(()=>{const U={27:()=>Y(V),37:()=>te(),39:()=>oe(e),66:()=>W(),68:()=>z(J),77:()=>q(()=>ye(r)),83:()=>k(()=>me(r))},D=G=>{const K=U[G.keyCode];K&&K()};return b?document.addEventListener("keydown",D):document.removeEventListener("keydown",D),()=>{document.removeEventListener("keydown",D)}},[r,x,b]);const M=(U,D,G,K)=>{y(U),H(D),S($r(m==="all"?U:D,e,f,i)),P(G.data.total),O(U.length<G.data.total),L(K.data.total),j(D.length<K.data.total)},N=(U,D)=>{var G,K;if((G=U==null?void 0:U.data)!=null&&G.entries&&((K=D==null?void 0:D.data)==null?void 0:K.total)>=0){const Me=U.data.entries.map(pe),Ue=D.data.entries.map(pe);M(Me,Ue,U,D)}},A=async()=>{C(!0);try{const U=await t();if(e.from==="history")N(U,U);else{const D=await t(0,"unread");N(U,D)}}catch(U){console.error("Error fetching articles:",U)}finally{C(!1)}},re=async()=>{if(V.current&&V.current.scrollTo(0,0),R(0),se(0),!o){l();return}await A()};return v.useEffect(()=>{r&&s(null)},[]),v.useEffect(()=>{if(o)try{A(),F(!0),T(!0)}catch{ue.error("Failed to fetch articles, please try again later")}},[o]),a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"entry-col",children:[a.jsx(ia,{in:!g,timeout:200,nodeRef:$,classNames:"fade",children:a.jsx(up,{info:e,cardsRef:$,loading:g,getEntries:t,handleEntryClick:B,ref:V})}),a.jsx(dp,{info:e,refreshArticleList:re,markAllAsRead:n,ref:V})]}),a.jsx(ia,{in:r!=null,timeout:200,nodeRef:E,classNames:"fade",unmountOnExit:!0,children:a.jsx(ph,{info:e,handleEntryClick:B,getEntries:t,isFilteredEntriesUpdated:We,setIsFilteredEntriesUpdated:w,ref:E})})]})},fp=()=>{const e=async()=>{const t=await Iu();return be.put(`/v1/users/${t.data.id}/mark-all-as-read`)};return a.jsx(kn,{children:a.jsx(Mn,{info:{from:"all",id:""},getEntries:xu,markAllAsRead:e})})},hp=()=>{const{id:e}=go(),t=he(Oe),{orderBy:n,pageSize:r}=t,s=async(o=0,l=null)=>{const c={baseUrl:`/v1/categories/${e}/entries`,orderField:n,offset:o,limit:r,status:l},u=In(c);return be.get(u)},i=async()=>be.put(`/v1/categories/${e}/mark-all-as-read`);return a.jsx(kn,{children:a.jsx(Mn,{info:{from:"category",id:e},getEntries:s,markAllAsRead:i})})},mp=()=>{const e=cr();return a.jsx("div",{id:"error-page",style:{top:"30%",position:"relative"},children:a.jsx("div",{children:a.jsx(Qc,{status:"404",subTitle:"Whoops, that page is gone. ",extra:[a.jsx(Ee,{type:"primary",onClick:()=>e("/"),children:"Back to Home"},"back")]})})})},pp=()=>{const{id:e}=go(),t=he(Oe),{orderBy:n,pageSize:r}=t,s=async(o=0,l=null)=>{const c={baseUrl:`/v1/feeds/${e}/entries`,orderField:n,offset:o,limit:r,status:l},u=In(c);return be.get(u)},i=async()=>be.put(`/v1/feeds/${e}/mark-all-as-read`);return a.jsx(kn,{children:a.jsx(Mn,{info:{from:"feed",id:e},getEntries:s,markAllAsRead:i})})},gp=()=>a.jsx(kn,{children:a.jsx(Mn,{info:{from:"history",id:""},getEntries:So})}),vp=e=>{var r;const t=e.getFieldsValue();let n=!0;for(const s of Object.keys(t))if(s!=="password"){const i=(r=t[s])==null?void 0:r.trim();e.setFieldValue(s,i),i||(n=!1)}else t[s]||(n=!1);return n},Or=(e,t)=>{e.key==="Enter"&&t.submit()},yp=()=>{const[e]=Zc(),[t,n]=v.useState(!1),[r,s]=ur(mi),[i,o]=v.useState("token"),l=cr();v.useEffect(()=>{pi(r)&&l("/")},[r,l]);const c=async()=>{n(!0);try{(await oo({url:"/v1/me",method:"get",baseURL:e.getFieldsValue().server,headers:{"X-Auth-Token":e.getFieldsValue().token},auth:{username:e.getFieldsValue().username,password:e.getFieldsValue().password},timeout:5e3})).status===200&&(ue.success("Success"),s(e.getFieldsValue()),l("/"))}catch(d){console.error(d),ue.error(d.message)}n(!1)},u=async()=>{await c()};return a.jsx("div",{style:{backgroundColor:"var(--color-bg-1)",height:"100%"},children:a.jsx("div",{style:{backgroundColor:"var(--color-fill-1)",height:"100%"},children:a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",overflowY:"auto"},children:[a.jsx(fo,{style:{fontSize:48,color:"rgb(var(--primary-6))",marginTop:"20px"}}),a.jsx(Q.Title,{heading:3,children:"Connect to your server"}),a.jsxs(Zn,{style:{boxShadow:"0 4px 10px rgb(var(--color-bg-3))",padding:"20px",width:"380px",marginTop:"20px"},children:[a.jsxs(Se,{autoComplete:"off",form:e,layout:"vertical",onSubmit:async()=>{vp(e)?await u():ue.error("Please fill in all required fields")},children:[a.jsx(Se.Item,{field:"server",label:"Server address",rules:[{required:!0}],onKeyDown:d=>{Or(d,e)},children:a.jsx(ct,{disabled:t,placeholder:"Please input server address",prefix:a.jsx(Jc,{})})}),i==="token"&&a.jsx(Se.Item,{field:"token",label:"API Token",rules:[{required:!0}],onKeyDown:d=>{Or(d,e)},children:a.jsx(ct,{disabled:t,placeholder:"Please input api token",prefix:a.jsx(aa,{})})}),i==="user"&&a.jsxs(a.Fragment,{children:[a.jsx(Se.Item,{field:"username",label:"Username",rules:[{required:!0}],onKeyDown:d=>{Or(d,e)},children:a.jsx(ct,{disabled:t,prefix:a.jsx(ao,{}),placeholder:"Please input username"})}),a.jsx(Se.Item,{field:"password",label:"Password",rules:[{required:!0}],onKeyDown:d=>{Or(d,e)},children:a.jsx(ct.Password,{disabled:t,prefix:a.jsx(aa,{}),placeholder:"Please input password"})})]})]}),a.jsx(Ee,{loading:t,type:"primary",long:!0,onClick:u,style:{marginTop:"20px"},children:"Connect"}),a.jsx(lt,{orientation:"center",children:"Or connect with"}),a.jsx(Ee,{type:"secondary",long:!0,onClick:()=>o(i==="token"?"user":"token"),style:{marginTop:"20px"},children:i==="token"?"Username and password":"API Token"})]}),a.jsxs("div",{style:{display:"flex",marginTop:"40px"},children:[a.jsx(Q.Text,{disabled:!0,children:"Need more information?"}),a.jsx(eu,{href:"https://miniflux.app/docs/api.html#authentication",style:{fontWeight:"500"},children:"Go to Miniflux official website"})]})]})})})},bp=({children:e})=>{const t=he(mi);return pi(t)?a.jsx(a.Fragment,{children:e}):a.jsx(vo,{to:"/login"})},xp=()=>a.jsx(kn,{children:a.jsx(Mn,{info:{from:"starred",id:""},getEntries:Eo})}),wp=()=>{const e=async()=>{const t=await Mr(0,"unread"),n=t.data.entries.map(r=>r.id);if(t.data.total>n.length){const r=t.data.total-n.length,s=Math.ceil(r/100)*100,i=await Mr(n.length,"unread",s);n.push(...i.data.entries.map(o=>o.id))}return gi(n,"read")};return a.jsx(kn,{children:a.jsx(Mn,{info:{from:"today",id:""},getEntries:Mr,markAllAsRead:e})})},Ep=xt("homePage"),Sp=[{path:"/all",element:a.jsx(fp,{})},{path:"/today",element:a.jsx(wp,{})},{path:"/starred",element:a.jsx(xp,{})},{path:"/history",element:a.jsx(gp,{})},{path:"/category/:id",element:a.jsx(hp,{})},{path:"/feed/:id",element:a.jsx(pp,{})}],dc=tu([{path:"/",element:a.jsx(bp,{children:a.jsx(Ud,{})}),errorElement:a.jsx(mp,{}),children:[...Sp,{index:!0,element:a.jsx(vo,{to:`/${Ep}`,replace:!0})}]},{path:"/login",element:a.jsx(yp,{})}]);nu.createRoot(document.getElementById("root")).render(a.jsx(ru,{locale:su,children:a.jsx(iu,{router:dc})}))});export default Cp();
